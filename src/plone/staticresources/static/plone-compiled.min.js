define("mockup-patterns-autotoc",["jquery","pat-base"],function(a,t){"use strict";return t.extend({name:"autotoc",trigger:".pat-autotoc",parser:"mockup",defaults:{section:"section",levels:"h1,h2,h3",IDPrefix:"autotoc-item-",classTOCName:"autotoc-nav",classSectionName:"autotoc-section",classLevelPrefixName:"autotoc-level-",classActiveName:"active",scrollDuration:"slow",scrollEasing:"swing"},init:function(){var o=this,s=(o.$toc=a("<nav/>").addClass(o.options.classTOCName),o.options.prependTo?o.$toc.prependTo(o.options.prependTo):o.options.appendTo?o.$toc.appendTo(o.options.appendTo):o.$toc.prependTo(o.$el),o.options.className&&o.$el.addClass(o.options.className),a(o.options.section,o.$el).addClass(o.options.classSectionName),o.$el.hasClass("autotabs")),i=null;a(o.options.levels,o.$el).each(function(t){var n=a(this),e=(n.prop("id")?n:n.parents(o.options.section)).prop("id");(!e||0<a("#"+e).length)&&(e=o.options.IDPrefix+o.name+"-"+t),null===(i=window.location.hash==="#"+e?e:i)&&n.hasClass(o.options.classActiveName)&&(i=e),n.data("navref",e),a("<a/>").appendTo(o.$toc).text(n.text()).attr("id",e).attr("href","#"+e).addClass(o.options.classLevelPrefixName+o.getLevel(n)).on("click",function(t,e){t.stopPropagation(),t.preventDefault(),e=e||{doScroll:!0,skipHash:!1};var i=a(this);o.$toc.children("."+o.options.classActiveName).removeClass(o.options.classActiveName),o.$el.children("."+o.options.classActiveName).removeClass(o.options.classActiveName),a(t.target).addClass(o.options.classActiveName),n.parents(o.options.section).addClass(o.options.classActiveName),!1!==e.doScroll&&o.options.scrollDuration&&n&&!s&&a("body,html").animate({scrollTop:n.offset().top},o.options.scrollDuration,o.options.scrollEasing),0!==o.$el.parents(".plone-modal").size()&&o.$el.trigger("resize.plone-modal.patterns"),a(this).trigger("clicked"),e.skipHash||window.history&&window.history.pushState&&window.history.pushState({},"","#"+i.attr("id"))}),n.data("autotoc-trigger-id",e)}),i?a("a#"+i).trigger("click",{doScroll:!0,skipHash:!0}):o.$toc.find("a").first().trigger("click",{doScroll:!1,skipHash:!0})},getLevel:function(i){var n=0;return a.each(this.options.levels.split(","),function(t,e){if(1===i.filter(e).size())return n=t+1,!1}),n}})}),define("mockup-utils",["jquery"],function(l){"use strict";function t(t){var i=this;return i.className="plone-loader",i.options=l.extend({},{backdrop:null,zIndex:10005},t=t||{}),i.init=function(){i.$el=l("."+i.className),0===i.$el.length&&(i.$el=l("<div><div></div></div>"),i.$el.addClass(i.className).hide().appendTo("body"))},i.show=function(t){i.init(),i.$el.show();var e=i.options.zIndex;"function"==typeof e?e=Math.max(e(),10005):(e=10005,l(".plone-modal-wrapper,.plone-modal-backdrop").each(function(){e=Math.max(e,l(this).css("zIndex")||10005)}),e+=1),i.$el.css("zIndex",e),void 0===t&&(t=!0),i.options.backdrop&&(i.options.backdrop.closeOnClick=t,i.options.backdrop.closeOnEsc=t,i.options.backdrop.init(),i.options.backdrop.show())},i.hide=function(){i.init(),i.$el.hide()},i}function n(t){return(t=void 0===t?"id":t)+Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var e={get:function(t){return window.localStorage&&"string"==typeof(t=window.localStorage[t])?JSON.parse(t):void 0},set:function(t,e){window.localStorage&&(window.localStorage[t]=JSON.stringify(e))}};return{bool:function(t){return"string"==typeof t&&(t=l.trim(t).toLowerCase()),-1===["false",!1,"0",0,"",void 0,null].indexOf(t)},escapeHTML:function(t){return l("<div/>").text(t).html()},removeHTML:function(t){return t.replace(/<[^>]+>/gi,"")},featureSupport:{dragAndDrop:function(){return"draggable"in document.createElement("span")},fileApi:function(){return"undefined"!=typeof FileReader},history:function(){return!(!window.history||!window.history.pushState)}},generateId:n,getAuthenticator:function(){var t=l('input[name="_authenticator"]');return 0===t.length?0<(t=l('a[href*="_authenticator"]')).length?t.attr("href").split("_authenticator=")[1]:"":t.val()},getWindow:function(){var t=window;return t=t.parent!==window?t.parent:t},Loading:t,loading:new t,parseBodyTag:function(t){return l(/<body[^>]*>[^]*<\/body>/im.exec(t)[0].replace("<body","<div").replace("</body>","</div>")).eq(0).html()},QueryHelper:function(t){var r=this;return r.options=l.extend({},{pattern:null,vocabularyUrl:null,searchParam:"SearchableText",pathOperator:"plone.app.querystring.operation.string.path",attributes:["UID","Title","Description","getURL","portal_type"],batchSize:10,baseCriteria:[],sort_on:"is_folderish",sort_order:"reverse",pathDepth:1},t),r.pattern=r.options.pattern,void 0!==r.pattern&&null!==r.pattern||(r.pattern={browsing:!1,basePath:"/"}),r.options.url&&!r.options.vocabularyUrl?r.options.vocabularyUrl=r.options.url:r.pattern.vocabularyUrl&&(r.options.vocabularyUrl=r.pattern.vocabularyUrl),r.valid=Boolean(r.options.vocabularyUrl),r.getBatch=function(t){return{page:t||1,size:r.options.batchSize}},r.getCurrentPath=function(){var t=r.pattern,e=r.currentPath||t.currentPath,e=e="function"==typeof e?e():e;return e=e||t.basePath||t.options.basePath||"/"},r.getCriterias=function(t,e){var i=[];if((e=l.extend({},{useBaseCriteria:!0,additionalCriterias:[]},e=void 0===e?{}:e)).useBaseCriteria&&(i=r.options.baseCriteria.slice(0)),t){var n=((t=decodeURIComponent(t)).match(/"/g)||[]).length;if(n&&n%2==1)throw new Error("incomplete query");n=t[t.length-1];'"'!==n&&" "!==n&&(t+="*"),t=JSON.stringify(t),i.push({i:r.options.searchParam,o:"plone.app.querystring.operation.string.contains",v:t})}return e.searchPath?i.push({i:"path",o:r.options.pathOperator,v:e.searchPath+"::"+r.options.pathDepth}):r.pattern.browsing&&i.push({i:"path",o:r.options.pathOperator,v:r.getCurrentPath()+"::"+r.options.pathDepth}),i=i.concat(e.additionalCriterias)},r.getQueryData=function(t,e){t={query:JSON.stringify({criteria:r.getCriterias(t),sort_on:r.options.sort_on,sort_order:r.options.sort_order}),attributes:JSON.stringify(r.options.attributes)};return e&&(t.batch=JSON.stringify(r.getBatch(e))),t},r.getUrl=function(){var t=r.options.vocabularyUrl;return-1===t.indexOf("?")?t+="?":t+="&",t+l.param(r.getQueryData())},r.selectAjax=function(){return{url:r.options.vocabularyUrl,dataType:"JSON",quietMillis:100,data:function(t,e){return r.getQueryData(t,e)},results:function(t,e){e=10*e<t.total;return{results:t.results,more:e}}}},r.search=function(t,e,i,n,o,s){void 0===s&&(s="GET");var a=[],o=((a=(o=void 0===o?!0:o)?r.options.baseCriteria.slice(0):a).push({i:t,o:e,v:i}),{query:JSON.stringify({criteria:a}),attributes:JSON.stringify(r.options.attributes)});l.ajax({url:r.options.vocabularyUrl,dataType:"JSON",data:o,type:s,success:n})},r},setId:function(t,e){void 0===e&&(e="id");var i=void 0===(i=t.attr("id"))?n(e):i.replace(/\./g,"-");return t.attr("id",i),i},storage:e,createElementFromHTML:function(t){var e=document.createElement("div");return e.innerHTML=t.trim(),e.firstChild}}}),define("mockup-patterns-contentloader",["jquery","pat-base","pat-logger","pat-registry","mockup-utils","underscore"],function(n,t,e,o,s,a){"use strict";var r=e.getLogger("pat-contentloader");return t.extend({name:"contentloader",trigger:".pat-contentloader",parser:"mockup",defaults:{url:null,content:null,trigger:"click",target:null,template:null,dataType:"html"},init:function(){var e=this;"el"===e.options.url&&"A"===e.$el[0].tagName&&(e.options.url=e.$el.attr("href")),e.$el.removeClass("loading-content"),e.$el.removeClass("content-load-error"),"immediate"===e.options.trigger?e._load():e.$el.on(e.options.trigger,function(t){t.preventDefault(),e._load()})},_load:function(){this.$el.addClass("loading-content"),this.options.url?this.loadRemote():this.loadLocal()},loadRemote:function(){var i=this;n.ajax({url:i.options.url,dataType:i.options.dataType,success:function(t){var e;if("html"===i.options.dataType)-1!==t.indexOf("<html")&&(t=s.parseBodyTag(t)),e=n("<div>"+t+"</div>");else if(-1!==i.options.dataType.indexOf("json")){t.constructor===Array&&1===t.length&&(t=t[0]);try{e=n(a.template(i.options.template)(t))}catch(t){return i.$el.removeClass("loading-content"),i.$el.addClass("content-load-error"),void r.warn("error rendering template. pat-contentloader will not work")}}null!==i.options.content&&(e=e.find(i.options.content)),i.loadLocal(e)},error:function(){i.$el.removeClass("loading-content"),i.$el.addClass("content-load-error")}})},loadLocal:function(t){var e,i=this;t||null!==i.options.content?(e=i.$el,null!==i.options.target&&0===(e=n(i.options.target)).size()?(i.$el.removeClass("loading-content"),i.$el.addClass("content-load-error"),r.warn("No target nodes found")):((t=t||n(i.options.content).clone()).length?(t.show(),e.replaceWith(t),o.scan(t)):e.empty(),i.$el.removeClass("loading-content"),i.emit("loading-done"))):(i.$el.removeClass("loading-content"),i.$el.addClass("content-load-error"),r.warn("No selector configured"))}})}),define("mockup-patterns-cookietrigger",["pat-base"],function(t){"use strict";return t.extend({name:"cookietrigger",trigger:".pat-cookietrigger",parser:"mockup",isCookiesEnabled:function(){var t="areYourCookiesEnabled=0",e=(document.cookie=t,document.cookie);return-1===e.indexOf(t)||(t="areYourCookiesEnabled=1",document.cookie=t,-1===(e=document.cookie).indexOf(t))?0:(document.cookie="areYourCookiesEnabled=; expires=Thu, 01-Jan-70 00:00:01 GMT",1)},showIfCookiesDisabled:function(){this.isCookiesEnabled()?this.$el.hide():this.$el.show()},init:function(){this.showIfCookiesDisabled()}})}),define("mockup-patterns-formautofocus",["jquery","pat-base"],function(e,t,i){"use strict";return t.extend({name:"formautofocus",trigger:".pat-formautofocus",parser:"mockup",defaults:{condition:"div.error",target:"div.error :input:not(.formTabs):visible:first",always:":input:not(.formTabs):visible:first"},init:function(){var t=this;(0!==e(t.options.condition,t.$el).size()?e(t.options.target,t.$el):e(t.options.always,t.$el)).focus()}})}),define("mockup-i18n",["jquery"],function(n){"use strict";return function(){var r=this;r.baseUrl=n("body").attr("data-i18ncatalogurl"),r.currentLanguage=n("html").attr("lang")||"en",1<r.currentLanguage.split("-").length&&(r.currentLanguage=r.currentLanguage.split("-")[0]+"_"+r.currentLanguage.split("-")[1].toUpperCase()),r.storage=null,r.catalogs={},r.ttl=864e5,Date.now||(Date.now=function(){return(new Date).valueOf()});try{"localStorage"in window&&null!==window.localStorage&&"JSON"in window&&null!==window.JSON&&(r.storage=window.localStorage)}catch(t){}r.configure=function(t){for(var e in t)r[e]=t[e]},r._setCatalog=function(t,e,i){t in r.catalogs||(r.catalogs[t]={}),r.catalogs[t][e]=i},r._storeCatalog=function(t,e,i){t=t+"-"+e;null!==r.storage&&null!==i&&(r.storage.setItem(t,JSON.stringify(i)),r.storage.setItem(t+"-updated",Date.now()))},r.getUrl=function(t,e){return r.baseUrl+"?domain="+t+"&language="+e},r.loadCatalog=function(e,i){if(void 0===i&&(i=r.currentLanguage),null!==r.storage){var t=e+"-"+i;if(t in r.storage)if(Date.now()-parseInt(r.storage.getItem(t+"-updated"),10)<r.ttl)return t=JSON.parse(r.storage.getItem(t)),void r._setCatalog(e,i,t)}r.baseUrl&&n.getJSON(r.getUrl(e,i),function(t){null!==t&&(r._setCatalog(e,i,t),r._storeCatalog(e,i,t))})},r.MessageFactory=function(s,a){return a=a||r.currentLanguage,function(t,e){var i,n,o=s in r.catalogs&&a in r.catalogs[s]&&t in r.catalogs[s][a]?r.catalogs[s][a][t]:t;if(e)for(n in e)e.hasOwnProperty(n)&&(i=new RegExp("\\$\\{"+n+"\\}","g"),o=o.replace(i,e[n]));return o}}}}),define("translate",["mockup-i18n"],function(n){"use strict";var o=null;return function(t,e){var i;return null===o&&((i=new n).loadCatalog("widgets"),o=i.MessageFactory("widgets")),o(t,e)}}),define("mockup-patterns-formunloadalert",["jquery","pat-base","translate"],function(o,t,e){"use strict";return t.extend({name:"formunloadalert",trigger:".pat-formunloadalert",parser:"mockup",_changed:!1,_suppressed:!1,defaults:{message:e("Discard changes? If you click OK, any changes you have made will be lost."),changingEvents:"change keyup paste",changingFields:"input,select,textarea,fileupload"},init:function(){var i,n=this;n.$el.is("form")&&(o(n.options.changingFields,n.$el).on(n.options.changingEvents,function(t){n._changed=!0}),0!==(i=n.$el.parents(".plone-modal")).size()?i.data("patternPloneModal").on("hide",function(t){var e=i.data("patternPloneModal");e&&(e._suppressHide=n._handleUnload.call(n,t))}):o(window).on("beforeunload",function(t){return n._handleUnload(t)}),n.$el.on("submit",function(t){n._suppressed=!0}))},_handleUnload:function(t){var e,i=this;if(!i._suppressed)return i._changed?(e=i.options.message,i._handleMsg(t,e),o(window).trigger("messageset"),e):void 0;i._suppressed=!1},_handleMsg:function(t,e){(t||window.event).returnValue=e}})}),define("mockup-patterns-livesearch",["jquery","pat-base","underscore","translate"],function(a,t,i,r){"use strict";return t.extend({name:"livesearch",trigger:".pat-livesearch",parser:"mockup",timeout:null,active:!1,results:null,selectedItem:-1,resultsClass:"livesearch-results",defaults:{ajaxUrl:null,defaultSortOn:"",perPage:7,quietMillis:350,minimumInputLength:4,inputSelector:'input[type="text"]',itemTemplate:'<li class="search-result <%- state %>"><h4 class="title"><a href="<%- url %>"><%- title %></a></h4><p class="description"><%- description %></p></li>'},doSearch:function(e){var t,i,n=this,o=(n.active=!0,n.render(),n.$el.addClass("searching"),n.$el.serialize()),s=(void 0===e&&(e=1),t=location.search,-1===(i=t.indexOf("sort_on"))?0<(s=a("#search-results")).length?s.attr("data-default-sort"):n.options.defaultSortOn:t.substring(i).split("&")[0].split("=")[1]);a.ajax({url:n.options.ajaxUrl+"?"+o+"&page="+e+"&perPage="+n.options.perPage+"&sort_on="+s,dataType:"json"}).done(function(t){n.results=t,n.page=e,o!==n.$el.serialize()&&n.doSearch()}).fail(function(){n.results={items:[{url:"",title:r("Error"),description:r("There was an error searching…"),state:"error",error:!1}],total:1},n.page=1}).always(function(){n.active=!1,n.selectedItem=-1,n.$el.removeClass("searching"),n.render()})},render:function(){var n,t,e,o=this;o.$results.empty(),o.active?o.$results.append(a('<li class="searching">'+r("searching…")+"</li>")):null===o.results?o.$results.append(a('<li class="no-results no-search">'+r("enter search phrase")+"</li>")):0===o.results.total?o.$results.append(a('<li class="no-results">'+r("no results found")+"</li>")):o.$results.append(a('<li class="results-summary">'+r("found")+" "+o.results.total+" "+r("results")+"</li>")),null!==o.results&&(n=i.template(o.options.itemTemplate),i.each(o.results.items,function(t,e){var i=a(n(a.extend({_t:r},t)));i.attr("data-url",t.url).on("click",function(){t.error||(window.location=t.url)}),e===o.selectedItem&&i.addClass("selected"),o.$results.append(i)}),t=[],1<o.page&&((e=a('<a href="#" class="prev">'+r("Previous")+"</a>")).click(function(t){o.disableHiding=!0,t.preventDefault(),o.doSearch(o.page-1)}),t.push(e)),o.page*o.options.perPage<o.results.total&&((e=a('<a href="#" class="next">'+r("Next")+"</a>")).click(function(t){o.disableHiding=!0,t.preventDefault(),o.doSearch(o.page+1)}),t.push(e)),0<t.length)&&((e=a('<li class="load-more"><div class="page">'+o.page+"</div></li>")).prepend(t),o.$results.append(e)),o.position()},position:function(){var t=this,e=(t.$el.addClass("livesearch-active"),t.$input.position());t.$results.width(t.$el.outerWidth()),t.$results.css({top:e.top+t.$input.outerHeight(),left:e.left}),t.$results.show()},hide:function(){this.$results.hide(),this.$el.removeClass("livesearch-active")},init:function(){var e=this;e.$input=e.$el.find(e.options.inputSelector),e.$input.off("focusout").on("focusout",function(){setTimeout(function(){e.disableHiding?(e.disableHiding=!1,e.$input.focus()):e.hide()},200)}).off("focusin").on("focusin",function(){e.onceFocused?e.$results.is(":visible")||e.render():(e.onceFocused=!0,e.$input.val().length>=e.options.minimumInputLength&&e.doSearch())}).attr("autocomplete","off").off("keyup").on("keyup",function(t){t=t.keyCode||t.which;if(27===t)e.$input.val(""),e.hide();else{if(e.results&&e.results.items&&0<e.results.items.length){if(13===t)return void(-1!==e.selectedItem&&(window.location=e.results.items[e.selectedItem].url));if(38===t)return void(-1!==e.selectedItem&&(--e.selectedItem,e.render()));if(40===t)return void(e.selectedItem<e.results.items.length&&(e.selectedItem+=1,e.render()))}null!==e.timeout&&(clearTimeout(e.timeout),e.timeout=null),e.active||(e.$input.val().length>=e.options.minimumInputLength?e.timeout=setTimeout(function(){e.doSearch()},e.options.quietMillis):(e.results=null,e.render()))}}),a("#sorting-options a").click(function(t){t.preventDefault(),e.onceFocused=!1}),e.$results=a('<ul class="'+e.resultsClass+'"></ul>').hide().insertAfter(e.$input)}})}),define("mockup-patterns-markspeciallinks",["pat-base","jquery"],function(t,a){"use strict";return t.extend({name:"markspeciallinks",trigger:".pat-markspeciallinks",parser:"mockup",defaults:{external_links_open_new_window:!1,mark_special_links:!0},init:function(){var t,e,i,n,o=this,s=o.$el;"string"==typeof o.options.external_links_open_new_window?t="true"===o.options.external_links_open_new_window.toLowerCase():"boolean"==typeof o.options.external_links_open_new_window&&(t=o.options.external_links_open_new_window),"string"==typeof o.options.mark_special_links?e="true"===o.options.mark_special_links.toLowerCase():"boolean"==typeof o.options.mark_special_links&&(e=o.options.mark_special_links),o=window.location.protocol+"//"+window.location.host,i=/^(mailto|ftp|news|irc|h323|sip|callto|https|feed|webcal)/,s=s,t&&s.find('a[href^="http"]:not(.link-plain):not([href^="'+o+'"])').attr("target","_blank").attr("rel","noopener"),e&&(s.find('a[href^="http:"]:not(.link-plain):not([href^="'+o+'"]):not(:has(img))').before('<i class="glyphicon link-external"></i>'),s.find('a[href]:not([href^="http:"]):not(.link-plain):not([href^="'+o+'"]):not(:has(img)):not([href^="#"])').each(function(){var t;(n=i.exec(a(this).attr("href")))&&(t="glyphicon link-"+n[0],a(this).before('<i class="'+t+'"></i>'))}))}})}),define("mockup-patterns-backdrop",["jquery","pat-base"],function(t,e){"use strict";return e.extend({name:"backdrop",trigger:".pat-backdrop",parser:"mockup",defaults:{zIndex:null,opacity:.8,className:"plone-backdrop",classActiveName:"plone-backdrop-active",closeOnEsc:!0,closeOnClick:!0},init:function(){var i=this;i.$backdrop=t("> ."+i.options.className,i.$el),0===i.$backdrop.size()&&(i.$backdrop=t("<div/>").hide().appendTo(i.$el).addClass(i.options.className),null!==i.options.zIndex)&&i.$backdrop.css("z-index",i.options.zIndex),!0===i.options.closeOnEsc&&t(document).on("keydown",function(t,e){i.$el.is("."+i.options.classActiveName)&&27===t.keyCode&&i.hide()}),!0===i.options.closeOnClick&&i.$backdrop.on("click",function(){i.$el.is("."+i.options.classActiveName)&&i.hide()})},show:function(){var t=this;t.$el.hasClass(t.options.classActiveName)||(t.emit("show"),t.$backdrop.css("opacity","0").show(),t.$el.addClass(t.options.classActiveName),t.$backdrop.animate({opacity:t.options.opacity},500),t.emit("shown"))},hide:function(){var t=this;t.$el.hasClass(t.options.classActiveName)&&(t.emit("hide"),t.$backdrop.animate({opacity:"0"},500).hide(),t.$el.removeClass(t.options.classActiveName),t.emit("hidden"))}})}),function(n,o){var t;"function"==typeof define&&define.amd?define("backbone",["underscore","jquery","exports"],function(t,e,i){n.Backbone=o(n,i,t,e)}):"undefined"!=typeof exports?(t=require("underscore"),o(n,exports,t)):n.Backbone=o(n,{},n._,n.jQuery||n.Zepto||n.ender||n.$)}(this,function(t,a,x,e){var i=t.Backbone,n=[],o=n.slice,s=(a.VERSION="1.1.2",a.$=e,a.noConflict=function(){return t.Backbone=i,this},a.emulateHTTP=!1,a.emulateJSON=!1,a.Events={on:function(t,e,i){return u(this,"on",t,[e,i])&&e&&(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:i,ctx:i||this})),this},once:function(t,e,i){var n,o;return u(this,"once",t,[e,i])&&e?(n=this,(o=x.once(function(){n.off(t,o),e.apply(this,arguments)}))._callback=e,this.on(t,o,i)):this},off:function(t,e,i){var n,o,s,a,r,l,c,h;if(this._events&&u(this,"off",t,[e,i]))if(t||e||i){for(r=0,l=(a=t?[t]:x.keys(this._events)).length;r<l;r++)if(t=a[r],s=this._events[t]){if(this._events[t]=n=[],e||i)for(c=0,h=s.length;c<h;c++)o=s[c],(e&&e!==o.callback&&e!==o.callback._callback||i&&i!==o.context)&&n.push(o);n.length||delete this._events[t]}}else this._events=void 0;return this},trigger:function(t){var e,i,n;return this._events&&(e=o.call(arguments,1),u(this,"trigger",t,e))&&(i=this._events[t],n=this._events.all,i&&r(i,e),n)&&r(n,arguments),this},stopListening:function(t,e,i){var n=this._listeningTo;if(n){var o,s=!e&&!i;for(o in i||"object"!=typeof e||(i=this),t&&((n={})[t._listenId]=t),n)(t=n[o]).off(e,i,this),(s||x.isEmpty(t._events))&&delete this._listeningTo[o]}return this}}),l=/\s+/,u=function(t,e,i,n){if(i){if("object"==typeof i){for(var o in i)t[e].apply(t,[o,i[o]].concat(n));return!1}if(l.test(i)){for(var s=i.split(l),a=0,r=s.length;a<r;a++)t[e].apply(t,[s[a]].concat(n));return!1}}return!0},r=function(t,e){var i,n=-1,o=t.length,s=e[0],a=e[1],r=e[2];switch(e.length){case 0:for(;++n<o;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<o;)(i=t[n]).callback.call(i.ctx,s);return;case 2:for(;++n<o;)(i=t[n]).callback.call(i.ctx,s,a);return;case 3:for(;++n<o;)(i=t[n]).callback.call(i.ctx,s,a,r);return;default:for(;++n<o;)(i=t[n]).callback.apply(i.ctx,e);return}},k=(x.each({listenTo:"on",listenToOnce:"once"},function(n,t){s[t]=function(t,e,i){return((this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=x.uniqueId("l"))]=t)[n](e,i=i||"object"!=typeof e?i:this,this),this}}),s.bind=s.on,s.unbind=s.off,x.extend(a,s),a.Model=function(t,e){var i=t||{};e=e||{},this.cid=x.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{}),i=x.defaults({},i,x.result(this,"defaults")),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)}),c=(x.extend(k.prototype,s,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return x.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return x.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var n,o,s,a,r,l,c;if(null!=t){if("object"==typeof t?(o=t,i=e):(o={})[t]=e,!this._validate(o,i=i||{}))return!1;for(n in s=i.unset,t=i.silent,a=[],r=this._changing,this._changing=!0,r||(this._previousAttributes=x.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]),o)e=o[n],x.isEqual(c[n],e)||a.push(n),x.isEqual(l[n],e)?delete this.changed[n]:this.changed[n]=e,s?delete c[n]:c[n]=e;if(!t){a.length&&(this._pending=i);for(var h=0,u=a.length;h<u;h++)this.trigger("change:"+a[h],this,c[a[h]],i)}if(!r){if(!t)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);this._pending=!1,this._changing=!1}}return this},unset:function(t,e){return this.set(t,void 0,x.extend({},e,{unset:!0}))},clear:function(t){var e,i={};for(e in this.attributes)i[e]=void 0;return this.set(i,x.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!x.isEmpty(this.changed):x.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&x.clone(this.changed);var e,i,n=!1,o=this._changing?this._previousAttributes:this.attributes;for(i in t)x.isEqual(o[i],e=t[i])||((n=n||{})[i]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return x.clone(this._previousAttributes)},fetch:function(e){void 0===(e=e?x.clone(e):{}).parse&&(e.parse=!0);var i=this,n=e.success;return e.success=function(t){if(!i.set(i.parse(t,e),e))return!1;n&&n(i,t,e),i.trigger("sync",i,t,e)},A(this,e),this.sync("read",this,e)},save:function(t,e,i){var n,o=this.attributes;if(null==t||"object"==typeof t?(n=t,i=e):(n={})[t]=e,i=x.extend({validate:!0},i),n&&!i.wait){if(!this.set(n,i))return!1}else if(!this._validate(n,i))return!1;n&&i.wait&&(this.attributes=x.extend({},o,n)),void 0===i.parse&&(i.parse=!0);var s=this,a=i.success;return i.success=function(t){s.attributes=o;var e=s.parse(t,i);if(i.wait&&(e=x.extend(n||{},e)),x.isObject(e)&&!s.set(e,i))return!1;a&&a(s,t,i),s.trigger("sync",s,t,i)},A(this,i),"patch"==(t=this.isNew()?"create":i.patch?"patch":"update")&&(i.attrs=n),e=this.sync(t,this,i),n&&i.wait&&(this.attributes=o),e},destroy:function(e){e=e?x.clone(e):{};function i(){n.trigger("destroy",n,n.collection,e)}var n=this,o=e.success;if(e.success=function(t){(e.wait||n.isNew())&&i(),o&&o(n,t,e),n.isNew()||n.trigger("sync",n,t,e)},this.isNew())return e.success(),!1;A(this,e);var t=this.sync("delete",this,e);return e.wait||i(),t},url:function(){var t=x.result(this,"urlRoot")||x.result(this.collection,"url")||_();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},x.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=x.extend({},this.attributes,t);t=this.validationError=this.validate(t,e)||null;return!t||(this.trigger("invalid",this,t,x.extend(e,{validationError:t})),!1)}}),x.each(["keys","values","pairs","invert","pick","omit"],function(e){k.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),x[e].apply(x,t)}}),a.Collection=function(t,e){(e=e||{}).model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,x.extend({silent:!0},e))}),S={add:!0,remove:!0,merge:!0},h={add:!0,remove:!1},n=(x.extend(c.prototype,s,{model:k,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return a.sync.apply(this,arguments)},add:function(t,e){return this.set(t,x.extend({merge:!1},e,h))},remove:function(t,e){var i,n,o,s,a=!x.isArray(t);for(e=e||{},i=0,n=(t=a?[t]:x.clone(t)).length;i<n;i++)(s=t[i]=this.get(t[i]))&&(delete this._byId[s.id],delete this._byId[s.cid],o=this.indexOf(s),this.models.splice(o,1),this.length--,e.silent||(e.index=o,s.trigger("remove",s,this,e)),this._removeReference(s,e));return a?t[0]:t},set:function(t,e){(e=x.defaults({},e,S)).parse&&(t=this.parse(t,e));var i,n,o,s,a=!x.isArray(t),r=(t=a?t?[t]:[]:x.clone(t),e.at),l=this.model,c=this.comparator&&null==r&&!1!==e.sort,h=x.isString(this.comparator)?this.comparator:null,u=[],d=[],p={},f=e.add,m=e.merge,g=e.remove,v=!(c||!f||!g)&&[];for(b=0,w=t.length;b<w;b++){if(o=(n=t[b]||{})instanceof k?i=n:n[l.prototype.idAttribute||"id"],o=this.get(o))g&&(p[o.cid]=!0),m&&(n=n===i?i.attributes:n,e.parse&&(n=o.parse(n,e)),o.set(n,e),c)&&!s&&o.hasChanged(h)&&(s=!0),t[b]=o;else if(f){if(!(i=t[b]=this._prepareModel(n,e)))continue;u.push(i),this._addReference(i,e)}i=o||i,!v||!i.isNew()&&p[i.id]||v.push(i),p[i.id]=!0}if(g){for(b=0,w=this.length;b<w;++b)p[(i=this.models[b]).cid]||d.push(i);d.length&&this.remove(d,e)}if(u.length||v&&v.length)if(c&&(s=!0),this.length+=u.length,null!=r)for(b=0,w=u.length;b<w;b++)this.models.splice(r+b,0,u[b]);else{v&&(this.models.length=0);for(var y=v||u,b=0,w=y.length;b<w;b++)this.models.push(y[b])}if(s&&this.sort({silent:!0}),!e.silent){for(b=0,w=u.length;b<w;b++)(i=u[b]).trigger("add",i,this,e);(s||v&&v.length)&&this.trigger("sort",this,e)}return a?t[0]:t},reset:function(t,e){e=e||{};for(var i=0,n=this.models.length;i<n;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,x.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,x.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,x.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(i,t){return x.isEmpty(i)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var e in i)if(i[e]!==t.get(e))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(this.comparator)return t=t||{},x.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(x.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this;throw new Error("Cannot sort a set without a comparator")},pluck:function(t){return x.invoke(this.models,"get",t)},fetch:function(i){void 0===(i=i?x.clone(i):{}).parse&&(i.parse=!0);var n=i.success,o=this;return i.success=function(t){var e=i.reset?"reset":"set";o[e](t,i),n&&n(o,t,i),o.trigger("sync",o,t,i)},A(this,i),this.sync("read",this,i)},create:function(t,i){if(i=i?x.clone(i):{},!(t=this._prepareModel(t,i)))return!1;i.wait||this.add(t,i);var n=this,o=i.success;return i.success=function(t,e){i.wait&&n.add(t,i),o&&o(t,e,i)},t.save(null,i),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){return!(t instanceof k)&&(t=new((e=e?x.clone(e):{}).collection=this).model(t,e)).validationError?(this.trigger("invalid",this,t.validationError,e),!1):t},_addReference:function(t,e){null!=(this._byId[t.cid]=t).id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id)&&(this._byId[e.id]=e),this.trigger.apply(this,arguments))}}),x.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"],function(e){c.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),x[e].apply(x,t)}}),x.each(["groupBy","countBy","sortBy","indexBy"],function(n){c.prototype[n]=function(e,t){var i=x.isFunction(e)?e:function(t){return t.get(e)};return x[n](this.models,i,t)}}),a.View=function(t){this.cid=x.uniqueId("view"),x.extend(this,x.pick(t=t||{},p)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()}),d=/^(\S+)\s*(.*)$/,p=["model","collection","el","id","attributes","className","tagName","events"],f=(x.extend(n.prototype,s,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof a.$?t:a.$(t),this.el=this.$el[0],!1!==e&&this.delegateEvents(),this},delegateEvents:function(t){if(t=t||x.result(this,"events"))for(var e in this.undelegateEvents(),t){var i,n=t[e];(n=x.isFunction(n)?n:this[t[e]])&&(i=(e=e.match(d))[1],e=e[2],n=x.bind(n,this),i+=".delegateEvents"+this.cid,""===e?this.$el.on(i,n):this.$el.on(i,e,n))}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){var t;this.el?this.setElement(x.result(this,"el"),!1):(t=x.extend({},x.result(this,"attributes")),this.id&&(t.id=x.result(this,"id")),this.className&&(t.class=x.result(this,"className")),t=a.$("<"+x.result(this,"tagName")+">").attr(t),this.setElement(t,!1))}}),a.sync=function(t,e,i){var n,o=m[t],s=(x.defaults(i=i||{},{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON}),{type:o,dataType:"json"}),t=(i.url||(s.url=x.result(e,"url")||_()),null!=i.data||!e||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(i.attrs||e.toJSON(i))),i.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),!i.emulateHTTP||"PUT"!==o&&"DELETE"!==o&&"PATCH"!==o||(s.type="POST",i.emulateJSON&&(s.data._method=o),n=i.beforeSend,i.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),n)return n.apply(this,arguments)}),"GET"===s.type||i.emulateJSON||(s.processData=!1),"PATCH"===s.type&&f&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}),i.xhr=a.ajax(x.extend(s,i)));return e.trigger("request",e,t,i),t},!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent)),m={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"},e=(a.ajax=function(){return a.$.ajax.apply(a.$,arguments)},a.Router=function(t){(t=t||{}).routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)}),g=/\((.*?)\)/g,v=/(\(\?)?:\w+/g,y=/\*\w+/g,b=/[\-{}\[\]+?.,\\\^$|#\s]/g,w=(x.extend(e.prototype,s,{initialize:function(){},route:function(e,i,n){x.isRegExp(e)||(e=this._routeToRegExp(e)),x.isFunction(i)&&(n=i,i=""),n=n||this[i];var o=this;return a.history.route(e,function(t){t=o._extractParameters(e,t);o.execute(n,t),o.trigger.apply(o,["route:"+i].concat(t)),o.trigger("route",i,t),a.history.trigger("route",o,i,t)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,e){return a.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=x.result(this,"routes");for(var t,e=x.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(b,"\\$&").replace(g,"(?:$1)?").replace(v,function(t,e){return e?t:"([^/?]+)"}).replace(y,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return x.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}}),a.History=function(){this.handlers=[],x.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)}),C=/^[#\/]|\s+$/g,T=/^\/+|\/+$/g,$=/msie [\w.]+/,E=/\/$/,O=/#.*$/,_=(w.started=!1,x.extend(w.prototype,s,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){t=(t||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(t,e){return null==t&&(this._hasPushState||!this._wantsHashChange||e?(t=decodeURI(this.location.pathname+this.location.search),e=this.root.replace(E,""),t.indexOf(e)||(t=t.slice(e.length))):t=this.getHash()),t.replace(C,"")},start:function(t){if(w.started)throw new Error("Backbone.history has already been started");w.started=!0,this.options=x.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),e=document.documentMode,e=$.exec(navigator.userAgent.toLowerCase())&&(!e||e<=7),i=(this.root=("/"+this.root+"/").replace(T,"/"),e&&this._wantsHashChange&&(i=a.$('<iframe src="javascript:0" tabindex="-1">'),this.iframe=i.hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?a.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!e?a.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t,this.location);if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&i.hash&&(this.fragment=this.getHash().replace(C,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),w.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if((e=e===this.fragment&&this.iframe?this.getFragment(this.getHash(this.iframe)):e)===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),x.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(t,e){if(!w.started)return!1;e&&!0!==e||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(O,""),this.fragment!==t){if(""===(this.fragment=t)&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){i?(i=t.href.replace(/(javascript:|#).*$/,""),t.replace(i+"#"+e)):t.hash="#"+e}}),a.history=new w,k.extend=c.extend=e.extend=n.extend=w.extend=function(t,e){function i(){this.constructor=o}var n=this,o=t&&x.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)};x.extend(o,n,e);return i.prototype=n.prototype,o.prototype=new i,t&&x.extend(o.prototype,t),o.__super__=n.prototype,o},function(){throw new Error('A "url" property or function must be specified')}),A=function(e,i){var n=i.error;i.error=function(t){n&&n(e,t,i),e.trigger("error",e,t,i)}};return a}),define("mockup-router",["underscore","backbone"],function(a,t){"use strict";function r(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}return new(t.Router.extend({actions:[],redirects:{},addRoute:function(t,e,i,n,o,s){void 0===a.findWhere(this.patterns,{patternName:t,id:e})&&this.actions.push({patternName:t,id:e,callback:i,context:n,pathExp:o,expReplace:s});i=new RegExp("("+r(t)+":"+r(e)+")");this.route(i,"handleRoute")},addRedirect:function(t,e){this.redirects[t]=e},handleRoute:function(t){var t=t.split(":"),e=t[0],t=t[1],e=a.findWhere(this.actions,{patternName:e,id:t});e&&e.callback.call(e.context)},redirect:function(){var i,n,o,s=window.parent.location.pathname;if(a.some(this.actions,function(t){var e;if(t.pathExp&&(n=new RegExp(t.pathExp),s.match(n)))return o="!/"+t.patternName+":"+t.id,e="",t.expReplace&&(e=t.expReplace),i=s.replace(n,e),!0},this),void 0===o)for(var t in this.redirects)if(n=new RegExp(t),s.match(n)){o="!/"+this.redirects[t],i=s.replace(n,"");break}void 0!==o&&this._changeLocation.apply(this,[i,o])},_changeLocation:function(t,e){window.parent.location.hash=e,window.parent.location.pathname=t},start:function(){t.history.start()},reset:function(){this.actions=[]}}))}),function(i){"function"==typeof define&&define.amd?define("jquery.form",["jquery"],i):"object"==typeof module&&module.exports?module.exports=function(t,e){return void 0===e&&(e="undefined"!=typeof window?require("jquery"):require("jquery")(t)),i(e),e}:i(jQuery)}(function(j){"use strict";var d=/\r?\n/g,m={},N=(m.fileapi=void 0!==j('<input type="file">').get(0).files,m.formdata=void 0!==window.FormData,!!j.fn.prop);function s(t){var e=t.data;t.isDefaultPrevented()||(t.preventDefault(),j(t.target).closest("form").ajaxSubmit(e))}function a(t){var e=t.target,i=j(e);if(!i.is("[type=submit],[type=image]")){var n=i.closest("[type=submit]");if(0===n.length)return;e=n[0]}var o=e.form;"image"===(o.clk=e).type&&(void 0!==t.offsetX?(o.clk_x=t.offsetX,o.clk_y=t.offsetY):"function"==typeof j.fn.offset?(n=i.offset(),o.clk_x=t.pageX-n.left,o.clk_y=t.pageY-n.top):(o.clk_x=t.pageX-e.offsetLeft,o.clk_y=t.pageY-e.offsetTop)),setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)}function I(){var t;j.fn.ajaxSubmit.debug&&(t="[jquery.form] "+Array.prototype.join.call(arguments,""),window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t))}j.fn.attr2=function(){var t;return N&&((t=this.prop.apply(this,arguments))&&t.jquery||"string"==typeof t)?t:this.attr.apply(this,arguments)},j.fn.ajaxSubmit=function(O,t,e,i){if(this.length){var _,A=this,i=("function"==typeof O?O={success:O}:"string"==typeof O||!1===O&&0<arguments.length?(O={url:O,data:t,dataType:e},"function"==typeof i&&(O.success=i)):void 0===O&&(O={}),_=O.method||O.type||this.attr2("method"),e=(e=(e="string"==typeof(t=O.url||this.attr2("action"))?j.trim(t):"")||window.location.href||"")&&(e.match(/^([^#]+)/)||[])[1],O=j.extend(!0,{url:e,success:j.ajaxSettings.success,type:_||j.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},O),{});if(this.trigger("form-pre-serialize",[this,O,i]),i.veto)I("ajaxSubmit: submit vetoed via form-pre-serialize trigger");else if(O.beforeSerialize&&!1===O.beforeSerialize(this,O))I("ajaxSubmit: submit aborted via beforeSerialize callback");else{var t=O.traditional,D=(void 0===t&&(t=j.ajaxSettings.traditional),[]),n=this.formToArray(O.semantic,D,O.filtering);if(O.data&&(e=j.isFunction(O.data)?O.data(n):O.data,O.extraData=e,c=j.param(e,t)),O.beforeSubmit&&!1===O.beforeSubmit(n,this,O))I("ajaxSubmit: submit aborted via beforeSubmit callback");else if(this.trigger("form-submit-validate",[n,this,O,i]),i.veto)I("ajaxSubmit: submit vetoed via form-submit-validate trigger");else{var s,o,a,e=j.param(n,t),r=(c&&(e=e?e+"&"+c:c),"GET"===O.type.toUpperCase()?(O.url+=(0<=O.url.indexOf("?")?"&":"?")+e,O.data=null):O.data=e,[]);O.resetForm&&r.push(function(){A.resetForm()}),O.clearForm&&r.push(function(){A.clearForm(O.includeHidden)}),!O.dataType&&O.target?(s=O.success||function(){},r.push(function(t,e,i){var n=arguments,o=O.replaceTarget?"replaceWith":"html";j(O.target)[o](t).each(function(){s.apply(this,n)})})):O.success&&(j.isArray(O.success)?j.merge(r,O.success):r.push(O.success)),O.success=function(t,e,i){for(var n=O.context||this,o=0,s=r.length;o<s;o++)r[o].apply(n,[t,e,i||A,A])},O.error&&(o=O.error,O.error=function(t,e,i){var n=O.context||this;o.apply(n,[t,e,i,A])}),O.complete&&(a=O.complete,O.complete=function(t,e){var i=O.context||this;a.apply(i,[t,e,A])});var l,i=0<j("input[type=file]:enabled",this).filter(function(){return""!==j(this).val()}).length,t="multipart/form-data",c=A.attr("enctype")===t||A.attr("encoding")===t,e=m.fileapi&&m.formdata;I("fileAPI :"+e),!1!==O.iframe&&(O.iframe||(i||c)&&!e)?O.closeKeepAlive?j.get(O.closeKeepAlive,function(){l=u(n)}):l=u(n):l=(i||c)&&e?function(t){for(var i=new FormData,e=0;e<t.length;e++)i.append(t[e].name,t[e].value);if(O.extraData){var n=function(t){var e,i,n=j.param(t,O.traditional).split("&"),o=n.length,s=[];for(e=0;e<o;e++)n[e]=n[e].replace(/\+/g," "),i=n[e].split("="),s.push([decodeURIComponent(i[0]),decodeURIComponent(i[1])]);return s}(O.extraData);for(e=0;e<n.length;e++)n[e]&&i.append(n[e][0],n[e][1])}O.data=null;var o=j.extend(!0,{},j.ajaxSettings,O,{contentType:!1,processData:!1,cache:!1,type:_||"POST"});O.uploadProgress&&(o.xhr=function(){var t=j.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(t){var e=0,i=t.loaded||t.position,n=t.total;t.lengthComputable&&(e=Math.ceil(i/n*100)),O.uploadProgress(t,i,n,e)},!1),t});o.data=null;var s=o.beforeSend;return o.beforeSend=function(t,e){O.formData?e.data=O.formData:e.data=i,s&&s.call(this,t,e)},j.ajax(o)}(n):j.ajax(O),A.removeData("jqxhr").data("jqxhr",l);for(var h=0;h<D.length;h++)D[h]=null;this.trigger("form-submit-notify",[this,O])}}}else I("ajaxSubmit: skipping submit process - no element selected");return this;function u(t){var e,i,c,h,u,d,p,f,m,s=A[0],g=j.Deferred();if(g.abort=function(t){p.abort(t)},t)for(i=0;i<D.length;i++)e=j(D[i]),N?e.prop("disabled",!1):e.removeAttr("disabled");(c=j.extend(!0,{},j.ajaxSettings,O)).context=c.context||c;var v,y,n,b,w,x,k,S,a,C,r="jqFormIO"+(new Date).getTime(),l=s.ownerDocument,T=A.closest("body");return c.iframeTarget?(n=(u=j(c.iframeTarget,l)).attr2("name"))?r=n:u.attr2("name",r):(u=j('<iframe name="'+r+'" src="'+c.iframeSrc+'" />',l)).css({position:"absolute",top:"-1000px",left:"-1000px"}),d=u[0],p={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var e="timeout"===t?"timeout":"aborted";I("aborting upload... "+e),this.aborted=1;try{d.contentWindow.document.execCommand&&d.contentWindow.document.execCommand("Stop")}catch(t){}u.attr("src",c.iframeSrc),p.error=e,c.error&&c.error.call(c.context,p,e,t),h&&j.event.trigger("ajaxError",[p,c,e]),c.complete&&c.complete.call(c.context,p,e)}},(h=c.global)&&0==j.active++&&j.event.trigger("ajaxStart"),h&&j.event.trigger("ajaxSend",[p,c]),c.beforeSend&&!1===c.beforeSend.call(c.context,p,c)?(c.global&&j.active--,g.reject()):p.aborted?g.reject():((t=s.clk)&&(n=t.name)&&!t.disabled&&(c.extraData=c.extraData||{},c.extraData[n]=t.value,"image"===t.type)&&(c.extraData[n+".x"]=s.clk_x,c.extraData[n+".y"]=s.clk_y),v=1,y=2,t=j("meta[name=csrf-token]").attr("content"),(n=j("meta[name=csrf-param]").attr("content"))&&t&&(c.extraData=c.extraData||{},c.extraData[n]=t),c.forceSync?o():setTimeout(o,10),x=50,S=j.parseXML||function(t,e){return window.ActiveXObject?((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!==e.documentElement.nodeName?e:null},a=j.parseJSON||function(t){return window.eval("("+t+")")},C=function(t,e,i){var n=t.getResponseHeader("content-type")||"",o=("xml"===e||!e)&&0<=n.indexOf("xml"),t=o?t.responseXML:t.responseText;return o&&"parsererror"===t.documentElement.nodeName&&j.error&&j.error("parsererror"),"string"==typeof(t=i&&i.dataFilter?i.dataFilter(t,e):t)&&(("json"===e||!e)&&0<=n.indexOf("json")?t=a(t):("script"===e||!e)&&0<=n.indexOf("javascript")&&j.globalEval(t)),t}),g;function $(e){var i=null;try{e.contentWindow&&(i=e.contentWindow.document)}catch(t){I("cannot get iframe.contentWindow document: "+t)}if(!i)try{i=e.contentDocument||e.document}catch(t){I("cannot get iframe.contentDocument: "+t),i=e.document}return i}function o(){var t=A.attr2("target"),e=A.attr2("action"),i=A.attr("enctype")||A.attr("encoding")||"multipart/form-data";s.setAttribute("target",r),_&&!/post/i.test(_)||s.setAttribute("method","POST"),e!==c.url&&s.setAttribute("action",c.url),c.skipEncodingOverride||_&&!/post/i.test(_)||A.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),c.timeout&&(m=setTimeout(function(){f=!0,E(v)},c.timeout));var n=[];try{if(c.extraData)for(var o in c.extraData)c.extraData.hasOwnProperty(o)&&(j.isPlainObject(c.extraData[o])&&c.extraData[o].hasOwnProperty("name")&&c.extraData[o].hasOwnProperty("value")?n.push(j('<input type="hidden" name="'+c.extraData[o].name+'">',l).val(c.extraData[o].value).appendTo(s)[0]):n.push(j('<input type="hidden" name="'+o+'">',l).val(c.extraData[o]).appendTo(s)[0]));c.iframeTarget||u.appendTo(T),d.attachEvent?d.attachEvent("onload",E):d.addEventListener("load",E,!1),setTimeout(function t(){try{var e=$(d).readyState;I("state = "+e),e&&"uninitialized"===e.toLowerCase()&&setTimeout(t,50)}catch(t){I("Server abort: ",t," (",t.name,")"),E(y),m&&clearTimeout(m),m=void 0}},15);try{s.submit()}catch(t){document.createElement("form").submit.apply(s)}}finally{s.setAttribute("action",e),s.setAttribute("enctype",i),t?s.setAttribute("target",t):A.removeAttr("target"),j(n).remove()}}function E(e){if(!p.aborted&&!k)if((w=$(d))||(I("cannot access response document"),e=y),e===v&&p)p.abort("timeout"),g.reject(p,"timeout");else if(e===y&&p)p.abort("server abort"),g.reject(p,"error","server abort");else if(w&&w.location.href!==c.iframeSrc||f){d.detachEvent?d.detachEvent("onload",E):d.removeEventListener("load",E,!1);var i,e="success";try{if(f)throw"timeout";var t="xml"===c.dataType||w.XMLDocument||j.isXMLDoc(w);if(I("isXml="+t),!t&&window.opera&&(null===w.body||!w.body.innerHTML)&&--x)return I("requeing onLoad callback, DOM not available"),void setTimeout(E,250);var n,o,s,a=w.body||w.documentElement,r=(p.responseText=a?a.innerHTML:null,p.responseXML=w.XMLDocument||w,t&&(c.dataType="xml"),p.getResponseHeader=function(t){return{"content-type":c.dataType}[t.toLowerCase()]},a&&(p.status=Number(a.getAttribute("status"))||p.status,p.statusText=a.getAttribute("statusText")||p.statusText),(c.dataType||"").toLowerCase()),l=/(json|script|text)/.test(r);l||c.textarea?(n=w.getElementsByTagName("textarea")[0])?(p.responseText=n.value,p.status=Number(n.getAttribute("status"))||p.status,p.statusText=n.getAttribute("statusText")||p.statusText):l&&(o=w.getElementsByTagName("pre")[0],s=w.getElementsByTagName("body")[0],o?p.responseText=o.textContent||o.innerText:s&&(p.responseText=s.textContent||s.innerText)):"xml"===r&&!p.responseXML&&p.responseText&&(p.responseXML=S(p.responseText));try{b=C(p,r,c)}catch(t){e="parsererror",p.error=i=t||e}}catch(t){I("error caught: ",t),e="error",p.error=i=t||e}p.aborted&&(I("upload aborted"),e=null),"success"===(e=p.status?200<=p.status&&p.status<300||304===p.status?"success":"error":e)?(c.success&&c.success.call(c.context,b,"success",p),g.resolve(p.responseText,"success",p),h&&j.event.trigger("ajaxSuccess",[p,c])):e&&(void 0===i&&(i=p.statusText),c.error&&c.error.call(c.context,p,e,i),g.reject(p,"error",i),h)&&j.event.trigger("ajaxError",[p,c,i]),h&&j.event.trigger("ajaxComplete",[p,c]),h&&!--j.active&&j.event.trigger("ajaxStop"),c.complete&&c.complete.call(c.context,p,e),k=!0,c.timeout&&clearTimeout(m),setTimeout(function(){c.iframeTarget?u.attr("src",c.iframeSrc):u.remove(),p.responseXML=null},100)}}}},j.fn.ajaxForm=function(t,e,i,n){var o;return("string"==typeof t||!1===t&&0<arguments.length)&&(t={url:t,data:e,dataType:i},"function"==typeof n)&&(t.success=n),(t=t||{}).delegation=t.delegation&&j.isFunction(j.fn.on),t.delegation||0!==this.length?t.delegation?(j(document).off("submit.form-plugin",this.selector,s).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,t,s).on("click.form-plugin",this.selector,t,a),this):this.ajaxFormUnbind().on("submit.form-plugin",t,s).on("click.form-plugin",t,a):(o={s:this.selector,c:this.context},!j.isReady&&o.s?(I("DOM not ready, queuing ajaxForm"),j(function(){j(o.s,o.c).ajaxForm(t)})):I("terminating; zero elements found by selector"+(j.isReady?"":" (DOM not ready)")),this)},j.fn.ajaxFormUnbind=function(){return this.off("submit.form-plugin click.form-plugin")},j.fn.formToArray=function(t,e,i){var n=[];if(0!==this.length){var o=this[0],s=this.attr("id"),a=(a=t||void 0===o.elements?o.getElementsByTagName("*"):o.elements)&&j.makeArray(a);if((a=s&&(t||/(Edge|Trident)\//.test(navigator.userAgent))&&(s=j(':input[form="'+s+'"]').get()).length?(a||[]).concat(s):a)&&a.length){for(var r,l,c,h,u,d=0,p=(a=j.isFunction(i)?j.map(a,i):a).length;d<p;d++)if((u=(c=a[d]).name)&&!c.disabled)if(t&&o.clk&&"image"===c.type)o.clk===c&&(n.push({name:u,value:j(c).val(),type:c.type}),n.push({name:u+".x",value:o.clk_x},{name:u+".y",value:o.clk_y}));else if((l=j.fieldValue(c,!0))&&l.constructor===Array)for(e&&e.push(c),r=0,h=l.length;r<h;r++)n.push({name:u,value:l[r]});else if(m.fileapi&&"file"===c.type){e&&e.push(c);var f=c.files;if(f.length)for(r=0;r<f.length;r++)n.push({name:u,value:f[r],type:c.type});else n.push({name:u,value:"",type:c.type})}else null!=l&&(e&&e.push(c),n.push({name:u,value:l,type:c.type,required:c.required}));!t&&o.clk&&(u=(i=(s=j(o.clk))[0]).name)&&!i.disabled&&"image"===i.type&&(n.push({name:u,value:s.val()}),n.push({name:u+".x",value:o.clk_x},{name:u+".y",value:o.clk_y}))}}return n},j.fn.formSerialize=function(t){return j.param(this.formToArray(t))},j.fn.fieldSerialize=function(o){var s=[];return this.each(function(){var t=this.name;if(t){var e=j.fieldValue(this,o);if(e&&e.constructor===Array)for(var i=0,n=e.length;i<n;i++)s.push({name:t,value:e[i]});else null!=e&&s.push({name:this.name,value:e})}}),j.param(s)},j.fn.fieldValue=function(t){for(var e=[],i=0,n=this.length;i<n;i++){var o=this[i],o=j.fieldValue(o,t);null==o||o.constructor===Array&&!o.length||(o.constructor===Array?j.merge(e,o):e.push(o))}return e},j.fieldValue=function(t,e){var i=t.name,n=t.type,o=t.tagName.toLowerCase();if((e=void 0===e?!0:e)&&(!i||t.disabled||"reset"===n||"button"===n||("checkbox"===n||"radio"===n)&&!t.checked||("submit"===n||"image"===n)&&t.form&&t.form.clk!==t||"select"===o&&-1===t.selectedIndex))return null;if("select"!==o)return j(t).val().replace(d,"\r\n");e=t.selectedIndex;if(e<0)return null;for(var s=[],a=t.options,r="select-one"===n,l=r?e+1:a.length,c=r?e:0;c<l;c++){var h=a[c];if(h.selected&&!h.disabled){var u=(u=h.value)||(h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value);if(r)return u;s.push(u)}}return s},j.fn.clearForm=function(t){return this.each(function(){j("input,select,textarea",this).clearFields(t)})},j.fn.clearFields=j.fn.clearInputs=function(i){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,e=this.tagName.toLowerCase();n.test(t)||"textarea"===e?this.value="":"checkbox"===t||"radio"===t?this.checked=!1:"select"===e?this.selectedIndex=-1:"file"===t?/MSIE/.test(navigator.userAgent)?j(this).replaceWith(j(this).clone(!0)):j(this).val(""):i&&(!0===i&&/hidden/.test(t)||"string"==typeof i&&j(this).is(i))&&(this.value="")})},j.fn.resetForm=function(){return this.each(function(){var e=j(this),t=this.tagName.toLowerCase();switch(t){case"input":this.checked=this.defaultChecked;case"textarea":return this.value=this.defaultValue,!0;case"option":case"optgroup":var i=e.parents("select");return i.length&&i[0].multiple?"option"===t?this.selected=this.defaultSelected:e.find("option").resetForm():i.resetForm(),!0;case"select":return e.find("option").each(function(t){if(this.selected=this.defaultSelected,this.defaultSelected&&!e[0].multiple)return e[0].selectedIndex=t,!1}),!0;case"label":var i=j(e.attr("for")),n=e.find("input,select,textarea");return i[0]&&n.unshift(i[0]),n.resetForm(),!0;case"form":return"function"!=typeof this.reset&&("object"!=typeof this.reset||this.reset.nodeType)||this.reset(),!0;default:return e.find("form,input,label,select,textarea").resetForm(),!0}})},j.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},j.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var t=this.type;"checkbox"===t||"radio"===t?this.checked=e:"option"===this.tagName.toLowerCase()&&(t=j(this).parent("select"),e&&t[0]&&"select-one"===t[0].type&&t.find("option").selected(!1),this.selected=e)})},j.fn.ajaxSubmit.debug=!1}),define("mockup-patterns-modal",["jquery","underscore","pat-base","mockup-patterns-backdrop","pat-registry","mockup-router","mockup-utils","translate","jquery.form"],function(h,r,t,n,o,e,s,a){"use strict";return t.extend({name:"plone-modal",trigger:".pat-plone-modal",parser:"mockup",createModal:null,$model:null,defaults:{width:"",height:"",margin:20,position:"center middle",triggers:[],zIndexSelector:".plone-modal-wrapper,.plone-modal-backdrop",backdrop:"body",backdropOptions:{zIndex:"1040",opacity:"0.85",className:"plone-modal-backdrop",classActiveName:"plone-backdrop-active",closeOnEsc:!0,closeOnClick:!0},title:null,titleSelector:"h1:first",buttons:'.formControls > input[type="submit"], .formControls > button',content:"#content",automaticallyAddButtonActions:!0,loadLinksWithinModal:!0,prependContent:".portalMessage, #global_statusmessage",onRender:null,templateOptions:{className:"plone-modal fade",classDialog:"plone-modal-dialog",classModal:"plone-modal-content",classHeaderName:"plone-modal-header",classBodyName:"plone-modal-body",classFooterName:"plone-modal-footer",classWrapperName:"plone-modal-wrapper",classWrapperInnerName:"modal-wrapper-inner",classActiveName:"in",classPrependName:"",classContentName:"",template:'<div class="<%= options.className %>">  <div class="<%= options.classDialog %>">    <div class="<%= options.classModal %>">      <div class="<%= options.classHeaderName %>">        <a class="plone-modal-close">&times;</a>        <% if (title) { %><h2 class="plone-modal-title"><%= title %></h2><% } %>      </div>      <div class="<%= options.classBodyName %>">        <div class="<%= options.classPrependName %>"><%= prepend %></div>         <div class="<%= options.classContentName %>"><%= content %></div>      </div>      <div class="<%= options.classFooterName %>">         <% if (buttons) { %><%= buttons %><% } %>      </div>    </div>  </div></div>'},actions:{},actionOptions:{eventType:"click",disableAjaxFormSubmit:!1,target:null,ajaxUrl:null,modalFunction:null,isForm:!1,timeout:15e3,displayInModal:!0,reloadWindowOnClose:!0,error:".portalMessage.error, .alert-danger",formFieldError:".field.error",onSuccess:null,onError:function(){window.alert("An error occurred.")},onFormError:null,onTimeout:function(){window.alert("Timed out waiting for server.")},redirectOnResponse:!1,redirectToUrl:function(t,e,i){var n=/<body.*data-view-url=[\"'](.*)[\"'].*/im.exec(e);return n&&1<n.length||(n=/<body.*data-base-url=[\"'](.*)[\"'].*/im.exec(e))&&1<n.length?n[1].split('"')[0]:(n=/<base.*href=[\"'](.*)[\"'].*/im.exec(e))&&1<n.length?n[1]:""}},routerOptions:{id:null,pathExp:null},form:function(t){var s=this,a=s.$modal;s.options.automaticallyAddButtonActions&&(t[s.options.buttons]={}),t.a={},h.each(t,function(t,i){var e=r.union(r.keys(s.options.actionOptions),["templateOptions"]),n=h.extend(!0,{},s.options.actionOptions,r.pick(i,e)),e=(i.templateOptions=h.extend(!0,i.templateOptions,s.options.templateOptions),r.union(r.keys(s.options.actionOptions),["actions","actionOptions"])),o=h.extend(!0,r.omit(i,e),s.options);h(t,h("."+i.templateOptions.classBodyName,a)).each(function(t){var e=h(this);e.on(n.eventType,function(t){t.stopPropagation(),t.preventDefault(),s.loading.show(!1),null!==n.modalFunction?s[n.modalFunction]():h.nodeName(e[0],"input")||h.nodeName(e[0],"button")||!0===i.isForm?s.options.handleFormAction.apply(s,[e,n,o]):null===i.ajaxUrl&&!h.nodeName(e[0],"a")||s.options.handleLinkAction.apply(s,[e,n,o])})})})},handleFormAction:function(o,s,a){var t,e,r=this,i={};i[o.attr("name")]=o.attr("value"),t=h.nodeName(o[0],"form")?o:o.parents("form:not(.disableAutoSubmit)"),e=null!==s.ajaxUrl?"function"==typeof s.ajaxUrl?s.ajaxUrl.apply(r,[o,s]):s.ajaxUrl:o.parents("form").attr("action"),s.disableAjaxFormSubmit?(o.attr("name")&&o.attr("value")&&t.append(h('<input type="hidden" name="'+o.attr("name")+'" value="'+o.attr("value")+'" />')),t.trigger("submit")):(o.prop("disabled",!0),t.on("submit",function(t){t.preventDefault()}),t.trigger("submit"),r.loading.show(!1),t.ajaxSubmit({timeout:s.timeout,data:i,url:e,error:function(t,e,i){o.prop("disabled",!1),r.loading.hide(),"timeout"===e&&s.onTimeout?s.onTimeout.apply(r,t,i):s.onError?"string"==typeof s.onError?window[s.onError](t,e,i):s.onError(t,e,i):console.log("error happened",e," do something"),r.emit("formActionError",[t,e,i])},success:function(t,e,i,n){r.loading.hide(),0!==h(s.error,t).size()||0!==h(s.formFieldError,t).size()?s.onFormError?"string"==typeof s.onFormError?window[s.onFormError](r,t,e,i,n):s.onFormError(r,t,e,i,n):r.redraw(t,a):!0===s.redirectOnResponse?"function"==typeof s.redirectToUrl?window.parent.location.href=s.redirectToUrl.apply(r,[o,t,s]):window.parent.location.href=s.redirectToUrl:(s.onSuccess&&("string"==typeof s.onSuccess?window[s.onSuccess](r,t,e,i,n):s.onSuccess(r,t,e,i,n)),!0===s.displayInModal?r.redraw(t,a):(o.trigger("destroy.plone-modal.patterns"),s.reloadWindowOnClose&&r.reloadWindow()),r.emit("formActionSuccess",[t,e,i,n]))}}))},handleLinkAction:function(t,n,o){var e,s=this;t.hasClass("pat-plone-modal")||(e=n.ajaxUrl?"function"==typeof n.ajaxUrl?n.ajaxUrl.apply(s,[t,n]):n.ajaxUrl:t.attr("href"),!1===n.displayInModal?"_blank"===t.attr("target")?(window.open(e,"_blank"),s.loading.hide()):window.location=e:h.ajax({url:e}).fail(function(t,e,i){"timeout"===e&&n.onTimeout?n.onTimeout(s.$modal,t,i):n.onError?n.onError(t,e,i):window.alert(a("There was an error loading modal.")),s.emit("linkActionError",[t,e,i])}).done(function(t,e,i){s.redraw(t,o),n.onSuccess&&("string"==typeof n.onSuccess?window[n.onSuccess](s,t,e,i):n.onSuccess(s,t,e,i)),s.emit("linkActionSuccess",[t,e,i])}).always(function(){s.loading.hide()}))},render:function(t){var e,i,n,o=this;o.emit("before-render"),o.$raw&&(e=o.$raw.clone(),h("input:checked",e).each(function(){this.setAttribute&&this.setAttribute("checked","checked")}),i={title:"",prepend:"<div />",content:"",buttons:'<div class="pattern-modal-buttons"></div>',options:t.templateOptions},null===t.title?(n=h(t.titleSelector,e),i.title=n.html(),h(t.titleSelector,e).remove()):i.title=t.title,t.prependContent&&(i.prepend=h("<div />").append(h(t.prependContent,e).clone()).html(),h(t.prependContent,e).remove()),t.content?i.content=h(t.content,e).html():i.content=e.html(),o.$modal=h(r.template(o.options.templateOptions.template)(i)),o.$modalDialog=h("> ."+o.options.templateOptions.classDialog,o.$modal),o.$modalContent=h("> ."+o.options.templateOptions.classModal,o.$modalDialog),h("form",o.$modal).on("keydown",function(t){13===t.keyCode&&"TEXTAREA"!==t.target.nodeName&&(t.preventDefault(),h("input[type=submit], button[type=submit], button:not(type)",this).eq(0).trigger("click"))}),h(t.buttons,o.$modal).each(function(){var e=h(this);e.on("click",function(t){t.stopPropagation(),t.preventDefault()}).clone().appendTo(h(".pattern-modal-buttons",o.$modal)).off("click").on("click",function(t){t.stopPropagation(),t.preventDefault(),e.trigger("click")}),e.hide()}),o.emit("before-events-setup"),h(".plone-modal-header > a.plone-modal-close, .plone-modal-footer > a.plone-modal-close",o.$modal).off("click").on("click",function(t){t.stopPropagation(),t.preventDefault(),h(t.target).trigger("destroy.plone-modal.patterns")}),t.form&&t.form.apply(o,[t.actions]),o.$modal.addClass(o.options.templateOptions.className).on("destroy.plone-modal.patterns",function(t){t.stopPropagation(),o.hide()}).on("resize.plone-modal.patterns",function(t){t.stopPropagation(),t.preventDefault(),o.positionModal()}).on("click",function(t){t.stopPropagation()}).appendTo(o.$wrapperInner),o.options.loadLinksWithinModal&&o.$modal.on("click",function(t){h.nodeName(t.target,"a")&&t.preventDefault(),o.$modal.trigger("modal-click")}),o.$modal.data("pattern-"+o.name,o),o.emit("after-render"),t.onRender)&&("string"==typeof t.onRender?window[t.onRender](o):t.onRender(o))}},reloadWindow:function(){window.parent.location.reload()},init:function(){var n=this;n.options.loadLinksWithinModal=h.parseJSON(n.options.loadLinksWithinModal),null!==n.options.routerOptions.id&&e.addRoute("modal",n.options.routerOptions.id,function(){this.show()},n,n.options.routerOptions.pathExp,n.options.routerOptions.expReplace),!0===n.options.backdropOptions.closeOnEsc&&h(document).on("keydown",function(t,e){n.$el.is("."+n.options.templateOptions.classActiveName)&&27===t.keyCode&&n.hide()}),h(window.parent).resize(function(){n.positionModal()}),n.options.triggers&&h.each(n.options.triggers,function(t,e){var i=e.substring(0,e.indexOf(" ")),e=e.substring(e.indexOf(" "),e.length);h(e||n.$el).on(i,function(t){t.stopPropagation(),t.preventDefault(),n.show()})}),n.$el.is("a")&&(n.$el.attr("href")&&!n.options.image&&(n.options.target||"#"!==n.$el.attr("href").substr(0,1)||(n.options.target=n.$el.attr("href"),n.options.content=""),n.options.ajaxUrl||"#"===n.$el.attr("href").substr(0,1)||(n.options.ajaxUrl=function(){return n.$el.attr("href")})),n.$el.on("click",function(t){t.stopPropagation(),t.preventDefault(),n.show()})),n.$el.is('input[type="submit"]')&&n.$el.on("click",function(t){t.stopPropagation(),t.preventDefault(),n.backdrop=n.createBackdrop(),n.loading.show();var t=h.extend({},n.actionOptions,{displayInModal:!0,onSuccess:function(){n.loading.hide(),n.$raw=h("<div></div>"),n._show()}}),e=h.extend({},n.options,{backdropOptions:{closeOnClick:!1}});n.options.handleFormAction.apply(n,[n.$el,t,e])}),n.initModal()},createAjaxModal:function(){var o=this,t=(o.emit("before-ajax"),o.loading.show(),o.options.ajaxUrl);"function"==typeof t&&(t=t.apply(o,[o.options])),o.ajaxXHR=h.ajax({url:t,type:o.options.ajaxType}).done(function(t,e,i){o.ajaxXHR=void 0,o.$raw=h("<div />").append(h(s.parseBodyTag(t))),o.emit("after-ajax",o,e,i),o._show()}).fail(function(t,e,i){var n=o.options.actionOptions;"timeout"===e&&n.onTimeout?n.onTimeout(o.$modal,t,i):n.onError?n.onError(t,e,i):(window.alert(a("There was an error loading modal.")),o.hide()),o.emit("linkActionError",[t,e,i])}).always(function(){o.loading.hide()})},createTargetModal:function(){this.$raw=h(this.options.target).clone(),this._show()},createBasicModal:function(){this.$raw=h("<div/>").html(this.$el.clone()),this._show()},createHtmlModal:function(){var t=h(this.options.html);this.$raw=t,this._show()},createImageModal:function(){var t=this,e=(t.$wrapper.addClass("image-modal"),t.$el.attr("href")),i=t.$el.attr("data-modal-srcset")||"",n=h.trim(t.$el.context.innerText)||"Image";t.$raw=h("<div><h1>"+n+'</h1><div id="content"><div class="modal-image"><img src="'+e+'" srcset="'+i+'" /></div></div></div>'),t._show()},initModal:function(){var t=this;t.options.ajaxUrl?t.createModal=t.createAjaxModal:t.options.target?t.createModal=t.createTargetModal:t.options.html?t.createModal=t.createHtmlModal:t.options.image?t.createModal=t.createImageModal:t.createModal=t.createBasicModal},findPosition:function(t,e,i,n,o,s,a){var r,l,c={},h=l=r="auto";return"left"===t?(l=i+"px",c.left=l=s<n?"0px":l):"right"===t?(h=i+"px",c.right=h=s<n?"0px":h,c.left="auto"):(l=s/2-n/2-i+"px",c.left=l=s<n?"0px":l),"top"===e?(r=i+"px",c.top=r=a<o?"0px":r):"bottom"===e?(t=i+"px",c.bottom=t=a<o?"0px":t,c.top="auto"):(r=a/2-o/2-i+"px",c.top=r=a<o?"0px":r),c},modalInitialized:function(){return null!==this.$modal&&void 0!==this.$modal},positionModal:function(){var t=this;if(t.modalInitialized()){t.$modal.removeAttr("style"),t.$wrapper.parent().is("body")&&t.$wrapper.height(h(window.parent).height());var e,i="function"==typeof t.options.margin?t.options.margin():t.options.margin,n=(t.$modal.css({position:"absolute",padding:i}),t.$modalDialog.css({margin:"0",padding:"0",width:t.options.width,height:t.options.height}),t.$modalContent.css({width:t.options.width}),t.options.position.split(" ")),o=n[0],n=n[1],s=t.$modalDialog.outerWidth(!0),a=t.$modalDialog.outerHeight(!0),r=t.$wrapperInner.width(),l=t.$wrapperInner.height(),c=t.findPosition(o,n,i,s,a,r,l);for(e in c)t.$modalDialog.css(e,c[e])}},render:function(t){this.emit("render"),this.options.render.apply(this,[t]),this.emit("rendered")},show:function(){this.backdrop=this.createBackdrop(),this.createModal()},createBackdrop:function(){var e=this,i=new n(e.$el.parents(e.options.backdrop),e.options.backdropOptions),t=1041;return h(e.options.zIndexSelector).each(function(){t=Math.max(t,parseInt(h(this).css("zIndex"))+1||1041)}),e.$wrapper=h("<div/>").hide().css({"z-index":t,"overflow-y":"auto",position:"fixed",height:"100%",width:"100%",bottom:"0",left:"0",right:"0",top:"0"}).addClass(e.options.templateOptions.classWrapperName).insertBefore(i.$backdrop).on("click",function(t){e.options.backdropOptions.closeOnClick&&(t.stopPropagation(),t.preventDefault(),i.hide())}),i.on("hidden",function(t){void 0!==e.$modal&&e.$modal.hasClass(e.options.templateOptions.classActiveName)&&e.hide()}),e.loading=new s.Loading({backdrop:i}),e.$wrapperInner=h("<div/>").addClass(e.options.classWrapperInnerName).css({position:"absolute",bottom:"0",left:"0",right:"0",top:"0"}).appendTo(e.$wrapper),i},_show:function(){var t=this;t.render.apply(t,[t.options]),t.emit("show"),t.backdrop.show(),t.$wrapper.show(),t.loading.hide(),t.$el.addClass(t.options.templateOptions.classActiveName),t.$modal.addClass(t.options.templateOptions.classActiveName),o.scan(t.$modal),t.positionModal(),h(window.parent).on("resize.plone-modal.patterns",function(){t.positionModal()}),h("body").addClass("plone-modal-open"),t.emit("shown")},hide:function(){var t=this;t.ajaxXHR&&t.ajaxXHR.abort(),t.emit("hide"),t._suppressHide&&!window.confirm(t._suppressHide)||(t.loading.hide(),t.$el.removeClass(t.options.templateOptions.classActiveName),void 0!==t.$modal&&(t.$modal.remove(),t.initModal()),t.$wrapper.remove(),h(".plone-modal",h("body")).size()<1&&(t._suppressHide=void 0,t.backdrop.hide(),h("body").removeClass("plone-modal-open"),h(window.parent).off("resize.plone-modal.patterns")),t.emit("hidden"))},redraw:function(t,e){var i=this;i.emit("beforeDraw"),i.$modal.remove(),i.$raw=h("<div />").append(h(s.parseBodyTag(t))),i.render.apply(i,[e||i.options]),i.$modal.addClass(i.options.templateOptions.classActiveName),i.positionModal(),o.scan(i.$modal),i.emit("afterDraw")}})}),define("mockup-patterns-navigationmarker",["jquery","pat-base"],function(c,t){return t.extend({name:"navigationmarker",trigger:".pat-navigationmarker",parser:"mockup",init:function(){var l=document.querySelector('head link[rel="canonical"]').href||window.location.href;c("a",this.$el).each(function(){var t=this.href.replace("/view","");if(-1!==l.indexOf(t)){for(var e=c(this).parent(),i=e.find("> input"),n=(i.length&&(i[0].checked=!0),l.split("/")),o=t.split("/"),s=!1,a=0,r=o.length;a<r;a++)s=!1,o[a]===n[a]&&(s=!0);s&&e.addClass("inPath"),l===t&&e.addClass("current")}})}})}),define("mockup-patterns-preventdoublesubmit",["jquery","pat-base","translate"],function(i,t,e){"use strict";return t.extend({name:"preventdoublesubmit",trigger:".pat-preventdoublesubmit",parser:"mockup",defaults:{message:e("You already clicked the submit button. Do you really want to submit this form again?"),guardClassName:"submitting",optOutClassName:"allowMultiSubmit"},init:function(){var e=this;e.$el.is("form")&&i(":submit",e.$el).click(function(t){if(i(":submit").removeAttr("clicked"),i(this).attr("clicked","clicked"),i(this).hasClass(e.options.guardClassName)&&!i(this).hasClass(e.options.optOutClassName))return e._confirm.call(e);i(this).addClass(e.options.guardClassName)})},_confirm:function(t){return window.confirm(this.options.message)}})}),function(t){"function"==typeof define&&define.amd?define("picker",["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):"object"==typeof window?window.Picker=t(jQuery):this.Picker=t(jQuery)}(function(f){var n=f(window),m=f(document),o=f(document.documentElement),g=null!=document.documentElement.style.transition;function v(o,e,i,t){var n,r,l,s,c,h;return o?(n=!1,r={id:o.id||"P"+Math.abs(~~(Math.random()*new Date)),handlingOpen:!1},l=i?f.extend(!0,{},i.defaults,t):t||{},s=f.extend({},v.klasses(),l.klass),c=f(o),h=(t=function(){return this.start()}).prototype={constructor:t,$node:c,start:function(){var t;return r&&r.start?h:(r.methods={},r.start=!0,r.open=!1,r.type=o.type,o.autofocus=o==x(),o.readOnly=!l.editable,o.id=o.id||r.id,"text"!=o.type&&(o.type="text"),h.component=new i(h,l),h.$root=f('<div class="'+s.picker+'" id="'+o.id+'_root" />'),w(h.$root[0],"hidden",!0),h.$holder=f(a()).appendTo(h.$root),u(),l.formatSubmit&&(!0===l.hiddenName?(t=o.name,o.name=""):t=(t=["string"==typeof l.hiddenPrefix?l.hiddenPrefix:"","string"==typeof l.hiddenSuffix?l.hiddenSuffix:"_submit"])[0]+o.name+t[1],h._hidden=f('<input type=hidden name="'+t+'"'+(c.data("value")||o.value?' value="'+h.get("select",l.formatSubmit)+'"':"")+">")[0],c.on("change."+r.id,function(){h._hidden.value=o.value?h.get("select",l.formatSubmit):""})),c.data(e,h).addClass(s.input).val(c.data("value")?h.get("select",l.format):o.value).on("focus."+r.id+" click."+r.id,function(t){t.preventDefault(),h.open()}).on("mousedown",function(){r.handlingOpen=!0;var t=function(){setTimeout(function(){f(document).off("mouseup",t),r.handlingOpen=!1},0)};f(document).on("mouseup",t)}),l.editable||c.on("keydown."+r.id,p),w(o,{haspopup:!0,expanded:!1,readonly:!1,owns:o.id+"_root"}),l.containerHidden?f(l.containerHidden).append(h._hidden):c.after(h._hidden),l.container?f(l.container).append(h.$root):c.after(h.$root),h.on({start:h.component.onStart,render:h.component.onRender,stop:h.component.onStop,open:h.component.onOpen,close:h.component.onClose,set:h.component.onSet}).on({start:l.onStart,render:l.onRender,stop:l.onStop,open:l.onOpen,close:l.onClose,set:l.onSet}),n=function(t){var e,i="position";t.currentStyle?e=t.currentStyle[i]:window.getComputedStyle&&(e=getComputedStyle(t)[i]);return"fixed"==e}(h.$holder[0]),o.autofocus&&h.open(),h.trigger("start").trigger("render"))},render:function(t){return t?(h.$holder=f(a()),u(),h.$root.html(h.$holder)):h.$root.find("."+s.box).html(h.component.nodes(r.open)),h.trigger("render")},stop:function(){return r.start&&(h.close(),h._hidden&&h._hidden.parentNode.removeChild(h._hidden),h.$root.remove(),c.removeClass(s.input).removeData(e),setTimeout(function(){c.off("."+r.id)},0),o.type=r.type,o.readOnly=!1,h.trigger("stop"),r.methods={},r.start=!1),h},open:function(t){return r.open?h:(c.addClass(s.active),w(o,"expanded",!0),setTimeout(function(){h.$root.addClass(s.opened),w(h.$root[0],"hidden",!1)},0),!1!==t&&(r.open=!0,n&&f("body").css("overflow","hidden").css("padding-right","+="+y()),n&&g?h.$holder.find("."+s.frame).one("transitionend",function(){h.$holder.eq(0).focus()}):setTimeout(function(){h.$holder.eq(0).focus()},0),m.on("click."+r.id+" focusin."+r.id,function(t){var e;r.handlingOpen||(e=b(t,o),t.isSimulated)||e==o||e==document||3==t.which||h.close(e===h.$holder[0])}).on("keydown."+r.id,function(t){var e=t.keyCode,i=h.component.key[e],n=b(t,o);27==e?h.close(!0):n!=h.$holder[0]||!i&&13!=e?f.contains(h.$root[0],n)&&13==e&&(t.preventDefault(),n.click()):(t.preventDefault(),i?v._.trigger(h.component.key.go,h,[v._.trigger(i)]):h.$root.find("."+s.highlighted).hasClass(s.disabled)||(h.set("select",h.component.item.highlight),l.closeOnSelect&&h.close(!0)))})),h.trigger("open"))},close:function(t){return t&&(l.editable?o.focus():(h.$holder.off("focus.toOpen").focus(),setTimeout(function(){h.$holder.on("focus.toOpen",d)},0))),c.removeClass(s.active),w(o,"expanded",!1),setTimeout(function(){h.$root.removeClass(s.opened+" "+s.focused),w(h.$root[0],"hidden",!0)},0),r.open?(r.open=!1,n&&f("body").css("overflow","").css("padding-right","-="+y()),m.off("."+r.id),h.trigger("close")):h},clear:function(t){return h.set("clear",null,t)},set:function(t,e,i){var n,o,s=f.isPlainObject(t),a=s?t:{};if(i=s&&f.isPlainObject(e)?e:i||{},t){for(n in s||(a[t]=e),a)o=a[n],n in h.component.item&&(void 0===o&&(o=null),h.component.set(n,o,i)),"select"!=n&&"clear"!=n||!l.updateInput||c.val("clear"==n?"":h.get(n,l.format)).trigger("change");h.render()}return i.muted?h:h.trigger("set",a)},get:function(t,e){if(null!=r[t=t||"value"])return r[t];if("valueSubmit"==t){if(h._hidden)return h._hidden.value;t="value"}var i;return"value"==t?o.value:t in h.component.item?"string"==typeof e?(i=h.component.get(t))?v._.trigger(h.component.formats.toString,h.component,[e,i]):"":h.component.get(t):void 0},on:function(t,e,i){var n,o,s=f.isPlainObject(t),a=s?t:{};if(t)for(n in s||(a[t]=e),a)o=a[n],r.methods[n=i?"_"+n:n]=r.methods[n]||[],r.methods[n].push(o);return h},off:function(){var t,e=arguments,i=0;for(namesCount=e.length;i<namesCount;i+=1)(t=e[i])in r.methods&&delete r.methods[t];return h},trigger:function(t,e){function i(t){(t=r.methods[t])&&t.map(function(t){v._.trigger(t,h,[e])})}return i("_"+t),i(t),h}},new t):v;function a(){return v._.node("div",v._.node("div",v._.node("div",v._.node("div",h.component.nodes(r.open),s.box),s.wrap),s.frame),s.holder,'tabindex="-1"')}function u(){h.$holder.on({keydown:p,"focus.toOpen":d,blur:function(){c.removeClass(s.target)},focusin:function(t){h.$root.removeClass(s.focused),t.stopPropagation()},"mousedown click":function(t){var e=b(t,o);e!=h.$holder[0]&&(t.stopPropagation(),"mousedown"!=t.type||f(e).is("input, select, textarea, button, option")||(t.preventDefault(),h.$holder.eq(0).focus()))}}).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var t=f(this),e=t.data(),t=t.hasClass(s.navDisabled)||t.hasClass(s.disabled),i=(i=x())&&(i.type||i.href?i:null);(t||i&&!f.contains(h.$root[0],i))&&h.$holder.eq(0).focus(),!t&&e.nav?h.set("highlight",h.component.item.highlight,{nav:e.nav}):!t&&"pick"in e?(h.set("select",e.pick),l.closeOnSelect&&h.close(!0)):e.clear?(h.clear(),l.closeOnClear&&h.close(!0)):e.close&&h.close(!0)})}function d(t){t.stopPropagation(),c.addClass(s.target),h.$root.addClass(s.focused),h.open()}function p(t){var e=t.keyCode,i=/^(8|46)$/.test(e);if(27==e)return h.close(!0),!1;(32==e||i||!r.open&&h.component.key[e])&&(t.preventDefault(),t.stopPropagation(),i?h.clear().close():h.open())}}function y(){if(o.height()<=n.height())return 0;var t=f('<div style="visibility:hidden;width:100px" />').appendTo("body"),e=t[0].offsetWidth;t.css("overflow","scroll");var i=f('<div style="width:100%" />').appendTo(t)[0].offsetWidth;return t.remove(),e-i}function b(t,e){var i=[];return t.path&&(i=t.path),(i=t.originalEvent&&t.originalEvent.path?t.originalEvent.path:i)&&0<i.length?e&&0<=i.indexOf(e)?e:i[0]:t.target}function w(t,e,i){if(f.isPlainObject(e))for(var n in e)s(t,n,e[n]);else s(t,e,i)}function s(t,e,i){t.setAttribute(("role"==e?"":"aria-")+e,i)}function x(){try{return document.activeElement}catch(t){}}return v.klasses=function(t){return{picker:t=t||"picker",opened:t+"--opened",focused:t+"--focused",input:t+"__input",active:t+"__input--active",target:t+"__input--target",holder:t+"__holder",frame:t+"__frame",wrap:t+"__wrap",box:t+"__box"}},v._={group:function(t){for(var e,i="",n=v._.trigger(t.min,t);n<=v._.trigger(t.max,t,[n]);n+=t.i)e=v._.trigger(t.item,t,[n]),i+=v._.node(t.node,e[0],e[1],e[2]);return i},node:function(t,e,i,n){return e?"<"+t+(i=i?' class="'+i+'"':"")+(n=n?" "+n:"")+">"+(e=f.isArray(e)?e.join(""):e)+"</"+t+">":""},lead:function(t){return(t<10?"0":"")+t},trigger:function(t,e,i){return"function"==typeof t?t.apply(e,i||[]):t},digits:function(t){return/\d/.test(t[1])?2:1},isDate:function(t){return-1<{}.toString.call(t).indexOf("Date")&&this.isInteger(t.getDate())},isInteger:function(t){return-1<{}.toString.call(t).indexOf("Number")&&t%1==0},ariaAttr:function(t,e){f.isPlainObject(t)||(t={attribute:e});for(var i in e="",t){var n=("role"==i?"":"aria-")+i,o=t[i];e+=null==o?"":n+'="'+t[i]+'"'}return e}},v.extend=function(n,o){f.fn[n]=function(t,e){var i=this.data(n);return"picker"==t?i:i&&"string"==typeof t?v._.trigger(i[t],i,[e]):this.each(function(){f(this).data(n)||new v(this,n,o,t)})},f.fn[n].defaults=o.defaults},v}),function(t){"function"==typeof define&&define.amd?define("picker.date",["./picker","jquery"],t):"object"==typeof exports?module.exports=t(require("./picker.js"),require("jquery")):t(Picker,jQuery)}(function(t,f){var e,g=t._;function i(e,i){function t(){return s.currentStyle?"rtl"==s.currentStyle.direction:"rtl"==getComputedStyle(e.$root[0]).direction}var n,o=this,s=e.$node[0],a=s.value,r=e.$node.data("value"),a=r||a,r=r?i.formatSubmit:i.format;o.settings=i,o.$node=e.$node,o.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},o.item={},o.item.clear=null,o.item.disable=(i.disable||[]).slice(0),o.item.enable=-(!0===(n=o.item.disable)[0]?n.shift():-1),o.set("min",i.min).set("max",i.max).set("now"),a?o.set("select",a,{format:r,defaultValue:!0}):o.set("select",null).set("highlight",o.item.now),o.key={40:7,38:-7,39:function(){return t()?-1:1},37:function(){return t()?1:-1},go:function(t){var e=o.item.highlight,e=new Date(e.year,e.month,e.date+t);o.set("highlight",e,{interval:t}),this.render()}},e.on("render",function(){e.$root.find("."+i.klass.selectMonth).on("change",function(){var t=this.value;t&&(e.set("highlight",[e.get("view").year,t,e.get("highlight").date]),e.$root.find("."+i.klass.selectMonth).trigger("focus"))}),e.$root.find("."+i.klass.selectYear).on("change",function(){var t=this.value;t&&(e.set("highlight",[t,e.get("view").month,e.get("highlight").date]),e.$root.find("."+i.klass.selectYear).trigger("focus"))})},1).on("open",function(){var t="";o.disabled(o.get("now"))&&(t=":not(."+i.klass.buttonToday+")"),e.$root.find("button"+t+", select").attr("disabled",!1)},1).on("close",function(){e.$root.find("button, select").attr("disabled",!0)},1)}function n(t,e,i){t=t.match(/[^\x00-\x7F]+|\w+/)[0];return i.mm||i.m||(i.m=e.indexOf(t)+1),t.length}function o(t){return t.match(/\w+/)[0].length}i.prototype.set=function(e,i,n){var o=this,t=o.item;return null===i?t[e="clear"==e?"select":e]=i:(t["enable"==e?"disable":"flip"==e?"enable":e]=o.queue[e].split(" ").map(function(t){return i=o[t](e,i,n)}).pop(),"select"==e?o.set("highlight",t.select,n):"highlight"==e?o.set("view",t.highlight,n):e.match(/^(flip|min|max|disable|enable)$/)&&(t.select&&o.disabled(t.select)&&o.set("select",t.select,n),t.highlight)&&o.disabled(t.highlight)&&o.set("highlight",t.highlight,n)),o},i.prototype.get=function(t){return this.item[t]},i.prototype.create=function(t,e,i){var n;return(e=void 0===e?t:e)==-1/0||e==1/0?n=e:e=f.isPlainObject(e)&&g.isInteger(e.pick)?e.obj:f.isArray(e)?(e=new Date(e[0],e[1],e[2]),g.isDate(e)?e:this.create().obj):g.isInteger(e)||g.isDate(e)?this.normalize(new Date(e),i):this.now(t,e,i),{year:n||e.getFullYear(),month:n||e.getMonth(),date:n||e.getDate(),day:n||e.getDay(),obj:n||e,pick:n||e.getTime()}},i.prototype.createRange=function(t,e){function i(t){return!0===t||f.isArray(t)||g.isDate(t)?n.create(t):t}var n=this;return g.isInteger(t)||(t=i(t)),g.isInteger(e)||(e=i(e)),g.isInteger(t)&&f.isPlainObject(e)?t=[e.year,e.month,e.date+t]:g.isInteger(e)&&f.isPlainObject(t)&&(e=[t.year,t.month,t.date+e]),{from:i(t),to:i(e)}},i.prototype.withinRange=function(t,e){return t=this.createRange(t.from,t.to),e.pick>=t.from.pick&&e.pick<=t.to.pick},i.prototype.overlapRanges=function(t,e){var i=this;return t=i.createRange(t.from,t.to),e=i.createRange(e.from,e.to),i.withinRange(t,e.from)||i.withinRange(t,e.to)||i.withinRange(e,t.from)||i.withinRange(e,t.to)},i.prototype.now=function(t,e,i){return e=new Date,i&&i.rel&&e.setDate(e.getDate()+i.rel),this.normalize(e,i)},i.prototype.navigate=function(t,e,i){var n,o,s,a=f.isArray(e),r=f.isPlainObject(e),l=this.item.view;if(a||r){for(s=r?(n=e.year,o=e.month,e.date):(n=+e[0],o=+e[1],+e[2]),i&&i.nav&&l&&l.month!==o&&(n=l.year,o=l.month),n=(a=new Date(n,o+(i&&i.nav?i.nav:0),1)).getFullYear(),o=a.getMonth();new Date(n,o,s).getMonth()!==o;)--s;e=[n,o,s]}return e},i.prototype.normalize=function(t){return t.setHours(0,0,0,0),t},i.prototype.measure=function(t,e){return g.isInteger(e)?e=this.now(t,e,{rel:e}):e?"string"==typeof e&&(e=this.parse(t,e)):e="min"==t?-1/0:1/0,e},i.prototype.viewset=function(t,e){return this.create([e.year,e.month,1])},i.prototype.validate=function(t,i,e){var n,o,s,a,r=this,l=i,c=e&&e.interval?e.interval:1,h=-1===r.item.enable,u=r.item.min,d=r.item.max,p=h&&r.item.disable.filter(function(t){var e;return f.isArray(t)&&((e=r.create(t).pick)<i.pick?n=!0:e>i.pick&&(o=!0)),g.isInteger(t)}).length;if((!e||!e.nav&&!e.defaultValue)&&(!h&&r.disabled(i)||h&&r.disabled(i)&&(p||n||o)||!h&&(i.pick<=u.pick||i.pick>=d.pick)))for(h&&!p&&(!o&&0<c||!n&&c<0)&&(c*=-1);r.disabled(i)&&(1<Math.abs(c)&&(i.month<l.month||i.month>l.month)&&(i=l,c=0<c?1:-1),i.pick<=u.pick?(s=!0,c=1,i=r.create([u.year,u.month,u.date+(i.pick===u.pick?0:-1)])):i.pick>=d.pick&&(a=!0,c=-1,i=r.create([d.year,d.month,d.date+(i.pick===d.pick?0:1)])),!s||!a);)i=r.create([i.year,i.month,i.date+c]);return i},i.prototype.disabled=function(e){var i=this,t=(t=i.item.disable.filter(function(t){return g.isInteger(t)?e.day===(i.settings.firstDay?t:t-1)%7:f.isArray(t)||g.isDate(t)?e.pick===i.create(t).pick:f.isPlainObject(t)?i.withinRange(t,e):void 0})).length&&!t.filter(function(t){return f.isArray(t)&&"inverted"==t[3]||f.isPlainObject(t)&&t.inverted}).length;return-1===i.item.enable?!t:t||e.pick<i.item.min.pick||e.pick>i.item.max.pick},i.prototype.parse=function(t,n,e){var o=this,s={};return n&&"string"==typeof n?(e&&e.format||((e=e||{}).format=o.settings.format),o.formats.toArray(e.format).map(function(t){var e=o.formats[t],i=e?g.trigger(e,o,[n,s]):t.replace(/^!/,"").length;e&&(s[t]=n.substr(0,i)),n=n.substr(i)}),[s.yyyy||s.yy,+(s.mm||s.m)-1,s.dd||s.d]):n},i.prototype.formats={d:function(t,e){return t?g.digits(t):e.date},dd:function(t,e){return t?2:g.lead(e.date)},ddd:function(t,e){return t?o(t):this.settings.weekdaysShort[e.day]},dddd:function(t,e){return t?o(t):this.settings.weekdaysFull[e.day]},m:function(t,e){return t?g.digits(t):e.month+1},mm:function(t,e){return t?2:g.lead(e.month+1)},mmm:function(t,e){var i=this.settings.monthsShort;return t?n(t,i,e):i[e.month]},mmmm:function(t,e){var i=this.settings.monthsFull;return t?n(t,i,e):i[e.month]},yy:function(t,e){return t?2:(""+e.year).slice(2)},yyyy:function(t,e){return t?4:e.year},toArray:function(t){return t.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(t,e){var i=this;return i.formats.toArray(t).map(function(t){return g.trigger(i.formats[t],i,[0,e])||t.replace(/^!/,"")}).join("")}},i.prototype.isDateExact=function(t,e){return g.isInteger(t)&&g.isInteger(e)||"boolean"==typeof t&&"boolean"==typeof e?t===e:(g.isDate(t)||f.isArray(t))&&(g.isDate(e)||f.isArray(e))?this.create(t).pick===this.create(e).pick:!(!f.isPlainObject(t)||!f.isPlainObject(e))&&this.isDateExact(t.from,e.from)&&this.isDateExact(t.to,e.to)},i.prototype.isDateOverlap=function(t,e){var i=this.settings.firstDay?1:0;return g.isInteger(t)&&(g.isDate(e)||f.isArray(e))?(t=t%7+i)===this.create(e).day+1:g.isInteger(e)&&(g.isDate(t)||f.isArray(t))?(e=e%7+i)===this.create(t).day+1:!(!f.isPlainObject(t)||!f.isPlainObject(e))&&this.overlapRanges(t,e)},i.prototype.flipEnable=function(t){var e=this.item;e.enable=t||(-1==e.enable?1:-1)},i.prototype.deactivate=function(t,e){var n=this,o=n.item.disable.slice(0);return"flip"==e?n.flipEnable():!1===e?(n.flipEnable(1),o=[]):!0===e?(n.flipEnable(-1),o=[]):e.map(function(t){for(var e,i=0;i<o.length;i+=1)if(n.isDateExact(t,o[i])){e=!0;break}e||(g.isInteger(t)||g.isDate(t)||f.isArray(t)||f.isPlainObject(t)&&t.from&&t.to)&&o.push(t)}),o},i.prototype.activate=function(t,e){var s=this,a=s.item.disable,r=a.length;return"flip"==e?s.flipEnable():!0===e?(s.flipEnable(1),a=[]):!1===e?(s.flipEnable(-1),a=[]):e.map(function(t){for(var e,i,n,o=0;o<r;o+=1){if(i=a[o],s.isDateExact(i,t)){n=!(e=a[o]=null);break}if(s.isDateOverlap(i,t)){f.isPlainObject(t)?(t.inverted=!0,e=t):f.isArray(t)?(e=t)[3]||e.push("inverted"):g.isDate(t)&&(e=[t.getFullYear(),t.getMonth(),t.getDate(),"inverted"]);break}}if(e)for(o=0;o<r;o+=1)if(s.isDateExact(a[o],t)){a[o]=null;break}if(n)for(o=0;o<r;o+=1)if(s.isDateOverlap(a[o],t)){a[o]=null;break}e&&a.push(e)}),a.filter(function(t){return null!=t})},i.prototype.nodes=function(a){function t(t){return g.node("div"," ",l.klass["nav"+(t?"Next":"Prev")]+(t&&d.year>=m.year&&d.month>=m.month||!t&&d.year<=f.year&&d.month<=f.month?" "+l.klass.navDisabled:""),"data-nav="+(t||-1)+" "+g.ariaAttr({role:"button",controls:r.$node[0].id+"_table"})+' title="'+(t?l.labelMonthNext:l.labelMonthPrev)+'"')}function e(){var e=l.showMonthsShort?l.monthsShort:l.monthsFull;return l.selectMonths?g.node("select",g.group({min:0,max:11,i:1,node:"option",item:function(t){return[e[t],0,"value="+t+(d.month==t?" selected":"")+(d.year==f.year&&t<f.month||d.year==m.year&&t>m.month?" disabled":"")]}}),l.klass.selectMonth,(a?"":"disabled")+" "+g.ariaAttr({controls:r.$node[0].id+"_table"})+' title="'+l.labelMonthSelect+'"'):g.node("div",e[d.month],l.klass.month)}function i(){var t,e,i,n,o=d.year,s=!0===l.selectYears?5:~~(l.selectYears/2);return s?(i=f.year,t=m.year,e=o+s,(s=o-s)<i&&(e+=i-s,s=i),t<e&&(s-=(n=e-t)<(i=s-i)?n:i,e=t),g.node("select",g.group({min:s,max:e,i:1,node:"option",item:function(t){return[t,0,"value="+t+(o==t?" selected":"")]}}),l.klass.selectYear,(a?"":"disabled")+" "+g.ariaAttr({controls:r.$node[0].id+"_table"})+' title="'+l.labelYearSelect+'"')):g.node("div",o,l.klass.year)}var n,o,r=this,l=r.settings,s=r.item,c=s.now,h=s.select,u=s.highlight,d=s.view,p=s.disable,f=s.min,m=s.max,s=(n=(l.showWeekdaysFull?l.weekdaysFull:l.weekdaysShort).slice(0),o=l.weekdaysFull.slice(0),l.firstDay&&(n.push(n.shift()),o.push(o.shift())),g.node("thead",g.node("tr",g.group({min:0,max:6,i:1,node:"th",item:function(t){return[n[t],l.klass.weekdays,'scope=col title="'+o[t]+'"']}}))));return g.node("div",(l.selectYears?i()+e():e()+i())+t()+t(1),l.klass.header)+g.node("table",s+g.node("tbody",g.group({min:0,max:5,i:1,node:"tr",item:function(t){var e=l.firstDay&&0===r.create([d.year,d.month,1]).day?-7:0;return[g.group({min:7*t-d.day+e+1,max:function(){return this.min+7-1},i:1,node:"td",item:function(t){t=r.create([d.year,d.month,t+(l.firstDay?1:0)]);var e,i=h&&h.pick==t.pick,n=u&&u.pick==t.pick,o=p&&r.disabled(t)||t.pick<f.pick||t.pick>m.pick,s=g.trigger(r.formats.toString,r,[l.format,t]);return[g.node("div",t.date,((e=[l.klass.day]).push(d.month==t.month?l.klass.infocus:l.klass.outfocus),c.pick==t.pick&&e.push(l.klass.now),i&&e.push(l.klass.selected),n&&e.push(l.klass.highlighted),o&&e.push(l.klass.disabled),e.join(" ")),"data-pick="+t.pick+" "+g.ariaAttr({role:"gridcell",label:s,selected:!(!i||r.$node.val()!==s)||null,activedescendant:!!n||null,disabled:!!o||null})),"",g.ariaAttr({role:"presentation"})]}})]}})),l.klass.table,'id="'+r.$node[0].id+'_table" '+g.ariaAttr({role:"grid",controls:r.$node[0].id,readonly:!0}))+g.node("div",g.node("button",l.today,l.klass.buttonToday,"type=button data-pick="+c.pick+(a&&!r.disabled(c)?"":" disabled")+" "+g.ariaAttr({controls:r.$node[0].id}))+g.node("button",l.clear,l.klass.buttonClear,"type=button data-clear=1"+(a?"":" disabled")+" "+g.ariaAttr({controls:r.$node[0].id}))+g.node("button",l.close,l.klass.buttonClose,"type=button data-close=true "+(a?"":" disabled")+" "+g.ariaAttr({controls:r.$node[0].id})),l.klass.footer)},i.defaults={labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",close:"Close",closeOnSelect:!0,closeOnClear:!0,updateInput:!0,format:"d mmmm, yyyy",klass:{table:(e=t.klasses().picker+"__")+"table",header:e+"header",navPrev:e+"nav--prev",navNext:e+"nav--next",navDisabled:e+"nav--disabled",month:e+"month",year:e+"year",selectMonth:e+"select--month",selectYear:e+"select--year",weekdays:e+"weekday",day:e+"day",disabled:e+"day--disabled",selected:e+"day--selected",highlighted:e+"day--highlighted",now:e+"day--today",infocus:e+"day--infocus",outfocus:e+"day--outfocus",footer:e+"footer",buttonClear:e+"button--clear",buttonToday:e+"button--today",buttonClose:e+"button--close"}},t.extend("pickadate",i)}),function(t){"function"==typeof define&&define.amd?define("picker.time",["./picker","jquery"],t):"object"==typeof exports?module.exports=t(require("./picker.js"),require("jquery")):t(Picker,jQuery)}(function(t,l){var e,o=1440,p=t._;function i(o,s){var t,e=this,i=o.$node[0].value,n=o.$node.data("value"),i=n||i,n=n?s.formatSubmit:s.format;e.settings=s,e.$node=o.$node,e.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse create validate",view:"parse create validate",disable:"deactivate",enable:"activate"},e.item={},e.item.clear=null,e.item.interval=s.interval||30,e.item.disable=(s.disable||[]).slice(0),e.item.enable=-(!0===(t=e.item.disable)[0]?t.shift():-1),e.set("min",s.min).set("max",s.max).set("now"),i?e.set("select",i,{format:n}):e.set("select",null).set("highlight",e.item.now),e.key={40:1,38:-1,39:1,37:-1,go:function(t){e.set("highlight",e.item.highlight.pick+t*e.item.interval,{interval:t*e.item.interval}),this.render()}},o.on("render",function(){function t(e,i){n("transform").map(function(t){e.css(t,i)}),n("transition").map(function(t){e.css(t,i)})}var e=o.$root.children(),i=e.find("."+s.klass.viewset),n=function(e){return["webkit","moz","ms","o",""].map(function(t){return(t?"-"+t+"-":"")+e})};i.length&&(t(e,"none"),e[0].scrollTop=~~i.position().top-2*i[0].clientHeight,t(e,""))},1).on("open",function(){o.$root.find("button").attr("disabled",!1)},1).on("close",function(){o.$root.find("button").attr("disabled",!0)},1)}i.prototype.set=function(e,i,n){var o=this,t=o.item;return null===i?t[e="clear"==e?"select":e]=i:(t["enable"==e?"disable":"flip"==e?"enable":e]=o.queue[e].split(" ").map(function(t){return i=o[t](e,i,n)}).pop(),"select"==e?o.set("highlight",t.select,n):"highlight"==e?o.set("view",t.highlight,n):"interval"==e?o.set("min",t.min,n).set("max",t.max,n):e.match(/^(flip|min|max|disable|enable)$/)&&(t.select&&o.disabled(t.select)&&o.set("select",i,n),t.highlight&&o.disabled(t.highlight)&&o.set("highlight",i,n),"min"==e)&&o.set("max",t.max,n)),o},i.prototype.get=function(t){return this.item[t]},i.prototype.create=function(t,e,i){var n=this;return p.isDate(e=void 0===e?t:e)&&(e=[e.getHours(),e.getMinutes()]),l.isPlainObject(e)&&p.isInteger(e.pick)?e=e.pick:l.isArray(e)?e=60*+e[0]+ +e[1]:p.isInteger(e)||(e=n.now(t,e,i)),"max"==t&&e<n.item.min.pick&&(e+=o),"min"!=t&&"max"!=t&&(e-n.item.min.pick)%n.item.interval!=0&&(e+=n.item.interval),{hour:~~(24+(e=n.normalize(t,e,i))/60)%24,mins:(60+e%60)%60,time:(o+e)%o,pick:e%o}},i.prototype.createRange=function(t,e){function i(t){return!0===t||l.isArray(t)||p.isDate(t)?n.create(t):t}var n=this;return p.isInteger(t)||(t=i(t)),p.isInteger(e)||(e=i(e)),p.isInteger(t)&&l.isPlainObject(e)?t=[e.hour,e.mins+t*n.settings.interval]:p.isInteger(e)&&l.isPlainObject(t)&&(e=[t.hour,t.mins+e*n.settings.interval]),{from:i(t),to:i(e)}},i.prototype.withinRange=function(t,e){return t=this.createRange(t.from,t.to),e.pick>=t.from.pick&&e.pick<=t.to.pick},i.prototype.overlapRanges=function(t,e){var i=this;return t=i.createRange(t.from,t.to),e=i.createRange(e.from,e.to),i.withinRange(t,e.from)||i.withinRange(t,e.to)||i.withinRange(e,t.from)||i.withinRange(e,t.to)},i.prototype.now=function(t,e){var i,n=this.item.interval,o=new Date,o=60*o.getHours()+o.getMinutes();return o-=o%n,i=e<0&&n*e+o<=-n,o+="min"==t&&i?0:n,p.isInteger(e)&&(o+=n*(i&&"max"!=t?e+1:e)),o},i.prototype.normalize=function(t,e){var i=this.item.interval,n=this.item.min&&this.item.min.pick||0;return e-="min"==t?0:(e-n)%i},i.prototype.measure=function(t,e,i){return"string"==typeof(e=e||("min"==t?[0,0]:[23,59]))?e=this.parse(t,e):!0===e||p.isInteger(e)?e=this.now(t,e,i):l.isPlainObject(e)&&p.isInteger(e.pick)&&(e=this.normalize(t,e.pick,i)),e},i.prototype.validate=function(t,e,i){var n=this,i=(i&&i.interval?i:n.item).interval;return n.disabled(e)&&(e=n.shift(e,i)),e=n.scope(e),e=n.disabled(e)?n.shift(e,-1*i):e},i.prototype.disabled=function(e){var i=this,t=(t=i.item.disable.filter(function(t){return p.isInteger(t)?e.hour==t:l.isArray(t)||p.isDate(t)?e.pick==i.create(t).pick:l.isPlainObject(t)?i.withinRange(t,e):void 0})).length&&!t.filter(function(t){return l.isArray(t)&&"inverted"==t[2]||l.isPlainObject(t)&&t.inverted}).length;return-1===i.item.enable?!t:t||e.pick<i.item.min.pick||e.pick>i.item.max.pick},i.prototype.shift=function(t,e){var i=this,n=i.item.min.pick,o=i.item.max.pick;for(e=e||i.item.interval;i.disabled(t)&&!((t=i.create(t.pick+=e)).pick<=n||t.pick>=o););return t},i.prototype.scope=function(t){var e=this.item.min.pick,i=this.item.max.pick;return this.create(t.pick>i?i:t.pick<e?e:t)},i.prototype.parse=function(t,n,e){var i,o,s,a,r,l=this,c={};if(!n||"string"!=typeof n)return n;for(a in e&&e.format||((e=e||{}).format=l.settings.format),l.formats.toArray(e.format).map(function(t){var e=l.formats[t],i=e?p.trigger(e,l,[n,c]):t.replace(/^!/,"").length;e&&(e=n.substr(0,i),c[t]=e.match(/^\d+$/)?+e:e),n=n.substr(i)}),c)r=c[a],p.isInteger(r)?a.match(/^(h|hh)$/i)?(i=r,"h"!=a&&"hh"!=a||(i%=12)):"i"==a&&(o=r):a.match(/^a$/i)&&r.match(/^p/i)&&("h"in c||"hh"in c)&&(s=!0);return 60*(s?i+12:i)+o},i.prototype.formats={h:function(t,e){return t?p.digits(t):e.hour%12||12},hh:function(t,e){return t?2:p.lead(e.hour%12||12)},H:function(t,e){return t?p.digits(t):""+e.hour%24},HH:function(t,e){return t?p.digits(t):p.lead(e.hour%24)},i:function(t,e){return t?2:p.lead(e.mins)},a:function(t,e){return t?4:e.time%o<720?"a.m.":"p.m."},A:function(t,e){return t?2:e.time%o<720?"AM":"PM"},toArray:function(t){return t.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(t,e){var i=this;return i.formats.toArray(t).map(function(t){return p.trigger(i.formats[t],i,[0,e])||t.replace(/^!/,"")}).join("")}},i.prototype.isTimeExact=function(t,e){return p.isInteger(t)&&p.isInteger(e)||"boolean"==typeof t&&"boolean"==typeof e?t===e:(p.isDate(t)||l.isArray(t))&&(p.isDate(e)||l.isArray(e))?this.create(t).pick===this.create(e).pick:!(!l.isPlainObject(t)||!l.isPlainObject(e))&&this.isTimeExact(t.from,e.from)&&this.isTimeExact(t.to,e.to)},i.prototype.isTimeOverlap=function(t,e){return p.isInteger(t)&&(p.isDate(e)||l.isArray(e))?t===this.create(e).hour:p.isInteger(e)&&(p.isDate(t)||l.isArray(t))?e===this.create(t).hour:!(!l.isPlainObject(t)||!l.isPlainObject(e))&&this.overlapRanges(t,e)},i.prototype.flipEnable=function(t){var e=this.item;e.enable=t||(-1==e.enable?1:-1)},i.prototype.deactivate=function(t,e){var n=this,o=n.item.disable.slice(0);return"flip"==e?n.flipEnable():!1===e?(n.flipEnable(1),o=[]):!0===e?(n.flipEnable(-1),o=[]):e.map(function(t){for(var e,i=0;i<o.length;i+=1)if(n.isTimeExact(t,o[i])){e=!0;break}e||(p.isInteger(t)||p.isDate(t)||l.isArray(t)||l.isPlainObject(t)&&t.from&&t.to)&&o.push(t)}),o},i.prototype.activate=function(t,e){var s=this,a=s.item.disable,r=a.length;return"flip"==e?s.flipEnable():!0===e?(s.flipEnable(1),a=[]):!1===e?(s.flipEnable(-1),a=[]):e.map(function(t){for(var e,i,n,o=0;o<r;o+=1){if(i=a[o],s.isTimeExact(i,t)){n=!(e=a[o]=null);break}if(s.isTimeOverlap(i,t)){l.isPlainObject(t)?(t.inverted=!0,e=t):l.isArray(t)?(e=t)[2]||e.push("inverted"):p.isDate(t)&&(e=[t.getFullYear(),t.getMonth(),t.getDate(),"inverted"]);break}}if(e)for(o=0;o<r;o+=1)if(s.isTimeExact(a[o],t)){a[o]=null;break}if(n)for(o=0;o<r;o+=1)if(s.isTimeOverlap(a[o],t)){a[o]=null;break}e&&a.push(e)}),a.filter(function(t){return null!=t})},i.prototype.i=function(t,e){return p.isInteger(e)&&0<e?e:this.item.interval},i.prototype.nodes=function(t){var r=this,l=r.settings,c=r.item.select,h=r.item.highlight,u=r.item.view,d=r.item.disable;return p.node("ul",p.group({min:r.item.min.pick,max:r.item.max.pick,i:r.item.interval,node:"li",item:function(t){var e,i=(t=r.create(t)).pick,n=c&&c.pick==i,o=h&&h.pick==i,s=d&&r.disabled(t),a=p.trigger(r.formats.toString,r,[l.format,t]);return[p.trigger(r.formats.toString,r,[p.trigger(l.formatLabel,r,[t])||l.format,t]),(e=[l.klass.listItem],n&&e.push(l.klass.selected),o&&e.push(l.klass.highlighted),u&&u.pick==i&&e.push(l.klass.viewset),s&&e.push(l.klass.disabled),e.join(" ")),"data-pick="+t.pick+" "+p.ariaAttr({role:"option",label:a,selected:!(!n||r.$node.val()!==a)||null,activedescendant:!!o||null,disabled:!!s||null})]}})+p.node("li",p.node("button",l.clear,l.klass.buttonClear,"type=button data-clear=1"+(t?"":" disabled")+" "+p.ariaAttr({controls:r.$node[0].id})),"",p.ariaAttr({role:"presentation"})),l.klass.list,p.ariaAttr({role:"listbox",controls:r.$node[0].id}))},i.defaults={clear:"Clear",format:"h:i A",interval:30,closeOnSelect:!0,closeOnClear:!0,updateInput:!0,klass:{picker:(e=t.klasses().picker)+" "+e+"--time",holder:e+"__holder",list:e+"__list",listItem:e+"__list-item",disabled:e+"__list-item--disabled",selected:e+"__list-item--selected",highlighted:e+"__list-item--highlighted",viewset:e+"__list-item--viewset",now:e+"__list-item--now",buttonClear:e+"__button--clear"}},t.extend("pickatime",i)}),function(t){define("select2",[],function(){return function(){var o;void 0===(o=jQuery).fn.each2&&o.extend(o.fn,{each2:function(t){for(var e=o([0]),i=-1,n=this.length;++i<n&&(e.context=e[0]=this[i])&&!1!==t.call(e[0],i,e););return this}}),function(v,y){"use strict";var t,e,i,b,o,r,g,c,n,s,a;function l(t){var e=v(document.createTextNode(""));t.before(e),e.before(t),e.remove()}function h(t){return t.replace(/[^\u0000-\u007E]/g,function(t){return n[t]||t})}function u(t,e){for(var i=0,n=e.length;i<n;i+=1)if(d(t,e[i]))return i;return-1}function d(t,e){return t===e||t!==y&&e!==y&&null!==t&&null!==e&&(t.constructor===String?t+""==e+"":e.constructor===String&&e+""==t+"")}function p(t,e,i){var n,o,s;if(null===t||t.length<1)return[];for(o=0,s=(n=t.split(e)).length;o<s;o+=1)n[o]=i(n[o]);return n}function f(t){return t.outerWidth(!1)-t.width()}function m(e){var i="keyup-change-value";e.on("keydown",function(){v.data(e,i)===y&&v.data(e,i,e.val())}),e.on("keyup",function(){var t=v.data(e,i);t!==y&&e.val()!==t&&(v.removeData(e,i),e.trigger("keyup-change"))})}function w(e,i,n){var o;return n=n||y,function(){var t=arguments;window.clearTimeout(o),o=window.setTimeout(function(){i.apply(n,t)},e)}}function x(t){t.preventDefault(),t.stopPropagation()}function k(t,e,i){var n,o=[],s=v.trim(t.attr("class"));s&&v((s=""+s).split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&o.push(this)}),(s=v.trim(e.attr("class")))&&v((s=""+s).split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(n=i(this))&&o.push(n)}),t.attr("class",o.join(" "))}function S(t,e,i,n){var o=h(t.toUpperCase()).indexOf(h(e.toUpperCase())),e=e.length;o<0?i.push(n(t)):(i.push(n(t.substring(0,o))),i.push("<span class='select2-match'>"),i.push(n(t.substring(o,o+e))),i.push("</span>"),i.push(n(t.substring(o+e,t.length))))}function C(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})}function T(s){var t,a=null,e=s.quietMillis||100,r=s.url,l=this;return function(o){window.clearTimeout(t),t=window.setTimeout(function(){var t=s.data,e=r,i=s.transport||v.fn.select2.ajaxDefaults.transport,n={type:s.type||"GET",cache:s.cache||!1,jsonpCallback:s.jsonpCallback||y,dataType:s.dataType||"json"},n=v.extend({},v.fn.select2.ajaxDefaults.params,n),t=t?t.call(l,o.term,o.page,o.context):null,e="function"==typeof e?e.call(l,o.term,o.page,o.context):e;a&&"function"==typeof a.abort&&a.abort(),s.params&&(v.isFunction(s.params)?v.extend(n,s.params.call(l)):v.extend(n,s.params)),v.extend(n,{url:e,dataType:s.dataType,data:t,success:function(t){t=s.results(t,o.page,o);o.callback(t)},error:function(t,e,i){o.callback({hasError:!0,jqXHR:t,textStatus:e,errorThrown:i})}}),a=i.call(l,n)},e)}}function $(t){var e,i,n=t,r=function(t){return""+t.text},t=(v.isArray(n)&&(n={results:i=n}),!1===v.isFunction(n)&&(i=n,n=function(){return i}),n());return t.text&&(r=t.text,v.isFunction(r)||(e=t.text,r=function(t){return t[e]})),function(o){var s,a=o.term,i={results:[]};""===a?o.callback(n()):(s=function(t,e){var i,n;if((t=t[0]).children){for(n in i={},t)t.hasOwnProperty(n)&&(i[n]=t[n]);i.children=[],v(t.children).each2(function(t,e){s(e,i.children)}),(i.children.length||o.matcher(a,r(i),t))&&e.push(i)}else o.matcher(a,r(t),t)&&e.push(t)},v(n().results).each2(function(t,e){s(e,i.results)}),o.callback(i))}}function E(e){var s=v.isFunction(e);return function(i){var n=i.term,o={results:[]},t=s?e(i):e;v.isArray(t)&&(v(t).each(function(){var t=this.text!==y,e=t?this.text:this;""!==n&&!i.matcher(n,e)||o.results.push(t?this:{id:this,text:this})}),i.callback(o))}}function O(t,e){if(v.isFunction(t))return 1;if(t){if("string"==typeof t)return 1;throw new Error(e+" must be a string, function, or falsy value")}}function _(t,e){var i;return v.isFunction(t)?(i=Array.prototype.slice.call(arguments,2),t.apply(e,i)):t}function A(){var i=this;v.each(arguments,function(t,e){i[e].remove(),i[e]=null})}function D(t,e){function i(){}return((i.prototype=new t).constructor=i).prototype.parent=t.prototype,i.prototype=v.extend(i.prototype,e),i}window.Select2===y&&(r={x:0,y:0},c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which||t){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return!0}return!1},isControl:function(t){switch(t.which){case c.SHIFT:case c.CTRL:case c.ALT:return!0}return!!t.metaKey},isFunctionKey:function(t){return 112<=(t=t.which||t)&&t<=123}},n={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"},a=v(document),s=1,b=function(){return s++},t=D(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(t){var s,e,i,n,o=".select2-results",a=(this.opts=t=this.prepareOpts(t),this.id=t.id,t.element.data("select2")!==y&&null!==t.element.data("select2")&&t.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=v(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=v("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(t.element.attr("id")||"autogen"+b()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",t.element.attr("title")),this.body=v(document.body),k(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",t.element.attr("style")),this.container.css(_(t.containerCss,this.opts.element)),this.container.addClass(_(t.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",x),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),k(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(_(t.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",x),this.results=s=this.container.find(o),this.search=e=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",x),this.results.on("mousemove",function(t){var e=r;e!==y&&e.x===t.pageX&&e.y===t.pageY||v(t.target).trigger("mousemove-filtered",t)}),this.dropdown.on("mousemove-filtered",o,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",o,this.bind(function(t){this._touchEvent=!0,this.highlightUnderEvent(t)})),this.dropdown.on("touchmove",o,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",o,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(t){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),a=80,i=this.results,n=w(a,function(t){i.trigger("scroll-debounced",t)}),i.on("scroll",function(t){0<=u(t.target,i.get())&&n(t)}),this.dropdown.on("scroll-debounced",o,this.bind(this.loadMoreIfNeeded)),v(this.container).on("change",".select2-input",function(t){t.stopPropagation()}),v(this.dropdown).on("change",".select2-input",function(t){t.stopPropagation()}),v.fn.mousewheel&&s.mousewheel(function(t,e,i,n){var o=s.scrollTop();0<n&&o-n<=0?(s.scrollTop(0),x(t)):n<0&&s.get(0).scrollHeight-s.scrollTop()+n<=s.height()&&(s.scrollTop(s.get(0).scrollHeight-s.height()),x(t))}),m(e),e.on("keyup-change input paste",this.bind(this.updateResults)),e.on("focus",function(){e.addClass("select2-focused")}),e.on("blur",function(){e.removeClass("select2-focused")}),this.dropdown.on("mouseup",o,this.bind(function(t){0<v(t.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(t){t.stopPropagation()}),this.lastSearchTerm=y,v.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==t.maximumInputLength&&this.search.attr("maxlength",t.maximumInputLength),t.element.prop("disabled")),o=(this.enable(!(a=a===y?!1:a)),t.element.prop("readonly"));this.readonly(o=o===y?!1:o),g=g||((a=v("<div class='select2-measure-scrollbar'></div>")).appendTo(document.body),o={width:a.width()-a[0].clientWidth,height:a.height()-a[0].clientHeight},a.remove(),o),this.autofocus=t.element.prop("autofocus"),t.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",t.searchInputPlaceholder)},destroy:function(){var t=this.opts.element,e=t.data("select2"),i=this;this.close(),t.length&&t[0].detachEvent&&i._sync&&t.each(function(){i._sync&&this.detachEvent("onpropertychange",i._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,e!==y&&(e.container.remove(),e.liveRegion.remove(),e.dropdown.remove(),t.removeData("select2").off(".select2"),t.is("input[type='hidden']")?t.css("display",""):(t.show().prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.show())),A.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(t){return t.is("option")?{id:t.prop("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:t.prop("disabled"),locked:d(t.attr("locked"),"locked")||d(t.data("locked"),!0)}:t.is("optgroup")?{text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")}:void 0},prepareOpts:function(m){var t,e,i,g=this,a=m.element;if("select"===a.get(0).tagName.toLowerCase()&&(this.select=t=m.element),t&&v.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in m)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),m.debug=m.debug||v.fn.select2.defaults.debug,m.debug&&console&&console.warn&&(null!=m.id&&console.warn("Select2: The `id` option has been removed in Select2 4.0.0, consider renaming your `id` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=m.text&&console.warn("Select2: The `text` option has been removed in Select2 4.0.0, consider renaming your `text` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=m.sortResults&&console.warn("Select2: the `sortResults` option has been renamed to `sorter` in Select2 4.0.0. "),null!=m.selectOnBlur&&console.warn("Select2: The `selectOnBlur` option has been renamed to `selectOnClose` in Select2 4.0.0."),null!=m.ajax&&null!=m.ajax.results&&console.warn("Select2: The `ajax.results` option has been renamed to `ajax.processResults` in Select2 4.0.0."),null!=m.formatNoResults&&console.warn("Select2: The `formatNoResults` option has been renamed to `language.noResults` in Select2 4.0.0."),null!=m.formatSearching&&console.warn("Select2: The `formatSearching` option has been renamed to `language.searching` in Select2 4.0.0."),null!=m.formatInputTooShort&&console.warn("Select2: The `formatInputTooShort` option has been renamed to `language.inputTooShort` in Select2 4.0.0."),null!=m.formatInputTooLong&&console.warn("Select2: The `formatInputTooLong` option has been renamed to `language.inputTooLong` in Select2 4.0.0."),null!=m.formatLoading&&console.warn("Select2: The `formatLoading` option has been renamed to `language.loadingMore` in Select2 4.0.0."),null!=m.formatSelectionTooBig&&console.warn("Select2: The `formatSelectionTooBig` option has been renamed to `language.maximumSelected` in Select2 4.0.0."),m.element.data("select2Tags"))&&console.warn("Select2: The `data-select2-tags` attribute has been renamed to `data-tags` in Select2 4.0.0."),null!=m.element.data("tags")&&(i=m.element.data("tags"),v.isArray(i)||(i=[]),m.element.data("select2Tags",i)),null!=m.sorter&&(m.sortResults=m.sorter),null!=m.selectOnClose&&(m.selectOnBlur=m.selectOnClose),null!=m.ajax&&v.isFunction(m.ajax.processResults)&&(m.ajax.results=m.ajax.processResults),null!=m.language&&(i=m.language,v.isFunction(i.noMatches)&&(m.formatNoMatches=i.noMatches),v.isFunction(i.searching)&&(m.formatSearching=i.searching),v.isFunction(i.inputTooShort)&&(m.formatInputTooShort=i.inputTooShort),v.isFunction(i.inputTooLong)&&(m.formatInputTooLong=i.inputTooLong),v.isFunction(i.loadingMore)&&(m.formatLoading=i.loadingMore),v.isFunction(i.maximumSelected))&&(m.formatSelectionTooBig=i.maximumSelected),"function"!=typeof(m=v.extend({},{populateResults:function(t,e,u){var d=this.opts.id,p=this.liveRegion,f=function(t,e,i){for(var n,o,s,a,r,l=[],c=0,h=(t=m.sortResults(t,e,u)).length;c<h;c+=1)a=!(r=!0===(n=t[c]).disabled)&&d(n)!==y,o=n.children&&0<n.children.length,(s=v("<li></li>")).addClass("select2-results-dept-"+i),s.addClass("select2-result"),s.addClass(a?"select2-result-selectable":"select2-result-unselectable"),r&&s.addClass("select2-disabled"),o&&s.addClass("select2-result-with-children"),s.addClass(g.opts.formatResultCssClass(n)),s.attr("role","presentation"),(a=v(document.createElement("div"))).addClass("select2-result-label"),a.attr("id","select2-result-label-"+b()),a.attr("role","option"),(r=m.formatResult(n,a,u,g.opts.escapeMarkup))!==y&&(a.html(r),s.append(a)),o&&((r=v("<ul></ul>")).addClass("select2-result-sub"),f(n.children,r,i+1),s.append(r)),s.data("select2-data",n),l.push(s[0]);e.append(l),p.text(m.formatMatches(t.length))};f(e,t,0)}},v.fn.select2.defaults,m)).id&&(e=m.id,m.id=function(t){return t[e]}),v.isArray(m.element.data("select2Tags"))){if("tags"in m)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+m.element.attr("id");m.tags=m.element.data("select2Tags")}if(t?(m.query=this.bind(function(n){var t,i={results:[],more:!1},o=n.term,s=function(t,e){var i;t.is("option")?n.matcher(o,t.text(),t)&&e.push(g.optionToData(t)):t.is("optgroup")&&(i=g.optionToData(t),t.children().each2(function(t,e){s(e,i.children)}),0<i.children.length)&&e.push(i)},e=a.children();(e=this.getPlaceholder()!==y&&0<e.length&&(t=this.getPlaceholderOption())?e.not(t):e).each2(function(t,e){s(e,i.results)}),n.callback(i)}),m.id=function(t){return t.id}):"query"in m||("ajax"in m?((i=m.element.data("ajax-url"))&&0<i.length&&(m.ajax.url=i),m.query=T.call(m.element,m.ajax)):"data"in m?m.query=$(m.data):"tags"in m&&(m.query=E(m.tags),m.createSearchChoice===y&&(m.createSearchChoice=function(t){return{id:v.trim(t),text:v.trim(t)}}),m.initSelection===y)&&(m.initSelection=function(t,e){var i=[];v(p(t.val(),m.separator,m.transformVal)).each(function(){var t={id:this,text:this},e=m.tags;v.isFunction(e)&&(e=e()),v(e).each(function(){if(d(this.id,t.id))return t=this,!1}),i.push(t)}),e(i)})),"function"!=typeof m.query)throw"query function not defined for Select2 "+m.element.attr("id");if("top"===m.createSearchChoicePosition)m.createSearchChoicePosition=function(t,e){t.unshift(e)};else if("bottom"===m.createSearchChoicePosition)m.createSearchChoicePosition=function(t,e){t.push(e)};else if("function"!=typeof m.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return m},monitorSource:function(){var t,e=this.opts.element,i=this;e.on("change.select2",this.bind(function(t){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),this._sync=this.bind(function(){var t=e.prop("disabled"),t=(this.enable(!(t=t===y?!1:t)),e.prop("readonly"));this.readonly(t=t===y?!1:t),this.container&&(k(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(_(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(k(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(_(this.opts.dropdownCssClass,this.opts.element)))}),e.length&&e[0].attachEvent&&e.each(function(){this.attachEvent("onpropertychange",i._sync)}),(t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==y&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new t(function(t){v.each(t,i._sync)}),this.propertyObserver.observe(e.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){t=v.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(t),!t.isDefaultPrevented()},triggerChange:function(t){t=v.extend({},t=t||{},{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var t=this._enabled&&!this._readonly;return t!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",!t),this.close(),this.enabledInterface=t,!0)},enable:function(t){this._enabled!==(t=t===y||t)&&(this._enabled=t,this.opts.element.prop("disabled",!t),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(t){this._readonly!==(t=t!==y&&t)&&(this._readonly=t,this.opts.element.prop("readonly",t),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,e,i=this.dropdown,n=this.container,o=n.offset(),s=n.outerHeight(!1),a=n.outerWidth(!1),r=i.outerHeight(!1),l=v(window),c=l.width(),h=l.height(),u=l.scrollLeft()+c,h=l.scrollTop()+h,d=o.top+s,p=o.left,h=d+r<=h,f=o.top-r>=l.scrollTop(),m=i.outerWidth(!1);i.hasClass("select2-drop-above")?(t=!0,!f&&h&&(t=!(e=!0))):(t=!1,!h&&f&&(t=e=!0)),e&&(i.hide(),o=this.container.offset(),s=this.container.outerHeight(!1),a=this.container.outerWidth(!1),r=i.outerHeight(!1),u=l.scrollLeft()+c,l.scrollTop(),d=o.top+s,p=o.left,m=i.outerWidth(!1),i.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(h=v(".select2-results",i)[0],i.addClass("select2-drop-auto-width"),i.css("width",""),a<(m=i.outerWidth(!1)+(h.scrollHeight===h.clientHeight?0:g.width))?a=m:m=a,r=i.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(d-=(f=this.body.offset()).top,p-=f.left),e={left:p=!(p+m<=u)&&o.left+u+n.outerWidth(!1)>m?o.left+this.container.outerWidth(!1)-m:p,width:a},t?(this.container.addClass("select2-drop-above"),i.addClass("select2-drop-above"),r=i.outerHeight(!1),e.top=o.top-r,e.bottom="auto"):(e.top=d,e.bottom="auto",this.container.removeClass("select2-drop-above"),i.removeClass("select2-drop-above")),e=v.extend(e,_(this.opts.dropdownCss,this.opts.element)),i.css(e)},shouldOpen:function(){var t;return!this.opened()&&!1!==this._enabled&&!0!==this._readonly&&(t=v.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),a.on("mousemove.select2Event",function(t){r.x=t.pageX,r.y=t.pageY}),!0)},opening:function(){var i,t=this.containerEventName,e="scroll."+t,n="resize."+t,o="orientationchange."+t,s=(this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0===(i=v("#select2-drop-mask")).length&&((i=v(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),i.hide(),i.appendTo(this.body),i.on("mousedown touchstart click",function(t){l(i);var e=v("#select2-drop");0<e.length&&((e=e.data("select2")).opts.selectOnBlur&&e.selectHighlighted({noFocus:!0}),e.close(),t.preventDefault(),t.stopPropagation())})),this.dropdown.prev()[0]!==i[0]&&this.dropdown.before(i),v("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),i.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this);this.container.parents().add(window).each(function(){v(this).on(n+" "+e+" "+o,function(t){s.opened()&&s.positionDropdown()})})},close:function(){var t,e,i,n;this.opened()&&(t=this.containerEventName,e="scroll."+t,i="resize."+t,n="orientationchange."+t,this.container.parents().add(window).each(function(){v(this).off(e).off(i).off(n)}),this.clearDropdownAlignmentPreference(),v("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),a.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.search.removeAttr("aria-activedescendant"),this.opts.element.trigger(v.Event("select2-close")))},externalSearch:function(t){this.open(),this.search.val(t),this.updateResults(!1)},clearSearch:function(){},prefillNextSearchTerm:function(){var t;return""===this.search.val()&&(t=this.opts.nextSearchTerm(this.data(),this.lastSearchTerm))!==y&&(this.search.val(t),this.search.select(),!0)},getMaximumSelectionSize:function(){return _(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t,e,i,n,o=this.results,s=this.highlight();s<0||(0==s?o.scrollTop(0):(i=this.findHighlightableChoices().find(".select2-result-label"),e=(n=((t=v(i[s])).offset()||{}).top||0)+t.outerHeight(!0),s===i.length-1&&0<(s=o.find("li.select2-more-results")).length&&(e=s.offset().top+s.outerHeight(!0)),(i=o.offset().top+o.outerHeight(!1))<e&&o.scrollTop(o.scrollTop()+(e-i)),(s=n-o.offset().top)<0&&"none"!=t.css("display")&&o.scrollTop(o.scrollTop()+s)))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var e=this.findHighlightableChoices(),i=this.highlight();-1<i&&i<e.length;){var n=v(e[i+=t]);if(n.hasClass("select2-result-selectable")&&!n.hasClass("select2-disabled")&&!n.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(t){var e=this.findHighlightableChoices();if(0===arguments.length)return u(e.filter(".select2-highlighted")[0],e.get());(t=t>=e.length?e.length-1:t)<0&&(t=0),this.removeHighlight(),(e=v(e[t])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",e.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(e.text()),(t=e.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(t),choice:t})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var e,t=v(t.target).closest(".select2-result-selectable");0<t.length&&!t.is(".select2-highlighted")?(e=this.findHighlightableChoices(),this.highlight(e.index(t))):0==t.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,i=e.find("li.select2-more-results"),n=this.resultsPage+1,o=this,s=this.search.val(),a=this.context;0!==i.length&&i.offset().top-e.offset().top-e.height()<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:s,page:n,context:a,matcher:this.opts.matcher,callback:this.bind(function(t){o.opened()&&(o.opts.populateResults.call(this,e,t.results,{term:s,page:n,context:a}),o.postprocessResults(t,!1,!1),!0===t.more?(i.detach().appendTo(e).html(o.opts.escapeMarkup(_(o.opts.formatLoadMore,o.opts.element,n+1))),window.setTimeout(function(){o.loadMoreIfNeeded()},10)):i.remove(),o.positionDropdown(),o.resultsPage=n,o.context=t.context,this.opts.element.trigger({type:"select2-loaded",items:t}))})}))},tokenize:function(){},updateResults:function(i){var n,o=this.search,s=this.results,a=this.opts,r=this,t=o.val(),e=v.data(this.container,"select2-last-term");function l(){o.removeClass("select2-active"),r.positionDropdown(),s.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?r.liveRegion.text(s.text()):r.liveRegion.text(r.opts.formatMatches(s.find('.select2-result-selectable:not(".select2-selected")').length))}function c(t){s.html(t),l()}!0!==i&&e&&d(t,e)||(v.data(this.container,"select2-last-term",t),(!0===i||!1!==this.showSearchInput&&this.opened())&&(n=++this.queryCount,1<=(e=this.getMaximumSelectionSize())&&(t=this.data(),v.isArray(t))&&t.length>=e&&O(a.formatSelectionTooBig,"formatSelectionTooBig")?c("<li class='select2-selection-limit'>"+_(a.formatSelectionTooBig,a.element,e)+"</li>"):o.val().length<a.minimumInputLength?(O(a.formatInputTooShort,"formatInputTooShort")?c("<li class='select2-no-results'>"+_(a.formatInputTooShort,a.element,o.val(),a.minimumInputLength)+"</li>"):c(""),i&&this.showSearch&&this.showSearch(!0)):a.maximumInputLength&&o.val().length>a.maximumInputLength?O(a.formatInputTooLong,"formatInputTooLong")?c("<li class='select2-no-results'>"+_(a.formatInputTooLong,a.element,o.val(),a.maximumInputLength)+"</li>"):c(""):(a.formatSearching&&0===this.findHighlightableChoices().length&&c("<li class='select2-searching'>"+_(a.formatSearching,a.element)+"</li>"),o.addClass("select2-active"),this.removeHighlight(),(t=this.tokenize())!=y&&null!=t&&o.val(t),this.resultsPage=1,a.query({element:a.element,term:o.val(),page:this.resultsPage,context:null,matcher:a.matcher,callback:this.bind(function(t){var e;n==this.queryCount&&(this.opened()?t.hasError!==y&&O(a.formatAjaxError,"formatAjaxError")?c("<li class='select2-ajax-error'>"+_(a.formatAjaxError,a.element,t.jqXHR,t.textStatus,t.errorThrown)+"</li>"):(this.context=t.context===y?null:t.context,this.opts.createSearchChoice&&""!==o.val()&&(e=this.opts.createSearchChoice.call(r,o.val(),t.results))!==y&&null!==e&&r.id(e)!==y&&null!==r.id(e)&&0===v(t.results).filter(function(){return d(r.id(this),r.id(e))}).length&&this.opts.createSearchChoicePosition(t.results,e),0===t.results.length&&O(a.formatNoMatches,"formatNoMatches")?(c("<li class='select2-no-results'>"+_(a.formatNoMatches,a.element,o.val())+"</li>"),this.showSearch&&this.showSearch(o.val())):(s.empty(),r.opts.populateResults.call(this,s,t.results,{term:o.val(),page:this.resultsPage,context:null}),!0===t.more&&O(a.formatLoadMore,"formatLoadMore")&&(s.append("<li class='select2-more-results'>"+a.escapeMarkup(_(a.formatLoadMore,a.element,this.resultsPage))+"</li>"),window.setTimeout(function(){r.loadMoreIfNeeded()},10)),this.postprocessResults(t,i),l(),this.opts.element.trigger({type:"select2-loaded",items:t}))):this.search.removeClass("select2-active"))})}))))},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var i;(i=this.search)[0]!==document.activeElement&&window.setTimeout(function(){var t=i[0],e=i.val().length;i.focus(),(0<t.offsetWidth||0<t.offsetHeight)&&t===document.activeElement&&(t.setSelectionRange?t.setSelectionRange(e,e):t.createTextRange&&((e=t.createTextRange()).collapse(!1),e.select()))},0)},selectHighlighted:function(t){var e,i;this._touchMoved?this.clearTouchMoved():(e=this.highlight(),(i=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data"))?(this.highlight(e),this.onSelect(i,t)):t&&t.noFocus&&this.close())},getPlaceholder:function(){var t;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((t=this.getPlaceholderOption())!==y?t.text():y)},getPlaceholderOption:function(){var t;if(this.select)return t=this.select.children("option").first(),this.opts.placeholderOption!==y?"first"===this.opts.placeholderOption&&t||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select):""===v.trim(t.text())&&""===t.val()?t:void 0},initContainerWidth:function(){var t=function(){var t,e,i,n,o;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"!==this.opts.width&&"resolve"!==this.opts.width)return v.isFunction(this.opts.width)?this.opts.width():this.opts.width;if("string"==typeof(t=this.opts.element.attr("style")))for(n=0,o=(e=t.split(";")).length;n<o;n+=1)if(null!==(i=e[n].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&1<=i.length)return i[1];return"resolve"===this.opts.width?0<(t=this.opts.element.css("width")).indexOf("%")?t:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}.call(this);null!==t&&this.container.css("width",t)}}),e=D(t,{createContainer:function(){return v(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var t,e;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(t=this.search.get(0)).createTextRange?((e=t.createTextRange()).collapse(!1),e.select()):t.setSelectionRange&&(e=this.search.val().length,t.setSelectionRange(e,e))),this.prefillNextSearchTerm(),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(v.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this))&&this.focusser.focus()},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){v("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),A.call(this,"selection","focusser")},initContainer:function(){var e,t=this.container,i=this.dropdown,n=b(),n=(this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=e=t.find(".select2-choice"),this.focusser=t.find(".select2-focusser"),e.find(".select2-chosen").attr("id","select2-chosen-"+n),this.focusser.attr("aria-labelledby","select2-chosen-"+n),this.results.attr("id","select2-results-"+n),this.search.attr("aria-owns","select2-results-"+n),this.focusser.attr("id","s2id_autogen"+n),t=v("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.focusser.prev().text(t.text()).attr("for",this.focusser.attr("id")),this.opts.element.attr("title"));this.opts.element.attr("title",n||t.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(v("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&229!=t.keyCode)if(t.which===c.PAGE_UP||t.which===c.PAGE_DOWN)x(t);else switch(t.which){case c.UP:case c.DOWN:return this.moveHighlight(t.which===c.UP?-1:1),void x(t);case c.ENTER:return this.selectHighlighted(),void x(t);case c.TAB:return void this.selectHighlighted({noFocus:!0});case c.ESC:return this.cancel(t),void x(t)}})),this.search.on("blur",this.bind(function(t){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.results&&1<this.results.length&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&t.which!==c.TAB&&!c.isControl(t)&&!c.isFunctionKey(t)&&t.which!==c.ESC){if(!1!==this.opts.openOnEnter||t.which!==c.ENTER)return t.which==c.DOWN||t.which==c.UP||t.which==c.ENTER&&this.opts.openOnEnter?t.altKey||t.ctrlKey||t.shiftKey||t.metaKey?void 0:(this.open(),void x(t)):void(t.which!=c.DELETE&&t.which!=c.BACKSPACE||(this.opts.allowClear&&this.clear(),x(t)));x(t)}})),m(this.focusser),this.focusser.on("keyup-change input",this.bind(function(t){0<=this.opts.minimumResultsForSearch&&(t.stopPropagation(),this.opened()||this.open())})),e.on("mousedown touchstart","abbr",this.bind(function(t){this.isInterfaceEnabled()&&(this.clear(),(t=t).preventDefault(),t.stopImmediatePropagation(),this.close(),this.selection)&&this.selection.focus()})),e.on("mousedown touchstart",this.bind(function(t){l(e),this.container.hasClass("select2-container-active")||this.opts.element.trigger(v.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),x(t)})),i.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),e.on("focus",this.bind(function(t){x(t)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(v.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(v.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(v.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(t){var e,i=this.selection.data("select2-data");i&&(e=v.Event("select2-clearing"),this.opts.element.trigger(e),e.isDefaultPrevented()||(e=this.getPlaceholderOption(),this.opts.element.val(e?e.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==t&&(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))))},initSelection:function(){var e;this.isPlaceholderOptionSelected()?(this.updateSelection(null),this.close(),this.setPlaceholder()):(e=this).opts.initSelection.call(null,this.opts.element,function(t){t!==y&&null!==t&&(e.updateSelection(t),e.close(),e.setPlaceholder(),e.lastSearchTerm=e.search.val())})},isPlaceholderOptionSelected:function(){var t;return this.getPlaceholder()!==y&&((t=this.getPlaceholderOption())!==y&&t.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===y||null===this.opts.element.val())},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(t,e){t=t.find("option").filter(function(){return this.selected&&!this.disabled});e(i.optionToData(t))}:"data"in a&&(a.initSelection=a.initSelection||function(t,e){var o=t.val(),s=null;a.query({matcher:function(t,e,i){var n=d(o,a.id(i));return n&&(s=i),n},callback:v.isFunction(e)?function(){e(s)}:v.noop})}),a},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===y?y:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();!this.isPlaceholderOptionSelected()||t===y||this.select&&this.getPlaceholderOption()===y||(this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear"))},postprocessResults:function(t,e,i){var n=0,o=this;this.findHighlightableChoices().each2(function(t,e){if(d(o.id(e.data("select2-data")),o.opts.element.val()))return n=t,!1}),!1!==i&&(!0===e&&0<=n?this.highlight(n):this.highlight(0)),!0===e&&0<=(i=this.opts.minimumResultsForSearch)&&this.showSearch(function i(t){var n=0;return v.each(t,function(t,e){e.children?n+=i(e.children):n++}),n}(t.results)>=i)},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),v(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(t,e){var i,n;this.triggerSelect(t)&&(i=this.opts.element.val(),n=this.data(),this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"select2-selected",val:this.id(t),choice:t}),this.lastSearchTerm=this.search.val(),this.close(),e&&e.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),d(i,this.id(t))||this.triggerChange({added:t,removed:n}))},updateSelection:function(t){var e,i=this.selection.find(".select2-chosen");this.selection.data("select2-data",t),i.empty(),(e=null!==t?this.opts.formatSelection(t,i,this.opts.escapeMarkup):e)!==y&&i.append(e),(e=this.opts.formatSelectionCssClass(t,i))!==y&&i.addClass(e),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==y&&this.container.addClass("select2-allowclear")},val:function(){var t,e=!1,i=null,n=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],1<arguments.length&&(e=arguments[1],this.opts.debug)&&console&&console.warn&&console.warn('Select2: The second option to `select2("val")` is not supported in Select2 4.0.0. The `change` event will always be triggered in 4.0.0.'),this.select)this.opts.debug&&console&&console.warn&&console.warn('Select2: Setting the value on a <select> using `select2("val")` is no longer supported in 4.0.0. You can use the `.val(newValue).trigger("change")` method provided by jQuery instead.'),this.select.val(t).find("option").filter(function(){return this.selected}).each2(function(t,e){return i=n.optionToData(e),!1}),this.updateSelection(i),this.setPlaceholder(),e&&this.triggerChange({added:i,removed:o});else if(t||0===t){if(this.opts.initSelection===y)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(t),this.opts.initSelection(this.opts.element,function(t){n.opts.element.val(t?n.id(t):""),n.updateSelection(t),n.setPlaceholder(),e&&n.triggerChange({added:t,removed:o})})}else this.clear(e)},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t){var e,i=!1;if(0===arguments.length)return e=(e=this.selection.data("select2-data"))==y?null:e;this.opts.debug&&console&&console.warn&&console.warn('Select2: The `select2("data")` method can no longer set selected values in 4.0.0, consider using the `.val()` method instead.'),1<arguments.length&&(i=arguments[1]),t?(e=this.data(),this.opts.element.val(t?this.id(t):""),this.updateSelection(t),i&&this.triggerChange({added:t,removed:e})):this.clear(i)}}),i=D(t,{createContainer:function(){return v(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var l=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===l.element.get(0).tagName.toLowerCase()?l.initSelection=function(t,e){var i=[];t.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(t,e){i.push(n.optionToData(e))}),e(i)}:"data"in l&&(l.initSelection=l.initSelection||function(t,s){var a=p(t.val(),l.separator,l.transformVal),r=[];l.query({matcher:function(t,e,i){var n=v.grep(a,function(t){return d(t,l.id(i))}).length;return n&&r.push(i),n},callback:v.isFunction(s)?function(){for(var t=[],e=0;e<a.length;e++)for(var i=a[e],n=0;n<r.length;n++){var o=r[n];if(d(i,l.id(o))){t.push(o),r.splice(n,1);break}}s(t)}:v.noop})}),l},selectChoice:function(t){var e=this.container.find(".select2-search-choice-focus");e.length&&t&&t[0]==e[0]||(e.length&&this.opts.element.trigger("choice-deselected",e),e.removeClass("select2-search-choice-focus"),t&&t.length&&(this.close(),t.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",t)))},destroy:function(){v("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),A.call(this,"searchContainer","selection")},initContainer:function(){var l,t=".select2-choices",e=(this.searchContainer=this.container.find(".select2-search-field"),this.selection=l=this.container.find(t),this);this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(t){e.search[0].focus(),e.selectChoice(v(this))}),this.search.attr("id","s2id_autogen"+b()),this.search.prev().text(v("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||!this.isInterfaceEnabled()||this.opened()||this.open()})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()){++this.keydowns;var e,i,n,o=l.find(".select2-search-choice-focus"),s=o.prev(".select2-search-choice:not(.select2-locked)"),a=o.next(".select2-search-choice:not(.select2-locked)"),r=(r=this.search,i=e=0,"selectionStart"in(r=v(r)[0])?(e=r.selectionStart,i=r.selectionEnd-e):"selection"in document&&(r.focus(),n=document.selection.createRange(),i=document.selection.createRange().text.length,n.moveStart("character",-r.value.length),e=n.text.length-i),{offset:e,length:i});if(!o.length||t.which!=c.LEFT&&t.which!=c.RIGHT&&t.which!=c.BACKSPACE&&t.which!=c.DELETE&&t.which!=c.ENTER)if((t.which!==c.BACKSPACE||1!=this.keydowns)&&t.which!=c.LEFT||0!=r.offset||r.length){if(this.selectChoice(null),this.opened())switch(t.which){case c.UP:case c.DOWN:return this.moveHighlight(t.which===c.UP?-1:1),void x(t);case c.ENTER:return this.selectHighlighted(),void x(t);case c.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case c.ESC:return this.cancel(t),void x(t)}if(t.which!==c.TAB&&!c.isControl(t)&&!c.isFunctionKey(t)&&t.which!==c.BACKSPACE&&t.which!==c.ESC){if(t.which===c.ENTER){if(!1===this.opts.openOnEnter)return;if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return}this.open(),t.which!==c.PAGE_UP&&t.which!==c.PAGE_DOWN||x(t),t.which===c.ENTER&&x(t)}}else this.selectChoice(l.find(".select2-search-choice:not(.select2-locked)").last()),x(t);else n=o,t.which==c.LEFT&&s.length?n=s:t.which==c.RIGHT?n=a.length?a:null:t.which===c.BACKSPACE?this.unselect(o.first())&&(this.search.width(10),n=s.length?s:a):t.which==c.DELETE?this.unselect(o.first())&&(this.search.width(10),n=a.length?a:null):t.which==c.ENTER&&(n=null),this.selectChoice(n),x(t),n&&n.length||this.open()}})),this.search.on("keyup",this.bind(function(t){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(v.Event("select2-blur"))})),this.container.on("click",t,this.bind(function(t){!this.isInterfaceEnabled()||0<v(t.target).closest(".select2-search-choice").length||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(v.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault())})),this.container.on("focus",t,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(v.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){var e;""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),!this.select&&""===this.opts.element.val()||(e=this).opts.initSelection.call(null,this.opts.element,function(t){t!==y&&null!==t&&(e.updateSelection(t),e.close(),e.clearSearch())})},clearSearch:function(){var t=this.getPlaceholder(),e=this.getMaxSearchWidth();t!==y&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(t).addClass("select2-default"),this.search.width(0<e?e:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.prefillNextSearchTerm(),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(v.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var e={},i=[],n=this;v(t).each(function(){n.id(this)in e||(e[n.id(this)]=0,i.push(this))}),this.selection.find(".select2-search-choice").remove(),this.addSelectedChoice(i),n.postprocessResults()},tokenize:function(){var t=this.search.val();null!=(t=this.opts.tokenizer.call(this,t,this.data(),this.bind(this.onSelect),this.opts))&&t!=y&&(this.search.val(t),0<t.length)&&this.open()},onSelect:function(t,e){this.triggerSelect(t)&&""!==t.text&&(this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),this.lastSearchTerm=this.search.val(),this.clearSearch(),this.updateResults(),!this.select&&this.opts.closeOnSelect||this.postprocessResults(t,!1,!0===this.opts.closeOnSelect),!this.opts.closeOnSelect&&0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.prefillNextSearchTerm()&&this.updateResults(),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),e&&e.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(t){var e=this.getVal(),i=this;v(t).each(function(){e.push(i.createChoice(this))}),this.setVal(e)},createChoice:function(t){var e=!t.locked,i=v("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),n=v("<li class='select2-search-choice select2-locked'><div></div></li>"),i=e?i:n,n=this.id(t),o=this.opts.formatSelection(t,i.find("div"),this.opts.escapeMarkup);return o!=y&&i.find("div").replaceWith(v("<div></div>").html(o)),(o=this.opts.formatSelectionCssClass(t,i.find("div")))!=y&&i.addClass(o),e&&i.find(".select2-search-choice-close").on("mousedown",x).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(this.unselect(v(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),x(t),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),i.data("select2-data",t),i.insertBefore(this.searchContainer),n},unselect:function(t){var e,i,n=this.getVal();if(0===(t=t.closest(".select2-search-choice")).length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(e=t.data("select2-data")){var o=v.Event("select2-removing");if(o.val=this.id(e),o.choice=e,this.opts.element.trigger(o),o.isDefaultPrevented())return!1;for(;0<=(i=u(this.id(e),n));)n.splice(i,1),this.setVal(n),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(e),choice:e}),this.triggerChange({removed:e}),!0}},postprocessResults:function(t,e,i){var n=this.getVal(),o=this.results.find(".select2-result"),s=this.results.find(".select2-result-with-children"),a=this;o.each2(function(t,e){0<=u(a.id(e.data("select2-data")),n)&&(e.addClass("select2-selected"),e.find(".select2-result-selectable").addClass("select2-selected"))}),s.each2(function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")}),-1==this.highlight()&&!1!==i&&!0===this.opts.closeOnSelect&&a.highlight(0),!this.opts.createSearchChoice&&0<!o.filter(".select2-result:not(.select2-selected)").length&&(t&&(t.more||0!==this.results.find(".select2-no-results").length)||O(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+_(a.opts.formatNoMatches,a.opts.element,a.search.val())+"</li>"))},getMaxSearchWidth:function(){return this.selection.width()-f(this.search)},resizeSearch:function(){var t,e,i,n=f(this.search);e=this.search,o||(i=e[0].currentStyle||window.getComputedStyle(e[0],null),(o=v(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),v(document.body).append(o)),o.text(e.val()),i=o.width()+10,e=this.search.offset().left,(e=(e=(e=(t=this.selection.width())-(e-this.selection.offset().left)-n)<i?t-n:e)<40?t-n:e)<=0&&(e=i),this.search.width(Math.floor(e))},getVal:function(){var t;return this.select?null===(t=this.select.val())?[]:t:p(t=this.opts.element.val(),this.opts.separator,this.opts.transformVal)},setVal:function(t){var e,i;this.select?this.select.val(t):(e=[],i={},v(t).each(function(){this in i||(e.push(this),i[this]=0)}),this.opts.element.val(0===e.length?"":e.join(this.opts.separator)))},buildChangeDetails:function(t,e){for(var e=e.slice(0),t=t.slice(0),i=0;i<e.length;i++)for(var n=0;n<t.length;n++)if(d(this.opts.id(e[i]),this.opts.id(t[n]))){e.splice(i,1),i--,t.splice(n,1);break}return{added:e,removed:t}},val:function(t,i){var n,o=this;if(0===arguments.length)return this.getVal();if((n=this.data()).length||(n=[]),t||0===t){if(this.setVal(t),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(n,this.data()));else{if(this.opts.initSelection===y)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var e=v.map(t,o.id);o.setVal(e),o.updateSelection(t),o.clearSearch(),i&&o.triggerChange(o.buildChangeDetails(n,o.data()))})}this.clearSearch()}else this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),i&&this.triggerChange({added:this.data(),removed:n})},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],e=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(e.opts.id(v(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,e){var i,n,o=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map(function(){return v(this).data("select2-data")}).get();n=this.data(),i=v.map(t=t||[],function(t){return o.opts.id(t)}),this.setVal(i),this.updateSelection(t),this.clearSearch(),e&&this.triggerChange(this.buildChangeDetails(n,this.data()))}}),v.fn.select2=function(){var t,e,i,n,o=Array.prototype.slice.call(arguments,0),s=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],a=["opened","isFocused","container","dropdown"],r=["val","data"],l={search:"externalSearch"};return this.each(function(){if(0===o.length||"object"==typeof o[0])(e=0===o.length?{}:v.extend({},o[0])).element=v(this),"select"===e.element.get(0).tagName.toLowerCase()?n=e.element.prop("multiple"):(n=e.multiple||!1,"tags"in e&&(e.multiple=n=!0)),(t=new(n?window.Select2.class.multi:window.Select2.class.single)).init(e);else{if("string"!=typeof o[0])throw"Invalid arguments to select2 plugin: "+o;if(u(o[0],s)<0)throw"Unknown method: "+o[0];if(i=y,(t=v(this).data("select2"))!==y)return e=o[0],i="container"===e?t.container:"dropdown"===e?t.dropdown:t[e=l[e]?l[e]:e].apply(t,o.slice(1)),!(0<=u(o[0],a)||0<=u(o[0],r)&&1==o.length)&&void 0}}),i===y?this:i},v.fn.select2.defaults={debug:!1,width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,i,n){var o=[];return S(this.text(t),i.term,o,n),o.join("")},transformVal:function(t){return v.trim(t)},formatSelection:function(t,e,i){return t?i(this.text(t)):y},sortResults:function(t,e,i){return t},formatResultCssClass:function(t){return t.css},formatSelectionCssClass:function(t,e){return y},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t==y?null:t.id},text:function(t){return t&&this.data&&this.data.text?v.isFunction(this.data.text)?this.data.text(t):t[this.data.text]:t.text},matcher:function(t,e){return 0<=h(""+e).toUpperCase().indexOf(h(""+t).toUpperCase())},separator:",",tokenSeparators:[],tokenizer:function(t,e,i,n){var o,s,a,r,l,c=t,h=!1;if(!n.createSearchChoice||!n.tokenSeparators||n.tokenSeparators.length<1)return y;for(;;){for(s=-1,a=0,r=n.tokenSeparators.length;a<r&&(l=n.tokenSeparators[a],!(0<=(s=t.indexOf(l))));a++);if(s<0)break;if(o=t.substring(0,s),t=t.substring(s+l.length),0<o.length&&(o=n.createSearchChoice.call(this,o,e))!==y&&null!==o&&n.id(o)!==y&&null!==n.id(o)){for(h=!1,a=0,r=e.length;a<r;a++)if(d(n.id(o),n.id(e[a]))){h=!0;break}h||i(o)}}return c!==t?t:void 0},escapeMarkup:C,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(t){return null},nextSearchTerm:function(t,e){return y},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(t){return!(("ontouchstart"in window||0<navigator.msMaxTouchPoints)&&t.opts.minimumResultsForSearch<0)}},v.fn.select2.locales=[],v.fn.select2.locales.en={formatMatches:function(t){return 1===t?"One result is available, press enter to select it.":t+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(t,e,i){return"Loading failed"},formatInputTooShort:function(t,e){e-=t.length;return"Please enter "+e+" or more character"+(1==e?"":"s")},formatInputTooLong:function(t,e){t=t.length-e;return"Please delete "+t+" character"+(1==t?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(t){return"Loading more results…"},formatSearching:function(){return"Searching…"}},v.extend(v.fn.select2.defaults,v.fn.select2.locales.en),v.fn.select2.ajaxDefaults={transport:v.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:T,local:$,tags:E},util:{debounce:w,markMatch:S,escapeMarkup:C,stripDiacritics:h},class:{abstract:t,single:e,multi:i}})}(jQuery)}.apply(t,arguments)})}(this),function(t){define("jquery.event.drag",["jquery"],function(){return function(){var d,p,n,f,e,o;(d=jQuery).fn.drag=function(t,e,i){var n="string"==typeof t?t:"",o=d.isFunction(t)?t:d.isFunction(e)?e:null;return 0!==n.indexOf("drag")&&(n="drag"+n),i=(t==o?e:i)||{},o?this.bind(n,i,o):this.trigger(n)},p=d.event,n=p.special,(f=n.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(t){var i=d.data(this,f.datakey),n=t.data||{};i.related+=1,d.each(f.defaults,function(t,e){void 0!==n[t]&&(i[t]=n[t])})},remove:function(){--d.data(this,f.datakey).related},setup:function(){var t;d.data(this,f.datakey)||(t=d.extend({related:0},f.defaults),d.data(this,f.datakey,t),p.add(this,"touchstart mousedown",f.init,t),this.attachEvent&&this.attachEvent("ondragstart",f.dontstart))},teardown:function(){(d.data(this,f.datakey)||{}).related||(d.removeData(this,f.datakey),p.remove(this,"touchstart mousedown",f.init),f.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",f.dontstart))},init:function(t){if(!f.touched){var e,i=t.data;if(!(0!=t.which&&0<i.which&&t.which!=i.which)&&!d(t.target).is(i.not)&&(!i.handle||d(t.target).closest(i.handle,t.currentTarget).length)&&(f.touched="touchstart"==t.type?this:null,i.propagates=1,i.mousedown=this,i.interactions=[f.interaction(this,i)],i.target=t.target,i.pageX=t.pageX,i.pageY=t.pageY,i.dragging=null,e=f.hijack(t,"draginit",i),i.propagates))return(e=f.flatten(e))&&e.length&&(i.interactions=[],d.each(e,function(){i.interactions.push(f.interaction(this,i))})),i.propagates=i.interactions.length,!1!==i.drop&&n.drop&&n.drop.handler(t,i),f.textselect(!1),f.touched?p.add(f.touched,"touchmove touchend",f.handler,i):p.add(document,"mousemove mouseup",f.handler,i),!(!f.touched||i.live)&&void 0}},interaction:function(t,e){e=d(t)[e.relative?"position":"offset"]()||{top:0,left:0};return{drag:t,callback:new f.callback,droppable:[],offset:e}},handler:function(t){var e=t.data;switch(t.type){case!e.dragging&&"touchmove":t.preventDefault();case!e.dragging&&"mousemove":if(Math.pow(t.pageX-e.pageX,2)+Math.pow(t.pageY-e.pageY,2)<Math.pow(e.distance,2))break;t.target=e.target,f.hijack(t,"dragstart",e),e.propagates&&(e.dragging=!0);case"touchmove":t.preventDefault();case"mousemove":if(e.dragging){if(f.hijack(t,"drag",e),e.propagates){!1!==e.drop&&n.drop&&n.drop.handler(t,e);break}t.type="mouseup"}default:f.touched?p.remove(f.touched,"touchmove touchend",f.handler):p.remove(document,"mousemove mouseup",f.handler),e.dragging&&(!1!==e.drop&&n.drop&&n.drop.handler(t,e),f.hijack(t,"dragend",e)),f.textselect(!0),!1===e.click&&e.dragging&&d.data(e.mousedown,"suppress.click",(new Date).getTime()+5),e.dragging=f.touched=!1}},hijack:function(i,n,o,t,e){if(o){var s,a,r,l={event:i.originalEvent,type:i.type},c=n.indexOf("drop")?"drag":"drop",h=t||0,u=isNaN(t)?o.interactions.length:t;i.type=n,i.originalEvent=null,o.results=[];do{if(a=o.interactions[h]){if("dragend"!==n&&a.cancelled)continue;r=f.properties(i,o,a),a.results=[],d(e||a[c]||o.droppable).each(function(t,e){if(r.target=e,!(i.isPropagationStopped=function(){return!1})===(s=e?p.dispatch.call(e,i,r):null)?("drag"==c&&(a.cancelled=!0,--o.propagates),"drop"==n&&(a[c][t]=null)):"dropinit"==n&&a.droppable.push(f.element(s)||e),"dragstart"==n&&(a.proxy=d(f.element(s)||a.drag)[0]),a.results.push(s),delete i.result,"dropinit"!==n)return s}),o.results[h]=f.flatten(a.results),"dropinit"==n&&(a.droppable=f.flatten(a.droppable)),"dragstart"!=n||a.cancelled||r.update()}}while(++h<u);return i.type=l.type,i.originalEvent=l.event,f.flatten(o.results)}},properties:function(t,e,i){var n=i.callback;return n.drag=i.drag,n.proxy=i.proxy||i.drag,n.startX=e.pageX,n.startY=e.pageY,n.deltaX=t.pageX-e.pageX,n.deltaY=t.pageY-e.pageY,n.originalX=i.offset.left,n.originalY=i.offset.top,n.offsetX=n.originalX+n.deltaX,n.offsetY=n.originalY+n.deltaY,n.drop=f.flatten((i.drop||[]).slice()),n.available=f.flatten((i.droppable||[]).slice()),n},element:function(t){if(t&&(t.jquery||1==t.nodeType))return t},flatten:function(t){return d.map(t,function(t){return t&&t.jquery?d.makeArray(t):t&&t.length?f.flatten(t):t})},textselect:function(t){d(document)[t?"unbind":"bind"]("selectstart",f.dontstart).css("MozUserSelect",t?"":"none"),document.unselectable=t?"off":"on"},dontstart:function(){return!1},callback:function(){}}).callback.prototype={update:function(){n.drop&&this.available.length&&d.each(this.available,function(t){n.drop.locate(this,t)})}},e=p.dispatch,p.dispatch=function(t){if(!(0<d.data(this,"suppress."+t.type)-(new Date).getTime()))return e.apply(this,arguments);d.removeData(this,"suppress."+t.type)},o=p.fixHooks.touchstart=p.fixHooks.touchmove=p.fixHooks.touchend=p.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(i,t){var n;return t&&(n=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0]||null)&&d.each(o.props,function(t,e){i[e]=n[e]}),i}}}.apply(t,arguments)})}(this),function(t){define("jquery.event.drop",["jquery"],function(){return function(){var d,p,f;return(d=jQuery).fn.drop=function(t,e,i){var n="string"==typeof t?t:"",o=d.isFunction(t)?t:d.isFunction(e)?e:null;return 0!==n.indexOf("drop")&&(n="drop"+n),i=(t==o?e:i)||{},o?this.bind(n,i,o):this.trigger(n)},d.drop=function(t){f.multi=!0===(t=t||{}).multi?1/0:!1===t.multi?1:(isNaN(t.multi)?f:t).multi,f.delay=t.delay||f.delay,f.tolerance=d.isFunction(t.tolerance)?t.tolerance:null===t.tolerance?null:f.tolerance,f.mode=t.mode||f.mode||"intersect"},p=d.event.special,f=d.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:!0,add:function(t){d.data(this,f.datakey).related+=1},remove:function(){--d.data(this,f.datakey).related},setup:function(){d.data(this,f.datakey)||(d.data(this,f.datakey,{related:0,active:[],anyactive:0,winner:0,location:{}}),f.targets.push(this))},teardown:function(){var e;(d.data(this,f.datakey)||{}).related||(d.removeData(this,f.datakey),e=this,f.targets=d.grep(f.targets,function(t){return t!==e}))},handler:function(t,e){var i;if(e)switch(t.type){case"mousedown":case"touchstart":i=d(f.targets),(i="string"==typeof e.drop?i.filter(e.drop):i).each(function(){var t=d.data(this,f.datakey);t.active=[],t.anyactive=0,t.winner=0}),e.droppable=i,p.drag.hijack(t,"dropinit",e);break;case"mousemove":case"touchmove":f.event=t,f.timer||f.tolerate(e);break;case"mouseup":case"touchend":f.timer=clearTimeout(f.timer),e.propagates&&(p.drag.hijack(t,"drop",e),p.drag.hijack(t,"dropend",e))}},locate:function(t,e){var i=d.data(t,f.datakey),n=d(t),o=n.offset()||{},s=n.outerHeight(),n=n.outerWidth(),n={elem:t,width:n,height:s,top:o.top,left:o.left,right:o.left+n,bottom:o.top+s};return i&&(i.location=n,i.index=e,i.elem=t),n},contains:function(t,e){return(e[0]||e.left)>=t.left&&(e[0]||e.right)<=t.right&&(e[1]||e.top)>=t.top&&(e[1]||e.bottom)<=t.bottom},modes:{intersect:function(t,e,i){return this.contains(i,[t.pageX,t.pageY])?1e9:this.modes.overlap.apply(this,arguments)},overlap:function(t,e,i){return Math.max(0,Math.min(i.bottom,e.bottom)-Math.max(i.top,e.top))*Math.max(0,Math.min(i.right,e.right)-Math.max(i.left,e.left))},fit:function(t,e,i){return this.contains(i,e)?1:0},middle:function(t,e,i){return this.contains(i,[e.left+.5*e.width,e.top+.5*e.height])?1:0}},sort:function(t,e){return e.winner-t.winner||t.index-e.index},tolerate:function(t){var e,i,n,o,s,a,r,l=0,c=t.interactions.length,h=[f.event.pageX,f.event.pageY],u=f.tolerance||f.modes[f.mode];do{if(r=t.interactions[l]){if(!r)return;r.drop=[],o=[],s=r.droppable.length,u&&(i=f.locate(r.proxy)),e=0;do{if(a=r.droppable[e]){if(!(a=(n=d.data(a,f.datakey)).location))continue;n.winner=u?u.call(f,f.event,i,a):f.contains(a,h)?1:0,o.push(n)}}while(++e<s);for(o.sort(f.sort),e=0;(n=o[e])&&(n.winner&&r.drop.length<f.multi?(n.active[l]||n.anyactive||(!1!==p.drag.hijack(f.event,"dropstart",t,l,n.elem)[0]?(n.active[l]=1,n.anyactive+=1):n.winner=0),n.winner&&r.drop.push(n.elem)):n.active[l]&&1==n.anyactive&&(p.drag.hijack(f.event,"dropend",t,l,n.elem),n.active[l]=0,--n.anyactive)),++e<s;);}}while(++l<c);f.last&&h[0]==f.last.pageX&&h[1]==f.last.pageY?delete f.timer:f.timer=setTimeout(function(){f.tolerate(t)},f.delay),f.last=f.event}},p.dropinit=p.dropstart=p.dropend=f,$.drop}.apply(t,arguments)})}(this),define("mockup-patterns-select2",["jquery","pat-base","mockup-utils","underscore","select2","jquery.event.drag","jquery.event.drop"],function(r,t,l,c){"use strict";return t.extend({name:"select2",trigger:".pat-select2",parser:"mockup",defaults:{separator:","},initializeValues:function(){var o=this;o.options.initialValues&&(o.options.id=function(t){return t.id},o.options.initSelection=function(t,e){var i=[],t=t.val(),n=o.options.initialValues;"string"==typeof o.options.initialValues&&""!==o.options.initialValues&&("{"===o.options.initialValues[0]?n=JSON.parse(o.options.initialValues):(n={},r(o.options.initialValues.split(o.options.separator)).each(function(){var t=this.split(":"),e=r.trim(t[0]),t=r.trim(t[1]);n[e]=t}))),r(t.split(o.options.separator)).each(function(){var t=this;n[this]&&(t=n[this]),i.push({id:c.unescape(l.removeHTML(this)),text:c.unescape(l.removeHTML(t))})}),e(i)})},initializeTags:function(){var t=this;t.options.tags&&"string"==typeof t.options.tags&&("["===t.options.tags.substr(0,1)?t.options.tags=JSON.parse(t.options.tags):t.options.tags=t.options.tags.split(t.options.separator)),t.options.tags&&!t.options.allowNewItems&&(t.options.data=r.map(t.options.tags,function(t,e){return{id:t=c.unescape(t),text:t}}),t.options.multiple=!0,delete t.options.tags)},initializeOrdering:function(){var i,n=this;n.options.orderable&&(i=function(t,e){return t?t.text:void 0},n.options.formatSelection&&(i=n.options.formatSelection),n.options.formatSelection=function(t,e){return e.parents("li").drag("start",function(t,e){return r(this).addClass("select2-choice-dragging"),n.$el.select2("onSortStart"),r.drop({tolerance:function(t,e,i){var n=t.pageY>i.top+i.height/2;return r.data(i.elem,"drop+reorder",n?"insertAfter":"insertBefore"),this.contains(i,[t.pageX,t.pageY])}}),r(this).clone().addClass("dragging").css({opacity:.75,position:"absolute"}).appendTo(document.body)}).drag(function(t,e){r(e.proxy).css({top:e.offsetY,left:e.offsetX});var i=e.drop[0],n=r.data(i||{},"drop+reorder");!i||i==e.current&&n==e.method||(r(this)[n](i),e.current=i,e.method=n,e.update())}).drag("end",function(t,e){r(this).removeClass("select2-choice-dragging"),n.$el.select2("onSortEnd"),r(e.proxy).remove()}).drop("init",function(t,e){return this!=e.drag}),i(t,e)})},initializeSelect2:function(){var i=this;function e(t,e){t&&(i.options.debug&&console.debug("callback",t,e),(t="string"==typeof t?window[t]:t)(e))}i.options.formatResultCssClass=function(t){if(t.id)return"select2-option-"+t.id.toLowerCase().replace(/[ \:\)\(\[\]\{\}\_\+\=\&\*\%\#]/g,"-")},i.options.escapeMarkup=function(t){return window.Select2.util.escapeMarkup(t).replace("&amp;","&").replace("&quot;",'"')},i.$el.select2(i.options),i.$el.on("select2-selected",function(t){e(i.options.onSelected,t)}),i.$el.on("select2-selecting",function(t){e(i.options.onSelecting,t)}),i.$el.on("select2-deselecting",function(t){e(i.options.onDeselecting,t)}),i.$el.on("select2-deselected",function(t){e(i.options.onDeselected,t)}),i.$select2=i.$el.parent().find(".select2-container"),i.$el.parent().off("close.plone-modal.patterns"),i.options.orderable&&i.$select2.addClass("select2-orderable")},opened:function(){return 1===r(".select2-dropdown-open",this.$el.parent()).length},init:function(){var s,t,e,i,a=this;a.options.allowNewItems=!a.options.hasOwnProperty("allowNewItems")||JSON.parse(a.options.allowNewItems),a.options.ajax||a.options.vocabularyUrl?(a.options.vocabularyUrl&&(a.options.multiple=void 0===a.options.multiple||a.options.multiple,a.options.ajax=a.options.ajax||{},a.options.ajax.url=a.options.vocabularyUrl,a.options.initSelection=function(t,e){var i=[],t=t.val();r(t.split(a.options.separator)).each(function(){var t=l.removeHTML(this),t=c.unescape(t);i.push({id:t,text:t})}),e(i)}),s="",a.options.ajax=r.extend({quietMillis:300,data:function(t,e){return{query:s=t,page_limit:10,page:e}},results:function(t,e){var i,n,o=t.results;return a.options.vocabularyUrl&&(i=[],r.each(t.results,function(t,e){i.push(e.id)}),o=[],n=""===s||0<=r.inArray(s,i),a.options.allowNewItems&&!n&&(s=c.unescape(l.removeHTML(s)),o.push({id:s,text:s})),r.each(t.results,function(t,e){e&&(e.id&&(e.id=c.unescape(e.id)),e.text)&&(e.text=c.unescape(e.text)),o.push(e)})),{results:o}}},a.options.ajax)):a.options.multiple&&a.$el.is("select")&&(t=a.$el.val()||[],e=r.map(a.$el.find("option"),function(t){return{text:r(t).html(),id:t.value}}),(i=r('<input type="hidden" />')).val(t.join(a.options.separator)),i.attr("class",a.$el.attr("class")),i.attr("name",a.$el.attr("name")),i.attr("id",a.$el.attr("id")),a.$orig=a.$el,a.$el.replaceWith(i),a.$el=i,a.options.data=e),a.initializeValues(),a.initializeTags(),a.initializeOrdering(),a.initializeSelect2()}})}),define("mockup-patterns-pickadate",["jquery","pat-base","mockup-utils","translate","picker","picker.date","picker.time","mockup-patterns-select2"],function(s,t,a,e){"use strict";return t.extend({name:"pickadate",trigger:".pat-pickadate",parser:"mockup",defaults:{separator:" ",date:{selectYears:!0,selectMonths:!0,formatSubmit:"yyyy-mm-dd",format:"yyyy-mm-dd",labelMonthNext:e("Next month"),labelMonthPrev:e("Previous month"),labelMonthSelect:e("Select a month"),labelYearSelect:e("Select a year"),clear:!1,close:!1,today:!1},time:{clear:!1},today:e("Today"),clear:e("Clear"),timezone:null,autoSetTimeOnDateChange:"+[0,0]",classWrapperName:"pattern-pickadate-wrapper",classSeparatorName:"pattern-pickadate-separator",classDateName:"pattern-pickadate-date",classDateWrapperName:"pattern-pickadate-date-wrapper",classTimeName:"pattern-pickadate-time",classTimeWrapperName:"pattern-pickadate-time-wrapper",classTimezoneName:"pattern-pickadate-timezone",classTimezoneWrapperName:"pattern-pickadate-timezone-wrapper",classClearName:"pattern-pickadate-clear",classNowName:"pattern-pickadate-now",placeholderDate:e("Enter date..."),placeholderTime:e("Enter time..."),placeholderTimezone:e("Enter timezone...")},parseTimeOffset:function(e){var t,i,n,o=void 0;0===e.indexOf("+")?e=e.split(o="+")[1]:0===e.indexOf("-")&&(e=e.split(o="-")[1]);try{e=JSON.parse(e)}catch(t){e=void 0}return!1!==e&&(!0===e||!0!==Array.isArray(e)?[0,0]:(t=parseInt(e[0],10)||0,e=parseInt(e[1],10)||0,"+"!==o&&"-"!==o||(i=(n=new Date).getHours(),n=n.getMinutes(),"+"===o?(23<(t=i+t)&&(t=23),59<(e=n+e)&&(e=59)):"-"===o&&((t=i-t)<0&&(t=0),(e=n-e)<0)&&(e=0)),[t,e]))},init:function(){var e,i=this,t=i.$el.val().split(" "),n=t[0]||"",o=t[1]||"";!1===a.bool(i.options.date)&&(i.options.date=!1),!1===a.bool(i.options.time)&&(i.options.time=!1),i.options.autoSetTimeOnDateChange=i.parseTimeOffset(i.options.autoSetTimeOnDateChange),!1===i.options.date&&(o=t[0]),i.$el.hide(),i.$wrapper=s("<div/>").addClass(i.options.classWrapperName).insertAfter(i.$el),!1!==i.options.date&&(i.$date=s('<input type="text"/>').attr("placeholder",i.options.placeholderDate).attr("data-value",n).addClass(i.options.classDateName).appendTo(s("<div/>").addClass(i.options.classDateWrapperName).appendTo(i.$wrapper)).pickadate(s.extend(!0,{},i.options.date,{onSet:function(t){void 0!==t.select&&(i.$date.attr("data-value",t.select),!1!==i.options.autoSetTimeOnDateChange&&i.$time&&!i.$time.pickatime("picker").get("select")&&i.$time.pickatime("picker").set("select",i.options.autoSetTimeOnDateChange),!1!==i.options.time&&""===i.$time.attr("data-value")||i.updateValue.call(i)),t.hasOwnProperty("clear")&&(i.$el.val(""),i.$date.attr("data-value",""))}}))),!1!==i.options.time&&(i.options.time.formatSubmit="HH:i",i.$time=s('<input type="text"/>').attr("placeholder",i.options.placeholderTime).attr("data-value",o).addClass(i.options.classTimeName).appendTo(s("<div/>").addClass(i.options.classTimeWrapperName).appendTo(i.$wrapper)).pickatime(s.extend(!0,{},i.options.time,{onSet:function(t){void 0!==t.select&&(i.$time.attr("data-value",t.select),!1!==i.options.date&&""===i.$date.attr("data-value")||i.updateValue.call(i)),t.hasOwnProperty("clear")&&(i.$el.val(""),i.$time.attr("data-value",""))}})),"string"==typeof o)&&"00"===o.substring(0,2)&&(i.$time.pickatime("picker").set("select",o.split(":")),i.$time.attr("data-value",o)),!1!==i.options.date&&!1!==i.options.time&&i.options.timezone&&(i.$separator=s("<span/>").addClass(i.options.classSeparatorName).html(" "===i.options.separator?"&nbsp;":i.options.separator).appendTo(i.$wrapper)),null!==i.options.timezone&&(i.$timezone=s('<input type="text"/>').addClass(i.options.classTimezoneName).appendTo(s("<div/>").addClass(i.options.classTimezoneWrapperName).appendTo(i.$wrapper)).patternSelect2(s.extend(!0,{placeholder:i.options.placeholderTimezone,width:"10em"},i.options.timezone,{multiple:!1})).on("change",function(t){void 0!==t.val&&(i.$timezone.attr("data-value",t.val),!1!==i.options.date&&""===i.$date.attr("data-value")||!1!==i.options.time&&""===i.$time.attr("data-value")||i.updateValue.call(i))}),(t=i.options.timezone.default)&&(i.options.timezone.data.some(function(t){return e=t.text===i.options.timezone.default}),e)&&(i.$timezone.attr("data-value",t),i.$timezone.parent().find(".select2-chosen").text(t)),1===i.options.timezone.data.length)&&(i.$timezone.attr("data-value",i.options.timezone.data[0].text),i.$timezone.parent().find(".select2-chosen").text(i.options.timezone.data[0].text),i.$timezone.select2("enable",!1)),a.bool(i.options.today)&&(i.$now=s('<button type="button" class="btn btn-xs btn-info" title="'+i.options.today+'"><span class="glyphicon glyphicon-time"></span></button>').addClass(i.options.classNowName).on("click",function(t){t.preventDefault();t=new Date;i.$date&&i.$date.data("pickadate").set("select",t),i.$time&&i.$time.data("pickatime").set("select",t),i.emit("updated")}).appendTo(i.$wrapper)),a.bool(i.options.clear)&&(i.$clear=s('<button type="button" class="btn btn-xs btn-danger" title="'+i.options.clear+'"><span class="glyphicon glyphicon-trash"></span></button>').addClass(i.options.classClearName).on("click",function(t){t.preventDefault(),i.$date&&i.$date.data("pickadate").clear(),i.$time&&i.$time.data("pickatime").clear(),i.emit("updated")}).appendTo(i.$wrapper))},updateValue:function(){var t,e,i,n=this,o="";!1!==n.options.date&&(e=n.$date.data("pickadate").component,i=n.$date.data("pickadate").get("select"),t=e.formats.toString,i)&&(o+=t.apply(e,[n.options.date.formatSubmit,i])),!1!==n.options.date&&!1!==n.options.time&&(o+=" "),!1!==n.options.time&&(t=n.$time.data("pickatime").component,e=n.$time.data("pickatime").get("select"),i=t.formats.toString,e)&&(o+=i.apply(t,["HH:i",e])),null!==n.options.timezone&&(i=" "+n.$timezone.attr("data-value"))&&(o+=i),n.$el.val(o),n.emit("updated")}})}),function(t){define("bootstrap-collapse",["jquery"],function(){return function(){return function(o){"use strict";function s(t,e){this.$element=o(t),this.options=o.extend({},s.DEFAULTS,e),this.$trigger=o('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()}function i(t){t=t.attr("data-target")||(t=t.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,"");return o(document).find(t)}function a(n){return this.each(function(){var t=o(this),e=t.data("bs.collapse"),i=o.extend({},s.DEFAULTS,t.data(),"object"==typeof n&&n);!e&&i.toggle&&/show|hide/.test(n)&&(i.toggle=!1),e||t.data("bs.collapse",e=new s(this,i)),"string"==typeof n&&e[n]()})}s.VERSION="3.4.1",s.TRANSITION_DURATION=350,s.DEFAULTS={toggle:!0},s.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},s.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(t&&t.length&&(n=t.data("bs.collapse"))&&n.transitioning)){var e=o.Event("show.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){t&&t.length&&(a.call(t,"hide"),n||t.data("bs.collapse",null));var i=this.dimension(),e=(this.$element.removeClass("collapse").addClass("collapsing")[i](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1,function(){this.$element.removeClass("collapsing").addClass("collapse in")[i](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")});if(!o.support.transition)return e.call(this);var n=o.camelCase(["scroll",i].join("-"));this.$element.one("bsTransitionEnd",o.proxy(e,this)).emulateTransitionEnd(s.TRANSITION_DURATION)[i](this.$element[0][n])}}}},s.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=o.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var t=this.dimension(),e=(this.$element[t](this.$element[t]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1,function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")});if(!o.support.transition)return e.call(this);this.$element[t](0).one("bsTransitionEnd",o.proxy(e,this)).emulateTransitionEnd(s.TRANSITION_DURATION)}}},s.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},s.prototype.getParent=function(){return o(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(o.proxy(function(t,e){e=o(e);this.addAriaAndCollapsedClass(i(e),e)},this)).end()},s.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var t=o.fn.collapse;o.fn.collapse=a,o.fn.collapse.Constructor=s,o.fn.collapse.noConflict=function(){return o.fn.collapse=t,this},o(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var e=o(this),t=(e.attr("data-target")||t.preventDefault(),i(e)),e=t.data("bs.collapse")?"toggle":e.data();a.call(t,e)})}(jQuery),window.jQuery.fn.collapse.Constructor}.apply(t,arguments)})}(this),function(t){define("bootstrap-dropdown",["jquery"],function(){return function(){!function(o){"use strict";function n(t){o(t).on("click.bs.dropdown",this.toggle)}var s='[data-toggle="dropdown"]';function a(t){var e=t.attr("data-target"),e="#"!==(e=e||(e=t.attr("href"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""))?o(document).find(e):null;return e&&e.length?e:t.parent()}function r(n){n&&3===n.which||(o(".dropdown-backdrop").remove(),o(s).each(function(){var t=o(this),e=a(t),i={relatedTarget:this};!e.hasClass("open")||n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&o.contains(e[0],n.target)||(e.trigger(n=o.Event("hide.bs.dropdown",i)),n.isDefaultPrevented())||(t.attr("aria-expanded","false"),e.removeClass("open").trigger(o.Event("hidden.bs.dropdown",i)))}))}n.VERSION="3.4.1",n.prototype.toggle=function(t){var e=o(this);if(!e.is(".disabled, :disabled")){var i=a(e),n=i.hasClass("open");if(r(),!n){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&o(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(o(this)).on("click",r);n={relatedTarget:this};if(i.trigger(t=o.Event("show.bs.dropdown",n)),t.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),i.toggleClass("open").trigger(o.Event("shown.bs.dropdown",n))}return!1}},n.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var e=o(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var i=a(e),n=i.hasClass("open");if(!n&&27!=t.which||n&&27==t.which)return 27==t.which&&i.find(s).trigger("focus"),e.trigger("click");n=i.find(".dropdown-menu li:not(.disabled):visible a");n.length&&(e=n.index(t.target),38==t.which&&0<e&&e--,40==t.which&&e<n.length-1&&e++,n.eq(e=~e?e:0).trigger("focus"))}}};var t=o.fn.dropdown;o.fn.dropdown=function(i){return this.each(function(){var t=o(this),e=t.data("bs.dropdown");e||t.data("bs.dropdown",e=new n(this)),"string"==typeof i&&e[i].call(t)})},o.fn.dropdown.Constructor=n,o.fn.dropdown.noConflict=function(){return o.fn.dropdown=t,this},o(document).on("click.bs.dropdown.data-api",r).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,n.prototype.toggle).on("keydown.bs.dropdown.data-api",s,n.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",n.prototype.keydown)}(jQuery)}.apply(t,arguments)})}(this),function(t){define("bootstrap-tooltip",["jquery"],function(){return function(){!function(p){"use strict";var n=["sanitize","whiteList","sanitizeFn"],f=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],t={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},m=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,g=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function o(t,e,i){if(0===t.length)return t;if(i&&"function"==typeof i)return i(t);if(!document.implementation||!document.implementation.createHTMLDocument)return t;for(var i=document.implementation.createHTMLDocument("sanitization"),n=(i.body.innerHTML=t,p.map(e,function(t,e){return e})),o=p(i.body).find("*"),s=0,a=o.length;s<a;s++){var r=o[s],l=r.nodeName.toLowerCase();if(-1===p.inArray(l,n))r.parentNode.removeChild(r);else for(var c=p.map(r.attributes,function(t){return t}),h=[].concat(e["*"]||[],e[l]||[]),u=0,d=c.length;u<d;u++)!function(t,e){var i=t.nodeName.toLowerCase();if(-1!==p.inArray(i,e))return-1===p.inArray(i,f)||Boolean(t.nodeValue.match(m)||t.nodeValue.match(g));for(var n=p(e).filter(function(t,e){return e instanceof RegExp}),o=0,s=n.length;o<s;o++)if(i.match(n[o]))return 1}(c[u],h)&&r.removeAttribute(c[u].nodeName)}return i.body.innerHTML}function l(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)}l.VERSION="3.4.1",l.TRANSITION_DURATION=150,l.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},sanitize:!0,sanitizeFn:null,whiteList:t},l.prototype.init=function(t,e,i){if(this.enabled=!0,this.type=t,this.$element=p(e),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&p(document).find(p.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var n=this.options.trigger.split(" "),o=n.length;o--;){var s,a=n[o];"click"==a?this.$element.on("click."+this.type,this.options.selector,p.proxy(this.toggle,this)):"manual"!=a&&(s="hover"==a?"mouseleave":"focusout",this.$element.on(("hover"==a?"mouseenter":"focusin")+"."+this.type,this.options.selector,p.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,p.proxy(this.leave,this)))}this.options.selector?this._options=p.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},l.prototype.getDefaults=function(){return l.DEFAULTS},l.prototype.getOptions=function(t){var e,i=this.$element.data();for(e in i)i.hasOwnProperty(e)&&-1!==p.inArray(e,n)&&delete i[e];return(t=p.extend({},this.getDefaults(),i,t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t.sanitize&&(t.template=o(t.template,t.whiteList,t.sanitizeFn)),t},l.prototype.getDelegateOptions=function(){var i={},n=this.getDefaults();return this._options&&p.each(this._options,function(t,e){n[t]!=e&&(i[t]=e)}),i},l.prototype.enter=function(t){var e=t instanceof this.constructor?t:p(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),p(t.currentTarget).data("bs."+this.type,e)),t instanceof p.Event&&(e.inState["focusin"==t.type?"focus":"hover"]=!0),e.tip().hasClass("in")||"in"==e.hoverState)e.hoverState="in";else{if(clearTimeout(e.timeout),e.hoverState="in",!e.options.delay||!e.options.delay.show)return e.show();e.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show)}},l.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},l.prototype.leave=function(t){var e=t instanceof this.constructor?t:p(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),p(t.currentTarget).data("bs."+this.type,e)),t instanceof p.Event&&(e.inState["focusout"==t.type?"focus":"hover"]=!1),!e.isInStateTrue()){if(clearTimeout(e.timeout),e.hoverState="out",!e.options.delay||!e.options.delay.hide)return e.hide();e.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide)}},l.prototype.show=function(){var e,t,i,n,o,s,a,r=p.Event("show.bs."+this.type);this.hasContent()&&this.enabled&&(this.$element.trigger(r),o=p.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]),!r.isDefaultPrevented())&&o&&(r=(e=this).tip(),o=this.getUID(this.type),this.setContent(),r.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&r.addClass("fade"),o="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,(a=(t=/\s?auto?\s?/i).test(o))&&(o=o.replace(t,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(o).data("bs."+this.type,this),this.options.container?r.appendTo(p(document).find(this.options.container)):r.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type),t=this.getPosition(),i=r[0].offsetWidth,n=r[0].offsetHeight,a&&(a=o,s=this.getPosition(this.$viewport),o="bottom"==o&&t.bottom+n>s.bottom?"top":"top"==o&&t.top-n<s.top?"bottom":"right"==o&&t.right+i>s.width?"left":"left"==o&&t.left-i<s.left?"right":o,r.removeClass(a).addClass(o)),s=this.getCalculatedOffset(o,t,i,n),this.applyPlacement(s,o),a=function(){var t=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==t&&e.leave(e)},p.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",a).emulateTransitionEnd(l.TRANSITION_DURATION):a())},l.prototype.applyPlacement=function(t,e){var i=this.tip(),n=i[0].offsetWidth,o=i[0].offsetHeight,s=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10),s=(isNaN(s)&&(s=0),isNaN(a)&&(a=0),t.top+=s,t.left+=a,p.offset.setOffset(i[0],p.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},t),0),i.addClass("in"),i[0].offsetWidth),a=i[0].offsetHeight,r=("top"==e&&a!=o&&(t.top=t.top+o-a),this.getViewportAdjustedDelta(e,t,s,a)),e=(r.left?t.left+=r.left:t.top+=r.top,/top|bottom/.test(e)),n=e?2*r.left-n+s:2*r.top-o+a,s=e?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(n,i[0][s],e)},l.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},l.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();this.options.html?(this.options.sanitize&&(e=o(e,this.options.whiteList,this.options.sanitizeFn)),t.find(".tooltip-inner").html(e)):t.find(".tooltip-inner").text(e),t.removeClass("fade in top bottom left right")},l.prototype.hide=function(t){var e=this,i=p(this.$tip),n=p.Event("hide.bs."+this.type);function o(){"in"!=e.hoverState&&i.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),t&&t()}if(this.$element.trigger(n),!n.isDefaultPrevented())return i.removeClass("in"),p.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",o).emulateTransitionEnd(l.TRANSITION_DURATION):o(),this.hoverState=null,this},l.prototype.fixTitle=function(){var t=this.$element;!t.attr("title")&&"string"==typeof t.attr("data-original-title")||t.attr("data-original-title",t.attr("title")||"").attr("title","")},l.prototype.hasContent=function(){return this.getTitle()},l.prototype.getPosition=function(t){var e=(t=t||this.$element)[0],i="BODY"==e.tagName,n=e.getBoundingClientRect(),e=(null==n.width&&(n=p.extend({},n,{width:n.right-n.left,height:n.bottom-n.top})),window.SVGElement&&e instanceof window.SVGElement),e=i?{top:0,left:0}:e?null:t.offset(),t={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},i=i?{width:p(window).width(),height:p(window).height()}:null;return p.extend({},n,t,i,e)},l.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},l.prototype.getViewportAdjustedDelta=function(t,e,i,n){var o,s,a={top:0,left:0};return this.$viewport&&(o=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport),/right|left/.test(t)?(t=e.top-o-s.scroll,n=e.top+o-s.scroll+n,t<s.top?a.top=s.top-t:n>s.top+s.height&&(a.top=s.top+s.height-n)):(t=e.left-o,n=e.left+o+i,t<s.left?a.left=s.left-t:n>s.right&&(a.left=s.left+s.width-n))),a},l.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},l.prototype.getUID=function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},l.prototype.tip=function(){if(this.$tip||(this.$tip=p(this.options.template),1==this.$tip.length))return this.$tip;throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!")},l.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},l.prototype.enable=function(){this.enabled=!0},l.prototype.disable=function(){this.enabled=!1},l.prototype.toggleEnabled=function(){this.enabled=!this.enabled},l.prototype.toggle=function(t){var e=this;t&&!(e=p(t.currentTarget).data("bs."+this.type))&&(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),p(t.currentTarget).data("bs."+this.type,e)),t?(e.inState.click=!e.inState.click,e.isInStateTrue()?e.enter(e):e.leave(e)):e.tip().hasClass("in")?e.leave(e):e.enter(e)},l.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})},l.prototype.sanitizeHtml=function(t){return o(t,this.options.whiteList,this.options.sanitizeFn)};var e=p.fn.tooltip;p.fn.tooltip=function(n){return this.each(function(){var t=p(this),e=t.data("bs.tooltip"),i="object"==typeof n&&n;!e&&/destroy|hide/.test(n)||(e||t.data("bs.tooltip",e=new l(this,i)),"string"==typeof n&&e[n]())})},p.fn.tooltip.Constructor=l,p.fn.tooltip.noConflict=function(){return p.fn.tooltip=e,this}}(jQuery)}.apply(t,arguments)})}(this),require(["mockup-patterns-autotoc","mockup-patterns-contentloader","mockup-patterns-cookietrigger","mockup-patterns-formautofocus","mockup-patterns-formunloadalert","mockup-patterns-livesearch","mockup-patterns-markspeciallinks","mockup-patterns-modal","mockup-patterns-navigationmarker","mockup-patterns-preventdoublesubmit","mockup-patterns-pickadate","mockup-patterns-select2","bootstrap-collapse","bootstrap-dropdown","bootstrap-tooltip"],function(){}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/plone.staticresources/src/plone/staticresources/static/plone.js",function(){});
//# sourceMappingURL=plone-compiled.min.js.map