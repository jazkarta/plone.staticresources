define("mockup-patterns-autotoc",["jquery","pat-base"],function(r,t){"use strict";return t.extend({name:"autotoc",trigger:".pat-autotoc",parser:"mockup",defaults:{section:"section",levels:"h1,h2,h3",IDPrefix:"autotoc-item-",classTOCName:"autotoc-nav",classSectionName:"autotoc-section",classLevelPrefixName:"autotoc-level-",classActiveName:"active",scrollDuration:"slow",scrollEasing:"swing"},init:function(){var o=this,a=(o.$toc=r("<nav/>").addClass(o.options.classTOCName),o.options.prependTo?o.$toc.prependTo(o.options.prependTo):o.options.appendTo?o.$toc.appendTo(o.options.appendTo):o.$toc.prependTo(o.$el),o.options.className&&o.$el.addClass(o.options.className),r(o.options.section,o.$el).addClass(o.options.classSectionName),o.$el.hasClass("autotabs")),n=null;r(o.options.levels,o.$el).each(function(t){var i=r(this),e=(i.prop("id")?i:i.parents(o.options.section)).prop("id");(!e||0<r("#"+e).length)&&(e=o.options.IDPrefix+o.name+"-"+t),null===(n=window.location.hash==="#"+e?e:n)&&i.hasClass(o.options.classActiveName)&&(n=e),i.data("navref",e),r("<a/>").appendTo(o.$toc).text(i.text()).attr("id",e).attr("href","#"+e).addClass(o.options.classLevelPrefixName+o.getLevel(i)).on("click",function(t,e){t.stopPropagation(),t.preventDefault(),e=e||{doScroll:!0,skipHash:!1};var n=r(this);o.$toc.children("."+o.options.classActiveName).removeClass(o.options.classActiveName),o.$el.children("."+o.options.classActiveName).removeClass(o.options.classActiveName),r(t.target).addClass(o.options.classActiveName),i.parents(o.options.section).addClass(o.options.classActiveName),!1!==e.doScroll&&o.options.scrollDuration&&i&&!a&&r("body,html").animate({scrollTop:i.offset().top},o.options.scrollDuration,o.options.scrollEasing),0!==o.$el.parents(".plone-modal").size()&&o.$el.trigger("resize.plone-modal.patterns"),r(this).trigger("clicked"),e.skipHash||window.history&&window.history.pushState&&window.history.pushState({},"","#"+n.attr("id"))}),i.data("autotoc-trigger-id",e)}),n?r("a#"+n).trigger("click",{doScroll:!0,skipHash:!0}):o.$toc.find("a").first().trigger("click",{doScroll:!1,skipHash:!0})},getLevel:function(n){var i=0;return r.each(this.options.levels.split(","),function(t,e){if(1===n.filter(e).size())return i=t+1,!1}),i}})}),define("mockup-utils",["jquery"],function(l){"use strict";function t(t){var n=this;return n.className="plone-loader",n.options=l.extend({},{backdrop:null,zIndex:10005},t=t||{}),n.init=function(){n.$el=l("."+n.className),0===n.$el.length&&(n.$el=l("<div><div></div></div>"),n.$el.addClass(n.className).hide().appendTo("body"))},n.show=function(t){n.init(),n.$el.show();var e=n.options.zIndex;"function"==typeof e?e=Math.max(e(),10005):(e=10005,l(".plone-modal-wrapper,.plone-modal-backdrop").each(function(){e=Math.max(e,l(this).css("zIndex")||10005)}),e+=1),n.$el.css("zIndex",e),void 0===t&&(t=!0),n.options.backdrop&&(n.options.backdrop.closeOnClick=t,n.options.backdrop.closeOnEsc=t,n.options.backdrop.init(),n.options.backdrop.show())},n.hide=function(){n.init(),n.$el.hide()},n}function i(t){return(t=void 0===t?"id":t)+Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var e={get:function(t){return window.localStorage&&"string"==typeof(t=window.localStorage[t])?JSON.parse(t):void 0},set:function(t,e){window.localStorage&&(window.localStorage[t]=JSON.stringify(e))}};return{bool:function(t){return"string"==typeof t&&(t=l.trim(t).toLowerCase()),-1===["false",!1,"0",0,"",void 0,null].indexOf(t)},escapeHTML:function(t){return l("<div/>").text(t).html()},removeHTML:function(t){return t.replace(/<[^>]+>/gi,"")},featureSupport:{dragAndDrop:function(){return"draggable"in document.createElement("span")},fileApi:function(){return"undefined"!=typeof FileReader},history:function(){return!(!window.history||!window.history.pushState)}},generateId:i,getAuthenticator:function(){var t=l('input[name="_authenticator"]');return 0===t.length?0<(t=l('a[href*="_authenticator"]')).length?t.attr("href").split("_authenticator=")[1]:"":t.val()},getWindow:function(){var t=window;return t=t.parent!==window?t.parent:t},Loading:t,loading:new t,parseBodyTag:function(t){return l(/<body[^>]*>[^]*<\/body>/im.exec(t)[0].replace("<body","<div").replace("</body>","</div>")).eq(0).html()},QueryHelper:function(t){var s=this;return s.options=l.extend({},{pattern:null,vocabularyUrl:null,searchParam:"SearchableText",pathOperator:"plone.app.querystring.operation.string.path",attributes:["UID","Title","Description","getURL","portal_type"],batchSize:10,baseCriteria:[],sort_on:"is_folderish",sort_order:"reverse",pathDepth:1},t),s.pattern=s.options.pattern,void 0!==s.pattern&&null!==s.pattern||(s.pattern={browsing:!1,basePath:"/"}),s.options.url&&!s.options.vocabularyUrl?s.options.vocabularyUrl=s.options.url:s.pattern.vocabularyUrl&&(s.options.vocabularyUrl=s.pattern.vocabularyUrl),s.valid=Boolean(s.options.vocabularyUrl),s.getBatch=function(t){return{page:t||1,size:s.options.batchSize}},s.getCurrentPath=function(){var t=s.pattern,e=s.currentPath||t.currentPath,e=e="function"==typeof e?e():e;return e=e||t.basePath||t.options.basePath||"/"},s.getCriterias=function(t,e){var n=[];return(e=l.extend({},{useBaseCriteria:!0,additionalCriterias:[]},e=void 0===e?{}:e)).useBaseCriteria&&(n=s.options.baseCriteria.slice(0)),t&&n.push({i:s.options.searchParam,o:"plone.app.querystring.operation.string.contains",v:t+="*"}),e.searchPath?n.push({i:"path",o:s.options.pathOperator,v:e.searchPath+"::"+s.options.pathDepth}):s.pattern.browsing&&n.push({i:"path",o:s.options.pathOperator,v:s.getCurrentPath()+"::"+s.options.pathDepth}),n=n.concat(e.additionalCriterias)},s.getQueryData=function(t,e){t={query:JSON.stringify({criteria:s.getCriterias(t),sort_on:s.options.sort_on,sort_order:s.options.sort_order}),attributes:JSON.stringify(s.options.attributes)};return e&&(t.batch=JSON.stringify(s.getBatch(e))),t},s.getUrl=function(){var t=s.options.vocabularyUrl;return-1===t.indexOf("?")?t+="?":t+="&",t+l.param(s.getQueryData())},s.selectAjax=function(){return{url:s.options.vocabularyUrl,dataType:"JSON",quietMillis:100,data:function(t,e){return s.getQueryData(t,e)},results:function(t,e){e=10*e<t.total;return{results:t.results,more:e}}}},s.search=function(t,e,n,i,o,a){void 0===a&&(a="GET");var r=[],o=((r=(o=void 0===o?!0:o)?s.options.baseCriteria.slice(0):r).push({i:t,o:e,v:n}),{query:JSON.stringify({criteria:r}),attributes:JSON.stringify(s.options.attributes)});l.ajax({url:s.options.vocabularyUrl,dataType:"JSON",data:o,type:a,success:i})},s},setId:function(t,e){void 0===e&&(e="id");var n=void 0===(n=t.attr("id"))?i(e):n.replace(/\./g,"-");return t.attr("id",n),n},storage:e,createElementFromHTML:function(t){var e=document.createElement("div");return e.innerHTML=t.trim(),e.firstChild}}}),define("mockup-patterns-contentloader",["jquery","pat-base","pat-logger","pat-registry","mockup-utils","underscore"],function(i,t,e,o,a,r){"use strict";var s=e.getLogger("pat-contentloader");return t.extend({name:"contentloader",trigger:".pat-contentloader",parser:"mockup",defaults:{url:null,content:null,trigger:"click",target:null,template:null,dataType:"html"},init:function(){var e=this;"el"===e.options.url&&"A"===e.$el[0].tagName&&(e.options.url=e.$el.attr("href")),e.$el.removeClass("loading-content"),e.$el.removeClass("content-load-error"),"immediate"===e.options.trigger?e._load():e.$el.on(e.options.trigger,function(t){t.preventDefault(),e._load()})},_load:function(){this.$el.addClass("loading-content"),this.options.url?this.loadRemote():this.loadLocal()},loadRemote:function(){var n=this;i.ajax({url:n.options.url,dataType:n.options.dataType,success:function(t){var e;if("html"===n.options.dataType)-1!==t.indexOf("<html")&&(t=a.parseBodyTag(t)),e=i("<div>"+t+"</div>");else if(-1!==n.options.dataType.indexOf("json")){t.constructor===Array&&1===t.length&&(t=t[0]);try{e=i(r.template(n.options.template)(t))}catch(t){return n.$el.removeClass("loading-content"),n.$el.addClass("content-load-error"),void s.warn("error rendering template. pat-contentloader will not work")}}null!==n.options.content&&(e=e.find(n.options.content)),n.loadLocal(e)},error:function(){n.$el.removeClass("loading-content"),n.$el.addClass("content-load-error")}})},loadLocal:function(t){var e,n=this;t||null!==n.options.content?(e=n.$el,null!==n.options.target&&0===(e=i(n.options.target)).size()?(n.$el.removeClass("loading-content"),n.$el.addClass("content-load-error"),s.warn("No target nodes found")):((t=t||i(n.options.content).clone()).length?(t.show(),e.replaceWith(t),o.scan(t)):e.empty(),n.$el.removeClass("loading-content"),n.emit("loading-done"))):(n.$el.removeClass("loading-content"),n.$el.addClass("content-load-error"),s.warn("No selector configured"))}})}),define("mockup-patterns-cookietrigger",["pat-base"],function(t){"use strict";return t.extend({name:"cookietrigger",trigger:".pat-cookietrigger",parser:"mockup",isCookiesEnabled:function(){var t="areYourCookiesEnabled=0",e=(document.cookie=t,document.cookie);return-1===e.indexOf(t)||(t="areYourCookiesEnabled=1",document.cookie=t,-1===(e=document.cookie).indexOf(t))?0:(document.cookie="areYourCookiesEnabled=; expires=Thu, 01-Jan-70 00:00:01 GMT",1)},showIfCookiesDisabled:function(){this.isCookiesEnabled()?this.$el.hide():this.$el.show()},init:function(){this.showIfCookiesDisabled()}})}),define("mockup-patterns-formautofocus",["jquery","pat-base"],function(e,t,n){"use strict";return t.extend({name:"formautofocus",trigger:".pat-formautofocus",parser:"mockup",defaults:{condition:"div.error",target:"div.error :input:not(.formTabs):visible:first",always:":input:not(.formTabs):visible:first"},init:function(){var t=this;(0!==e(t.options.condition,t.$el).size()?e(t.options.target,t.$el):e(t.options.always,t.$el)).focus()}})}),define("mockup-i18n",["jquery"],function(i){"use strict";return function(){var s=this;s.baseUrl=i("body").attr("data-i18ncatalogurl"),s.currentLanguage=i("html").attr("lang")||"en",1<s.currentLanguage.split("-").length&&(s.currentLanguage=s.currentLanguage.split("-")[0]+"_"+s.currentLanguage.split("-")[1].toUpperCase()),s.storage=null,s.catalogs={},s.ttl=864e5,Date.now||(Date.now=function(){return(new Date).valueOf()});try{"localStorage"in window&&null!==window.localStorage&&"JSON"in window&&null!==window.JSON&&(s.storage=window.localStorage)}catch(t){}s.configure=function(t){for(var e in t)s[e]=t[e]},s._setCatalog=function(t,e,n){t in s.catalogs||(s.catalogs[t]={}),s.catalogs[t][e]=n},s._storeCatalog=function(t,e,n){t=t+"-"+e;null!==s.storage&&null!==n&&(s.storage.setItem(t,JSON.stringify(n)),s.storage.setItem(t+"-updated",Date.now()))},s.getUrl=function(t,e){return s.baseUrl+"?domain="+t+"&language="+e},s.loadCatalog=function(e,n){if(void 0===n&&(n=s.currentLanguage),null!==s.storage){var t=e+"-"+n;if(t in s.storage)if(Date.now()-parseInt(s.storage.getItem(t+"-updated"),10)<s.ttl)return t=JSON.parse(s.storage.getItem(t)),void s._setCatalog(e,n,t)}s.baseUrl&&i.getJSON(s.getUrl(e,n),function(t){null!==t&&(s._setCatalog(e,n,t),s._storeCatalog(e,n,t))})},s.MessageFactory=function(a,r){return r=r||s.currentLanguage,function(t,e){var n,i,o=a in s.catalogs&&r in s.catalogs[a]&&t in s.catalogs[a][r]?s.catalogs[a][r][t]:t;if(e)for(i in e)e.hasOwnProperty(i)&&(n=new RegExp("\\$\\{"+i+"\\}","g"),o=o.replace(n,e[i]));return o}}}}),define("translate",["mockup-i18n"],function(i){"use strict";var o=null;return function(t,e){var n;return null===o&&((n=new i).loadCatalog("widgets"),o=n.MessageFactory("widgets")),o(t,e)}}),define("mockup-patterns-formunloadalert",["jquery","pat-base","translate"],function(o,t,e){"use strict";return t.extend({name:"formunloadalert",trigger:".pat-formunloadalert",parser:"mockup",_changed:!1,_suppressed:!1,defaults:{message:e("Discard changes? If you click OK, any changes you have made will be lost."),changingEvents:"change keyup paste",changingFields:"input,select,textarea,fileupload"},init:function(){var n,i=this;i.$el.is("form")&&(o(i.options.changingFields,i.$el).on(i.options.changingEvents,function(t){i._changed=!0}),0!==(n=i.$el.parents(".plone-modal")).size()?n.data("patternPloneModal").on("hide",function(t){var e=n.data("patternPloneModal");e&&(e._suppressHide=i._handleUnload.call(i,t))}):o(window).on("beforeunload",function(t){return i._handleUnload(t)}),i.$el.on("submit",function(t){i._suppressed=!0}))},_handleUnload:function(t){var e,n=this;if(!n._suppressed)return n._changed?(e=n.options.message,n._handleMsg(t,e),o(window).trigger("messageset"),e):void 0;n._suppressed=!1},_handleMsg:function(t,e){(t||window.event).returnValue=e}})}),define("mockup-patterns-livesearch",["jquery","pat-base","underscore","translate"],function(r,t,n,s){"use strict";return t.extend({name:"livesearch",trigger:".pat-livesearch",parser:"mockup",timeout:null,active:!1,results:null,selectedItem:-1,resultsClass:"livesearch-results",defaults:{ajaxUrl:null,defaultSortOn:"",perPage:7,quietMillis:350,minimumInputLength:4,inputSelector:'input[type="text"]',itemTemplate:'<li class="search-result <%- state %>"><h4 class="title"><a href="<%- url %>"><%- title %></a></h4><p class="description"><%- description %></p></li>'},doSearch:function(e){var t,n,i=this,o=(i.active=!0,i.render(),i.$el.addClass("searching"),i.$el.serialize()),a=(void 0===e&&(e=1),t=location.search,-1===(n=t.indexOf("sort_on"))?0<(a=r("#search-results")).length?a.attr("data-default-sort"):i.options.defaultSortOn:t.substring(n).split("&")[0].split("=")[1]);r.ajax({url:i.options.ajaxUrl+"?"+o+"&page="+e+"&perPage="+i.options.perPage+"&sort_on="+a,dataType:"json"}).done(function(t){i.results=t,i.page=e,o!==i.$el.serialize()&&i.doSearch()}).fail(function(){i.results={items:[{url:"",title:s("Error"),description:s("There was an error searching…"),state:"error",error:!1}],total:1},i.page=1}).always(function(){i.active=!1,i.selectedItem=-1,i.$el.removeClass("searching"),i.render()})},render:function(){var i,t,e,o=this;o.$results.empty(),o.active?o.$results.append(r('<li class="searching">'+s("searching…")+"</li>")):null===o.results?o.$results.append(r('<li class="no-results no-search">'+s("enter search phrase")+"</li>")):0===o.results.total?o.$results.append(r('<li class="no-results">'+s("no results found")+"</li>")):o.$results.append(r('<li class="results-summary">'+s("found")+" "+o.results.total+" "+s("results")+"</li>")),null!==o.results&&(i=n.template(o.options.itemTemplate),n.each(o.results.items,function(t,e){var n=r(i(r.extend({_t:s},t)));n.attr("data-url",t.url).on("click",function(){t.error||(window.location=t.url)}),e===o.selectedItem&&n.addClass("selected"),o.$results.append(n)}),t=[],1<o.page&&((e=r('<a href="#" class="prev">'+s("Previous")+"</a>")).click(function(t){o.disableHiding=!0,t.preventDefault(),o.doSearch(o.page-1)}),t.push(e)),o.page*o.options.perPage<o.results.total&&((e=r('<a href="#" class="next">'+s("Next")+"</a>")).click(function(t){o.disableHiding=!0,t.preventDefault(),o.doSearch(o.page+1)}),t.push(e)),0<t.length)&&((e=r('<li class="load-more"><div class="page">'+o.page+"</div></li>")).prepend(t),o.$results.append(e)),o.position()},position:function(){var t=this,e=(t.$el.addClass("livesearch-active"),t.$input.position());t.$results.width(t.$el.outerWidth()),t.$results.css({top:e.top+t.$input.outerHeight(),left:e.left}),t.$results.show()},hide:function(){this.$results.hide(),this.$el.removeClass("livesearch-active")},init:function(){var e=this;e.$input=e.$el.find(e.options.inputSelector),e.$input.off("focusout").on("focusout",function(){setTimeout(function(){e.disableHiding?(e.disableHiding=!1,e.$input.focus()):e.hide()},200)}).off("focusin").on("focusin",function(){e.onceFocused?e.$results.is(":visible")||e.render():(e.onceFocused=!0,e.$input.val().length>=e.options.minimumInputLength&&e.doSearch())}).attr("autocomplete","off").off("keyup").on("keyup",function(t){t=t.keyCode||t.which;if(27===t)e.$input.val(""),e.hide();else{if(e.results&&e.results.items&&0<e.results.items.length){if(13===t)return void(-1!==e.selectedItem&&(window.location=e.results.items[e.selectedItem].url));if(38===t)return void(-1!==e.selectedItem&&(--e.selectedItem,e.render()));if(40===t)return void(e.selectedItem<e.results.items.length&&(e.selectedItem+=1,e.render()))}null!==e.timeout&&(clearTimeout(e.timeout),e.timeout=null),e.active||(e.$input.val().length>=e.options.minimumInputLength?e.timeout=setTimeout(function(){e.doSearch()},e.options.quietMillis):(e.results=null,e.render()))}}),r("#sorting-options a").click(function(t){t.preventDefault(),e.onceFocused=!1}),e.$results=r('<ul class="'+e.resultsClass+'"></ul>').hide().insertAfter(e.$input)}})}),define("mockup-patterns-markspeciallinks",["pat-base","jquery"],function(t,r){"use strict";return t.extend({name:"markspeciallinks",trigger:".pat-markspeciallinks",parser:"mockup",defaults:{external_links_open_new_window:!1,mark_special_links:!0},init:function(){var t,e,n,i,o=this,a=o.$el;"string"==typeof o.options.external_links_open_new_window?t="true"===o.options.external_links_open_new_window.toLowerCase():"boolean"==typeof o.options.external_links_open_new_window&&(t=o.options.external_links_open_new_window),"string"==typeof o.options.mark_special_links?e="true"===o.options.mark_special_links.toLowerCase():"boolean"==typeof o.options.mark_special_links&&(e=o.options.mark_special_links),o=window.location.protocol+"//"+window.location.host,n=/^(mailto|ftp|news|irc|h323|sip|callto|https|feed|webcal)/,a=a,t&&a.find('a[href^="http"]:not(.link-plain):not([href^="'+o+'"])').attr("target","_blank").attr("rel","noopener"),e&&(a.find('a[href^="http:"]:not(.link-plain):not([href^="'+o+'"]):not(:has(img))').before('<i class="glyphicon link-external"></i>'),a.find('a[href]:not([href^="http:"]):not(.link-plain):not([href^="'+o+'"]):not(:has(img)):not([href^="#"])').each(function(){var t;(i=n.exec(r(this).attr("href")))&&(t="glyphicon link-"+i[0],r(this).before('<i class="'+t+'"></i>'))}))}})}),define("mockup-patterns-backdrop",["jquery","pat-base"],function(t,e){"use strict";return e.extend({name:"backdrop",trigger:".pat-backdrop",parser:"mockup",defaults:{zIndex:null,opacity:.8,className:"plone-backdrop",classActiveName:"plone-backdrop-active",closeOnEsc:!0,closeOnClick:!0},init:function(){var n=this;n.$backdrop=t("> ."+n.options.className,n.$el),0===n.$backdrop.size()&&(n.$backdrop=t("<div/>").hide().appendTo(n.$el).addClass(n.options.className),null!==n.options.zIndex)&&n.$backdrop.css("z-index",n.options.zIndex),!0===n.options.closeOnEsc&&t(document).on("keydown",function(t,e){n.$el.is("."+n.options.classActiveName)&&27===t.keyCode&&n.hide()}),!0===n.options.closeOnClick&&n.$backdrop.on("click",function(){n.$el.is("."+n.options.classActiveName)&&n.hide()})},show:function(){var t=this;t.$el.hasClass(t.options.classActiveName)||(t.emit("show"),t.$backdrop.css("opacity","0").show(),t.$el.addClass(t.options.classActiveName),t.$backdrop.animate({opacity:t.options.opacity},500),t.emit("shown"))},hide:function(){var t=this;t.$el.hasClass(t.options.classActiveName)&&(t.emit("hide"),t.$backdrop.animate({opacity:"0"},500).hide(),t.$el.removeClass(t.options.classActiveName),t.emit("hidden"))}})}),function(i,o){var t;"function"==typeof define&&define.amd?define("backbone",["underscore","jquery","exports"],function(t,e,n){i.Backbone=o(i,n,t,e)}):"undefined"!=typeof exports?(t=require("underscore"),o(i,exports,t)):i.Backbone=o(i,{},i._,i.jQuery||i.Zepto||i.ender||i.$)}(this,function(t,r,x,e){var n=t.Backbone,i=[],o=i.slice,a=(r.VERSION="1.1.2",r.$=e,r.noConflict=function(){return t.Backbone=n,this},r.emulateHTTP=!1,r.emulateJSON=!1,r.Events={on:function(t,e,n){return u(this,"on",t,[e,n])&&e&&(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this})),this},once:function(t,e,n){var i,o;return u(this,"once",t,[e,n])&&e?(i=this,(o=x.once(function(){i.off(t,o),e.apply(this,arguments)}))._callback=e,this.on(t,o,n)):this},off:function(t,e,n){var i,o,a,r,s,l,c,p;if(this._events&&u(this,"off",t,[e,n]))if(t||e||n){for(s=0,l=(r=t?[t]:x.keys(this._events)).length;s<l;s++)if(t=r[s],a=this._events[t]){if(this._events[t]=i=[],e||n)for(c=0,p=a.length;c<p;c++)o=a[c],(e&&e!==o.callback&&e!==o.callback._callback||n&&n!==o.context)&&i.push(o);i.length||delete this._events[t]}}else this._events=void 0;return this},trigger:function(t){var e,n,i;return this._events&&(e=o.call(arguments,1),u(this,"trigger",t,e))&&(n=this._events[t],i=this._events.all,n&&s(n,e),i)&&s(i,arguments),this},stopListening:function(t,e,n){var i=this._listeningTo;if(i){var o,a=!e&&!n;for(o in n||"object"!=typeof e||(n=this),t&&((i={})[t._listenId]=t),i)(t=i[o]).off(e,n,this),(a||x.isEmpty(t._events))&&delete this._listeningTo[o]}return this}}),l=/\s+/,u=function(t,e,n,i){if(n){if("object"==typeof n){for(var o in n)t[e].apply(t,[o,n[o]].concat(i));return!1}if(l.test(n)){for(var a=n.split(l),r=0,s=a.length;r<s;r++)t[e].apply(t,[a[r]].concat(i));return!1}}return!0},s=function(t,e){var n,i=-1,o=t.length,a=e[0],r=e[1],s=e[2];switch(e.length){case 0:for(;++i<o;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=t[i]).callback.call(n.ctx,a);return;case 2:for(;++i<o;)(n=t[i]).callback.call(n.ctx,a,r);return;case 3:for(;++i<o;)(n=t[i]).callback.call(n.ctx,a,r,s);return;default:for(;++i<o;)(n=t[i]).callback.apply(n.ctx,e);return}},k=(x.each({listenTo:"on",listenToOnce:"once"},function(i,t){a[t]=function(t,e,n){return((this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=x.uniqueId("l"))]=t)[i](e,n=n||"object"!=typeof e?n:this,this),this}}),a.bind=a.on,a.unbind=a.off,x.extend(r,a),r.Model=function(t,e){var n=t||{};e=e||{},this.cid=x.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=x.defaults({},n,x.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)}),c=(x.extend(k.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return x.clone(this.attributes)},sync:function(){return r.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return x.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var i,o,a,r,s,l,c;if(null!=t){if("object"==typeof t?(o=t,n=e):(o={})[t]=e,!this._validate(o,n=n||{}))return!1;for(i in a=n.unset,t=n.silent,r=[],s=this._changing,this._changing=!0,s||(this._previousAttributes=x.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]),o)e=o[i],x.isEqual(c[i],e)||r.push(i),x.isEqual(l[i],e)?delete this.changed[i]:this.changed[i]=e,a?delete c[i]:c[i]=e;if(!t){r.length&&(this._pending=n);for(var p=0,u=r.length;p<u;p++)this.trigger("change:"+r[p],this,c[r[p]],n)}if(!s){if(!t)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);this._pending=!1,this._changing=!1}}return this},unset:function(t,e){return this.set(t,void 0,x.extend({},e,{unset:!0}))},clear:function(t){var e,n={};for(e in this.attributes)n[e]=void 0;return this.set(n,x.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!x.isEmpty(this.changed):x.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&x.clone(this.changed);var e,n,i=!1,o=this._changing?this._previousAttributes:this.attributes;for(n in t)x.isEqual(o[n],e=t[n])||((i=i||{})[n]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return x.clone(this._previousAttributes)},fetch:function(e){void 0===(e=e?x.clone(e):{}).parse&&(e.parse=!0);var n=this,i=e.success;return e.success=function(t){if(!n.set(n.parse(t,e),e))return!1;i&&i(n,t,e),n.trigger("sync",n,t,e)},O(this,e),this.sync("read",this,e)},save:function(t,e,n){var i,o=this.attributes;if(null==t||"object"==typeof t?(i=t,n=e):(i={})[t]=e,n=x.extend({validate:!0},n),i&&!n.wait){if(!this.set(i,n))return!1}else if(!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=x.extend({},o,i)),void 0===n.parse&&(n.parse=!0);var a=this,r=n.success;return n.success=function(t){a.attributes=o;var e=a.parse(t,n);if(n.wait&&(e=x.extend(i||{},e)),x.isObject(e)&&!a.set(e,n))return!1;r&&r(a,t,n),a.trigger("sync",a,t,n)},O(this,n),"patch"==(t=this.isNew()?"create":n.patch?"patch":"update")&&(n.attrs=i),e=this.sync(t,this,n),i&&n.wait&&(this.attributes=o),e},destroy:function(e){e=e?x.clone(e):{};function n(){i.trigger("destroy",i,i.collection,e)}var i=this,o=e.success;if(e.success=function(t){(e.wait||i.isNew())&&n(),o&&o(i,t,e),i.isNew()||i.trigger("sync",i,t,e)},this.isNew())return e.success(),!1;O(this,e);var t=this.sync("delete",this,e);return e.wait||n(),t},url:function(){var t=x.result(this,"urlRoot")||x.result(this.collection,"url")||E();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},x.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=x.extend({},this.attributes,t);t=this.validationError=this.validate(t,e)||null;return!t||(this.trigger("invalid",this,t,x.extend(e,{validationError:t})),!1)}}),x.each(["keys","values","pairs","invert","pick","omit"],function(e){k.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),x[e].apply(x,t)}}),r.Collection=function(t,e){(e=e||{}).model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,x.extend({silent:!0},e))}),$={add:!0,remove:!0,merge:!0},p={add:!0,remove:!1},i=(x.extend(c.prototype,a,{model:k,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return r.sync.apply(this,arguments)},add:function(t,e){return this.set(t,x.extend({merge:!1},e,p))},remove:function(t,e){var n,i,o,a,r=!x.isArray(t);for(e=e||{},n=0,i=(t=r?[t]:x.clone(t)).length;n<i;n++)(a=t[n]=this.get(t[n]))&&(delete this._byId[a.id],delete this._byId[a.cid],o=this.indexOf(a),this.models.splice(o,1),this.length--,e.silent||(e.index=o,a.trigger("remove",a,this,e)),this._removeReference(a,e));return r?t[0]:t},set:function(t,e){(e=x.defaults({},e,$)).parse&&(t=this.parse(t,e));var n,i,o,a,r=!x.isArray(t),s=(t=r?t?[t]:[]:x.clone(t),e.at),l=this.model,c=this.comparator&&null==s&&!1!==e.sort,p=x.isString(this.comparator)?this.comparator:null,u=[],d=[],h={},f=e.add,m=e.merge,g=e.remove,v=!(c||!f||!g)&&[];for(b=0,w=t.length;b<w;b++){if(o=(i=t[b]||{})instanceof k?n=i:i[l.prototype.idAttribute||"id"],o=this.get(o))g&&(h[o.cid]=!0),m&&(i=i===n?n.attributes:i,e.parse&&(i=o.parse(i,e)),o.set(i,e),c)&&!a&&o.hasChanged(p)&&(a=!0),t[b]=o;else if(f){if(!(n=t[b]=this._prepareModel(i,e)))continue;u.push(n),this._addReference(n,e)}n=o||n,!v||!n.isNew()&&h[n.id]||v.push(n),h[n.id]=!0}if(g){for(b=0,w=this.length;b<w;++b)h[(n=this.models[b]).cid]||d.push(n);d.length&&this.remove(d,e)}if(u.length||v&&v.length)if(c&&(a=!0),this.length+=u.length,null!=s)for(b=0,w=u.length;b<w;b++)this.models.splice(s+b,0,u[b]);else{v&&(this.models.length=0);for(var y=v||u,b=0,w=y.length;b<w;b++)this.models.push(y[b])}if(a&&this.sort({silent:!0}),!e.silent){for(b=0,w=u.length;b<w;b++)(n=u[b]).trigger("add",n,this,e);(a||v&&v.length)&&this.trigger("sort",this,e)}return r?t[0]:t},reset:function(t,e){e=e||{};for(var n=0,i=this.models.length;n<i;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,x.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,x.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,x.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(n,t){return x.isEmpty(n)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var e in n)if(n[e]!==t.get(e))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(this.comparator)return t=t||{},x.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(x.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this;throw new Error("Cannot sort a set without a comparator")},pluck:function(t){return x.invoke(this.models,"get",t)},fetch:function(n){void 0===(n=n?x.clone(n):{}).parse&&(n.parse=!0);var i=n.success,o=this;return n.success=function(t){var e=n.reset?"reset":"set";o[e](t,n),i&&i(o,t,n),o.trigger("sync",o,t,n)},O(this,n),this.sync("read",this,n)},create:function(t,n){if(n=n?x.clone(n):{},!(t=this._prepareModel(t,n)))return!1;n.wait||this.add(t,n);var i=this,o=n.success;return n.success=function(t,e){n.wait&&i.add(t,n),o&&o(t,e,n)},t.save(null,n),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){return!(t instanceof k)&&(t=new((e=e?x.clone(e):{}).collection=this).model(t,e)).validationError?(this.trigger("invalid",this,t.validationError,e),!1):t},_addReference:function(t,e){null!=(this._byId[t.cid]=t).id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id)&&(this._byId[e.id]=e),this.trigger.apply(this,arguments))}}),x.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"],function(e){c.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),x[e].apply(x,t)}}),x.each(["groupBy","countBy","sortBy","indexBy"],function(i){c.prototype[i]=function(e,t){var n=x.isFunction(e)?e:function(t){return t.get(e)};return x[i](this.models,n,t)}}),r.View=function(t){this.cid=x.uniqueId("view"),x.extend(this,x.pick(t=t||{},h)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()}),d=/^(\S+)\s*(.*)$/,h=["model","collection","el","id","attributes","className","tagName","events"],f=(x.extend(i.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof r.$?t:r.$(t),this.el=this.$el[0],!1!==e&&this.delegateEvents(),this},delegateEvents:function(t){if(t=t||x.result(this,"events"))for(var e in this.undelegateEvents(),t){var n,i=t[e];(i=x.isFunction(i)?i:this[t[e]])&&(n=(e=e.match(d))[1],e=e[2],i=x.bind(i,this),n+=".delegateEvents"+this.cid,""===e?this.$el.on(n,i):this.$el.on(n,e,i))}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){var t;this.el?this.setElement(x.result(this,"el"),!1):(t=x.extend({},x.result(this,"attributes")),this.id&&(t.id=x.result(this,"id")),this.className&&(t.class=x.result(this,"className")),t=r.$("<"+x.result(this,"tagName")+">").attr(t),this.setElement(t,!1))}}),r.sync=function(t,e,n){var i,o=m[t],a=(x.defaults(n=n||{},{emulateHTTP:r.emulateHTTP,emulateJSON:r.emulateJSON}),{type:o,dataType:"json"}),t=(n.url||(a.url=x.result(e,"url")||E()),null!=n.data||!e||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(n.attrs||e.toJSON(n))),n.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),!n.emulateHTTP||"PUT"!==o&&"DELETE"!==o&&"PATCH"!==o||(a.type="POST",n.emulateJSON&&(a.data._method=o),i=n.beforeSend,n.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),i)return i.apply(this,arguments)}),"GET"===a.type||n.emulateJSON||(a.processData=!1),"PATCH"===a.type&&f&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}),n.xhr=r.ajax(x.extend(a,n)));return e.trigger("request",e,t,n),t},!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent)),m={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"},e=(r.ajax=function(){return r.$.ajax.apply(r.$,arguments)},r.Router=function(t){(t=t||{}).routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)}),g=/\((.*?)\)/g,v=/(\(\?)?:\w+/g,y=/\*\w+/g,b=/[\-{}\[\]+?.,\\\^$|#\s]/g,w=(x.extend(e.prototype,a,{initialize:function(){},route:function(e,n,i){x.isRegExp(e)||(e=this._routeToRegExp(e)),x.isFunction(n)&&(i=n,n=""),i=i||this[n];var o=this;return r.history.route(e,function(t){t=o._extractParameters(e,t);o.execute(i,t),o.trigger.apply(o,["route:"+n].concat(t)),o.trigger("route",n,t),r.history.trigger("route",o,n,t)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,e){return r.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=x.result(this,"routes");for(var t,e=x.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(b,"\\$&").replace(g,"(?:$1)?").replace(v,function(t,e){return e?t:"([^/?]+)"}).replace(y,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return x.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}}),r.History=function(){this.handlers=[],x.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)}),T=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,C=/msie [\w.]+/,S=/\/$/,N=/#.*$/,E=(w.started=!1,x.extend(w.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){t=(t||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(t,e){return null==t&&(this._hasPushState||!this._wantsHashChange||e?(t=decodeURI(this.location.pathname+this.location.search),e=this.root.replace(S,""),t.indexOf(e)||(t=t.slice(e.length))):t=this.getHash()),t.replace(T,"")},start:function(t){if(w.started)throw new Error("Backbone.history has already been started");w.started=!0,this.options=x.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),e=document.documentMode,e=C.exec(navigator.userAgent.toLowerCase())&&(!e||e<=7),n=(this.root=("/"+this.root+"/").replace(_,"/"),e&&this._wantsHashChange&&(n=r.$('<iframe src="javascript:0" tabindex="-1">'),this.iframe=n.hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?r.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!e?r.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t,this.location);if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&n.hash&&(this.fragment=this.getHash().replace(T,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){r.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),w.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if((e=e===this.fragment&&this.iframe?this.getFragment(this.getHash(this.iframe)):e)===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),x.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(t,e){if(!w.started)return!1;e&&!0!==e||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(N,""),this.fragment!==t){if(""===(this.fragment=t)&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){n?(n=t.href.replace(/(javascript:|#).*$/,""),t.replace(n+"#"+e)):t.hash="#"+e}}),r.history=new w,k.extend=c.extend=e.extend=i.extend=w.extend=function(t,e){function n(){this.constructor=o}var i=this,o=t&&x.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)};x.extend(o,i,e);return n.prototype=i.prototype,o.prototype=new n,t&&x.extend(o.prototype,t),o.__super__=i.prototype,o},function(){throw new Error('A "url" property or function must be specified')}),O=function(e,n){var i=n.error;n.error=function(t){i&&i(e,t,n),e.trigger("error",e,t,n)}};return r}),define("mockup-router",["underscore","backbone"],function(r,t){"use strict";function s(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}return new(t.Router.extend({actions:[],redirects:{},addRoute:function(t,e,n,i,o,a){void 0===r.findWhere(this.patterns,{patternName:t,id:e})&&this.actions.push({patternName:t,id:e,callback:n,context:i,pathExp:o,expReplace:a});n=new RegExp("("+s(t)+":"+s(e)+")");this.route(n,"handleRoute")},addRedirect:function(t,e){this.redirects[t]=e},handleRoute:function(t){var t=t.split(":"),e=t[0],t=t[1],e=r.findWhere(this.actions,{patternName:e,id:t});e&&e.callback.call(e.context)},redirect:function(){var n,i,o,a=window.parent.location.pathname;if(r.some(this.actions,function(t){var e;if(t.pathExp&&(i=new RegExp(t.pathExp),a.match(i)))return o="!/"+t.patternName+":"+t.id,e="",t.expReplace&&(e=t.expReplace),n=a.replace(i,e),!0},this),void 0===o)for(var t in this.redirects)if(i=new RegExp(t),a.match(i)){o="!/"+this.redirects[t],n=a.replace(i,"");break}void 0!==o&&this._changeLocation.apply(this,[n,o])},_changeLocation:function(t,e){window.parent.location.hash=e,window.parent.location.pathname=t},start:function(){t.history.start()},reset:function(){this.actions=[]}}))}),function(n){"function"==typeof define&&define.amd?define("jquery.form",["jquery"],n):"object"==typeof module&&module.exports?module.exports=function(t,e){return void 0===e&&(e="undefined"!=typeof window?require("jquery"):require("jquery")(t)),n(e),e}:n(jQuery)}(function(j){"use strict";var d=/\r?\n/g,m={},D=(m.fileapi=void 0!==j('<input type="file">').get(0).files,m.formdata=void 0!==window.FormData,!!j.fn.prop);function a(t){var e=t.data;t.isDefaultPrevented()||(t.preventDefault(),j(t.target).closest("form").ajaxSubmit(e))}function r(t){var e=t.target,n=j(e);if(!n.is("[type=submit],[type=image]")){var i=n.closest("[type=submit]");if(0===i.length)return;e=i[0]}var o=e.form;"image"===(o.clk=e).type&&(void 0!==t.offsetX?(o.clk_x=t.offsetX,o.clk_y=t.offsetY):"function"==typeof j.fn.offset?(i=n.offset(),o.clk_x=t.pageX-i.left,o.clk_y=t.pageY-i.top):(o.clk_x=t.pageX-e.offsetLeft,o.clk_y=t.pageY-e.offsetTop)),setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)}function I(){var t;j.fn.ajaxSubmit.debug&&(t="[jquery.form] "+Array.prototype.join.call(arguments,""),window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t))}j.fn.attr2=function(){var t;return D&&((t=this.prop.apply(this,arguments))&&t.jquery||"string"==typeof t)?t:this.attr.apply(this,arguments)},j.fn.ajaxSubmit=function(N,t,e,n){if(this.length){var E,O=this,n=("function"==typeof N?N={success:N}:"string"==typeof N||!1===N&&0<arguments.length?(N={url:N,data:t,dataType:e},"function"==typeof n&&(N.success=n)):void 0===N&&(N={}),E=N.method||N.type||this.attr2("method"),e=(e=(e="string"==typeof(t=N.url||this.attr2("action"))?j.trim(t):"")||window.location.href||"")&&(e.match(/^([^#]+)/)||[])[1],N=j.extend(!0,{url:e,success:j.ajaxSettings.success,type:E||j.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},N),{});if(this.trigger("form-pre-serialize",[this,N,n]),n.veto)I("ajaxSubmit: submit vetoed via form-pre-serialize trigger");else if(N.beforeSerialize&&!1===N.beforeSerialize(this,N))I("ajaxSubmit: submit aborted via beforeSerialize callback");else{var t=N.traditional,A=(void 0===t&&(t=j.ajaxSettings.traditional),[]),i=this.formToArray(N.semantic,A,N.filtering);if(N.data&&(e=j.isFunction(N.data)?N.data(i):N.data,N.extraData=e,c=j.param(e,t)),N.beforeSubmit&&!1===N.beforeSubmit(i,this,N))I("ajaxSubmit: submit aborted via beforeSubmit callback");else if(this.trigger("form-submit-validate",[i,this,N,n]),n.veto)I("ajaxSubmit: submit vetoed via form-submit-validate trigger");else{var a,o,r,e=j.param(i,t),s=(c&&(e=e?e+"&"+c:c),"GET"===N.type.toUpperCase()?(N.url+=(0<=N.url.indexOf("?")?"&":"?")+e,N.data=null):N.data=e,[]);N.resetForm&&s.push(function(){O.resetForm()}),N.clearForm&&s.push(function(){O.clearForm(N.includeHidden)}),!N.dataType&&N.target?(a=N.success||function(){},s.push(function(t,e,n){var i=arguments,o=N.replaceTarget?"replaceWith":"html";j(N.target)[o](t).each(function(){a.apply(this,i)})})):N.success&&(j.isArray(N.success)?j.merge(s,N.success):s.push(N.success)),N.success=function(t,e,n){for(var i=N.context||this,o=0,a=s.length;o<a;o++)s[o].apply(i,[t,e,n||O,O])},N.error&&(o=N.error,N.error=function(t,e,n){var i=N.context||this;o.apply(i,[t,e,n,O])}),N.complete&&(r=N.complete,N.complete=function(t,e){var n=N.context||this;r.apply(n,[t,e,O])});var l,n=0<j("input[type=file]:enabled",this).filter(function(){return""!==j(this).val()}).length,t="multipart/form-data",c=O.attr("enctype")===t||O.attr("encoding")===t,e=m.fileapi&&m.formdata;I("fileAPI :"+e),!1!==N.iframe&&(N.iframe||(n||c)&&!e)?N.closeKeepAlive?j.get(N.closeKeepAlive,function(){l=u(i)}):l=u(i):l=(n||c)&&e?function(t){for(var n=new FormData,e=0;e<t.length;e++)n.append(t[e].name,t[e].value);if(N.extraData){var i=function(t){var e,n,i=j.param(t,N.traditional).split("&"),o=i.length,a=[];for(e=0;e<o;e++)i[e]=i[e].replace(/\+/g," "),n=i[e].split("="),a.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return a}(N.extraData);for(e=0;e<i.length;e++)i[e]&&n.append(i[e][0],i[e][1])}N.data=null;var o=j.extend(!0,{},j.ajaxSettings,N,{contentType:!1,processData:!1,cache:!1,type:E||"POST"});N.uploadProgress&&(o.xhr=function(){var t=j.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(t){var e=0,n=t.loaded||t.position,i=t.total;t.lengthComputable&&(e=Math.ceil(n/i*100)),N.uploadProgress(t,n,i,e)},!1),t});o.data=null;var a=o.beforeSend;return o.beforeSend=function(t,e){N.formData?e.data=N.formData:e.data=n,a&&a.call(this,t,e)},j.ajax(o)}(i):j.ajax(N),O.removeData("jqxhr").data("jqxhr",l);for(var p=0;p<A.length;p++)A[p]=null;this.trigger("form-submit-notify",[this,N])}}}else I("ajaxSubmit: skipping submit process - no element selected");return this;function u(t){var e,n,c,p,u,d,h,f,m,a=O[0],g=j.Deferred();if(g.abort=function(t){h.abort(t)},t)for(n=0;n<A.length;n++)e=j(A[n]),D?e.prop("disabled",!1):e.removeAttr("disabled");(c=j.extend(!0,{},j.ajaxSettings,N)).context=c.context||c;var v,y,i,b,w,x,k,$,r,T,s="jqFormIO"+(new Date).getTime(),l=a.ownerDocument,_=O.closest("body");return c.iframeTarget?(i=(u=j(c.iframeTarget,l)).attr2("name"))?s=i:u.attr2("name",s):(u=j('<iframe name="'+s+'" src="'+c.iframeSrc+'" />',l)).css({position:"absolute",top:"-1000px",left:"-1000px"}),d=u[0],h={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var e="timeout"===t?"timeout":"aborted";I("aborting upload... "+e),this.aborted=1;try{d.contentWindow.document.execCommand&&d.contentWindow.document.execCommand("Stop")}catch(t){}u.attr("src",c.iframeSrc),h.error=e,c.error&&c.error.call(c.context,h,e,t),p&&j.event.trigger("ajaxError",[h,c,e]),c.complete&&c.complete.call(c.context,h,e)}},(p=c.global)&&0==j.active++&&j.event.trigger("ajaxStart"),p&&j.event.trigger("ajaxSend",[h,c]),c.beforeSend&&!1===c.beforeSend.call(c.context,h,c)?(c.global&&j.active--,g.reject()):h.aborted?g.reject():((t=a.clk)&&(i=t.name)&&!t.disabled&&(c.extraData=c.extraData||{},c.extraData[i]=t.value,"image"===t.type)&&(c.extraData[i+".x"]=a.clk_x,c.extraData[i+".y"]=a.clk_y),v=1,y=2,t=j("meta[name=csrf-token]").attr("content"),(i=j("meta[name=csrf-param]").attr("content"))&&t&&(c.extraData=c.extraData||{},c.extraData[i]=t),c.forceSync?o():setTimeout(o,10),x=50,$=j.parseXML||function(t,e){return window.ActiveXObject?((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!==e.documentElement.nodeName?e:null},r=j.parseJSON||function(t){return window.eval("("+t+")")},T=function(t,e,n){var i=t.getResponseHeader("content-type")||"",o=("xml"===e||!e)&&0<=i.indexOf("xml"),t=o?t.responseXML:t.responseText;return o&&"parsererror"===t.documentElement.nodeName&&j.error&&j.error("parsererror"),"string"==typeof(t=n&&n.dataFilter?n.dataFilter(t,e):t)&&(("json"===e||!e)&&0<=i.indexOf("json")?t=r(t):("script"===e||!e)&&0<=i.indexOf("javascript")&&j.globalEval(t)),t}),g;function C(e){var n=null;try{e.contentWindow&&(n=e.contentWindow.document)}catch(t){I("cannot get iframe.contentWindow document: "+t)}if(!n)try{n=e.contentDocument||e.document}catch(t){I("cannot get iframe.contentDocument: "+t),n=e.document}return n}function o(){var t=O.attr2("target"),e=O.attr2("action"),n=O.attr("enctype")||O.attr("encoding")||"multipart/form-data";a.setAttribute("target",s),E&&!/post/i.test(E)||a.setAttribute("method","POST"),e!==c.url&&a.setAttribute("action",c.url),c.skipEncodingOverride||E&&!/post/i.test(E)||O.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),c.timeout&&(m=setTimeout(function(){f=!0,S(v)},c.timeout));var i=[];try{if(c.extraData)for(var o in c.extraData)c.extraData.hasOwnProperty(o)&&(j.isPlainObject(c.extraData[o])&&c.extraData[o].hasOwnProperty("name")&&c.extraData[o].hasOwnProperty("value")?i.push(j('<input type="hidden" name="'+c.extraData[o].name+'">',l).val(c.extraData[o].value).appendTo(a)[0]):i.push(j('<input type="hidden" name="'+o+'">',l).val(c.extraData[o]).appendTo(a)[0]));c.iframeTarget||u.appendTo(_),d.attachEvent?d.attachEvent("onload",S):d.addEventListener("load",S,!1),setTimeout(function t(){try{var e=C(d).readyState;I("state = "+e),e&&"uninitialized"===e.toLowerCase()&&setTimeout(t,50)}catch(t){I("Server abort: ",t," (",t.name,")"),S(y),m&&clearTimeout(m),m=void 0}},15);try{a.submit()}catch(t){document.createElement("form").submit.apply(a)}}finally{a.setAttribute("action",e),a.setAttribute("enctype",n),t?a.setAttribute("target",t):O.removeAttr("target"),j(i).remove()}}function S(e){if(!h.aborted&&!k)if((w=C(d))||(I("cannot access response document"),e=y),e===v&&h)h.abort("timeout"),g.reject(h,"timeout");else if(e===y&&h)h.abort("server abort"),g.reject(h,"error","server abort");else if(w&&w.location.href!==c.iframeSrc||f){d.detachEvent?d.detachEvent("onload",S):d.removeEventListener("load",S,!1);var n,e="success";try{if(f)throw"timeout";var t="xml"===c.dataType||w.XMLDocument||j.isXMLDoc(w);if(I("isXml="+t),!t&&window.opera&&(null===w.body||!w.body.innerHTML)&&--x)return I("requeing onLoad callback, DOM not available"),void setTimeout(S,250);var i,o,a,r=w.body||w.documentElement,s=(h.responseText=r?r.innerHTML:null,h.responseXML=w.XMLDocument||w,t&&(c.dataType="xml"),h.getResponseHeader=function(t){return{"content-type":c.dataType}[t.toLowerCase()]},r&&(h.status=Number(r.getAttribute("status"))||h.status,h.statusText=r.getAttribute("statusText")||h.statusText),(c.dataType||"").toLowerCase()),l=/(json|script|text)/.test(s);l||c.textarea?(i=w.getElementsByTagName("textarea")[0])?(h.responseText=i.value,h.status=Number(i.getAttribute("status"))||h.status,h.statusText=i.getAttribute("statusText")||h.statusText):l&&(o=w.getElementsByTagName("pre")[0],a=w.getElementsByTagName("body")[0],o?h.responseText=o.textContent||o.innerText:a&&(h.responseText=a.textContent||a.innerText)):"xml"===s&&!h.responseXML&&h.responseText&&(h.responseXML=$(h.responseText));try{b=T(h,s,c)}catch(t){e="parsererror",h.error=n=t||e}}catch(t){I("error caught: ",t),e="error",h.error=n=t||e}h.aborted&&(I("upload aborted"),e=null),"success"===(e=h.status?200<=h.status&&h.status<300||304===h.status?"success":"error":e)?(c.success&&c.success.call(c.context,b,"success",h),g.resolve(h.responseText,"success",h),p&&j.event.trigger("ajaxSuccess",[h,c])):e&&(void 0===n&&(n=h.statusText),c.error&&c.error.call(c.context,h,e,n),g.reject(h,"error",n),p)&&j.event.trigger("ajaxError",[h,c,n]),p&&j.event.trigger("ajaxComplete",[h,c]),p&&!--j.active&&j.event.trigger("ajaxStop"),c.complete&&c.complete.call(c.context,h,e),k=!0,c.timeout&&clearTimeout(m),setTimeout(function(){c.iframeTarget?u.attr("src",c.iframeSrc):u.remove(),h.responseXML=null},100)}}}},j.fn.ajaxForm=function(t,e,n,i){var o;return("string"==typeof t||!1===t&&0<arguments.length)&&(t={url:t,data:e,dataType:n},"function"==typeof i)&&(t.success=i),(t=t||{}).delegation=t.delegation&&j.isFunction(j.fn.on),t.delegation||0!==this.length?t.delegation?(j(document).off("submit.form-plugin",this.selector,a).off("click.form-plugin",this.selector,r).on("submit.form-plugin",this.selector,t,a).on("click.form-plugin",this.selector,t,r),this):this.ajaxFormUnbind().on("submit.form-plugin",t,a).on("click.form-plugin",t,r):(o={s:this.selector,c:this.context},!j.isReady&&o.s?(I("DOM not ready, queuing ajaxForm"),j(function(){j(o.s,o.c).ajaxForm(t)})):I("terminating; zero elements found by selector"+(j.isReady?"":" (DOM not ready)")),this)},j.fn.ajaxFormUnbind=function(){return this.off("submit.form-plugin click.form-plugin")},j.fn.formToArray=function(t,e,n){var i=[];if(0!==this.length){var o=this[0],a=this.attr("id"),r=(r=t||void 0===o.elements?o.getElementsByTagName("*"):o.elements)&&j.makeArray(r);if((r=a&&(t||/(Edge|Trident)\//.test(navigator.userAgent))&&(a=j(':input[form="'+a+'"]').get()).length?(r||[]).concat(a):r)&&r.length){for(var s,l,c,p,u,d=0,h=(r=j.isFunction(n)?j.map(r,n):r).length;d<h;d++)if((u=(c=r[d]).name)&&!c.disabled)if(t&&o.clk&&"image"===c.type)o.clk===c&&(i.push({name:u,value:j(c).val(),type:c.type}),i.push({name:u+".x",value:o.clk_x},{name:u+".y",value:o.clk_y}));else if((l=j.fieldValue(c,!0))&&l.constructor===Array)for(e&&e.push(c),s=0,p=l.length;s<p;s++)i.push({name:u,value:l[s]});else if(m.fileapi&&"file"===c.type){e&&e.push(c);var f=c.files;if(f.length)for(s=0;s<f.length;s++)i.push({name:u,value:f[s],type:c.type});else i.push({name:u,value:"",type:c.type})}else null!=l&&(e&&e.push(c),i.push({name:u,value:l,type:c.type,required:c.required}));!t&&o.clk&&(u=(n=(a=j(o.clk))[0]).name)&&!n.disabled&&"image"===n.type&&(i.push({name:u,value:a.val()}),i.push({name:u+".x",value:o.clk_x},{name:u+".y",value:o.clk_y}))}}return i},j.fn.formSerialize=function(t){return j.param(this.formToArray(t))},j.fn.fieldSerialize=function(o){var a=[];return this.each(function(){var t=this.name;if(t){var e=j.fieldValue(this,o);if(e&&e.constructor===Array)for(var n=0,i=e.length;n<i;n++)a.push({name:t,value:e[n]});else null!=e&&a.push({name:this.name,value:e})}}),j.param(a)},j.fn.fieldValue=function(t){for(var e=[],n=0,i=this.length;n<i;n++){var o=this[n],o=j.fieldValue(o,t);null==o||o.constructor===Array&&!o.length||(o.constructor===Array?j.merge(e,o):e.push(o))}return e},j.fieldValue=function(t,e){var n=t.name,i=t.type,o=t.tagName.toLowerCase();if((e=void 0===e?!0:e)&&(!n||t.disabled||"reset"===i||"button"===i||("checkbox"===i||"radio"===i)&&!t.checked||("submit"===i||"image"===i)&&t.form&&t.form.clk!==t||"select"===o&&-1===t.selectedIndex))return null;if("select"!==o)return j(t).val().replace(d,"\r\n");e=t.selectedIndex;if(e<0)return null;for(var a=[],r=t.options,s="select-one"===i,l=s?e+1:r.length,c=s?e:0;c<l;c++){var p=r[c];if(p.selected&&!p.disabled){var u=(u=p.value)||(p.attributes&&p.attributes.value&&!p.attributes.value.specified?p.text:p.value);if(s)return u;a.push(u)}}return a},j.fn.clearForm=function(t){return this.each(function(){j("input,select,textarea",this).clearFields(t)})},j.fn.clearFields=j.fn.clearInputs=function(n){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,e=this.tagName.toLowerCase();i.test(t)||"textarea"===e?this.value="":"checkbox"===t||"radio"===t?this.checked=!1:"select"===e?this.selectedIndex=-1:"file"===t?/MSIE/.test(navigator.userAgent)?j(this).replaceWith(j(this).clone(!0)):j(this).val(""):n&&(!0===n&&/hidden/.test(t)||"string"==typeof n&&j(this).is(n))&&(this.value="")})},j.fn.resetForm=function(){return this.each(function(){var e=j(this),t=this.tagName.toLowerCase();switch(t){case"input":this.checked=this.defaultChecked;case"textarea":return this.value=this.defaultValue,!0;case"option":case"optgroup":var n=e.parents("select");return n.length&&n[0].multiple?"option"===t?this.selected=this.defaultSelected:e.find("option").resetForm():n.resetForm(),!0;case"select":return e.find("option").each(function(t){if(this.selected=this.defaultSelected,this.defaultSelected&&!e[0].multiple)return e[0].selectedIndex=t,!1}),!0;case"label":var n=j(e.attr("for")),i=e.find("input,select,textarea");return n[0]&&i.unshift(n[0]),i.resetForm(),!0;case"form":return"function"!=typeof this.reset&&("object"!=typeof this.reset||this.reset.nodeType)||this.reset(),!0;default:return e.find("form,input,label,select,textarea").resetForm(),!0}})},j.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},j.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var t=this.type;"checkbox"===t||"radio"===t?this.checked=e:"option"===this.tagName.toLowerCase()&&(t=j(this).parent("select"),e&&t[0]&&"select-one"===t[0].type&&t.find("option").selected(!1),this.selected=e)})},j.fn.ajaxSubmit.debug=!1}),define("mockup-patterns-modal",["jquery","underscore","pat-base","mockup-patterns-backdrop","pat-registry","mockup-router","mockup-utils","translate","jquery.form"],function(p,s,t,i,o,e,a,r){"use strict";return t.extend({name:"plone-modal",trigger:".pat-plone-modal",parser:"mockup",createModal:null,$model:null,defaults:{width:"",height:"",margin:20,position:"center middle",triggers:[],zIndexSelector:".plone-modal-wrapper,.plone-modal-backdrop",backdrop:"body",backdropOptions:{zIndex:"1040",opacity:"0.85",className:"plone-modal-backdrop",classActiveName:"plone-backdrop-active",closeOnEsc:!0,closeOnClick:!0},title:null,titleSelector:"h1:first",buttons:'.formControls > input[type="submit"], .formControls > button',content:"#content",automaticallyAddButtonActions:!0,loadLinksWithinModal:!0,prependContent:".portalMessage, #global_statusmessage",onRender:null,templateOptions:{className:"plone-modal fade",classDialog:"plone-modal-dialog",classModal:"plone-modal-content",classHeaderName:"plone-modal-header",classBodyName:"plone-modal-body",classFooterName:"plone-modal-footer",classWrapperName:"plone-modal-wrapper",classWrapperInnerName:"modal-wrapper-inner",classActiveName:"in",classPrependName:"",classContentName:"",template:'<div class="<%= options.className %>">  <div class="<%= options.classDialog %>">    <div class="<%= options.classModal %>">      <div class="<%= options.classHeaderName %>">        <a class="plone-modal-close">&times;</a>        <% if (title) { %><h2 class="plone-modal-title"><%= title %></h2><% } %>      </div>      <div class="<%= options.classBodyName %>">        <div class="<%= options.classPrependName %>"><%= prepend %></div>         <div class="<%= options.classContentName %>"><%= content %></div>      </div>      <div class="<%= options.classFooterName %>">         <% if (buttons) { %><%= buttons %><% } %>      </div>    </div>  </div></div>'},actions:{},actionOptions:{eventType:"click",disableAjaxFormSubmit:!1,target:null,ajaxUrl:null,modalFunction:null,isForm:!1,timeout:15e3,displayInModal:!0,reloadWindowOnClose:!0,error:".portalMessage.error, .alert-danger",formFieldError:".field.error",onSuccess:null,onError:function(){window.alert("An error occurred.")},onFormError:null,onTimeout:function(){window.alert("Timed out waiting for server.")},redirectOnResponse:!1,redirectToUrl:function(t,e,n){var i=/<body.*data-view-url=[\"'](.*)[\"'].*/im.exec(e);return i&&1<i.length||(i=/<body.*data-base-url=[\"'](.*)[\"'].*/im.exec(e))&&1<i.length?i[1].split('"')[0]:(i=/<base.*href=[\"'](.*)[\"'].*/im.exec(e))&&1<i.length?i[1]:""}},routerOptions:{id:null,pathExp:null},form:function(t){var a=this,r=a.$modal;a.options.automaticallyAddButtonActions&&(t[a.options.buttons]={}),t.a={},p.each(t,function(t,n){var e=s.union(s.keys(a.options.actionOptions),["templateOptions"]),i=p.extend(!0,{},a.options.actionOptions,s.pick(n,e)),e=(n.templateOptions=p.extend(!0,n.templateOptions,a.options.templateOptions),s.union(s.keys(a.options.actionOptions),["actions","actionOptions"])),o=p.extend(!0,s.omit(n,e),a.options);p(t,p("."+n.templateOptions.classBodyName,r)).each(function(t){var e=p(this);e.on(i.eventType,function(t){t.stopPropagation(),t.preventDefault(),a.loading.show(!1),null!==i.modalFunction?a[i.modalFunction]():p.nodeName(e[0],"input")||p.nodeName(e[0],"button")||!0===n.isForm?a.options.handleFormAction.apply(a,[e,i,o]):null===n.ajaxUrl&&!p.nodeName(e[0],"a")||a.options.handleLinkAction.apply(a,[e,i,o])})})})},handleFormAction:function(o,a,r){var t,e,s=this,n={};n[o.attr("name")]=o.attr("value"),t=p.nodeName(o[0],"form")?o:o.parents("form:not(.disableAutoSubmit)"),e=null!==a.ajaxUrl?"function"==typeof a.ajaxUrl?a.ajaxUrl.apply(s,[o,a]):a.ajaxUrl:o.parents("form").attr("action"),a.disableAjaxFormSubmit?(o.attr("name")&&o.attr("value")&&t.append(p('<input type="hidden" name="'+o.attr("name")+'" value="'+o.attr("value")+'" />')),t.trigger("submit")):(o.prop("disabled",!0),t.on("submit",function(t){t.preventDefault()}),t.trigger("submit"),s.loading.show(!1),t.ajaxSubmit({timeout:a.timeout,data:n,url:e,error:function(t,e,n){o.prop("disabled",!1),s.loading.hide(),"timeout"===e&&a.onTimeout?a.onTimeout.apply(s,t,n):a.onError?"string"==typeof a.onError?window[a.onError](t,e,n):a.onError(t,e,n):console.log("error happened",e," do something"),s.emit("formActionError",[t,e,n])},success:function(t,e,n,i){s.loading.hide(),0!==p(a.error,t).size()||0!==p(a.formFieldError,t).size()?a.onFormError?"string"==typeof a.onFormError?window[a.onFormError](s,t,e,n,i):a.onFormError(s,t,e,n,i):s.redraw(t,r):!0===a.redirectOnResponse?"function"==typeof a.redirectToUrl?window.parent.location.href=a.redirectToUrl.apply(s,[o,t,a]):window.parent.location.href=a.redirectToUrl:(a.onSuccess&&("string"==typeof a.onSuccess?window[a.onSuccess](s,t,e,n,i):a.onSuccess(s,t,e,n,i)),!0===a.displayInModal?s.redraw(t,r):(o.trigger("destroy.plone-modal.patterns"),a.reloadWindowOnClose&&s.reloadWindow()),s.emit("formActionSuccess",[t,e,n,i]))}}))},handleLinkAction:function(t,i,o){var e,a=this;t.hasClass("pat-plone-modal")||(e=i.ajaxUrl?"function"==typeof i.ajaxUrl?i.ajaxUrl.apply(a,[t,i]):i.ajaxUrl:t.attr("href"),!1===i.displayInModal?"_blank"===t.attr("target")?(window.open(e,"_blank"),a.loading.hide()):window.location=e:p.ajax({url:e}).fail(function(t,e,n){"timeout"===e&&i.onTimeout?i.onTimeout(a.$modal,t,n):i.onError?i.onError(t,e,n):window.alert(r("There was an error loading modal.")),a.emit("linkActionError",[t,e,n])}).done(function(t,e,n){a.redraw(t,o),i.onSuccess&&("string"==typeof i.onSuccess?window[i.onSuccess](a,t,e,n):i.onSuccess(a,t,e,n)),a.emit("linkActionSuccess",[t,e,n])}).always(function(){a.loading.hide()}))},render:function(t){var e,n,i,o=this;o.emit("before-render"),o.$raw&&(e=o.$raw.clone(),p("input:checked",e).each(function(){this.setAttribute&&this.setAttribute("checked","checked")}),n={title:"",prepend:"<div />",content:"",buttons:'<div class="pattern-modal-buttons"></div>',options:t.templateOptions},null===t.title?(i=p(t.titleSelector,e),n.title=i.html(),p(t.titleSelector,e).remove()):n.title=t.title,t.prependContent&&(n.prepend=p("<div />").append(p(t.prependContent,e).clone()).html(),p(t.prependContent,e).remove()),t.content?n.content=p(t.content,e).html():n.content=e.html(),o.$modal=p(s.template(o.options.templateOptions.template)(n)),o.$modalDialog=p("> ."+o.options.templateOptions.classDialog,o.$modal),o.$modalContent=p("> ."+o.options.templateOptions.classModal,o.$modalDialog),p("form",o.$modal).on("keydown",function(t){13===t.keyCode&&"TEXTAREA"!==t.target.nodeName&&(t.preventDefault(),p("input[type=submit], button[type=submit], button:not(type)",this).eq(0).trigger("click"))}),p(t.buttons,o.$modal).each(function(){var e=p(this);e.on("click",function(t){t.stopPropagation(),t.preventDefault()}).clone().appendTo(p(".pattern-modal-buttons",o.$modal)).off("click").on("click",function(t){t.stopPropagation(),t.preventDefault(),e.trigger("click")}),e.hide()}),o.emit("before-events-setup"),p(".plone-modal-header > a.plone-modal-close, .plone-modal-footer > a.plone-modal-close",o.$modal).off("click").on("click",function(t){t.stopPropagation(),t.preventDefault(),p(t.target).trigger("destroy.plone-modal.patterns")}),t.form&&t.form.apply(o,[t.actions]),o.$modal.addClass(o.options.templateOptions.className).on("destroy.plone-modal.patterns",function(t){t.stopPropagation(),o.hide()}).on("resize.plone-modal.patterns",function(t){t.stopPropagation(),t.preventDefault(),o.positionModal()}).on("click",function(t){t.stopPropagation()}).appendTo(o.$wrapperInner),o.options.loadLinksWithinModal&&o.$modal.on("click",function(t){p.nodeName(t.target,"a")&&t.preventDefault(),o.$modal.trigger("modal-click")}),o.$modal.data("pattern-"+o.name,o),o.emit("after-render"),t.onRender)&&("string"==typeof t.onRender?window[t.onRender](o):t.onRender(o))}},reloadWindow:function(){window.parent.location.reload()},init:function(){var i=this;i.options.loadLinksWithinModal=p.parseJSON(i.options.loadLinksWithinModal),null!==i.options.routerOptions.id&&e.addRoute("modal",i.options.routerOptions.id,function(){this.show()},i,i.options.routerOptions.pathExp,i.options.routerOptions.expReplace),!0===i.options.backdropOptions.closeOnEsc&&p(document).on("keydown",function(t,e){i.$el.is("."+i.options.templateOptions.classActiveName)&&27===t.keyCode&&i.hide()}),p(window.parent).resize(function(){i.positionModal()}),i.options.triggers&&p.each(i.options.triggers,function(t,e){var n=e.substring(0,e.indexOf(" ")),e=e.substring(e.indexOf(" "),e.length);p(e||i.$el).on(n,function(t){t.stopPropagation(),t.preventDefault(),i.show()})}),i.$el.is("a")&&(i.$el.attr("href")&&!i.options.image&&(i.options.target||"#"!==i.$el.attr("href").substr(0,1)||(i.options.target=i.$el.attr("href"),i.options.content=""),i.options.ajaxUrl||"#"===i.$el.attr("href").substr(0,1)||(i.options.ajaxUrl=function(){return i.$el.attr("href")})),i.$el.on("click",function(t){t.stopPropagation(),t.preventDefault(),i.show()})),i.$el.is('input[type="submit"]')&&i.$el.on("click",function(t){t.stopPropagation(),t.preventDefault(),i.backdrop=i.createBackdrop(),i.loading.show();var t=p.extend({},i.actionOptions,{displayInModal:!0,onSuccess:function(){i.loading.hide(),i.$raw=p("<div></div>"),i._show()}}),e=p.extend({},i.options,{backdropOptions:{closeOnClick:!1}});i.options.handleFormAction.apply(i,[i.$el,t,e])}),i.initModal()},createAjaxModal:function(){var o=this,t=(o.emit("before-ajax"),o.loading.show(),o.options.ajaxUrl);"function"==typeof t&&(t=t.apply(o,[o.options])),o.ajaxXHR=p.ajax({url:t,type:o.options.ajaxType}).done(function(t,e,n){o.ajaxXHR=void 0,o.$raw=p("<div />").append(p(a.parseBodyTag(t))),o.emit("after-ajax",o,e,n),o._show()}).fail(function(t,e,n){var i=o.options.actionOptions;"timeout"===e&&i.onTimeout?i.onTimeout(o.$modal,t,n):i.onError?i.onError(t,e,n):(window.alert(r("There was an error loading modal.")),o.hide()),o.emit("linkActionError",[t,e,n])}).always(function(){o.loading.hide()})},createTargetModal:function(){this.$raw=p(this.options.target).clone(),this._show()},createBasicModal:function(){this.$raw=p("<div/>").html(this.$el.clone()),this._show()},createHtmlModal:function(){var t=p(this.options.html);this.$raw=t,this._show()},createImageModal:function(){var t=this,e=(t.$wrapper.addClass("image-modal"),t.$el.attr("href")),n=t.$el.attr("data-modal-srcset")||"",i=p.trim(t.$el.context.innerText)||"Image";t.$raw=p("<div><h1>"+i+'</h1><div id="content"><div class="modal-image"><img src="'+e+'" srcset="'+n+'" /></div></div></div>'),t._show()},initModal:function(){var t=this;t.options.ajaxUrl?t.createModal=t.createAjaxModal:t.options.target?t.createModal=t.createTargetModal:t.options.html?t.createModal=t.createHtmlModal:t.options.image?t.createModal=t.createImageModal:t.createModal=t.createBasicModal},findPosition:function(t,e,n,i,o,a,r){var s,l,c={},p=l=s="auto";return"left"===t?(l=n+"px",c.left=l=a<i?"0px":l):"right"===t?(p=n+"px",c.right=p=a<i?"0px":p,c.left="auto"):(l=a/2-i/2-n+"px",c.left=l=a<i?"0px":l),"top"===e?(s=n+"px",c.top=s=r<o?"0px":s):"bottom"===e?(t=n+"px",c.bottom=t=r<o?"0px":t,c.top="auto"):(s=r/2-o/2-n+"px",c.top=s=r<o?"0px":s),c},modalInitialized:function(){return null!==this.$modal&&void 0!==this.$modal},positionModal:function(){var t=this;if(t.modalInitialized()){t.$modal.removeAttr("style"),t.$wrapper.parent().is("body")&&t.$wrapper.height(p(window.parent).height());var e,n="function"==typeof t.options.margin?t.options.margin():t.options.margin,i=(t.$modal.css({position:"absolute",padding:n}),t.$modalDialog.css({margin:"0",padding:"0",width:t.options.width,height:t.options.height}),t.$modalContent.css({width:t.options.width}),t.options.position.split(" ")),o=i[0],i=i[1],a=t.$modalDialog.outerWidth(!0),r=t.$modalDialog.outerHeight(!0),s=t.$wrapperInner.width(),l=t.$wrapperInner.height(),c=t.findPosition(o,i,n,a,r,s,l);for(e in c)t.$modalDialog.css(e,c[e])}},render:function(t){this.emit("render"),this.options.render.apply(this,[t]),this.emit("rendered")},show:function(){this.backdrop=this.createBackdrop(),this.createModal()},createBackdrop:function(){var e=this,n=new i(e.$el.parents(e.options.backdrop),e.options.backdropOptions),t=1041;return p(e.options.zIndexSelector).each(function(){t=Math.max(t,parseInt(p(this).css("zIndex"))+1||1041)}),e.$wrapper=p("<div/>").hide().css({"z-index":t,"overflow-y":"auto",position:"fixed",height:"100%",width:"100%",bottom:"0",left:"0",right:"0",top:"0"}).addClass(e.options.templateOptions.classWrapperName).insertBefore(n.$backdrop).on("click",function(t){e.options.backdropOptions.closeOnClick&&(t.stopPropagation(),t.preventDefault(),n.hide())}),n.on("hidden",function(t){void 0!==e.$modal&&e.$modal.hasClass(e.options.templateOptions.classActiveName)&&e.hide()}),e.loading=new a.Loading({backdrop:n}),e.$wrapperInner=p("<div/>").addClass(e.options.classWrapperInnerName).css({position:"absolute",bottom:"0",left:"0",right:"0",top:"0"}).appendTo(e.$wrapper),n},_show:function(){var t=this;t.render.apply(t,[t.options]),t.emit("show"),t.backdrop.show(),t.$wrapper.show(),t.loading.hide(),t.$el.addClass(t.options.templateOptions.classActiveName),t.$modal.addClass(t.options.templateOptions.classActiveName),o.scan(t.$modal),t.positionModal(),p(window.parent).on("resize.plone-modal.patterns",function(){t.positionModal()}),p("body").addClass("plone-modal-open"),t.emit("shown")},hide:function(){var t=this;t.ajaxXHR&&t.ajaxXHR.abort(),t.emit("hide"),t._suppressHide&&!window.confirm(t._suppressHide)||(t.loading.hide(),t.$el.removeClass(t.options.templateOptions.classActiveName),void 0!==t.$modal&&(t.$modal.remove(),t.initModal()),t.$wrapper.remove(),p(".plone-modal",p("body")).size()<1&&(t._suppressHide=void 0,t.backdrop.hide(),p("body").removeClass("plone-modal-open"),p(window.parent).off("resize.plone-modal.patterns")),t.emit("hidden"))},redraw:function(t,e){var n=this;n.emit("beforeDraw"),n.$modal.remove(),n.$raw=p("<div />").append(p(a.parseBodyTag(t))),n.render.apply(n,[e||n.options]),n.$modal.addClass(n.options.templateOptions.classActiveName),n.positionModal(),o.scan(n.$modal),n.emit("afterDraw")}})}),define("mockup-patterns-navigationmarker",["jquery","pat-base"],function(c,t){return t.extend({name:"navigationmarker",trigger:".pat-navigationmarker",parser:"mockup",init:function(){var l=document.querySelector('head link[rel="canonical"]').href||window.location.href;c("a",this.$el).each(function(){var t=this.href.replace("/view","");if(-1!==l.indexOf(t)){for(var e=c(this).parent(),n=e.find("> input"),i=(n.length&&(n[0].checked=!0),l.split("/")),o=t.split("/"),a=!1,r=0,s=o.length;r<s;r++)a=!1,o[r]===i[r]&&(a=!0);a&&e.addClass("inPath"),l===t&&e.addClass("current")}})}})}),define("mockup-patterns-preventdoublesubmit",["jquery","pat-base","translate"],function(n,t,e){"use strict";return t.extend({name:"preventdoublesubmit",trigger:".pat-preventdoublesubmit",parser:"mockup",defaults:{message:e("You already clicked the submit button. Do you really want to submit this form again?"),guardClassName:"submitting",optOutClassName:"allowMultiSubmit"},init:function(){var e=this;e.$el.is("form")&&n(":submit",e.$el).click(function(t){if(n(":submit").removeAttr("clicked"),n(this).attr("clicked","clicked"),n(this).hasClass(e.options.guardClassName)&&!n(this).hasClass(e.options.optOutClassName))return e._confirm.call(e);n(this).addClass(e.options.guardClassName)})},_confirm:function(t){return window.confirm(this.options.message)}})}),function(t){define("bootstrap-collapse",["jquery"],function(){return function(){return function(o){"use strict";function a(t,e){this.$element=o(t),this.options=o.extend({},a.DEFAULTS,e),this.$trigger=o('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()}function n(t){t=t.attr("data-target")||(t=t.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,"");return o(document).find(t)}function r(i){return this.each(function(){var t=o(this),e=t.data("bs.collapse"),n=o.extend({},a.DEFAULTS,t.data(),"object"==typeof i&&i);!e&&n.toggle&&/show|hide/.test(i)&&(n.toggle=!1),e||t.data("bs.collapse",e=new a(this,n)),"string"==typeof i&&e[i]()})}a.VERSION="3.4.1",a.TRANSITION_DURATION=350,a.DEFAULTS={toggle:!0},a.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},a.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(t&&t.length&&(i=t.data("bs.collapse"))&&i.transitioning)){var e=o.Event("show.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){t&&t.length&&(r.call(t,"hide"),i||t.data("bs.collapse",null));var n=this.dimension(),e=(this.$element.removeClass("collapse").addClass("collapsing")[n](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1,function(){this.$element.removeClass("collapsing").addClass("collapse in")[n](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")});if(!o.support.transition)return e.call(this);var i=o.camelCase(["scroll",n].join("-"));this.$element.one("bsTransitionEnd",o.proxy(e,this)).emulateTransitionEnd(a.TRANSITION_DURATION)[n](this.$element[0][i])}}}},a.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=o.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var t=this.dimension(),e=(this.$element[t](this.$element[t]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1,function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")});if(!o.support.transition)return e.call(this);this.$element[t](0).one("bsTransitionEnd",o.proxy(e,this)).emulateTransitionEnd(a.TRANSITION_DURATION)}}},a.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},a.prototype.getParent=function(){return o(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(o.proxy(function(t,e){e=o(e);this.addAriaAndCollapsedClass(n(e),e)},this)).end()},a.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var t=o.fn.collapse;o.fn.collapse=r,o.fn.collapse.Constructor=a,o.fn.collapse.noConflict=function(){return o.fn.collapse=t,this},o(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var e=o(this),t=(e.attr("data-target")||t.preventDefault(),n(e)),e=t.data("bs.collapse")?"toggle":e.data();r.call(t,e)})}(jQuery),window.jQuery.fn.collapse.Constructor}.apply(t,arguments)})}(this),function(t){define("bootstrap-dropdown",["jquery"],function(){return function(){!function(o){"use strict";function i(t){o(t).on("click.bs.dropdown",this.toggle)}var a='[data-toggle="dropdown"]';function r(t){var e=t.attr("data-target"),e="#"!==(e=e||(e=t.attr("href"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""))?o(document).find(e):null;return e&&e.length?e:t.parent()}function s(i){i&&3===i.which||(o(".dropdown-backdrop").remove(),o(a).each(function(){var t=o(this),e=r(t),n={relatedTarget:this};!e.hasClass("open")||i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&o.contains(e[0],i.target)||(e.trigger(i=o.Event("hide.bs.dropdown",n)),i.isDefaultPrevented())||(t.attr("aria-expanded","false"),e.removeClass("open").trigger(o.Event("hidden.bs.dropdown",n)))}))}i.VERSION="3.4.1",i.prototype.toggle=function(t){var e=o(this);if(!e.is(".disabled, :disabled")){var n=r(e),i=n.hasClass("open");if(s(),!i){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&o(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(o(this)).on("click",s);i={relatedTarget:this};if(n.trigger(t=o.Event("show.bs.dropdown",i)),t.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),n.toggleClass("open").trigger(o.Event("shown.bs.dropdown",i))}return!1}},i.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var e=o(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var n=r(e),i=n.hasClass("open");if(!i&&27!=t.which||i&&27==t.which)return 27==t.which&&n.find(a).trigger("focus"),e.trigger("click");i=n.find(".dropdown-menu li:not(.disabled):visible a");i.length&&(e=i.index(t.target),38==t.which&&0<e&&e--,40==t.which&&e<i.length-1&&e++,i.eq(e=~e?e:0).trigger("focus"))}}};var t=o.fn.dropdown;o.fn.dropdown=function(n){return this.each(function(){var t=o(this),e=t.data("bs.dropdown");e||t.data("bs.dropdown",e=new i(this)),"string"==typeof n&&e[n].call(t)})},o.fn.dropdown.Constructor=i,o.fn.dropdown.noConflict=function(){return o.fn.dropdown=t,this},o(document).on("click.bs.dropdown.data-api",s).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",a,i.prototype.toggle).on("keydown.bs.dropdown.data-api",a,i.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",i.prototype.keydown)}(jQuery)}.apply(t,arguments)})}(this),function(t){define("bootstrap-tooltip",["jquery"],function(){return function(){!function(h){"use strict";var i=["sanitize","whiteList","sanitizeFn"],f=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],t={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},m=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,g=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function o(t,e,n){if(0===t.length)return t;if(n&&"function"==typeof n)return n(t);if(!document.implementation||!document.implementation.createHTMLDocument)return t;for(var n=document.implementation.createHTMLDocument("sanitization"),i=(n.body.innerHTML=t,h.map(e,function(t,e){return e})),o=h(n.body).find("*"),a=0,r=o.length;a<r;a++){var s=o[a],l=s.nodeName.toLowerCase();if(-1===h.inArray(l,i))s.parentNode.removeChild(s);else for(var c=h.map(s.attributes,function(t){return t}),p=[].concat(e["*"]||[],e[l]||[]),u=0,d=c.length;u<d;u++)!function(t,e){var n=t.nodeName.toLowerCase();if(-1!==h.inArray(n,e))return-1===h.inArray(n,f)||Boolean(t.nodeValue.match(m)||t.nodeValue.match(g));for(var i=h(e).filter(function(t,e){return e instanceof RegExp}),o=0,a=i.length;o<a;o++)if(n.match(i[o]))return 1}(c[u],p)&&s.removeAttribute(c[u].nodeName)}return n.body.innerHTML}function l(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)}l.VERSION="3.4.1",l.TRANSITION_DURATION=150,l.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},sanitize:!0,sanitizeFn:null,whiteList:t},l.prototype.init=function(t,e,n){if(this.enabled=!0,this.type=t,this.$element=h(e),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&h(document).find(h.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),o=i.length;o--;){var a,r=i[o];"click"==r?this.$element.on("click."+this.type,this.options.selector,h.proxy(this.toggle,this)):"manual"!=r&&(a="hover"==r?"mouseleave":"focusout",this.$element.on(("hover"==r?"mouseenter":"focusin")+"."+this.type,this.options.selector,h.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,h.proxy(this.leave,this)))}this.options.selector?this._options=h.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},l.prototype.getDefaults=function(){return l.DEFAULTS},l.prototype.getOptions=function(t){var e,n=this.$element.data();for(e in n)n.hasOwnProperty(e)&&-1!==h.inArray(e,i)&&delete n[e];return(t=h.extend({},this.getDefaults(),n,t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t.sanitize&&(t.template=o(t.template,t.whiteList,t.sanitizeFn)),t},l.prototype.getDelegateOptions=function(){var n={},i=this.getDefaults();return this._options&&h.each(this._options,function(t,e){i[t]!=e&&(n[t]=e)}),n},l.prototype.enter=function(t){var e=t instanceof this.constructor?t:h(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),h(t.currentTarget).data("bs."+this.type,e)),t instanceof h.Event&&(e.inState["focusin"==t.type?"focus":"hover"]=!0),e.tip().hasClass("in")||"in"==e.hoverState)e.hoverState="in";else{if(clearTimeout(e.timeout),e.hoverState="in",!e.options.delay||!e.options.delay.show)return e.show();e.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show)}},l.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},l.prototype.leave=function(t){var e=t instanceof this.constructor?t:h(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),h(t.currentTarget).data("bs."+this.type,e)),t instanceof h.Event&&(e.inState["focusout"==t.type?"focus":"hover"]=!1),!e.isInStateTrue()){if(clearTimeout(e.timeout),e.hoverState="out",!e.options.delay||!e.options.delay.hide)return e.hide();e.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide)}},l.prototype.show=function(){var e,t,n,i,o,a,r,s=h.Event("show.bs."+this.type);this.hasContent()&&this.enabled&&(this.$element.trigger(s),o=h.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]),!s.isDefaultPrevented())&&o&&(s=(e=this).tip(),o=this.getUID(this.type),this.setContent(),s.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&s.addClass("fade"),o="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,(r=(t=/\s?auto?\s?/i).test(o))&&(o=o.replace(t,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(o).data("bs."+this.type,this),this.options.container?s.appendTo(h(document).find(this.options.container)):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type),t=this.getPosition(),n=s[0].offsetWidth,i=s[0].offsetHeight,r&&(r=o,a=this.getPosition(this.$viewport),o="bottom"==o&&t.bottom+i>a.bottom?"top":"top"==o&&t.top-i<a.top?"bottom":"right"==o&&t.right+n>a.width?"left":"left"==o&&t.left-n<a.left?"right":o,s.removeClass(r).addClass(o)),a=this.getCalculatedOffset(o,t,n,i),this.applyPlacement(a,o),r=function(){var t=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==t&&e.leave(e)},h.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",r).emulateTransitionEnd(l.TRANSITION_DURATION):r())},l.prototype.applyPlacement=function(t,e){var n=this.tip(),i=n[0].offsetWidth,o=n[0].offsetHeight,a=parseInt(n.css("margin-top"),10),r=parseInt(n.css("margin-left"),10),a=(isNaN(a)&&(a=0),isNaN(r)&&(r=0),t.top+=a,t.left+=r,h.offset.setOffset(n[0],h.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},t),0),n.addClass("in"),n[0].offsetWidth),r=n[0].offsetHeight,s=("top"==e&&r!=o&&(t.top=t.top+o-r),this.getViewportAdjustedDelta(e,t,a,r)),e=(s.left?t.left+=s.left:t.top+=s.top,/top|bottom/.test(e)),i=e?2*s.left-i+a:2*s.top-o+r,a=e?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(i,n[0][a],e)},l.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},l.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();this.options.html?(this.options.sanitize&&(e=o(e,this.options.whiteList,this.options.sanitizeFn)),t.find(".tooltip-inner").html(e)):t.find(".tooltip-inner").text(e),t.removeClass("fade in top bottom left right")},l.prototype.hide=function(t){var e=this,n=h(this.$tip),i=h.Event("hide.bs."+this.type);function o(){"in"!=e.hoverState&&n.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),t&&t()}if(this.$element.trigger(i),!i.isDefaultPrevented())return n.removeClass("in"),h.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",o).emulateTransitionEnd(l.TRANSITION_DURATION):o(),this.hoverState=null,this},l.prototype.fixTitle=function(){var t=this.$element;!t.attr("title")&&"string"==typeof t.attr("data-original-title")||t.attr("data-original-title",t.attr("title")||"").attr("title","")},l.prototype.hasContent=function(){return this.getTitle()},l.prototype.getPosition=function(t){var e=(t=t||this.$element)[0],n="BODY"==e.tagName,i=e.getBoundingClientRect(),e=(null==i.width&&(i=h.extend({},i,{width:i.right-i.left,height:i.bottom-i.top})),window.SVGElement&&e instanceof window.SVGElement),e=n?{top:0,left:0}:e?null:t.offset(),t={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},n=n?{width:h(window).width(),height:h(window).height()}:null;return h.extend({},i,t,n,e)},l.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},l.prototype.getViewportAdjustedDelta=function(t,e,n,i){var o,a,r={top:0,left:0};return this.$viewport&&(o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport),/right|left/.test(t)?(t=e.top-o-a.scroll,i=e.top+o-a.scroll+i,t<a.top?r.top=a.top-t:i>a.top+a.height&&(r.top=a.top+a.height-i)):(t=e.left-o,i=e.left+o+n,t<a.left?r.left=a.left-t:i>a.right&&(r.left=a.left+a.width-i))),r},l.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},l.prototype.getUID=function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},l.prototype.tip=function(){if(this.$tip||(this.$tip=h(this.options.template),1==this.$tip.length))return this.$tip;throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!")},l.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},l.prototype.enable=function(){this.enabled=!0},l.prototype.disable=function(){this.enabled=!1},l.prototype.toggleEnabled=function(){this.enabled=!this.enabled},l.prototype.toggle=function(t){var e=this;t&&!(e=h(t.currentTarget).data("bs."+this.type))&&(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),h(t.currentTarget).data("bs."+this.type,e)),t?(e.inState.click=!e.inState.click,e.isInStateTrue()?e.enter(e):e.leave(e)):e.tip().hasClass("in")?e.leave(e):e.enter(e)},l.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})},l.prototype.sanitizeHtml=function(t){return o(t,this.options.whiteList,this.options.sanitizeFn)};var e=h.fn.tooltip;h.fn.tooltip=function(i){return this.each(function(){var t=h(this),e=t.data("bs.tooltip"),n="object"==typeof i&&i;!e&&/destroy|hide/.test(i)||(e||t.data("bs.tooltip",e=new l(this,n)),"string"==typeof i&&e[i]())})},h.fn.tooltip.Constructor=l,h.fn.tooltip.noConflict=function(){return h.fn.tooltip=e,this}}(jQuery)}.apply(t,arguments)})}(this),require(["mockup-patterns-autotoc","mockup-patterns-contentloader","mockup-patterns-cookietrigger","mockup-patterns-formautofocus","mockup-patterns-formunloadalert","mockup-patterns-livesearch","mockup-patterns-markspeciallinks","mockup-patterns-modal","mockup-patterns-navigationmarker","mockup-patterns-preventdoublesubmit","bootstrap-collapse","bootstrap-dropdown","bootstrap-tooltip"],function(){}),define("/Users/alecmitchell/Development/bundles/mountaineers/src/plone.staticresources/src/plone/staticresources/static/plone.js",function(){});
//# sourceMappingURL=plone-compiled.min.js.map