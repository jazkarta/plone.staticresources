var Faceted={version:"2.0",Events:{}},FacetedTree=(Faceted.Events.INITIALIZE="FACETED-INITIALIZE",Faceted.Events.AJAX_QUERY_START="FACETED-AJAX-QUERY-START",Faceted.Events.AJAX_QUERY_SUCCESS="FACETED-AJAX-QUERY-SUCCESS",Faceted.Events.QUERY_INITIALIZED="FACETED-QUERY-INITIALIZED",Faceted.Events.QUERY_CHANGED="FACETED-QUERY-CHANGED",Faceted.Events.RESET="FACETED-RESET",Faceted.Events.FORM_DO_QUERY="FACETED-FORM-DO-QUERY",Faceted.Events.WINDOW_WIDTH_CHANGED="FACETED-WINDOW-WIDTH-CHANGED",Faceted.Events.WINDOW_HEIGHT_CHANGED="FACETED-WINDOW-HEIGHT-CHANGED",Faceted.Events.AJAX_START="FACETED-AJAX-START",Faceted.Events.AJAX_STOP="FACETED-AJAX-STOP",Faceted.Events.AJAX_ERROR="FACETED-AJAX-ERROR",Faceted.Events.REDRAW="FACETED-REDRAW",Faceted.Events.HASHCHANGE="hashchange.FACETED-HASHCHANGE",Faceted.Events.DO_UPDATE="FACETED-DO_UPDATE",Faceted.Events.CLEANUP_COMPLETED="FACETED-CLEANUP-COMPLETED",Faceted.Events.cleanup=function(){jQuery(Faceted.Events).unbind(Faceted.Events.AJAX_QUERY_START),jQuery(Faceted.Events).unbind(Faceted.Events.AJAX_QUERY_SUCCESS),jQuery(Faceted.Events).unbind(Faceted.Events.QUERY_INITIALIZED),jQuery(Faceted.Events).unbind(Faceted.Events.QUERY_CHANGED),jQuery(Faceted.Events).unbind(Faceted.Events.RESET),jQuery(Faceted.Events).unbind(Faceted.Events.FORM_DO_QUERY),jQuery(Faceted.Events).unbind(Faceted.Events.WINDOW_WIDTH_CHANGED),jQuery(Faceted.Events).unbind(Faceted.Events.WINDOW_HEIGHT_CHANGED),jQuery(Faceted.Events).unbind(Faceted.Events.AJAX_START),jQuery(Faceted.Events).unbind(Faceted.Events.AJAX_STOP),jQuery(Faceted.Events).unbind(Faceted.Events.AJAX_ERROR),jQuery(Faceted.Events).unbind(Faceted.Events.REDRAW),jQuery(Faceted.Events).unbind(Faceted.Events.DO_UPDATE),jQuery(window).unbind(Faceted.Events.HASHCHANGE),jQuery(Faceted.Events).trigger(Faceted.Events.CLEANUP_COMPLETED)},Faceted.Widgets={},Faceted.Query={},Faceted.BASEURL="",Faceted.Options={},Faceted.Options.SHOW_SPINNER=!0,Faceted.Options.FADE_SPEED="fast",Faceted.SortedQuery=function(t){t=t||Faceted.Query;var i=[],r=(jQuery.each(t,function(e){this&&"all"!=this&&i.push(e)}),i.sort(),{});return jQuery.each(i,function(e){r[this]=t[this]}),r},Faceted.Window={initialize:function(){this.width=jQuery(window).width(),this.height=jQuery(window).height();var e=this,t=(jQuery(window).resize(function(){e.width_change(),e.height_change()}),jQuery("a:has(img#icon-full_screen)"));t.length&&e.toggle_fullscreen(t)},width_change:function(){var e=jQuery(window).width();e!=this.width&&(this.width=e,jQuery(Faceted.Events).trigger(Faceted.Events.WINDOW_WIDTH_CHANGED,{width:e}))},height_change:function(){var e=jQuery(window).height();e!=this.height&&(this.height=e,jQuery(Faceted.Events).trigger(Faceted.Events.WINDOW_HEIGHT_CHANGED,{height:e}))},toggle_fullscreen:function(e){e.attr("href","#"),e.click(function(e){var t=window.toggleFullScreenMode;return t&&(t(),jQuery(Faceted.Events).trigger(Faceted.Events.WINDOW_WIDTH_CHANGED)),!1})}},Faceted.Form={initialize:function(){this.form=jQuery("#faceted-form"),this.area=jQuery("#faceted-results"),this.mode=this.form.data("mode")||"view",this.version="";var e=jQuery("#faceted-version",this.form),r=(e&&(this.version=e.text()),this.area),e=($(document).ajaxError(function(e,t,i){jQuery(r).html("<h3>This site encountered an error trying to fulfill your request</h3><p>If the error persists please contact the site maintainer. Thank you for your patience.</p>"),jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_ERROR)}),Faceted.URLHandler.get()),t=!jQuery.isEmptyObject(e);t&&(Faceted.Query=e),void 0===Faceted.Query.b_start&&(Faceted.Query.b_start=0),"search"===this.mode&&!t||(jQuery(Faceted.Events).trigger(Faceted.Events.QUERY_INITIALIZED),t?Faceted.URLHandler.hash_changed():Faceted.URLHandler.set())},initialize_paginator:function(){var t=this;Faceted.b_start_changed=!1,jQuery(".pagination a").each(function(e){jQuery(this).click(function(){var e=jQuery(this).attr("href"),e=new RegExp("b_start\\:int=(\\d+)").exec(e)[1];return Faceted.b_start_changed=!0,t.do_query("b_start",e),!1})})},reset:function(e){Faceted.Query={}},do_query:function(e,t){"b_start"==e||Faceted.b_start_changed||(Faceted.Query.b_start=0),t=t||[],e&&(Faceted.Query[e]=t),jQuery(Faceted.Events).trigger(Faceted.Events.FORM_DO_QUERY,{wid:e}),Faceted.URLHandler.set()},do_form_query:function(){var t=this;void 0===Faceted.Query.b_start&&(Faceted.Query.b_start=0),jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_QUERY_START),t.area.fadeOut("fast",function(){Faceted.Options.SHOW_SPINNER&&(t.area.html('<div class="faceted_loading"></div>'),t.area.fadeIn(Faceted.Options.FADE_SPEED));var e=Faceted.SortedQuery();e.b_start=e.b_start[0],t.version&&(e.version=t.version),jQuery.get(Faceted.BASEURL+"@@faceted_query",e,function(e){t.area.fadeOut("fast",function(){t.area.html(e),t.area.fadeIn(Faceted.Options.FADE_SPEED),jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_QUERY_SUCCESS)})})})},highlight:function(e,t,i){for(var r=0;r<e.length;r++){var a=jQuery("#"+e[r]);i?jQuery(a).removeClass(t):jQuery(a).addClass(t)}},raise_error:function(e,t,i){jQuery("#"+t).html(e='<div class="portalMessage">'+e+"</div>"),this.highlight(i,"error")},clear_errors:function(e,t){jQuery("#"+e).html(""),this.highlight(t,"error",!0)}},Faceted.URLHandler={initialize:function(){},hash_changed:function(){Faceted.Query=this.get(),jQuery(Faceted.Events).trigger(Faceted.Events.QUERY_CHANGED),Faceted.Form.do_form_query()},document_hash:function(){var e=window.location.href,t=e.indexOf("#");return 0<=t?e.substr(t+1):""},get:function(){var e=jQuery.bbq.getState(),i={},r=["number","boolean","string"];return jQuery.each(e,function(e,t){-1!==jQuery.inArray(typeof t,r)&&(t=[t]),i[e]=t}),i},set:function(e){e=e||Faceted.Query,e=jQuery.param(e,traditional=!0),jQuery.bbq.pushState(e,2)}},Faceted.Sections={initialize:function(){var t=this;t.form=jQuery(".faceted-form"),t.advanced=jQuery(".faceted-advanced-widgets",t.form).hide(),t.buttons=jQuery(".faceted-sections-buttons",t.form),t.advanced.length?(t.more=jQuery(".faceted-sections-buttons-more",t.form).show(),t.less=jQuery(".faceted-sections-buttons-less",t.form).hide(),jQuery("a",t.buttons).click(function(e){return t.toggle(jQuery(this),e),!1})):t.buttons.remove()},toggle:function(e,t){this.more.toggle(),this.less.toggle(),this.advanced.toggle("blind"),jQuery(".faceted-tagscloud-widget:visible",this.form).length&&jQuery(Faceted.Events).trigger(Faceted.Events.WINDOW_WIDTH_CHANGED)}},Faceted.AjaxLook={initialize:function(){this.slaves=[],this.locked=!1;var i=this;jQuery(Faceted.Events).bind(Faceted.Events.AJAX_START,function(e,t){i.add(t.wid)}),jQuery(Faceted.Events).bind(Faceted.Events.AJAX_STOP,function(e,t){i.remove(t.wid)}),jQuery(Faceted.Events).bind(Faceted.Events.AJAX_QUERY_START,function(e){i.add("faceted-results")}),jQuery(Faceted.Events).bind(Faceted.Events.AJAX_QUERY_SUCCESS,function(e){i.remove("faceted-results")}),jQuery(Faceted.Events).bind(Faceted.Events.AJAX_ERROR,function(e){jQuery(this.slaves).each(function(e){i.remove(i.slaves[e])})})},add:function(e){this.lock(),this.slaves.push(e);e=jQuery("#"+e+"_widget");e.length&&e.addClass("faceted-widget-loading")},remove:function(i){this.slaves.length&&(this.slaves=jQuery.map(this.slaves,function(e,t){return e==i?null:e}));var e=jQuery("#"+i+"_widget");e.length&&e.removeClass("faceted-widget-loading"),this.unlock()},lock:function(){var e;this.locked||(this.locked=!0,jQuery.each(Faceted.Widgets,function(e){this.widget.addClass("faceted-widget-locked")}),(e=jQuery("<div>")).addClass("faceted-lock-overlay"),e.addClass("ui-widget-overlay"),e.css("z-index",1001),jQuery("#faceted-form").append(e))},unlock:function(){this.slaves.length||(this.locked=!1,jQuery.each(Faceted.Widgets,function(e){this.widget.removeClass("faceted-widget-locked")}),jQuery(".faceted-lock-overlay").remove())}},Faceted.Load=function(e,t){t&&(Faceted.BASEURL=t),jQuery(".faceted-widget:has(div.faceted-widget-error)").remove(),jQuery(Faceted.Events).bind(Faceted.Events.REDRAW,function(){jQuery("#faceted-left-column:has(div.faceted-widget)").length?jQuery("#center-content-area").addClass("left-area-js"):jQuery("#center-content-area").removeClass("left-area-js"),jQuery("#faceted-right-column:has(div.faceted-widget)").length?jQuery("#center-content-area").addClass("right-area-js"):jQuery("#center-content-area").removeClass("right-area-js")}),jQuery(Faceted.Events).trigger(Faceted.Events.REDRAW),jQuery(Faceted.Events).trigger(Faceted.Events.INITIALIZE),jQuery(window).bind(Faceted.Events.HASHCHANGE,function(e){Faceted.URLHandler.hash_changed()}),jQuery(Faceted.Events).bind(Faceted.Events.AJAX_QUERY_SUCCESS,function(e){Faceted.Form.initialize_paginator()}),jQuery(Faceted.Events).bind(Faceted.Events.RESET,function(e){Faceted.Form.reset()}),Faceted.Window.initialize(),Faceted.Sections.initialize(),Faceted.AjaxLook.initialize(),Faceted.Form.initialize(),window.Calendar&&(Calendar.prototype.callCloseHandler=function(){this.onClose&&this.onClose(this),this.hideShowCovered();var e=(e=this.params.inputField.id).split("_")[2];return e&&Faceted.Widgets[e].do_query(),!1})},Faceted.Unload=function(){},Faceted.Cleanup=function(){Faceted.Events.cleanup(),Faceted.Widgets={},Faceted.Query={},Faceted.URLHandler.set()},define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/browser/javascript/view.js",function(){}),!function(s){s.fn.collapsible=function(e){var r=this,a=(r.colapsed=!1,{maxitems:0,elements:"li",more:"More",less:"Less",events:{refresh:"widget-refresh",expand:"widget-expand",colapse:"widget-colapse"},handle_refresh:function(e,t){var i;s(a.elements,r).show(),r.button.hide(),!a.maxitems||(i=s(a.elements,r)).length<a.maxitems||(r.colapsed?s("a",r.button).text(a.more):s("a",r.button).text(a.less),r.button.show(),r.colapsed&&i.each(function(e){e<a.maxitems?s(this).show():s(this).hide()}))},handle_expand:function(e,t){r.colapsed=!1,r.trigger(a.events.refresh)},handle_colapse:function(e,t){r.colapsed=!0,r.trigger(a.events.refresh)},initialize:function(){r.bind(a.events.refresh,function(e,t){a.handle_refresh(e,t)}),r.bind(a.events.expand,function(e,t){a.handle_expand(e,t)}),r.bind(a.events.colapse,function(e,t){a.handle_colapse(e,t)});var e=s("<a>").attr("href","#").text("More");r.button=s("<div>").addClass("faceted-checkbox-more").append(e).hide(),r.append(r.button),e.click(function(){return r.colapsed?r.trigger(a.events.expand):r.trigger(a.events.colapse),!1}),a.maxitems&&e.click()}});return e&&s.extend(a,e),a.initialize(),this}}(jQuery),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/browser/javascript/expand.js",function(){}),jQuery(document).ready(function(){jQuery("form.faceted-external-search").submit(function(e){e.preventDefault();var e=jQuery(this),t=e.attr("action"),e=e.serialize();window.location.href=t+"#"+e})}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/browser/javascript/independent.js",function(){}),Faceted.AlphabeticalWidget=function(e){this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),this.title=jQuery("legend",this.widget).html(),this.letters=jQuery("#"+e+" span"),this.selected=[],this.version="";var i,e=jQuery("#faceted-version"),e=(e&&(this.version=e.text()),jQuery(".faceted_letter_selected")),r=(e.length&&(Faceted.Query[this.wid]=[e.attr("id").split("-")[1]],this.synchronize()),this);this.letters.click(function(e){r.letter_click(this,e)}),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,function(e){r.synchronize()}),jQuery(Faceted.Events).bind(Faceted.Events.RESET,function(e){r.reset()}),this.widget.hasClass("faceted-count")&&(i=this.widget.hasClass("faceted-sortcountable"),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_INITIALIZED,function(e){r.count(i)}),jQuery(Faceted.Events).bind(Faceted.Events.FORM_DO_QUERY,function(e,t){t.wid!=r.wid&&"b_start"!=t.wid&&r.count(i)}))},Faceted.AlphabeticalWidget.prototype={letter_click:function(e,t){this.do_query(e)},letter_unselect:function(e){jQuery(e).removeClass("faceted_letter_selected"),this.widget.removeClass("faceted-widget-active"),this.selected=[]},letter_select:function(e){this.letter_unselect(this.letters),jQuery(e).addClass("faceted_letter_selected"),"all"!=jQuery(e).attr("id").split("-")[1]&&(this.widget.addClass("faceted-widget-active"),this.selected=[e])},do_query:function(e){var t=jQuery(e).attr("id").split("-")[1],i="";t==(i=this.selected.length?jQuery(this.selected[0]).attr("id").split("-")[1]:i)?(this.letter_select(jQuery("#"+this.wid+"-all"),this.widget),t=[]):this.letter_select(e),Faceted.Form.do_query(this.wid,t)},reset:function(){this.letter_select(jQuery("#"+this.wid+"-all",this.widget))},synchronize:function(){var e=Faceted.Query[this.wid];e&&(e=jQuery("#"+this.wid+"-"+e[0])).length?this.letter_select(e[0]):this.reset()},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){var e,t,i;return this.selected.length?((e=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters"),t=this,e.click(function(e){return t.criteria_remove(this,e),!1}),(i=jQuery("<dt>")).attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i):""},criteria_body:function(){var e,t,i,r,a;return this.selected.length?(e=jQuery(this.selected[0]).attr("id").split("-")[1],(t=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+this.wid+"_"+e),t.attr("title","Remove "+e+" filter"),i=this,t.click(function(e){return i.criteria_remove(this,e),!1}),(r=jQuery("<dd>")).attr("id","criteria_"+this.wid+"_entries"),(a=jQuery('<span class="faceted-alphabetic-criterion">')).append(t),jQuery("<span>").text(e).appendTo(a),r.append(a),r):""},criteria_remove:function(e,t){this.do_query(this.selected[0])},count:function(t){var e=Faceted.SortedQuery(),i=(e.cid=this.wid,this.version&&(e.version=this.version),this);jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_START,{wid:i.wid}),jQuery.getJSON(Faceted.BASEURL+"@@faceted_counter",e,function(e){i.count_update(e,t),jQuery(Faceted.Events).trigger(Faceted.Events.DO_UPDATE),jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_STOP,{wid:i.wid})})},count_update:function(i,r){var a=this;a.letters.each(function(){var e=jQuery(this),t=(e.removeClass("faceted-alphabetic-letter-disabled"),e.unbind(),e.attr("id").split("-")[1]),t=i[t];e.attr("title",t=t||0),r&&e.data("count",t),t?e.click(function(e){a.letter_click(this,e)}):e.addClass("faceted-alphabetic-letter-disabled")}),r&&a.letters.detach().sort(function(e,t){e=jQuery(e).data("count");return jQuery(t).data("count")-e}),jQuery("#"+a.wid,a.widget).append(a.letters)}},Faceted.initializeAlphabeticalWidget=function(e){jQuery("div.faceted-alphabetic-widget").each(function(){var e=(e=jQuery(this).attr("id")).split("_")[0];Faceted.Widgets[e]=new Faceted.AlphabeticalWidget(e)})},jQuery(document).ready(function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeAlphabeticalWidget)}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/widgets/alphabetic/view.js",function(){}),Faceted.AutocompleteWidget=function(e){this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),this.title=jQuery("legend",this.widget).html(),this.selected=[],this.button=jQuery("input[type=submit]",this.widget);var t=this,e=(jQuery("form",this.widget).submit(function(){return t.text_change(t.button),!1}),jQuery("#"+this.wid)),i=e.val();i&&(this.selected=e,Faceted.Query[this.wid]=[i]),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,function(e){t.synchronize()}),jQuery(Faceted.Events).bind(Faceted.Events.RESET,function(e){t.reset()})},Faceted.AutocompleteWidget.prototype={text_change:function(e,t){this.do_query(e),jQuery(e).removeClass("submitting")},do_query:function(e){var t=jQuery("#"+this.wid),i=(i=t.val())?[i]:[];if(!e)return this.selected=[],Faceted.Form.do_query(this.wid,[]);this.selected=[t];e=jQuery("input[type=radio]:checked",this.widget);return"all"==(e=1==e.length?e.val():"all")?Faceted.Form.do_query(this.wid,i):(t=(t=Faceted.Query[this.wid])||[],!i.length||i[0]in t||t.push(i[0]),Faceted.Form.do_query(this.wid,t))},reset:function(){this.selected=[],this.widget.removeClass("faceted-widget-active"),jQuery("#"+this.wid).val("")},synchronize:function(){var e,t=Faceted.Query[this.wid];t?((e=jQuery("#value_"+this.wid)).attr("value",t),this.selected=[e],this.widget.addClass("faceted-widget-active")):this.reset()},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){var e,t,i;return this.selected.length?((e=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters"),t=this,e.click(function(e){return t.criteria_remove(),!1}),(i=jQuery("<dt>")).attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i):""},criteria_body:function(){var r,a,e;return this.selected.length?(r=this,a=jQuery("<dd>"),e=(e=Faceted.Query[this.wid])||[],jQuery.each(e,function(){var e,t,i=this.toString();0<i.length&&(e=jQuery('<span class="faceted-autocomplete-criterion">'),(t=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+r.wid+"_"+i),t.attr("title","Remove "+i+" filter"),t.click(function(e){return r.criteria_remove(i),!1}),e.append(t),jQuery("<span>").text(i).appendTo(e),a.append(e))}),a):""},criteria_remove:function(e){var t,i;jQuery("#"+this.wid).val(""),e?(jQuery("#"+this.wid+"_place_current",this.widget).attr("checked",!0),t=jQuery("input[type=text]",this.widget),i=Faceted.Query[this.wid],-1!=(e=jQuery.inArray(e,i))&&(i.splice(e,1),Faceted.Query[this.wid]=i,this.do_query(t))):(this.selected=[],this.do_query())}},Faceted.initializeAutocompleteWidget=function(e){jQuery("div.faceted-autocomplete-widget").each(function(){var e=jQuery(this).attr("id"),t=jQuery(this).attr("data-autocomplete-view"),i="true"===jQuery(this).attr("data-multiple"),r=jQuery(this).attr("data-placeholder"),e=e.split("_")[0];Faceted.Widgets[e]=new Faceted.AutocompleteWidget(e),jQuery("#"+e).select2({placeholder:r,multiple:i,allowClear:!0,minimumInputLength:2,ajax:{url:t,delay:250,dataType:"json",params:{global:!1},data:function(e,t){return{term:e,add_terms:!0}},results:function(e,t){return{results:e}},cache:!1}})})},jQuery(document).ready(function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeAutocompleteWidget)}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/widgets/autocomplete/view.js",function(){}),Faceted.CriteriaWidget=function(e){this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.title=jQuery("legend",this.widget).html(),this.area=jQuery("#"+e),this.reset_button=jQuery("#"+e+"_reset"),this.toggle_button=jQuery(".faceted-criteria-hide-show",this.widget),this.toggle_button_count=jQuery(".faceted-criteria-count",this.toggle_button);var t=this;this.reset_button.click(function(e){return t.reset_click(this,e),!1}),jQuery("a",this.toggle_button).click(function(e){return t.toggle_button_click(this,e),!1}),t.initialize_syndication(),jQuery(Faceted.Events).bind(Faceted.Events.AJAX_QUERY_START,function(e){return t.update()}),jQuery(Faceted.Events).bind(Faceted.Events.DO_UPDATE,function(e){return t.update()}),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,function(e){return t.update_syndication()})},Faceted.CriteriaWidget.prototype={reset_click:function(e,t){jQuery(Faceted.Events).trigger(Faceted.Events.RESET),this.do_query()},toggle_button_click:function(e,t){this.area.toggle("blind"),jQuery("a",this.toggle_button).toggle(),this.toggle_button_count.toggle()},do_query:function(e,t){Faceted.Form.do_query(e,t)},update:function(){var t=this,i=!0;t.widget.fadeOut("fast",function(){t.area.empty(),jQuery.each(Faceted.Query,function(e){var e=Faceted.Widgets[e];e&&(e=e.criteria(),jQuery.each(e,function(){t.area.append(this),i=!1}))});var e=jQuery("dd span",t.area).length;t.toggle_button_count.text("("+e+")"),i||t.widget.fadeIn("fast")})},criteria:function(){return[]},initialize_syndication:function(){this.rss=null,this.rss_href="",this.skos=null,this.skos_href="";var e=null,t=jQuery("#document-action-rss, #document-action-rss2").find("a"),t=(t.length&&(t=jQuery(t[0]).clone(),(e=jQuery("img",t)).attr("id",e.attr("id")+"-"+this.wid),t.addClass("faceted-criteria-syndication-rss"),t.attr("id",this.wid+"syndication-rss"),jQuery(".faceted-criteria-reset",this.widget).prepend(t),this.rss=jQuery("#"+this.wid+"syndication-rss",this.widget),this.rss_href=t.attr("href")),jQuery("#document-action-skos").find("a"));t.length&&(t=jQuery(t[0]).clone(),(e=jQuery("img",t)).attr("id",e.attr("id")+"-"+this.wid),t.addClass("faceted-criteria-syndication-skos"),t.attr("id",this.wid+"syndication-skos"),jQuery(".faceted-criteria-reset",this.widget).prepend(t),this.skos=jQuery("#"+this.wid+"syndication-skos",this.widget),this.skos_href=this.skos.attr("href"))},update_syndication:function(){var e="ajax=True&";e+=Faceted.URLHandler.document_hash(),this.rss&&this.rss.attr("href",this.rss_href+"?"+e),this.skos&&this.skos.attr("href",this.skos_href+"?"+e)}},Faceted.initializeCriteriaWidget=function(e){jQuery("div.faceted-criteria-widget").each(function(){var e=(e=jQuery(this).attr("id")).split("_")[0];Faceted.Widgets[e]=new Faceted.CriteriaWidget(e)})},jQuery(document).ready(function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeCriteriaWidget)}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/widgets/criteria/view.js",function(){}),Faceted.DateWidget=function(e){this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),this.title=jQuery("legend",this.widget).html(),this.select_from=jQuery("select[name=from]",this.widget),this.select_to=jQuery("select[name=to]",this.widget),this.select_from.hide(),this.select_to.hide();var t=this,e=(this.slider=jQuery("select",this.widget).selectToUISlider({labels:2,labelSrc:"text",sliderOptions:{change:function(){t.change()}}}),jQuery("span.ui-slider-label",this.widget).each(function(e){11===e&&jQuery(this).addClass("ui-slider-label-show")}),this.selected=[],this.select_from.val()),i=this.select_to.val();"now-past"===e&&"now_future"===i||(this.selected=[this.select_from,this.select_to],Faceted.Query[this.wid]=[e,i]),jQuery("form",this.widget).submit(function(){return!1}),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,function(e){t.synchronize()}),jQuery(Faceted.Events).bind(Faceted.Events.RESET,function(e){t.reset_ui()})},Faceted.DateWidget.prototype={change:function(){var e=this.select_from.val(),t=this.select_to.val();"now-past"===e&&"now_future"===t?(this.reset(),Faceted.Form.do_query(this.wid,[])):this.do_query()},do_query:function(){var e=[this.select_from.val(),this.select_to.val()];this.selected=[this.select_from,this.select_to],Faceted.Form.do_query(this.wid,e)},reset:function(){this.selected=[],this.select_from.val("now-past"),this.select_to.val("now_future"),this.widget.removeClass("faceted-widget-active")},reset_ui:function(){this.reset(),this.select_from.trigger("change"),this.select_to.trigger("change")},synchronize:function(){var e=Faceted.Query[this.wid];!e||!e.length||e.length<2?this.reset_ui():(this.select_from.val(e[0]).trigger("change"),this.select_to.val(e[1]).trigger("change"),this.widget.addClass("faceted-widget-active"))},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){var e,t,i;return this.selected.length?((e=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters"),t=this,e.click(function(e){return t.criteria_remove(),!1}),(i=jQuery("<dt>")).attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i):""},criteria_body:function(){var e,t,i,r,a;return this.selected.length?(e=jQuery("option:selected",this.select_from).text()+" - "+jQuery("option:selected",this.select_to).text(),t=this,(i=jQuery("<dd>")).attr("id","criteria_"+this.wid+"_entries"),r=jQuery('<span class="faceted-date-criterion">'),(a=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+this.wid+"_"),a.attr("title","Remove "+e+" filter"),a.click(function(e){return t.criteria_remove(),!1}),r.append(a),jQuery("<span>").text(e).appendTo(r),i.append(r),i):""},criteria_remove:function(){return this.reset_ui(),Faceted.Form.do_query(this.wid,[])}},Faceted.initializeDateWidget=function(e){jQuery("div.faceted-date-widget").each(function(){var e=(e=jQuery(this).attr("id")).split("_")[0];Faceted.Widgets[e]=new Faceted.DateWidget(e)})},jQuery(document).ready(function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeDateWidget)}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/widgets/date/view.js",function(){}),Faceted.DateRangeWidget=function(e){this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),this.title=jQuery("legend",this.widget).html(),this.start=jQuery("input[name=start]",this.widget),this.yearRange=jQuery("input[name=calYearRange]",this.widget).val(),this.end=jQuery("input[name=end]",this.widget),this.selected=[],this.usePloneFormat=jQuery("input[name=usePloneFormat]",this.widget).val(),this.usePloneFormat="True"==this.usePloneFormat,this.dateFormat=jQuery("input[name=dateFormat]",this.widget).val(),this.language=jQuery("input[name=language]",this.widget).val()||"en";var e=this.start.val(),t=this.end.val(),i=(e&&t&&(this.selected=[this.start,this.end],Faceted.Query[this.wid]=[e,t]),this);this.start.datepicker({changeMonth:!0,changeYear:!0,dateFormat:this.dateFormat,yearRange:this.yearRange,onSelect:function(e,t){i.force_start_range(),i.select_change(i.start)}}),this.end.datepicker({changeMonth:!0,changeYear:!0,yearRange:this.yearRange,dateFormat:this.dateFormat,onSelect:function(e,t){i.force_end_range(),i.select_change(i.end)}}),e&&i.force_start_range(),t&&i.force_end_range(),this.start.change(function(){var e=i.start.val(),t=i.end.val();e||t||(i.reset(),Faceted.Form.do_query(i.wid,[]))}),this.end.change(function(){var e=i.start.val(),t=i.end.val();e||t||(i.reset(),Faceted.Form.do_query(i.wid,[]))}),jQuery("form",this.widget).submit(function(){return!1}),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,function(e){i.synchronize()}),jQuery(Faceted.Events).bind(Faceted.Events.RESET,function(e){i.reset()})},Faceted.DateRangeErrorMsg="Invalid date range",Faceted.DateRangeWidget.prototype={select_change:function(e){this.do_query(e)},force_start_range:function(){var e=this.start.datepicker("getDate");e&&this.end.datepicker("option","minDate",e)},force_end_range:function(){var e=this.end.datepicker("getDate");e&&this.start.datepicker("option","maxDate",e)},do_query:function(e){var t=this.start.val(),i=this.end.val();if(t||i||(this.reset(),Faceted.Form.do_query(this.wid,[])),!t||!i)return!(this.selected=[]);var r,a=[t,i],t=this.usePloneFormat?(r=jQuery.datepicker.parseDate(this.dateFormat,t),jQuery.datepicker.parseDate(this.dateFormat,i)):(r=new Date(t.replace(/-/g,"/")),new Date(i.replace(/-/g,"/")));t<r?Faceted.Form.raise_error(Faceted.DateRangeErrorMsg,this.wid+"_errors",[]):(this.selected=[this.start,this.end],Faceted.Form.clear_errors(this.wid+"_errors",[]),Faceted.Form.do_query(this.wid,a))},reset:function(){this.selected=[],this.start.val(""),this.end.val(""),this.widget.removeClass("faceted-widget-active"),this.start.datepicker("option","maxDate",null),this.end.datepicker("option","minDate",null)},synchronize:function(){var e,t,i,r=Faceted.Query[this.wid];return r&&r.length&&!(r.length<2)&&(e=r[0],r=r[1],i=this.usePloneFormat?(t=$.datepicker.parseDate(this.dateFormat,e),$.datepicker.parseDate(this.dateFormat,r)):(t=new Date(e.replace(/-/g,"/")),new Date(r.replace(/-/g,"/"))),t.getFullYear())&&i.getFullYear()?(this.start.val(e),this.end.val(r),this.selected=[this.start,this.end],void this.widget.addClass("faceted-widget-active")):(this.reset(),!1)},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){var e,t,i;return this.selected.length?((e=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters"),t=this,e.click(function(e){return t.criteria_remove(),!1}),(i=jQuery("<dt>")).attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i):""},criteria_body:function(){var t,e,i,r,a;return this.selected.length?(t=this,(e=jQuery("<dd>")).attr("id","criteria_"+this.wid+"_entries"),a=this.start.val(),i=this.end.val(),a=this.usePloneFormat?(r=jQuery.datepicker.parseDate(this.dateFormat,a),jQuery.datepicker.parseDate(this.dateFormat,i)):(r=new Date(a.replace(/-/g,"/")),new Date(i.replace(/-/g,"/"))),i=this.criteria_label(r,a),(r=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+this.wid+"_"),r.attr("title","Remove "+i+" filter"),r.click(function(e){return t.criteria_remove(),!1}),(a=jQuery('<span class="faceted-daterange-criterion">')).append(r),jQuery("<span>").text(i).appendTo(a),e.append(a),e):""},criteria_label:function(e,t){var i;return this.usePloneFormat?e.toLocaleDateString(this.language,i={weekday:"short",year:"numeric",month:"short",day:"numeric"})+" - "+t.toLocaleDateString(this.language,i):e.toDateString()+" - "+t.toDateString()},criteria_remove:function(){return this.reset(),Faceted.Form.do_query(this.wid,[])}},Faceted.initializeDateRangeWidget=function(e){jQuery("div.faceted-daterange-widget").each(function(){var e=(e=jQuery(this).attr("id")).split("_")[0];Faceted.Widgets[e]=new Faceted.DateRangeWidget(e)})},jQuery(document).ready(function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeDateRangeWidget)}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/widgets/daterange/view.js",function(){}),Faceted.DebugWidget=function(e){this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),this.title=jQuery("legend",this.widget).html(),this.query_area=jQuery("dd.debug-query pre",this.widget),this.after_area=jQuery("dd.debug-after pre",this.widget),this.config_area=jQuery("dd.debug-config pre",this.widget),this.count_area=jQuery("dd.debug-count pre",this.widget),jQuery("dd",this.widget).hide(),jQuery("dt",this.widget).each(function(){var e=jQuery(this),t=e.attr("class"),i=e.parent("dl"),r=jQuery("<span>").addClass("ui-icon ui-icon-plus").css("float","left");r.click(function(){var e=jQuery(this);jQuery("dd."+t,i).toggle(),e.hasClass("ui-icon-minus")?(e.removeClass("ui-icon-minus"),e.addClass("ui-icon-plus")):(e.removeClass("ui-icon-plus"),e.addClass("ui-icon-minus"))}),e.prepend(r)});var t=this;jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,function(e){t.synchronize()})},Faceted.DebugWidget.prototype={synchronize:function(){var t=this,e=jQuery.extend({},Faceted.Query);e.debugger=this.wid,jQuery.get(Faceted.BASEURL+"@@faceted.widget.debug.query",e,function(e){"[]"==e?jQuery(".debug-query",t.widget).hide():jQuery("dt.debug-query",t.widget).show(),t.query_area.text(e)}),jQuery.get(Faceted.BASEURL+"@@faceted.widget.debug.after",e,function(e){"[]"==e?jQuery(".debug-after",t.widget).hide():jQuery("dt.debug-after",t.widget).show(),t.after_area.text(e)}),jQuery.get(Faceted.BASEURL+"@@faceted.widget.debug.criteria",e,function(e){"[]"==e?jQuery(".debug-config",t.widget).hide():jQuery("dt.debug-config",t.widget).show(),t.config_area.text(e)}),jQuery.get(Faceted.BASEURL+"@@faceted.widget.debug.counters",e,function(e){"[]"==e?jQuery(".debug-count",t.widget).hide():jQuery("dt.debug-count",t.widget).show(),t.count_area.text(e)})},criteria:function(){return[]}},Faceted.initializeDebugWidget=function(e){jQuery("div.faceted-debug-widget").each(function(){var e=(e=jQuery(this).attr("id")).split("_")[0];Faceted.Widgets[e]=new Faceted.DebugWidget(e)})},jQuery(document).ready(function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeDebugWidget)}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/widgets/debug/view.js",function(){}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/widgets/etag/view.js",function(){}),Faceted.MultiSelectWidget=function(e){var i,r=this,e=(this.wid=e,this.widget=jQuery("#"+this.wid+"_widget"),this.widget.show(),this.title=this.widget.find("legend").html(),this.elements=this.widget.find("option"),this.select=jQuery("#"+this.wid),this.multiple=!!this.select.attr("multiple"),this.placeholder=this.widget.data("placeholder"),this.closeOnSelect=this.widget.data("closeonselect"),this.selected=[],this.select.select2({placeholder:this.placeholder,closeOnSelect:this.closeOnSelect,allowClear:!0}),this.operatorElem=this.widget.find(".faceted-operator a"),this.operatorVisible=!!this.operatorElem.length,this.operatorVisible?(this.operator=this.operatorElem.data("value"),this.operatorElem.click(function(e){e.preventDefault(),r.operator_click(this,e)}),this.operatorElem.text(this.operatorElem.data(this.operator))):this.operator=this.widget.data("operator"),this.version="",jQuery("#faceted-version")),a=(e&&(this.version=e.text()),jQuery("form",this.widget).submit(function(){return!1}),this),e=(this.select.on("select2-close",function(e){a.select_change(this,e)}),this.select.on("select2-removed",function(e){a.select_change(this,e)}),this.select.val());e&&(this.selected=a.widget.find("option:selected"),this.multiple?Faceted.Query[this.wid]=e:Faceted.Query[this.wid]=[e]),this.operatorVisible&&(Faceted.Query[r.wid+"-operator"]=r.operator),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,function(e){a.synchronize()}),jQuery(Faceted.Events).bind(Faceted.Events.RESET,function(e){a.reset()}),this.widget.hasClass("faceted-count")&&(i=this.widget.hasClass("faceted-sortcountable"),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_INITIALIZED,function(e){a.count(i)}),jQuery(Faceted.Events).bind(Faceted.Events.FORM_DO_QUERY,function(e,t){("and"==r.operator||t.wid!=r.wid&&"b_start"!=t.wid)&&a.count(i)}))},Faceted.MultiSelectWidget.prototype={select_change:function(e,t){jQuery(e).val()||(e=null),this.do_query(e)},operator_click:function(e,t){var i=this;"or"===i.operator?(i.operator="and",i.operatorElem.text(i.operatorElem.data("and"))):(i.operator="or",i.operatorElem.text(i.operatorElem.data("or"))),Faceted.Form.do_query(this.wid+"-operator",i.operator)},operator_label:function(){var e;return this.operatorVisible?(e=(e=this.widget.find(".faceted-operator label")).length?e.text():"","("+(e+=" "+this.operatorElem.data(this.operator))+")"):""},do_query:function(e){return e?(e=jQuery(e).val(),this.selected=this.widget.find("option:selected"),Faceted.Form.do_query(this.wid,e)):(this.selected=[],Faceted.Form.do_query(this.wid,[]))},reset:function(){this.select.val(null).trigger("change.select2"),this.selected=[],this.widget.removeClass("faceted-widget-active")},synchronize:function(){var e=Faceted.Query[this.wid],e=(e?(this.select.val(e).trigger("change.select2"),this.selected=this.widget.find("option:selected"),this.widget.addClass("faceted-widget-active")):this.reset(),Faceted.Query[this.wid+"-operator"]);this.operatorVisible&&e&&(e=e[0],this.operator=e,this.operatorElem.data("value",e),this.operatorElem.text(this.operatorElem.data(this.operator)))},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){var e,t,i;return this.selected.length?((e=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters"),t=this,e.click(function(e){return t.criteria_remove(),!1}),(i=jQuery("<dt>")).attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i):""},criteria_body:function(){var d,c;return this.selected.length?(d=this,(c=jQuery("<dd>")).attr("id","criteria_"+this.wid+"_entries"),d.selected.each(function(e){var t=jQuery('<span class="faceted-multiselect-criterion">'),i=jQuery(this),r=i.attr("id"),a=i.val(),s=i.attr("title"),n=jQuery('<a href="#" class="faceted-remove">remove</a>');n.attr("id","criteria_"+r),n.attr("title","Remove "+s+" filter"),n.click(function(e){return d.criteria_remove(a,i),!1}),t.append(n),jQuery("<span>").text(s).appendTo(t),c.append(t)}),c):""},criteria_remove:function(e,t){e?(t.attr("selected",!1),this.select.trigger("change.select2"),this.do_query(this.select)):(this.select.val(null).trigger("change.select2"),this.do_query())},count:function(t){var e=Faceted.SortedQuery(),i=(e.cid=this.wid,this.version&&(e.version=this.version),this.operator&&!e[this.wid+"-operator"]&&(e[this.wid+"-operator"]=this.operator),this);jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_START,{wid:i.wid}),jQuery.getJSON(Faceted.BASEURL+"@@faceted_counter",e,function(e){i.count_update(e,t),jQuery(Faceted.Events).trigger(Faceted.Events.DO_UPDATE),jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_STOP,{wid:i.wid})})},count_update:function(r,a){var e=jQuery("select",this.widget),t=jQuery("option",this.widget),i=e.val();jQuery(t).each(function(){var e,t,i=jQuery(this);i.attr("title")&&(i.removeClass("faceted-select-item-disabled"),i.attr("disabled",!1),e=i.val(),e=(e=r[e])||0,t=i.attr("title"),i.html(t+=" ("+e+")"),a&&i.data("count",e),e||(i.attr("disabled","disabled"),i.addClass("faceted-select-item-disabled")))}),a&&(t.detach().sort(function(e,t){e=jQuery(e).data("count");return jQuery(t).data("count")-e}),e.append(t),e.val(i))}},Faceted.initializeMultiSelectWidget=function(e){jQuery("div.faceted-multiselect-widget").each(function(){var e=(e=jQuery(this).attr("id")).split("_")[0];Faceted.Widgets[e]=new Faceted.MultiSelectWidget(e)})},jQuery(document).ready(function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeMultiSelectWidget)}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/widgets/multiselect/view.js",function(){}),{version:"2.0",Events:{}});FacetedTree.Events.CHANGED="FACETEDTREE-CHANGED",FacetedTree.Events.AJAX_START="FACETEDTREE-AJAX-START",FacetedTree.Events.AJAX_STOP="FACETEDTREE-AJAX-STOP",FacetedTree.JsTree=function(e,t,i){this.BASEURL="",window.FacetedEdit?this.BASEURL=FacetedEdit.BASEURL:window.Faceted&&(this.BASEURL=Faceted.BASEURL),this.wid=e,this.mode=i||"view",this.input=jQuery("#"+e,t),this.input.attr("readonly","readonly"),this.theme=jQuery("#"+e+"-theme",t),this.area=jQuery("<div>"),this.area.addClass("tree"),this.area.text("Loading..."),this.area.hide(),this.area.width(this.input.width()),this.input.after(this.area);var r=this,e=(this.input.click(function(e){r.show()}),jQuery(document).click(function(e){e=jQuery(e.target);e.is("#"+r.input.attr("id"))||e.parents("#"+r.area.attr("id")).length||r.hide()}),jQuery(document).keydown(function(e){27==e.keyCode&&r.hide()}),{});e.cid=this.wid,e.mode=this.mode,jQuery(FacetedTree.Events).trigger(FacetedTree.Events.AJAX_START,{msg:"Loading ..."}),jQuery.getJSON(r.BASEURL+"@@faceted.path.tree.json",e,function(e){e.length?r.initialize(e):"edit"==i?(jQuery("form",t).hide(),jQuery("div.faceted-path-errors",t).show()):(jQuery(".faceted-widget:has(div.faceted-path-errors)").remove(),jQuery(Faceted.Events).trigger(Faceted.Events.REDRAW)),jQuery(FacetedTree.Events).trigger(FacetedTree.Events.AJAX_STOP,{msg:e})})},FacetedTree.JsTree.prototype={initialize:function(r){var a=this;a.area.jstree({ui:{theme_name:a.theme.attr("title"),theme_path:a.theme.text()},types:{default:{clickable:!0,renameable:!1,deletable:!1,creatable:!1,draggable:!1}},data:{type:"json",async:!0,opts:{method:"POST",url:a.BASEURL+"@@faceted.path.tree.json"}},callback:{beforedata:function(e,t){var i;if(!1!==e)return t.settings.data.opts.static=!1,(i={cid:a.wid}).mode=a.mode,e&&(i.path=e.attr("path")),i;t.settings.data.opts.static=r},onselect:function(e,t){a.change(e,t)}}})},show:function(){this.area.show()},hide:function(){this.area.hide()},change:function(e,t){this.hide();e=(e=jQuery(e)).attr("path");this.input.val()==e&&(e=""),this.input.val(e),jQuery(FacetedTree.Events).trigger(FacetedTree.Events.CHANGED,{path:e})}},define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/widgets/path/tree.js",function(){}),Faceted.PathWidget=function(e){this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),this.title=jQuery("legend",this.widget).html(),this.input=jQuery("input",this.widget),this.breadcrumbs=jQuery("<dd>"),this.selected=[];var e=this.input.val(),t=(e&&(this.selected=this.input,Faceted.Query[this.wid]=[e]),new FacetedTree.JsTree(this.wid,this.widget),this);jQuery("form",this.widget).submit(function(){return!1}),jQuery(FacetedTree.Events).bind(FacetedTree.Events.CHANGED,function(e){t.text_change(t.input)}),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,function(e){t.synchronize()}),jQuery(Faceted.Events).bind(Faceted.Events.RESET,function(e){t.reset()})},Faceted.PathWidget.prototype={text_change:function(e,t){this.do_query(e)},do_query:function(e){var t=(t=this.input.val())?[t]:[];return e?(this.selected=[this.input],Faceted.Form.do_query(this.wid,t)):(this.selected=[],Faceted.Form.do_query(this.wid,[]))},reset:function(){this.selected=[],this.widget.removeClass("faceted-widget-active"),this.input.val("")},synchronize:function(){Faceted.Query[this.wid]?(this.selected=[this.input],this.widget.addClass("faceted-widget-active")):this.reset()},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){var e,t,i;return this.selected.length?((e=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters"),t=this,e.click(function(e){return t.criteria_remove(),!1}),(i=jQuery("<dt>")).attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i):""},criteria_body:function(){var t,e;return this.selected.length?((t=this).breadcrumbs.text("Loading..."),(e={}).path=t.input.val(),e.cid=t.wid,jQuery.getJSON(Faceted.BASEURL+"@@faceted.path.breadcrumbs.json",e,function(e){t.breadcrumbs.empty(),jQuery.each(e,function(){t.breadcrumbs.append(jQuery("<span>").html("&raquo;"));var e=jQuery("<a>");e.attr("href",this.url),e.attr("title",this.title),e.text(this.title),e.click(function(){var e=jQuery(this).attr("href");return t.input.val(e),jQuery(FacetedTree.Events).trigger(FacetedTree.Events.CHANGED,{path:e}),!1}),t.breadcrumbs.append(e)})}),t.breadcrumbs):""},criteria_remove:function(){this.selected=[],this.input.val(""),this.do_query()}},Faceted.initializePathWidget=function(e){jQuery("div.faceted-path-widget").each(function(){var e=(e=jQuery(this).attr("id")).split("_")[0];Faceted.Widgets[e]=new Faceted.PathWidget(e)})},jQuery(document).ready(function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializePathWidget)}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/widgets/path/view.js",function(){}),Faceted.PortletWidget=function(e){this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),jQuery("legend",this.widget).hide(),jQuery("fieldset",this.widget).css("border","none"),jQuery("form",this.widget).submit(function(){return!0})},Faceted.initializePortletWidget=function(e){jQuery("div.faceted-portlet-widget").each(function(){var e=(e=jQuery(this).attr("id")).split("_")[0];new Faceted.PortletWidget(e)})},jQuery(document).ready(function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializePortletWidget)}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/widgets/portlet/view.js",function(){}),Faceted.RadioWidget=function(e){this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),this.fieldset=jQuery(".widget-fieldset",this.widget),this.title=jQuery("legend",this.widget).html(),this.elements=jQuery("input[type=radio]",this.widget),this.maxitems=parseInt(jQuery("span",this.widget).text(),10),this.selected=[],this.version="";var i,e=jQuery("#faceted-version"),r=(e&&(this.version=e.text()),jQuery("form",this.widget).submit(function(){return!1}),this),e=(this.elements.click(function(e){r.radio_click(this,e)}),jQuery("input[type=radio]:checked",this.widget));e.length&&(this.selected=e,Faceted.Query[this.wid]=[this.selected.val()]),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,function(e){r.synchronize()}),jQuery(Faceted.Events).bind(Faceted.Events.RESET,function(){r.reset()}),this.widget.hasClass("faceted-count")&&(i=this.widget.hasClass("faceted-sortcountable"),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_INITIALIZED,function(e){r.count(i)}),jQuery(Faceted.Events).bind(Faceted.Events.FORM_DO_QUERY,function(e,t){t.wid!=r.wid&&"b_start"!=t.wid&&r.count(i)})),this.maxitems&&this.fieldset.collapsible({maxitems:this.maxitems,elements:"li:not(.faceted-radio-item-zerocount)",more:this.widget.data("more"),less:this.widget.data("less")})},Faceted.RadioWidget.prototype={radio_click:function(e,t){jQuery(e).val()||(e=null),this.do_query(e)},do_query:function(e){return e?(this.selected=[e],e=jQuery(this.selected[0]).val(),Faceted.Form.do_query(this.wid,e)):(this.selected=[],Faceted.Form.do_query(this.wid,[]))},reset:function(){jQuery(this.elements[0]).prop("checked",!0),this.selected=[],this.widget.removeClass("faceted-widget-active")},synchronize:function(){var t,e=Faceted.Query[this.wid];e?(t=this,"object"!=typeof e&&(e=[e]),jQuery.each(e,function(){var e=jQuery("#"+t.wid+'_widget input[type=radio][value="'+this+'"]');e.length?(t.selected=e,t.selected.prop("checked",!0),t.widget.addClass("faceted-widget-active")):t.reset()})):this.reset()},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){var e,t,i;return this.selected.length?((e=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters"),t=this,e.click(function(e){return t.criteria_remove(),!1}),(i=jQuery("<dt>")).attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i):""},criteria_body:function(){if(!this.selected.length)return"";var t=this,e=jQuery("<dd>");e.attr("id","criteria_"+this.wid+"_entries");var i=jQuery(this.selected).attr("id"),r=(a=jQuery("label[for="+i+"]")).attr("title"),a=a.text(),s=jQuery('<a href="#" class="faceted-remove">remove</a>'),n=jQuery('<span class="facted-radio-criterion">');return s.attr("id","criteria_"+i),s.attr("title","Remove "+r+" filter"),s.click(function(e){return t.criteria_remove(),!1}),n.append(s),jQuery("<span>").text(a).appendTo(n),e.append(n),e},criteria_remove:function(){jQuery(this.elements[0]).prop("checked",!0),this.do_query()},count:function(t){var e=Faceted.SortedQuery(),i=(e.cid=this.wid,this.version&&(e.version=this.version),this);jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_START,{wid:i.wid}),jQuery.getJSON(Faceted.BASEURL+"@@faceted_counter",e,function(e){i.count_update(e,t),jQuery(Faceted.Events).trigger(Faceted.Events.DO_UPDATE),jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_STOP,{wid:i.wid})})},count_update:function(s,n){var d=this,e=jQuery("li",d.widget);jQuery(e).each(function(){var e=jQuery(this),t=(e.removeClass("faceted-radio-item-disabled"),e.removeClass("faceted-radio-item-zerocount"),jQuery("input",e)),i=(t.unbind(),t.val()),r=jQuery("span",e),a=(r.length||((a=jQuery("label",e)).append(" "),a.append(jQuery("<span>")),r=jQuery("span",e)),s[i]);r.text("("+(a=a||0)+")"),n&&e.data("count",a),a?(t.prop("disabled",!1),t.click(function(e){d.radio_click(this,e)})):(e.addClass("faceted-radio-item-disabled"),d.widget.hasClass("faceted-zero-count-hidden")&&e.addClass("faceted-radio-item-zerocount"),t.prop("disabled","disabled"))}),n&&e.detach().sort(function(e,t){e=jQuery(e).data("count");return jQuery(t).data("count")-e}),jQuery("ul",d.widget).append(e),d.fieldset.trigger("widget-refresh")}},Faceted.initializeRadioWidget=function(e){jQuery("div.faceted-radio-widget").each(function(){var e=(e=jQuery(this).attr("id")).split("_")[0];Faceted.Widgets[e]=new Faceted.RadioWidget(e)})},jQuery(document).ready(function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeRadioWidget)}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/widgets/radio/view.js",function(){}),Faceted.RangeWidget=function(e){function t(e){i.select_change(this,e)}var i=this,e=(this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),this.title=jQuery("legend",this.widget).html(),this.start=jQuery("input[name=start]",this.widget),this.end=jQuery("input[name=end]",this.widget),this.selected=[],this.invalidRangeMsg=this.widget.data("invalid-range-msg"),this.start.val()),r=this.end.val();e&&r&&(this.selected=[this.start,this.end],Faceted.Query[this.wid]=[e,r]),jQuery("form",this.widget).submit(function(){return!1});this.start.change(t),this.end.change(t),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,function(e){i.synchronize()}),jQuery(Faceted.Events).bind(Faceted.Events.RESET,function(e){i.reset()})},Faceted.RangeWidget.prototype={select_change:function(e){this.do_query(e)},do_query:function(e){var t=this.start.val(),t=parseFloat(t)||t,i=this.end.val(),i=parseFloat(i)||i;if(!t||!i)return!(this.selected=[]);var r=[this.start.val(),this.end.val()];i<t?Faceted.Form.raise_error(this.invalidRangeMsg,this.wid+"_errors",[]):(this.selected=[this.start,this.end],Faceted.Form.clear_errors(this.wid+"_errors",[]),Faceted.Form.do_query(this.wid,r))},reset:function(){this.selected=[],this.widget.removeClass("faceted-widget-active"),this.start.val(""),this.end.val("")},synchronize:function(){var e,t=Faceted.Query[this.wid];return!t||!t.length||t.length<2?(this.reset(),!1):(e=t[0],t=t[1],this.start.val(e),this.end.val(t),this.selected=[this.start,this.end],void this.widget.addClass("faceted-widget-active"))},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){var e,t,i;return this.selected.length?((e=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters"),t=this,e.click(function(e){return t.criteria_remove(),!1}),(i=jQuery("<dt>")).append(e),i.append("<span>"+this.title+"</span>"),i):""},criteria_body:function(){var t,e,i,r,a;return this.selected.length?(t=this,e=jQuery("<dd>"),i=jQuery('<span class="faceted-range-criterion">'),r=this.start.val()+" - "+this.end.val(),(a=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+this.wid+"_"),a.attr("title","Remove "+r+" filter"),a.click(function(e){return t.criteria_remove(),!1}),i.append(a),jQuery("<span>").text(r).appendTo(i),e.append(i),e):""},criteria_remove:function(){return this.reset(),Faceted.Form.do_query(this.wid,[])}},Faceted.initializeRangeWidget=function(e){jQuery("div.faceted-range-widget").each(function(){var e=(e=jQuery(this).attr("id")).split("_")[0];Faceted.Widgets[e]=new Faceted.RangeWidget(e)})},jQuery(document).ready(function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeRangeWidget)}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/widgets/range/view.js",function(){}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/widgets/resultsfilter/view.js",function(){}),Faceted.ResultsPerPageWidget=function(e){this.wid=e,this.widget=jQuery("#"+this.wid+"_widget"),this.widget.show(),this.title=jQuery("legend",this.widget).html(),this.elements=jQuery("option",this.widget),this.select=jQuery("#"+this.wid),this.selected=[],jQuery("form",this.widget).submit(function(){return!1});var t=this,e=(this.select.change(function(e){t.select_change(this,e)}),this.select.val());e&&(this.selected=this.widget.find("option:selected"),Faceted.Query[this.wid]=[e]),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,function(e){t.synchronize()}),jQuery(Faceted.Events).bind(Faceted.Events.RESET,function(e){t.reset()})},Faceted.ResultsPerPageWidget.prototype={select_change:function(e,t){jQuery(e).val()||(e=null),this.do_query(e)},do_query:function(e){return e?(e=jQuery(e).val(),this.selected=this.widget.find("option:selected"),Faceted.Form.do_query(this.wid,e)):(this.selected=[],Faceted.Form.do_query(this.wid,[]))},reset:function(){this.select.val(""),this.selected=[],this.widget.removeClass("faceted-widget-active")},synchronize:function(){var t,i=Faceted.Query[this.wid];i?(t=this,jQuery.each(i,function(){var e=t.widget.find("option:selected");e.length?(t.selected=e,t.select.val(i),t.widget.addClass("faceted-widget-active")):t.reset()})):this.reset()},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){var e,t,i;return this.selected.length?((e=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters"),t=this,e.click(function(e){return t.criteria_remove(),!1}),(i=jQuery("<dt>")).attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i):""},criteria_body:function(){var t,e,i,r,a,s;return this.selected.length?(t=this,e=jQuery("<dd>"),i=jQuery('<span class="faceted-resultsperpage-criterion">'),e.attr("id","criteria_"+this.wid+"_entries"),r=(a=jQuery(this.selected)).val(),a=a.html(),(s=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+this.wid+"_"+r),s.attr("title","Remove "+a+" filter"),s.click(function(e){return t.criteria_remove(),!1}),i.append(s),jQuery("<span>").text(a).appendTo(i),e.append(i),e):""},criteria_remove:function(){this.select.val(""),this.do_query()}},Faceted.initializeResultsPerPageWidget=function(e){jQuery("div.faceted-resultsperpage-widget").each(function(){var e=(e=jQuery(this).attr("id")).split("_")[0];Faceted.Widgets[e]=new Faceted.ResultsPerPageWidget(e)})},jQuery(document).ready(function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeResultsPerPageWidget)}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/widgets/resultsperpage/view.js",function(){}),Faceted.SelectWidget=function(e){this.wid=e,this.widget=jQuery("#"+this.wid+"_widget"),this.widget.show(),this.title=this.widget.find("legend").html(),this.elements=this.widget.find("option"),this.select=jQuery("#"+this.wid),this.selected=[],this.version="";var i,e=jQuery("#faceted-version"),r=(e&&(this.version=e.text()),jQuery("form",this.widget).submit(function(){return!1}),this),e=(this.select.change(function(e){r.select_change(this,e)}),this.select.val());e&&(this.selected=r.widget.find("option:selected"),Faceted.Query[this.wid]=[e]),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,function(e){r.synchronize()}),jQuery(Faceted.Events).bind(Faceted.Events.RESET,function(e){r.reset()}),this.widget.hasClass("faceted-count")&&(i=this.widget.hasClass("faceted-sortcountable"),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_INITIALIZED,function(e){r.count(i)}),jQuery(Faceted.Events).bind(Faceted.Events.FORM_DO_QUERY,function(e,t){t.wid!=r.wid&&"b_start"!=t.wid&&r.count(i)}))},Faceted.SelectWidget.prototype={select_change:function(e,t){jQuery(e).val()||(e=null),this.do_query(e)},do_query:function(e){return e?(e=jQuery(e).val(),this.selected=this.widget.find("option:selected"),Faceted.Form.do_query(this.wid,e)):(this.selected=[],Faceted.Form.do_query(this.wid,[]))},reset:function(){var e;this.widget.hasClass("hide-all-option")?(e=this.select.find("option:first").val(),this.select.val(e),this.selected=[e],this.select_change(this.select)):(this.select.val(""),this.selected=[]),this.widget.removeClass("faceted-widget-active")},synchronize:function(){var t,i=Faceted.Query[this.wid];i?(t=this,jQuery.each(i,function(){var e=t.widget.find('option[value="'+this+'"]');e.length?(t.selected=e,t.select.val(i),t.widget.addClass("faceted-widget-active")):t.reset()})):this.reset()},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){var e,t,i;return this.selected.length?((e=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters"),t=this,e.click(function(e){return t.criteria_remove(),!1}),(i=jQuery("<dt>")).attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i):""},criteria_body:function(){var t,e,i,r,a,s;return this.selected.length?(t=this,e=jQuery("<dd>"),i=jQuery('<span class="facted-select-criterion">'),e.attr("id","criteria_"+this.wid+"_entries"),r=(a=jQuery(this.selected)).val(),a=a.attr("title"),(s=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+this.wid+"_"+r),s.attr("title","Remove "+a+" filter"),s.click(function(e){return t.criteria_remove(),!1}),i.append(s),jQuery("<span>").text(a).appendTo(i),e.append(i),e):""},criteria_remove:function(){this.select.val(""),this.do_query()},count:function(t){var e=Faceted.SortedQuery(),i=(e.cid=this.wid,this.version&&(e.version=this.version),this);jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_START,{wid:i.wid}),jQuery.getJSON(Faceted.BASEURL+"@@faceted_counter",e,function(e){i.count_update(e,t),jQuery(Faceted.Events).trigger(Faceted.Events.DO_UPDATE),jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_STOP,{wid:i.wid})})},count_update:function(r,a){var e=jQuery("select",this.widget),t=jQuery("option",this.widget),i=e.val();jQuery(t).each(function(){var e=jQuery(this),t=(e.removeClass("faceted-select-item-disabled"),e.attr("disabled",!1),e.val()),t=r[t]||0,i=e.attr("title");e.html(i+=" ("+t+")"),a&&e.data("count",t),t||(e.attr("disabled","disabled"),e.addClass("faceted-select-item-disabled"))}),a&&(t.detach().sort(function(e,t){e=jQuery(e).data("count");return jQuery(t).data("count")-e}),e.append(t),e.val(i))}},Faceted.initializeSelectWidget=function(e){jQuery("div.faceted-select-widget").each(function(){var e=(e=jQuery(this).attr("id")).split("_")[0];Faceted.Widgets[e]=new Faceted.SelectWidget(e)})},jQuery(document).ready(function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeSelectWidget)}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/widgets/select/view.js",function(){}),Faceted.SortingWidget=function(e){this.wid=e,this.widget=jQuery("#"+this.wid+"_widget"),this.widget.show(),this.title=jQuery("legend",this.widget).html(),this.reverse=jQuery("#"+this.wid+"_reversed"),this.elements=jQuery("option",this.widget),this.selected=[],this.select=jQuery("#"+this.wid);var t,e=jQuery(".faceted-widget:has(div.faceted-sorting-errors)");e.length?(e.remove(),jQuery(Faceted.Events).trigger(Faceted.Events.REDRAW)):(jQuery("form",this.widget).submit(function(){return!1}),(t=this).select.change(function(e){t.select_change(this,e)}),this.reverse.click(function(e){t.reverse_change(this,e)}),(e=this.select.val())&&(this.selected=this.widget.find("option:selected"),Faceted.Query[this.wid]=[e],this.reverse.prop("checked"))&&(Faceted.Query.reversed="on"),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,function(e){t.synchronize()}),jQuery(Faceted.Events).bind(Faceted.Events.RESET,function(){t.reset()}))},Faceted.SortingWidget.prototype={select_change:function(e,t){this.do_query(e)},reverse_change:function(e,t){this.do_query(e)},do_query:function(e){var t;e?(t=null,"checkbox"==jQuery(e).attr("type")?(t=e.checked?"on":[],this.selected.length?Faceted.Form.do_query("reversed",t):Faceted.Query.reversed=t):((t=jQuery(e).val())?this.selected=this.widget.find("option:selected"):(this.selected=[],t=[]),Faceted.Form.do_query(this.wid,t))):(this.selected=[],Faceted.Form.do_query(this.wid,[]))},reset:function(e){e=!!e,this.select.val(""),this.reverse.attr("checked",e),this.selected=[],this.widget.removeClass("faceted-widget-active")},synchronize:function(){var t,i=Faceted.Query[this.wid],r=!(!(r=Faceted.Query.reversed)||1==r.length&&!r[0]);i?(t=this,jQuery.each(i,function(){var e=t.widget.find("option:selected");e.length?(t.selected=e,t.select.val(i),t.reverse.attr("checked",r),t.widget.addClass("faceted-widget-active")):t.reset(r)})):this.reset(r)},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){var e,t,i;return this.selected.length?((e=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters"),t=this,e.click(function(e){return t.criteria_remove(),!1}),(i=jQuery("<dt>")).attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i):""},criteria_body:function(){var t,e,i,r,a,s;return this.selected.length?(t=this,e=jQuery("<dd>"),i=jQuery('<span class="faceted-sorting-criterion">'),e.attr("id","criteria_"+this.wid+"_entries"),a=(r=jQuery(this.selected)).val(),r=r.html(),(s=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+this.wid+"_"+a),s.attr("title","Remove "+r+" filter"),s.click(function(e){return t.criteria_remove(),!1}),i.append(s),jQuery("<span>").text(r).appendTo(i),e.append(i),this.reverse.prop("checked")&&(a=this.reverse.attr("id"),s=jQuery("label[for="+a+"]").html(),e.append("<span>("+s+")</span>")),e):""},criteria_remove:function(){this.select.val(""),this.reverse.attr("checked",!1),this.do_query()}},Faceted.initializeSortingWidget=function(e){jQuery("div.faceted-sorting-widget").each(function(){var e=(e=jQuery(this).attr("id")).split("_")[0];Faceted.Widgets[e]=new Faceted.SortingWidget(e)})},jQuery(document).ready(function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeSortingWidget)}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/widgets/sorting/view.js",function(){}),Faceted.TagsCloudWidget=function(e){this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),this.title=jQuery("legend",this.widget).html(),this.tags=jQuery("li",this.widget),this.faceted_count=this.widget.hasClass("faceted-count"),this.selected=[],this.version="";var e=jQuery("#faceted-version"),e=(e&&(this.version=e.text()),this.config={},this.initialize(),jQuery(".faceted-tag-selected",this.widget)),r=(e.length&&(e=(e=e.attr("id").replace(this.wid,"")).replace(/_-_/g," ").replace(/_--_/g,"/"),Faceted.Query[this.wid]=[e],this.synchronize()),this);this.tags.click(function(e){r.tag_click(this,e)}),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,function(e){r.synchronize()}),jQuery(Faceted.Events).bind(Faceted.Events.RESET,function(e){r.reset()}),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_INITIALIZED,function(e){r.count()}),jQuery(Faceted.Events).bind(Faceted.Events.FORM_DO_QUERY,function(e,t){t.wid!=r.wid&&"b_start"!=t.wid&&r.count()}),jQuery(Faceted.Events).bind(Faceted.Events.WINDOW_WIDTH_CHANGED,function(e,t){var i=r.widget.width();jQuery("ul",r.widget).width(i-30),r.update()})},Faceted.TagsCloudWidget.prototype={initialize:function(){var e=jQuery("#"+this.wid+"-cloud",this.widget).text()||"list",t=jQuery("#"+this.wid+"-sizemin",this.widget).text(),i=(t=parseInt(t,10)||10,jQuery("#"+this.wid+"-sizemax",this.widget).text()),r=(i=parseInt(i,10)||20,jQuery("#"+this.wid+"-colormin",this.widget).text()),a=jQuery("#"+this.wid+"-colormax",this.widget).text(),s=jQuery("#"+this.wid+"-height",this.widget).text(),s=parseInt(s,10);this.config={type:e,sizemin:t,sizemax:i,height:"list"==e?"auto":s||200,colormin:r,colormax:a},this.update()},update:function(){jQuery("#"+this.wid,this.widget).tagcloud(this.config)},tag_click:function(e,t){this.do_query(e)},unselect:function(e){jQuery(e).removeClass("faceted-tag-selected"),this.selected=[],this.widget.removeClass("faceted-widget-active")},select:function(e){this.unselect(this.tags),jQuery(e).addClass("faceted-tag-selected"),"all"!=jQuery(e).attr("id").replace(this.wid,"")?(this.selected=[e],this.widget.addClass("faceted-widget-active")):this.widget.removeClass("faceted-widget-active")},do_query:function(e){var t=jQuery(e).attr("id").replace(this.wid,""),i="";(t=t.replace(/_-_/g," ").replace(/_--_/g,"/"))==(i=this.selected.length?(i=jQuery(this.selected[0]).attr("id").replace(this.wid,"")).replace(/_-_/g," ").replace(/_--_/g,"/"):i)?(this.select(jQuery("#"+this.wid+"all",this.widget)),t=[]):this.select(e),Faceted.Form.do_query(this.wid,t)},reset:function(){this.select(jQuery("#"+this.wid+"all",this.widget))},synchronize:function(){var e=Faceted.Query[this.wid];e?(e=e[0].replace(/\s/g,"_-_").replace(/\//g,"_--_"),(e=jQuery("#"+this.wid+e,this.widget)).length&&this.select(e[0])):this.reset()},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){var e,t,i;return this.selected.length?((e=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters"),t=this,e.click(function(e){return t.criteria_remove(this,e),!1}),(i=jQuery("<dt>")).attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i):""},criteria_body:function(){var e,t,i,r,a;return this.selected.length?(r=jQuery(this.selected[0]).attr("id"),e=jQuery(this.selected[0]).attr("title"),(t=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+r),t.attr("title","Remove "+e+" filter"),i=this,t.click(function(e){return i.criteria_remove(this,e),!1}),r=jQuery("<dd>"),a=jQuery('<span class="faceted-tagscloud-criterion">'),r.attr("id","criteria_"+this.wid+"_entries"),a.append(t),jQuery("<span>").text(e).appendTo(a),r.append(a),r):""},criteria_remove:function(e,t){this.do_query(this.selected[0])},count:function(){var e=Faceted.SortedQuery(),t=(e.cid=this.wid,this.version&&(e.version=this.version),this);jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_START,{wid:t.wid}),jQuery.get(Faceted.BASEURL+"@@tagscloud_counter",e,function(e){t.count_update(e),jQuery(Faceted.Events).trigger(Faceted.Events.DO_UPDATE),jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_STOP,{wid:t.wid})})},count_update:function(e){var r=this,a=r.wid+"all",e=jQuery("fieldset",jQuery(e)),t=(r.widget.html(e),1e4),e=(jQuery("li",r.widget).each(function(){var e=jQuery(this).attr("value");(e=parseInt(e,10))<t&&0<e&&(t=e)}),jQuery("#"+a,r.widget)),s=e.attr("value");e.attr("value",t),r.tags=jQuery("li",this.widget),r.tags.click(function(e){r.tag_click(this,e)}),r.faceted_count&&r.tags.each(function(){var e=jQuery(this),t=e.text(),i=parseInt(e.attr("value"),10);e.attr("id")==a?i=s:--i,t=t.replace(/\s\(\d+\)/,""),e.html(t+=" ("+i+")"),e.unbind(),1===e.attr("value")&&e.attr("id")!=a?e.addClass("faceted-tag-disabled"):(e.removeClass("faceted-tag-disabled"),e.click(function(e){r.tag_click(this,e)}))}),r.update()}},Faceted.initializeTagsCloudWidget=function(e){jQuery("div.faceted-tagscloud-widget").each(function(){var e=(e=jQuery(this).attr("id")).split("_")[0];Faceted.Widgets[e]=new Faceted.TagsCloudWidget(e)})},jQuery(document).ready(function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeTagsCloudWidget)}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/widgets/tagscloud/view.js",function(){}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/widgets/tal/view.js",function(){}),Faceted.TextWidget=function(e){this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),this.title=jQuery("legend",this.widget).html(),this.selected=[],this.button=jQuery("input[type=submit]",this.widget),this.input=jQuery("#"+this.wid),this.value="";var t=this,i=this.widget.find("form"),e=(i.submit(function(){return t.text_change(t.button),!1}),this.input.change(function(e){i.submit()}),this.input.val());e&&(this.selected=[this.input],this.value=e,Faceted.Query[this.wid]=[e]),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,function(e){t.synchronize()}),jQuery(Faceted.Events).bind(Faceted.Events.RESET,function(e){t.reset()})},Faceted.TextWidget.prototype={text_change:function(e,t){this.value!==this.input.val()&&(this.do_query(e),jQuery(e).removeClass("submitting"))},do_query:function(e){var t=(t=this.input.val())?[t]:[];if(!e)return this.selected=[],this.value="",Faceted.Form.do_query(this.wid,[]);this.selected=[this.input],this.value=this.input.val();var e=jQuery("input[type=radio]:checked",this.widget);return"all"==(e=1==e.length?e.val():"all")?Faceted.Form.do_query(this.wid,t):(e=(e=Faceted.Query[this.wid])||[],!t.length||t[0]in e||e.push(t[0]),Faceted.Form.do_query(this.wid,e))},reset:function(){this.selected=[],this.value="",jQuery("#"+this.wid).val(""),this.widget.removeClass("faceted-widget-active")},synchronize:function(){var e=Faceted.Query[this.wid];e?(this.input.val(e),this.selected=[this.input],this.value=this.input.val(),this.widget.addClass("faceted-widget-active")):this.reset()},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){var e,t,i;return this.selected.length?((e=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters"),t=this,e.click(function(e){return t.criteria_remove(),!1}),(i=jQuery("<dt>")).attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i):""},criteria_body:function(){var r,a,e;return this.selected.length?(r=this,a=jQuery("<dd>"),e=(e=Faceted.Query[this.wid])||[],jQuery.each(e,function(){var e,t,i=this.toString();0<i.length&&(e=jQuery('<span class="faceted-text-criterion">'),(t=jQuery('<a href="#" class="faceted-remove">remove</a>')).attr("id","criteria_"+r.wid+"_"+i),t.attr("title","Remove "+i+" filter"),t.click(function(e){return r.criteria_remove(i),!1}),e.append(t),jQuery("<span>").text(i).appendTo(e),a.append(e))}),a):""},criteria_remove:function(e){var t,i;this.input.val(""),e?(jQuery("#"+this.wid+"_place_current",this.widget).attr("checked",!0),t=jQuery("input[type=text]",this.widget),i=Faceted.Query[this.wid],-1!=(e=jQuery.inArray(e,i))&&(i.splice(e,1),Faceted.Query[this.wid]=i,this.do_query(t))):(this.selected=[],this.value="",this.do_query())}},Faceted.initializeTextWidget=function(e){jQuery("div.faceted-text-widget").each(function(){var e=(e=jQuery(this).attr("id")).split("_")[0];Faceted.Widgets[e]=new Faceted.TextWidget(e)})},jQuery(document).ready(function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeTextWidget)}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/eea.facetednavigation/eea/facetednavigation/widgets/text/view.js",function(){}),Faceted.CheckboxesWidget=function(e){this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),this.fieldset=jQuery(".widget-fieldset",this.widget),this.title=jQuery("legend",this.widget).html(),this.elements=jQuery("form input[type=checkbox]",this.widget),this.maxitems=parseInt(jQuery("span",this.widget).text(),10),this.operatorElem=this.widget.find(".faceted-operator a"),this.operatorVisible=!!this.operatorElem.length,this.operatorVisible?(this.operator=this.operatorElem.data("value"),this.operatorElem.click(function(e){e.preventDefault(),i.operator_click(this,e)}),this.operatorElem.text(this.operatorElem.data(this.operator))):this.operator=this.widget.data("operator"),this.selected=[],this.version="";var e=jQuery("#faceted-version"),i=(e&&(this.version=e.text()),jQuery("form",this.widget).submit(function(){return!1}),this);this.elements.click(function(e){i.checkbox_click(this,e)});this.widget.find("li.term-tree").click(function(e){$(this).toggleClass("open")});var r,e=this.widget.find("form input[type=checkbox]:checked");e.length&&(this.selected=e,Faceted.Query[this.wid]=[],e.each(function(){Faceted.Query[i.wid].push(jQuery(this).val())})),this.expand_contract(),this.operatorVisible&&(Faceted.Query[i.wid+"-operator"]=i.operator),this.maxitems&&this.fieldset.collapsible({maxitems:this.maxitems,elements:"li:not(.faceted-checkbox-item-zerocount)"}),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,function(e){i.synchronize()}),jQuery(Faceted.Events).bind(Faceted.Events.RESET,function(e){i.reset()}),this.widget.hasClass("faceted-count")&&(r=this.widget.hasClass("faceted-sortcountable"),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_INITIALIZED,function(e){i.count(r)}),jQuery(Faceted.Events).bind(Faceted.Events.FORM_DO_QUERY,function(e,t){("and"==i.operator||t.wid!=i.wid&&"b_start"!=t.wid)&&i.count(r)}))},Faceted.CheckboxesWidget.prototype={checkbox_click:function(e,t){$(e).closest("li").find("input").prop("checked",$(e).prop("checked")),this.do_query(e),t.stopPropagation()},operator_click:function(e,t){var i=this;"or"===i.operator?(i.operator="and",i.operatorElem.text(i.operatorElem.data("and"))):(i.operator="or",i.operatorElem.text(i.operatorElem.data("or"))),Faceted.Form.do_query(this.wid+"-operator",i.operator)},operator_label:function(){var e;return this.operatorVisible?(e=(e=this.widget.find(".faceted-operator label")).length?e.text():"","("+(e+=" "+this.operatorElem.data(this.operator))+")"):""},expand_contract:function(){this.widget.find("ul.subtree").each(function(e,t){var t=$(t),i=t.closest("li"),r=t.siblings('input[type="checkbox"]'),a=t.find('input[type="checkbox"]:checked');t.find('input[type="checkbox"]:not(:checked)').length?r.prop("checked",!1):a.length&&r.prop("checked",!0),!r.is(":checked")&&!a.length&&r.is(":visible")||i.addClass("open")})},do_query:function(e){this.expand_contract(),this.selected=jQuery("form input[type=checkbox]:checked",this.widget);var t=[];this.selected.each(function(e){t.push(jQuery(this).val())}),Faceted.Form.do_query(this.wid,t)},reset:function(){this.selected=[],jQuery(this.elements).attr("checked",!1),this.expand_contract()},synchronize:function(){this.elements.attr("checked",!1);var e=Faceted.Query[this.wid],e=(e&&(jQuery("form input[type=checkbox]",this.widget).val(e),this.selected=jQuery("form input[type=checkbox]:checked",this.widget)),this.expand_contract(),Faceted.Query[this.wid+"-operator"]);this.operatorVisible&&e&&(e=e[0],this.operator=e,this.operatorElem.data("value",e),this.operatorElem.text(this.operatorElem.data(this.operator)))},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){var e,t,i;return this.selected.length?((e=jQuery('<a href="#">[X]</a>')).attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters"),t=this,e.click(function(e){return t.criteria_remove(),!1}),(i=jQuery("<dt>")).attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+" "+this.operator_label()+"</span>"),i):""},criteria_body:function(){var c,o;return this.selected.length?(c=this,(o=jQuery("<dd>")).attr("id","criteria_"+this.wid+"_entries"),c.selected.each(function(e){var t=jQuery('<span class="faceted-checkbox-criterion">'),i=jQuery(this),r=i.attr("id"),a=i.val(),s=(n=jQuery("label[for="+r+"]",c.widget)).attr("title"),n=n.text(),d=jQuery('<a href="#">[X]</a>');d.attr("id","criteria_"+r),d.attr("title","Remove "+s+" filter"),d.click(function(e){return c.criteria_remove(a,i),!1}),t.append(d),jQuery("<span>").text(n).appendTo(t),o.append(t)}),o):""},criteria_remove:function(e,t){(e?t:this.elements).attr("checked",!1),this.do_query()},count:function(t){var e=Faceted.SortedQuery(),i=(e.cid=this.wid,this.version&&(e.version=this.version),this.operator&&!e[this.wid+"-operator"]&&(e[this.wid+"-operator"]=this.operator),this);jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_START,{wid:i.wid}),jQuery.getJSON(Faceted.BASEURL+"@@faceted_counter",e,function(e){i.count_update(e,t),jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_STOP,{wid:i.wid})})},count_update:function(s,n){var d=this,e=d.widget.find("form > ul > li");e.each(function(){var e=jQuery(this),t=(e.removeClass("faceted-checkbox-item-disabled"),e.removeClass("faceted-checkbox-item-zerocount"),jQuery("input",e)),i=(t.unbind(),t.val()),r=jQuery("span",e);r.length||((a=e.children("label")).append(" "),a.append(jQuery("<span>")),r=jQuery("span",e));var a=s[i]||0;r.text("("+s[i]+")"),n&&e.data("count",a),a?(t.attr("disabled",!1),t.click(function(e){d.checkbox_click(this,e)})):(e.addClass("faceted-checkbox-item-disabled"),d.widget.hasClass("faceted-zero-count-hidden")&&e.addClass("faceted-checkbox-item-zerocount"),t.attr("disabled","disabled"))}),n&&e.detach().sort(function(e,t){e=jQuery(e).data("count");return jQuery(t).data("count")-e}),jQuery("ul",d.widget).append(e),d.fieldset.trigger("widget-refresh")}},Faceted.initializeCheckboxesWidget=function(e){jQuery("div.faceted-checkboxes-widget").each(function(){var e=(e=jQuery(this).attr("id")).split("_")[0];Faceted.Widgets[e]=new Faceted.CheckboxesWidget(e)})},jQuery(document).ready(function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeCheckboxesWidget)}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/mtneers.content/mtneers/content/browser/faceted_views/checkbox_tree/view.js",function(){}),Faceted.ViewToggleWidget=function(e){this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),this.elements=jQuery("a",this.widget);var t=this;this.elements.click(function(e){t.link_click(this,e)}),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,function(e){t.synchronize()})},Faceted.ViewToggleWidget.prototype={link_click:function(e,t){t.preventDefault();t=jQuery(e).attr("href");Faceted.Form.do_query("view",t)},synchronize:function(){var e=Faceted.Query.view||"";this.elements.removeClass("selected"),jQuery('a[href="'+e+'"]').addClass("selected")}},Faceted.initializeViewToggleWidget=function(e){jQuery("div.faceted-viewtoggle-widget").each(function(){var e=(e=jQuery(this).attr("id")).split("_")[0];Faceted.Widgets[e]=new Faceted.ViewToggleWidget(e)})},jQuery(document).ready(function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeViewToggleWidget)}),define("/Users/alecmitchell/Development/bundles/mountaineers-py3/src/mtneers.content/mtneers/content/browser/faceted_views/viewtoggle/view.js",function(){});
//# sourceMappingURL=faceted-view-compiled.js.map