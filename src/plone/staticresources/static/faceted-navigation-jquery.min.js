!function(){var d=document,s=window;function c(e,t,i){s.addEventListener?e.addEventListener(t,i,!1):s.attachEvent&&e.attachEvent("on"+t,function(){i.call(e,s.event)})}t=d.createElement("div");var t,n,r=function(e){t.innerHTML=e;e=t.childNodes[0];return t.removeChild(e),e};function h(e,t){e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))||(e.className+=" "+t)}function u(e,t){t=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(t," ")}n=document.documentElement.getBoundingClientRect?function(e){var t,i=e.getBoundingClientRect(),e=e.ownerDocument,s=e.body,e=e.documentElement,n=e.clientTop||s.clientTop||0,r=e.clientLeft||s.clientLeft||0,a=1;return 1<(a=s.getBoundingClientRect?((t=s.getBoundingClientRect()).right-t.left)/s.clientWidth:a)&&(r=n=0),{top:i.top/a+(window.pageYOffset||e&&e.scrollTop/a||s.scrollTop/a)-n,left:i.left/a+(window.pageXOffset||e&&e.scrollLeft/a||s.scrollLeft/a)-r}}:function(e){if(s.jQuery)return jQuery(e).offset();for(var t=0,i=0;t+=e.offsetTop||0,i+=e.offsetLeft||0,e=e.offsetParent;);return{left:i,top:t}};e=0;var e,i=function(){return"ValumsAjaxUpload"+e++};function o(e){return e.replace(/.*(\/|\\)/,"")}function p(e){return/[.]/.exec(e)?/[^.]+$/.exec(e.toLowerCase()):""}Ajax_upload=AjaxUpload=function(e,t){var i,s;for(s in e.jquery?e=e[0]:"string"==typeof e&&/^#.*/.test(e)&&(e=e.slice(1)),e=i="string"==typeof(i=e)?d.getElementById(i):i,this._input=null,this._button=e,this._disabled=!1,this._submitting=!1,this._justClicked=!1,this._parentDialog=d.body,window.jQuery&&jQuery.ui&&jQuery.ui.dialog&&(i=jQuery(self._button).parents(".ui-dialog-content")).length&&(this._parentDialog=i[0]),this._settings={action:"upload.php",name:"userfile",data:{},autoSubmit:!0,responseType:!1,onChange:function(e,t){},onSubmit:function(e,t){},onComplete:function(e,t){}},t)this._settings[s]=t[s];this._createInput(),this._rerouteClicks()},AjaxUpload.prototype={setData:function(e){this._settings.data=e},disable:function(){this._disabled=!0},enable:function(){this._disabled=!1},destroy:function(){this._input&&(this._input.parentNode&&this._input.parentNode.removeChild(this._input),this._input=null)},_createInput:function(){var e,t=this,i=d.createElement("input"),s=(i.setAttribute("type","file"),i.setAttribute("name",this._settings.name),{position:"absolute",margin:"-5px 0 0 -175px",padding:0,width:"220px",height:"30px",fontSize:"14px",opacity:0,cursor:"pointer",display:"none",zIndex:2147483583});for(e in s)i.style[e]=s[e];"0"!==i.style.opacity&&(i.style.filter="alpha(opacity=0)"),this._parentDialog.appendChild(i),c(i,"change",function(){var e=o(this.value);0!=t._settings.onChange.call(t,e,p(e))&&t._settings.autoSubmit&&t.submit()}),c(i,"click",function(){t.justClicked=!0,setTimeout(function(){t.justClicked=!1},3e3)}),this._input=i},_rerouteClicks:function(){var r,a=this,l={top:0,left:0},o=!1;c(a._button,"mouseover",function(e){var t,i,s;a._input&&!o&&(o=!0,t=a._button,i=(s=n(t)).left,s=s.top,r={left:i,right:i+t.offsetWidth,top:s,bottom:s+t.offsetHeight},a._parentDialog!=d.body)&&(l=n(a._parentDialog))}),c(document,"mousemove",function(e){var t,i,s,n=a._input;n&&o&&(a._disabled?(u(a._button,"hover"),n.style.display="none"):((i=!(e=e).pageX&&e.clientX?(s=1,(t=document.body).getBoundingClientRect&&(s=((i=t.getBoundingClientRect()).right-i.left)/t.clientWidth),{x:e.clientX/s+d.body.scrollLeft+d.documentElement.scrollLeft,y:e.clientY/s+d.body.scrollTop+d.documentElement.scrollTop}):{x:e.pageX,y:e.pageY}).x>=r.left&&i.x<=r.right&&i.y>=r.top&&i.y<=r.bottom?(n.style.top=i.y-l.top+"px",n.style.left=i.x-l.left+"px",n.style.display="block",h):(o=!1,a.justClicked||(n.style.display="none"),u))(a._button,"hover"))})},_createIframe:function(){var e=i(),t=r('<iframe src="javascript:false;" name="'+e+'" />');return t.id=e,t.style.display="none",d.body.appendChild(t),t},submit:function(){var s,n,e,r,a=this,l=this._settings;""!==this._input.value&&(s=o(this._input.value),0!=l.onSubmit.call(this,s,p(s))?(n=this._createIframe(),(e=this._createForm(n)).appendChild(this._input),e.submit(),d.body.removeChild(e),this._input=e=null,this._createInput(),r=!1,c(n,"load",function(e){var t,i;"about:blank"==n.src?r&&setTimeout(function(){d.body.removeChild(n)},0):(t=n.contentDocument||frames[n.id].document).readyState&&"complete"!=t.readyState||t.body&&"false"==t.body.innerHTML||(t.XMLDocument?i=t.XMLDocument:t.body?(i=t.body.innerHTML,"json"==l.responseType&&(i=window.eval("("+i+")"))):i=t,l.onComplete.call(a,s,i),r=!0,n.src="about:blank")})):(d.body.removeChild(this._input),this._input=null,this._createInput()))},_createForm:function(e){var t,i=this._settings,s=r('<form method="post" enctype="multipart/form-data"></form>');for(t in s.style.display="none",s.action=i.action,s.target=e.name,d.body.appendChild(s),i.data){var n=d.createElement("input");n.type="hidden",n.name=t,n.value=i.data[t],s.appendChild(n)}return s}}}(),define("/Users/alecmitchell/Development/egg-cache/eea.jquery-11.1-py3.8.egg/eea/jquery/plugins/ajaxfileupload/jquery.ajaxfileupload.js",function(){}),function(h){var u,d,s,c,i,t,n,l,p,g,f,r,_,a=Array.prototype.slice,m=decodeURIComponent,o=h.param,e=h.bbq=h.bbq||{},v=h.event.special,y="hashchange",b="querystring",C="fragment",k="elemUrlAttr",E="href",x="src",q=/^.*\?|#.*$/g,j={};function w(e){return"string"==typeof e}function O(e){var t=a.call(arguments,1);return function(){return e.apply(this,t.concat(a.call(arguments)))}}function T(e,t,i,s,n){var r,a,l,o,n=s!==u?(o=(a=i.match(e?g:/^([^#?]*)\??([^#]*)(#?.*)/))[3]||"",2===n&&w(s)?r=s.replace(e?p:q,""):(l=c(a[2]),s=w(s)?c[e?C:b](s):s,r=2===n?s:1===n?h.extend({},s,l):h.extend({},l,s),r=d(r),e&&(r=r.replace(f,m))),a[1]+(e?_:r||!a[1]?"?":"")+r+o):t(i!==u?i:location.href);return n}function D(e,t,i){return t=t===u||"boolean"==typeof t?(i=t,o[e?C:b]()):w(t)?t.replace(e?p:q,""):t,c(t,i)}function z(s,n,r,a){return w(r)||"object"==typeof r||(a=r,r=n,n=u),this.each(function(){var e=h(this),t=n||l()[(this.nodeName||"").toLowerCase()]||"",i=t&&e.attr(t)||"";e.attr(t,o[s](i,r,a))})}o[b]=O(T,0,function(e){return e.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}),o[C]=s=O(T,1,function(e){return e.replace(g,"$2")}),o.sorted=d=function(e,t){var n=[],r={};return h.each(o(e,t).split("&"),function(e,t){var i=t.replace(/(?:%5B|=).*$/,""),s=r[i];s||(s=r[i]=[],n.push(i)),s.push(t)}),h.map(n.sort(),function(e){return r[e]}).join("&")},s.noEscape=function(e){e=h.map((e=e||"").split(""),encodeURIComponent);f=new RegExp(e.join("|"),"g")},s.noEscape(",/"),s.ajaxCrawlable=function(e){return e!==u&&(_=e?(p=/^.*(?:#!|#)/,g=/^([^#]*)(?:#!|#)?(.*)$/,"#!"):(p=/^.*#/,g=/^([^#]*)#?(.*)$/,"#"),r=!!e),r},s.ajaxCrawlable(0),h.deparam=c=function(e,o){var d={},c={true:!0,false:!1,null:null};return h.each(e.replace(/\+/g," ").split("&"),function(e,t){var i,t=t.split("="),s=m(t[0]),n=d,r=0,a=s.split("]["),l=a.length-1,l=/\[/.test(a[0])&&/\]$/.test(a[l])?(a[l]=a[l].replace(/\]$/,""),(a=a.shift().split("[").concat(a)).length-1):0;if(2===t.length)if(i=m(t[1]),o&&(i=i&&!isNaN(i)?+i:"undefined"===i?u:c[i]!==u?c[i]:i),l)for(;r<=l;r++)n=n[s=""===a[r]?n.length:a[r]]=r<l?n[s]||(a[r+1]&&isNaN(a[r+1])?{}:[]):i;else h.isArray(d[s])?d[s].push(i):d[s]!==u?d[s]=[d[s],i]:d[s]=i;else s&&(d[s]=o?u:"")}),d},c[b]=O(D,0),c[C]=i=O(D,1),h[k]||(h[k]=function(e){return h.extend(j,e)})({a:E,base:E,iframe:x,img:x,input:x,form:"action",link:E,script:x}),l=h[k],h.fn[b]=O(z,b),h.fn[C]=O(z,C),e.pushState=t=function(e,t){w(e)&&/^#/.test(e)&&t===u&&(t=2);var i=e!==u,e=s(location.href,i?e:{},i?t:2);location.href=e},e.getState=n=function(e,t){return e===u||"boolean"==typeof e?i(e):i(t)[e]},e.removeState=function(e){var i={};e!==u&&(i=n(),h.each(h.isArray(e)?e:arguments,function(e,t){delete i[t]})),t(i,2)},v[y]=h.extend(v[y],{add:function(e){var t;function i(e){var i=e[C]=s();e.getState=function(e,t){return e===u||"boolean"==typeof e?c(i,e):c(i,t)[e]},t.apply(this,arguments)}if(h.isFunction(e))return t=e,i;t=e.handler,e.handler=i}})}(jQuery),function(i,s){var e,n,r,a,l,o="hashchange",t=document,d=i.event.special,t=t.documentMode,c="on"+o in s&&(void 0===t||7<t);function h(e){return"#"+(e=e||location.href).replace(/^[^#]*#?(.*)$/,"$1")}function u(e){return e}function p(){var e=h(),t=l(r);e!==r?(a(r=e,t),i(s).trigger(o)):t!==r&&(location.href=location.href.replace(/#.*/,"")+t),n=setTimeout(p,i.fn[o].delay)}i.fn[o]=function(e){return e?this.bind(o,e):this.trigger(o)},i.fn[o].delay=50,d[o]=i.extend(d[o],{setup:function(){if(c)return!1;i(e.start)},teardown:function(){if(c)return!1;i(e.stop)}}),t={},r=h(),l=a=u,t.start=function(){n||p()},t.stop=function(){n&&clearTimeout(n),n=void 0},e=t}(jQuery,this),define("/Users/alecmitchell/Development/egg-cache/eea.jquery-11.1-py3.8.egg/eea/jquery/plugins/bbq/jquery.ba-bbq.min.js",function(){}),function(f){function _(){return{cntr:++_.cntr,settings:f.extend({},f.jstree.defaults),init:function(e,t){var i=this;if(this.container=f(e),0==this.container.size)return!1;if((_.inst[this.cntr]=this).container.attr("id")||this.container.attr("id","jstree_"+this.cntr),_.inst[this.container.attr("id")]=_.inst[this.cntr],_.focused=this.cntr,this.settings=f.extend(!0,{},this.settings,t),this.settings.languages&&this.settings.languages.length){this.current_lang=this.settings.languages[0];for(var s=!1,n="#"+this.container.attr("id"),r=0;r<this.settings.languages.length;r++)!1!==(s=_.add_css(n+" ."+this.settings.languages[r]))&&(s.style.display=this.settings.languages[r]==this.current_lang?"":"none")}else this.current_lang=!1;this.container.addClass("tree"),!1!==this.settings.ui.theme_name&&(!1===this.settings.ui.theme_path&&f("script").each(function(){if(this.src.toString().match(/jquery\.tree.*?js$/))return i.settings.ui.theme_path=this.src.toString().replace(/jquery\.tree.*?js$/,"")+"themes/"+i.settings.ui.theme_name+"/style.css",!1}),""!=this.settings.ui.theme_path&&-1==f.inArray(this.settings.ui.theme_path,_.themes)&&(_.add_sheet({url:this.settings.ui.theme_path}),_.themes.push(this.settings.ui.theme_path)),this.container.addClass("tree-"+this.settings.ui.theme_name));var a,l="";for(a in this.settings.types)this.settings.types.hasOwnProperty(a)&&this.settings.types[a].icon&&(this.settings.types[a].icon.image||this.settings.types[a].icon.position)&&(l+="default"==a?"#"+this.container.attr("id")+" li > a ins { ":"#"+this.container.attr("id")+" li[rel="+a+"] > a ins { ",this.settings.types[a].icon.image&&(l+=" background-image:url("+this.settings.types[a].icon.image+"); "),this.settings.types[a].icon.position&&(l+=" background-position:"+this.settings.types[a].icon.position+"; "),l+="} ");""!=l&&_.add_sheet({str:l}),this.settings.rules.multiple&&(this.selected_arr=[]),this.offset=!1,this.hovered=!1,(this.locked=!1)===_.drag_drop.marker&&(_.drag_drop.marker=f("<div>").attr({id:"jstree-marker"}).hide().appendTo("body")),this.callback("oninit",[this]),this.refresh(),this.attach_events(),this.focus()},refresh:function(e){var t,i,s;return this.locked?this.error("LOCKED"):(i=this,e&&!this.settings.data.async&&(e=!1),this.is_partial_refresh=!!e,this.opened=Array(),0!=this.settings.opened?(f.each(this.settings.opened,function(e,t){0<this.replace(/^#/,"").length&&i.opened.push("#"+this.replace(/^#/,""))}),this.settings.opened=!1):this.container.find("li.open").each(function(e){this.id&&i.opened.push("#"+this.id)}),this.selected?(this.settings.selected=Array(),e?f(e).find("li:has(a.clicked)").each(function(){this.id&&i.settings.selected.push("#"+this.id)}):this.selected_arr?f.each(this.selected_arr,function(){this.attr("id")&&i.settings.selected.push("#"+this.attr("id"))}):this.selected.attr("id")&&this.settings.selected.push("#"+this.selected.attr("id"))):!1!==this.settings.selected&&(t=Array(),"object"==(typeof this.settings.selected).toLowerCase()?f.each(this.settings.selected,function(){0<this.replace(/^#/,"").length&&t.push("#"+this.replace(/^#/,""))}):0<this.settings.selected.replace(/^#/,"").length&&t.push("#"+this.settings.selected.replace(/^#/,"")),this.settings.selected=t),e&&this.settings.data.async?(this.opened=Array(),(e=this.get_node(e)).find("li.open").each(function(e){i.opened.push("#"+this.id)}),e.hasClass("open")&&e.removeClass("open").addClass("closed"),e.hasClass("leaf")&&e.removeClass("leaf"),e.children("ul:eq(0)").html(""),this.open_branch(e,!0,function(){i.reselect.apply(i)})):(i=this,s=new f.jstree.datastores[this.settings.data.type],0==this.container.children("ul").size()&&this.container.html("<ul class='ltr' style='direction:ltr;'><li class='last'><a class='loading' href='#'><ins>&nbsp;</ins>"+(this.settings.lang.loading||"Loading ...")+"</a></li></ul>"),void s.load(this.callback("beforedata",[!1,this]),this,this.settings.data.opts,function(e){e=i.callback("ondata",[e,i]),s.parse(e,i,i.settings.data.opts,function(e){e=i.callback("onparse",[e,i]),i.container.empty().append(f("<ul class='ltr'>").html(e)),i.container.find("li:last-child").addClass("last").end().find("li:has(ul)").not(".open").addClass("closed"),i.container.find("li").not(".open").not(".closed").addClass("leaf"),i.reselect()})})))},reselect:function(e){var t=this;if(e?this.cl_count--:this.cl_count=0,this.opened&&this.opened.length){for(var i,s=!1,n=0;this.opened&&n<this.opened.length;n++)this.settings.data.async?(i=this.get_node(this.opened[n])).size()&&0<i.hasClass("closed")&&(s=!0,i=this.opened[n].toString().replace("/","\\/"),delete this.opened[n],this.open_branch(i,!0,function(){t.reselect.apply(t,[!0])}),this.cl_count++):this.open_branch(this.opened[n],!0);if(this.settings.data.async&&s)return;if(0<this.cl_count)return;delete this.opened}0<this.cl_count||(this.container.css("direction","ltr").children("ul:eq(0)").addClass("ltr"),0==this.settings.ui.dots&&this.container.children("ul:eq(0)").addClass("no_dots"),this.scrtop&&(this.container.scrollTop(t.scrtop),delete this.scrtop),!1!==this.settings.selected&&(f.each(this.settings.selected,function(e){t.is_partial_refresh?t.select_branch(f(t.settings.selected[e].toString().replace("/","\\/"),t.container),!1!==t.settings.rules.multiple):t.select_branch(f(t.settings.selected[e].toString().replace("/","\\/"),t.container),!1!==t.settings.rules.multiple&&0<e)}),this.settings.selected=!1),this.callback("onload",[t]))},get:function(e,t,i){return t=t||this.settings.data.type,i=i||this.settings.data.opts,(new f.tree.datastores[t]).get(e,this,i)},attach_events:function(){var r=this;this.container.bind("mousedown.jstree",function(e){if(_.drag_drop.isdown)return _.drag_drop.move_type=!1,e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1}).bind("mouseup.jstree",function(e){setTimeout(function(){r.focus.apply(r)},5)}).bind("click.jstree",function(e){return!0}),this.container.on("click","li",function(e){return"LI"!=e.target.tagName||(r.off_height(),e.pageY-f(e.target).offset().top>r.li_height)||(r.toggle_branch.apply(r,[e.target]),e.stopPropagation(),!1)}),this.container.on("click.jstree","li a",function(e){return!(!e.which||3!=e.which)||(r.locked?(e.preventDefault(),e.target.blur(),r.error("LOCKED")):(r.select_branch.apply(r,[e.target,e.ctrlKey||"on"==r.settings.rules.multiple]),r.inp&&r.inp.blur(),e.preventDefault(),e.target.blur(),!1))}).on("dblclick.jstree","li a",function(e){if(r.locked)return e.preventDefault(),e.stopPropagation(),e.target.blur(),r.error("LOCKED");r.callback("ondblclk",[r.get_node(e.target).get(0),r]),e.preventDefault(),e.stopPropagation(),e.target.blur()}).on("contextmenu.jstree","li a",function(e){return r.locked?(e.target.blur(),r.error("LOCKED")):r.callback("onrgtclk",[r.get_node(e.target).get(0),r,e])}).on("mouseover.jstree","li a",function(e){if(r.locked)return e.preventDefault(),e.stopPropagation(),r.error("LOCKED");!1===r.hovered||"A"!=e.target.tagName&&"INS"!=e.target.tagName||(r.hovered.children("a").removeClass("hover"),r.hovered=!1),r.callback("onhover",[r.get_node(e.target).get(0),r])}).on("mousedown.jstree","li a",function(e){if("left"==r.settings.rules.drag_button&&e.which&&1!=e.which)return!0;if("right"==r.settings.rules.drag_button&&e.which&&3!=e.which)return!0;if(r.focus.apply(r),r.locked)return r.error("LOCKED");var t=r.get_node(e.target);if(0!=r.settings.rules.multiple&&1<r.selected_arr.length&&t.children("a:eq(0)").hasClass("clicked")){var i,s,n=0;for(i in r.selected_arr)r.selected_arr.hasOwnProperty(i)&&r.check("draggable",r.selected_arr[i])&&(r.selected_arr[i].addClass("dragged"),_.drag_drop.origin_tree=r,n++);0<n&&(r.check("draggable",t)?_.drag_drop.drag_node=t:_.drag_drop.drag_node=r.container.find("li.dragged:eq(0)"),_.drag_drop.isdown=!0,_.drag_drop.drag_help=f("<div id='jstree-dragged' class='tree "+(""!=r.settings.ui.theme_name?" tree-"+r.settings.ui.theme_name:"")+"' />").append("<ul class='"+r.container.children("ul:eq(0)").get(0).className+"' />"),s=_.drag_drop.drag_node.clone(),0<r.settings.languages.length&&s.find("a").not("."+r.current_lang).hide(),_.drag_drop.drag_help.children("ul:eq(0)").append(s),_.drag_drop.drag_help.find("li:eq(0)").removeClass("last").addClass("last").children("a").html("<ins>&nbsp;</ins>Multiple selection").end().children("ul").remove(),_.drag_drop.dragged=r.container.find("li.dragged"))}else r.check("draggable",t)&&(_.drag_drop.drag_node=t,_.drag_drop.drag_help=f("<div id='jstree-dragged' class='tree "+(""!=r.settings.ui.theme_name?" tree-"+r.settings.ui.theme_name:"")+"' />").append("<ul class='"+r.container.children("ul:eq(0)").get(0).className+"' />"),s=t.clone(),0<r.settings.languages.length&&s.find("a").not("."+r.current_lang).hide(),_.drag_drop.drag_help.children("ul:eq(0)").append(s),_.drag_drop.drag_help.find("li:eq(0)").removeClass("last").addClass("last"),_.drag_drop.isdown=!0,_.drag_drop.foreign=!1,_.drag_drop.origin_tree=r,t.addClass("dragged"),_.drag_drop.dragged=r.container.find("li.dragged"));return _.drag_drop.init_x=e.pageX,_.drag_drop.init_y=e.pageY,t.blur(),e.preventDefault(),e.stopPropagation(),!1})},focus:function(){if(this.locked)return!1;_.focused!=this.cntr&&(_.focused=this.cntr,this.callback("onfocus",[this]))},off_height:function(){var e;!1===this.offset&&(this.container.css({position:"relative"}),this.offset=this.container.offset(),e=0,(e=parseInt(f.curCSS(this.container.get(0),"paddingTop",!0),10))&&(this.offset.top+=e),(e=parseInt(f.curCSS(this.container.get(0),"borderTopWidth",!0),10))&&(this.offset.top+=e),this.container.css({position:""})),this.li_height||(e=this.container.find("ul li.closed, ul li.leaf").eq(0),this.li_height=e.height(),e.children("ul:eq(0)").size()&&(this.li_height-=e.children("ul:eq(0)").height()),this.li_height)||(this.li_height=18)},scroll_check:function(e,t){var i=this,s=i.container,n=i.container.offset(),r=s.scrollTop(),a=s.scrollLeft(),l=s.get(0).scrollWidth>s.width()?40:20;t-n.top<20&&s.scrollTop(Math.max(r-i.settings.ui.scroll_spd,0)),s.height()-(t-n.top)<l&&s.scrollTop(r+i.settings.ui.scroll_spd),e-n.left<20&&s.scrollLeft(Math.max(a-i.settings.ui.scroll_spd,0)),s.width()-(e-n.left)<40&&s.scrollLeft(a+i.settings.ui.scroll_spd),s.scrollLeft()==a&&s.scrollTop()==r||(_.drag_drop.move_type=!1,_.drag_drop.ref_node=!1,_.drag_drop.marker.hide()),_.drag_drop.scroll_time=setTimeout(function(){i.scroll_check(e,t)},50)},scroll_into_view:function(e){if(!(e=e?this.get_node(e):this.selected))return!1;var e=e.offset().top,t=this.container.offset().top,i=t+this.container.height(),s=this.container.get(0).scrollWidth>this.container.width()?40:20;e+5<t&&this.container.scrollTop(this.container.scrollTop()-(t-e+5)),i<e+s&&this.container.scrollTop(this.container.scrollTop()+(e+s-i))},get_node:function(e){return f(e).closest("li")},get_type:function(e){if(e=e?this.get_node(e):this.selected)return e.attr(this.settings.rules.type_attr)||"default"},set_type:function(e,t){(t=t?this.get_node(t):this.selected)&&e&&t.attr(this.settings.rules.type_attr,e)},get_text:function(e,t){if(!(e=this.get_node(e))||0==e.size())return"";e=this.settings.languages&&this.settings.languages.length?(t=t||this.current_lang,e.children("a."+t)):e.children("a:visible");var i="";return e.contents().each(function(){if(3==this.nodeType)return i=this.data,!1}),i},check:function(e,t){if(this.locked)return!1;var i=!1;if(-1===t)void 0!==this.settings.rules[e]&&(i=this.settings.rules[e]);else{if(!(t=t?this.get_node(t):this.selected))return;var s=this.get_type(t);void 0!==this.settings.types[s]&&void 0!==this.settings.types[s][e]?i=this.settings.types[s][e]:void 0!==this.settings.types.default&&void 0!==this.settings.types.default[e]&&(i=this.settings.types.default[e])}return"function"==typeof i&&(i=i.call(null,t,this)),i=this.callback("check",[e,t,i,this])},check_move:function(e,t,i){if(this.locked)return!1;if(f(t).closest("li.dragged").size())return!1;var s=e.parents(".tree:eq(0)").get(0),n=t.parents(".tree:eq(0)").get(0);if(s&&s!=n&&("none"==(a=f.jstree.reference(n.id).settings.rules.multitree)||f.isArray(a)&&-1==f.inArray(s.id,a)))return!1;n="inside"!=i?this.parent(t):this.get_node(t);if(e=this.get_node(e),0==n)return!1;var s={max_depth:this.settings.rules.use_max_depth?this.check("max_depth",n):-1,max_children:this.settings.rules.use_max_children?this.check("max_children",n):-1,valid_children:this.check("valid_children",n)},r="string"==typeof e?e:this.get_type(e);if(void 0!==s.valid_children&&("none"==s.valid_children||"object"==typeof s.valid_children&&-1==f.inArray(r,f.makeArray(s.valid_children))))return!1;if(this.settings.rules.use_max_children&&void 0!==s.max_children&&-1!=s.max_children){if(0==s.max_children)return!1;r=1;if(1==_.drag_drop.moving&&0==_.drag_drop.foreign&&(r=_.drag_drop.dragged.size(),r-=n.find("> ul > li.dragged").size()),s.max_children<n.find("> ul > li").size()+r)return!1}if(this.settings.rules.use_max_depth){if(void 0!==s.max_depth&&0===s.max_depth)return this.error("MOVE: MAX-DEPTH REACHED");for(var a,l=0<s.max_depth&&s.max_depth,o=0,d=n;-1!==d;)if(d=this.parent(d),o++,!1!==(l=0<=(a=this.check("max_depth",d))?!1===l?a-o:Math.min(l,a-o):l)&&l<=0)return this.error("MOVE: MAX-DEPTH REACHED");if(!1!==l&&l<=0)return this.error("MOVE: MAX-DEPTH REACHED");if(!1!==l){var c=1;if("string"!=typeof e)for(d=e;0<d.size();){if(l-c<0)return this.error("MOVE: MAX-DEPTH REACHED");d=d.children("ul").children("li"),c++}}}return 0!=this.callback("check_move",[e,t,i,this])},hover_branch:function(e){return this.locked?this.error("LOCKED"):(e=this.get_node(e)).size()?this.check("clickable",e)?(this.hovered&&this.hovered.children("A").removeClass("hover"),this.hovered=e,this.hovered.children("a").addClass("hover"),void this.scroll_into_view(this.hovered)):this.error("SELECT: NODE NOT SELECTABLE"):this.error("HOVER: NOT A VALID NODE")},select_branch:function(e,t){if(this.locked)return this.error("LOCKED");e||!1===this.hovered||(e=this.hovered);var i=this;if(!(e=i.get_node(e)).size())return this.error("SELECT: NOT A VALID NODE");if(e.children("a").removeClass("hover"),!i.check("clickable",e))return this.error("SELECT: NODE NOT SELECTABLE");if(!1===i.callback("beforechange",[e.get(0),i]))return this.error("SELECT: STOPPED BY USER");if(0!=this.settings.rules.multiple&&t&&0<e.children("a.clicked").size())return this.deselect_branch(e);if(0!=this.settings.rules.multiple&&t&&this.selected_arr.push(e),0!=this.settings.rules.multiple&&!t){for(var s in this.selected_arr)this.selected_arr.hasOwnProperty(s)&&(this.selected_arr[s].children("A").removeClass("clicked"),this.callback("ondeselect",[this.selected_arr[s].get(0),i]));this.selected_arr=[],this.selected_arr.push(e),this.selected&&this.selected.children("A").hasClass("clicked")&&(this.selected.children("A").removeClass("clicked"),this.callback("ondeselect",[this.selected.get(0),i]))}this.settings.rules.multiple||this.selected&&(this.selected.children("A").removeClass("clicked"),this.callback("ondeselect",[this.selected.get(0),i])),this.selected=e,!1!==this.hovered&&(this.hovered.children("A").removeClass("hover"),this.hovered=e),this.selected.children("a").addClass("clicked").end().parents("li.closed").each(function(){i.open_branch(this,!0)}),this.scroll_into_view(this.selected),this.callback("onselect",[this.selected.get(0),i]),this.callback("onchange",[this.selected.get(0),i])},deselect_branch:function(e){var t;return this.locked?this.error("LOCKED"):0==(e=(t=this).get_node(e)).children("a.clicked").size()?this.error("DESELECT: NODE NOT SELECTED"):(e.children("a").removeClass("clicked"),this.callback("ondeselect",[e.get(0),t]),0!=this.settings.rules.multiple&&1<this.selected_arr.length?(this.selected_arr=[],this.container.find("a.clicked").filter(":first-child").parent().each(function(){t.selected_arr.push(f(this))}),e.get(0)==this.selected.get(0)&&(this.selected=this.selected_arr[0])):(0!=this.settings.rules.multiple&&(this.selected_arr=[]),this.selected=!1),void this.callback("onchange",[e.get(0),t]))},toggle_branch:function(e){return this.locked?this.error("LOCKED"):(e=this.get_node(e)).hasClass("closed")?this.open_branch(e):e.hasClass("open")?this.close_branch(e):void 0},open_branch:function(t,e,i){var s=this;if(this.locked)return this.error("LOCKED");if(!(t=this.get_node(t)).size())return this.error("OPEN: NO SUCH NODE");if(t.hasClass("leaf"))return this.error("OPEN: OPENING LEAF NODE");if(this.settings.data.async&&0==t.find("li").size()){if(!1===this.callback("beforeopen",[t.get(0),this]))return this.error("OPEN: STOPPED BY USER");t.children("ul:eq(0)").remove().end().append("<ul><li class='last'><a class='loading' href='#'><ins>&nbsp;</ins>"+(s.settings.lang.loading||"Loading ...")+"</a></li></ul>"),t.removeClass("closed").addClass("open");var n=new f.jstree.datastores[this.settings.data.type];return n.load(this.callback("beforedata",[t,this]),this,this.settings.data.opts,function(e){(e=s.callback("ondata",[e,s]))&&0!=e.length?n.parse(e,s,s.settings.data.opts,function(e){e=s.callback("onparse",[e,s]),t.children("ul:eq(0)").replaceWith(f("<ul>").html(e)),t.find("li:last-child").addClass("last").end().find("li:has(ul)").not(".open").addClass("closed"),t.find("li").not(".open").not(".closed").addClass("leaf"),s.open_branch.apply(s,[t]),i&&i.call()}):(t.removeClass("closed").removeClass("open").addClass("leaf").children("ul").remove(),i&&i.call())}),!0}return this.settings.data.async||!1!==this.callback("beforeopen",[t.get(0),this])?(0<parseInt(this.settings.ui.animation)&&!e?(t.children("ul:eq(0)").css("display","none"),t.removeClass("closed").addClass("open"),t.children("ul:eq(0)").slideDown(parseInt(this.settings.ui.animation),function(){f(this).css("display",""),i&&i.call()})):(t.removeClass("closed").addClass("open"),i&&i.call()),this.callback("onopen",[t.get(0),this]),!0):this.error("OPEN: STOPPED BY USER")},close_branch:function(e,t){var i;return this.locked?this.error("LOCKED"):(e=(i=this).get_node(e)).size()?!1===i.callback("beforeclose",[e.get(0),i])?this.error("CLOSE: STOPPED BY USER"):(0<parseInt(this.settings.ui.animation)&&!t&&1==e.children("ul:eq(0)").size()?e.children("ul:eq(0)").slideUp(parseInt(this.settings.ui.animation),function(){e.hasClass("open")&&e.removeClass("open").addClass("closed"),f(this).css("display","")}):e.hasClass("open")&&e.removeClass("open").addClass("closed"),this.selected&&!1!==this.settings.ui.selected_parent_close&&0<e.children("ul:eq(0)").find("a.clicked").size()&&(e.find("li:has(a.clicked)").each(function(){i.deselect_branch(this)}),"select_parent"==this.settings.ui.selected_parent_close)&&0==e.children("a.clicked").size()&&this.select_branch(e,0!=this.settings.rules.multiple&&0<this.selected_arr.length),void this.callback("onclose",[e.get(0),this])):this.error("CLOSE: NO SUCH NODE")},open_all:function(e,t){if(this.locked)return this.error("LOCKED");var i=this,s=(e=e?this.get_node(e):this.container).find("li.closed").size();t?this.cl_count--:this.cl_count=0,0<s?(this.cl_count+=s,e.find("li.closed").each(function(){var e=this;i.open_branch.apply(i,[this,!0,function(){i.open_all.apply(i,[e,!0])}])})):0==this.cl_count&&this.callback("onopen_all",[this])},close_all:function(e){if(this.locked)return this.error("LOCKED");var t=this;(e=e?this.get_node(e):this.container).find("li.open").each(function(){t.close_branch(this,!0)}),this.callback("onclose_all",[this])},set_lang:function(e){var t,i;return!(!f.isArray(this.settings.languages)||0==this.settings.languages.length)&&(this.locked?this.error("LOCKED"):void 0!==(e=f.inArray(e,this.settings.languages)||void 0===this.settings.languages[e]?e:this.settings.languages[e])&&(e!=this.current_lang&&(i=!1,t="#"+this.container.attr("id"),!1!==(i=_.get_css(t+" ."+this.current_lang))&&(i.style.display="none"),!1!==(i=_.get_css(t+" ."+e))&&(i.style.display=""),this.current_lang=e),!0))},get_lang:function(){return!(!f.isArray(this.settings.languages)||0==this.settings.languages.length)&&this.current_lang},create:function(e,t,i){if(this.locked)return this.error("LOCKED");var s=!1;if(t=-1==t?(s=!0,this.container):t?this.get_node(t):this.selected,!(s||t&&t.size()))return this.error("CREATE: NO NODE SELECTED");var n,r=i,a=t;if("before"==i&&(i=t.parent().children().index(t),t=t.parents("li:eq(0)")),"after"==i&&(i=t.parent().children().index(t)+1,t=t.parents("li:eq(0)")),s||0!=t.size()||(s=!0,t=this.container),!s){if(!this.check("creatable",t))return this.error("CREATE: CANNOT CREATE IN NODE");if(t.hasClass("closed")){if(this.settings.data.async&&0==t.children("ul").size())return(n=this).open_branch(t,!0,function(){n.create.apply(n,[e,t,i])});this.open_branch(t,!0)}}var l=!1;if((e=e?f.extend(!0,{},e):{}).attributes||(e.attributes={}),e.attributes[this.settings.rules.type_attr]||(e.attributes[this.settings.rules.type_attr]=this.get_type(a)||"default"),this.settings.languages.length){e.data||(e.data={},l=!0);for(var o=0;o<this.settings.languages.length;o++)e.data[this.settings.languages[o]]||(e.data[this.settings.languages[o]]="string"!=(typeof this.settings.lang.new_node).toLowerCase()&&this.settings.lang.new_node[o]?this.settings.lang.new_node[o]:this.settings.lang.new_node)}else e.data||(e.data=this.settings.lang.new_node,l=!0);e=this.callback("ondata",[e,this]);var a=f.jstree.datastores.json().parse(e,this),a=this.callback("onparse",[a,this]),a=f(a),d=(a.children("ul").size()?a.is(".open")||a.addClass("closed"):a.addClass("leaf"),a.find("li:last-child").addClass("last").end().find("li:has(ul)").not(".open").addClass("closed"),a.find("li").not(".open").not(".closed").addClass("leaf"),{max_depth:this.settings.rules.use_max_depth?this.check("max_depth",s?-1:t):-1,max_children:this.settings.rules.use_max_children?this.check("max_children",s?-1:t):-1,valid_children:this.check("valid_children",s?-1:t)}),c=this.get_type(a);if(void 0!==d.valid_children&&("none"==d.valid_children||f.isArray(d.valid_children)&&-1==f.inArray(c,d.valid_children)))return this.error("CREATE: NODE NOT A VALID CHILD");if(this.settings.rules.use_max_children&&void 0!==d.max_children&&-1!=d.max_children&&d.max_children>=this.children(t).size())return this.error("CREATE: MAX_CHILDREN REACHED");if(this.settings.rules.use_max_depth){if(void 0!==d.max_depth&&0===d.max_depth)return this.error("CREATE: MAX-DEPTH REACHED");for(var h=0<d.max_depth&&d.max_depth,o=0,u=t;-1!==u&&!s;){u=this.parent(u),o++;var p=this.check("max_depth",u);if(!1!==(h=0<=p?!1===h?p-o:Math.min(h,p-o):h)&&h<=0)return this.error("CREATE: MAX-DEPTH REACHED")}if(!1!==h&&h<=0)return this.error("CREATE: MAX-DEPTH REACHED");if(!1!==h)for(var g=1,u=a;0<u.size();){if(h-g<0)return this.error("CREATE: MAX-DEPTH REACHED");u=u.children("ul").children("li"),g++}}return"undefined"!=(typeof i).toLowerCase()&&"inside"!=i||(i="top"==this.settings.rules.createat?0:t.children("ul:eq(0)").children("li").size()),!1===(0==t.children("ul").size()||1==s&&0==t.children("ul").children("li").size()?s?this.moved(a,this.container.children("ul:eq(0)"),"inside",!0):this.moved(a,t.children("a:eq(0)"),"inside",!0):"before"==r&&t.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").size()?this.moved(a,t.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").children("a:eq(0)"),"before",!0):"after"==r&&t.children("ul:eq(0)").children("li:nth-child("+i+")").size()?this.moved(a,t.children("ul:eq(0)").children("li:nth-child("+i+")").children("a:eq(0)"),"after",!0):t.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").size()?this.moved(a,t.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").children("a:eq(0)"),"before",!0):this.moved(a,t.children("ul:eq(0)").children("li:last").children("a:eq(0)"),"after",!0))?this.error("CREATE: ABORTED"):(l&&(this.select_branch(a.children("a:eq(0)")),this.rename()),a)},rename:function(t,e){if(this.locked)return this.error("LOCKED");t=t?this.get_node(t):this.selected;var i=this;if(!t||!t.size())return this.error("RENAME: NO NODE SELECTED");if(!this.check("renameable",t))return this.error("RENAME: NODE NOT RENAMABLE");if(!this.callback("beforerename",[t.get(0),i.current_lang,i]))return this.error("RENAME: STOPPED BY USER");t.parents("li.closed").each(function(){i.open_branch(this)}),t=this.current_lang?t.find("a."+this.current_lang):t.find("a:first");var s,n={},r=(n[this.container.attr("id")]=this.get_rollback(),t.children("ins").clone());"string"==(typeof e).toLowerCase()?(t.text(e).prepend(r),i.callback("onrename",[i.get_node(t).get(0),i,n])):(s="",t.contents().each(function(){if(3==this.nodeType)return s=this.data,!1}),i.inp=f("<input type='text' autocomplete='off' />"),i.inp.val(s.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<")).bind("mousedown",function(e){e.stopPropagation()}).bind("mouseup",function(e){e.stopPropagation()}).bind("click",function(e){e.stopPropagation()}).bind("keyup",function(e){e=e.keyCode||e.which;27==e?(this.value=s,this.blur()):13==e&&this.blur()}),i.inp.blur(function(e){""==this.value&&(this.value=s),t.text(this.value).prepend(r),t.get(0).style.display="",t.prevAll("span").remove(),i.inp=!1,i.callback("onrename",[i.get_node(t).get(0),i,n])}),e=f("<span />").addClass(t.attr("class")).append(r).append(i.inp),t.get(0).style.display="none",t.parent().prepend(e),i.inp.get(0).focus(),i.inp.get(0).select())},remove:function(e){if(this.locked)return this.error("LOCKED");var t,i=this,s={};if(s[this.container.attr("id")]=this.get_rollback(),!e||this.selected&&this.get_node(e).get(0)==this.selected.get(0)){if(!this.selected)return this.error("DELETE: NO NODE SELECTED");if(!this.check("deletable",this.selected))return this.error("DELETE: NODE NOT DELETABLE");if(!this.callback("beforedelete",[this.selected.get(0),i]))return this.error("DELETE: STOPPED BY USER");$parent=this.selected.parent();var n,r,e=this.selected;0!=this.settings.rules.multiple&&1!=this.selected_arr.length||(n=!0,r="select_previous"==this.settings.ui.selected_delete&&this.prev(this.selected)),e=e.remove(),$parent.children("li:last").addClass("last"),0==$parent.children("li").size()&&($li=$parent.parents("li:eq(0)")).removeClass("open").removeClass("closed").addClass("leaf").children("ul").remove(),n||0==this.settings.rules.multiple||((i=this).selected_arr=[],this.container.find("a.clicked").filter(":first-child").parent().each(function(){i.selected_arr.push(f(this))}),0<this.selected_arr.length&&(this.selected=this.selected_arr[0],this.remove())),n&&r&&this.select_branch(r),this.callback("ondelete",[e.get(0),this,s])}else if((e=this.get_node(e)).size())return this.check("deletable",e)?this.callback("beforedelete",[e.get(0),i])?($parent=e.parent(),e.find("a.clicked").size()&&(t=!1,i.selected_arr=[],this.container.find("a.clicked").filter(":first-child").parent().each(function(){if(t||this!=i.selected.get(0)||(t=!0),-1!=f(this).parents().index(e))return!0;i.selected_arr.push(f(this))}),t)&&(this.selected=this.selected_arr[0]||!1),e=e.remove(),$parent.children("li:last").addClass("last"),0==$parent.children("li").size()&&($li=$parent.parents("li:eq(0)")).removeClass("open").removeClass("closed").addClass("leaf").children("ul").remove(),void this.callback("ondelete",[e.get(0),this,s])):this.error("DELETE: STOPPED BY USER"):this.error("DELETE: NODE NOT DELETABLE")},next:function(e,t){return!!(e=this.get_node(e)).size()&&(t?0<e.nextAll("li").size()&&e.nextAll("li:eq(0)"):e.hasClass("open")?e.find("li:eq(0)"):0<e.nextAll("li").size()?e.nextAll("li:eq(0)"):e.parents("li").next("li").eq(0))},prev:function(e,t){if(!(e=this.get_node(e)).size())return!1;if(t)return 0<e.prevAll("li").size()&&e.prevAll("li:eq(0)");if(e.prev("li").size()){for(e=e.prev("li").eq(0);e.hasClass("open");)e=e.children("ul:eq(0)").children("li:last");return e}return!!e.parents("li:eq(0)").size()&&e.parents("li:eq(0)")},parent:function(e){return!!(e=this.get_node(e)).size()&&(e.parents("li:eq(0)").size()?e.parents("li:eq(0)"):-1)},children:function(e){return-1===e?this.container.children("ul:eq(0)").children("li"):!!(e=this.get_node(e)).size()&&e.children("ul:eq(0)").children("li")},toggle_dots:function(){this.settings.ui.dots?(this.settings.ui.dots=!1,this.container.children("ul:eq(0)").addClass("no_dots")):(this.settings.ui.dots=!0,this.container.children("ul:eq(0)").removeClass("no_dots"))},callback:function(e,t){var i,s=!1,n=null;for(i in this.settings.plugins)if("object"==typeof f.jstree.plugins[i]&&null!=(n=(s=f.jstree.plugins[i]).callbacks&&"function"==typeof s.callbacks[e]?s.callbacks[e].apply(this,t):n)){if("ondata"!=e&&"onparse"!=e)return n;t[0]=n}if("function"==typeof(s=this.settings.callback[e]))return s.apply(null,t)},get_rollback:function(){var e={};return e.html=this.container.html(),e.selected=!!this.selected&&this.selected.attr("id"),e},moved:function(e,t,i,s,n,r){var a,l,o,e=f(e),d=f(e).parents("ul:eq(0)"),c=f(t);if(c.is("ins")&&(c=c.parent()),r||((r={})[this.container.attr("id")]=this.get_rollback(),s)||((a=(1<e.size()?e.eq(0):e).parents(".tree:eq(0)")).get(0)!=this.container.get(0)&&(a=_.inst[a.attr("id")],r[a.container.attr("id")]=a.get_rollback()),delete a),"inside"==i&&this.settings.data.async){var h=this;if(this.get_node(c).hasClass("closed"))return this.open_branch(this.get_node(c),!0,function(){h.moved.apply(h,[e,t,i,s,n,r])});if(1==this.get_node(c).find("> ul > li > a.loading").size())return void setTimeout(function(){h.moved.apply(h,[e,t,i,s,n])},200)}if(1<e.size())a=(h=this).moved(e.eq(0),t,i,!1,n,r),e.each(function(e){0!=e&&(a=a&&h.moved(this,a.children("a:eq(0)"),"after",!1,n,r))});else{if(n?(_what=e.clone()).each(function(e){this.id=this.id+"_copy",f(this).find("li").each(function(){this.id=this.id+"_copy"}),f(this).removeClass("dragged").find("a.clicked").removeClass("clicked").end().find("li.dragged").removeClass("dragged")}):_what=e,s){if(!this.callback("beforecreate",[this.get_node(e).get(0),this.get_node(t).get(0),i,this]))return!1}else if(!this.callback("beforemove",[this.get_node(e).get(0),this.get_node(t).get(0),i,this]))return!1;if(!s)if((a=e.parents(".tree:eq(0)")).get(0)!=this.container.get(0)){if((a=_.inst[a.attr("id")]).settings.languages.length){var u=[];if(0==this.settings.languages.length)u.push("."+a.current_lang);else for(var p in this.settings.languages)if(this.settings.languages.hasOwnProperty(p))for(var g in a.settings.languages)a.settings.languages.hasOwnProperty(g)&&this.settings.languages[p]==a.settings.languages[g]&&u.push("."+this.settings.languages[p]);if(0==u.length)return this.error("MOVE: NO COMMON LANGUAGES");_what.find("a").not(u.join(",")).remove()}_what.find("a.clicked").removeClass("clicked")}switch(e=_what,i){case"before":c.parents("ul:eq(0)").children("li.last").removeClass("last"),c.parent().before(e.removeClass("last")),c.parents("ul:eq(0)").children("li:last").addClass("last");break;case"after":c.parents("ul:eq(0)").children("li.last").removeClass("last"),c.parent().after(e.removeClass("last")),c.parents("ul:eq(0)").children("li:last").addClass("last");break;case"inside":c.parent().children("ul:first").size()?"top"==this.settings.rules.createat?(c.parent().children("ul:first").prepend(e.removeClass("last")).children("li:last").addClass("last"),(l=c.parent().children("ul:first").children("li:first")).size()&&(i="before",t=l)):((l=c.parent().children("ul:first").children(".last")).size()&&(i="after",t=l),c.parent().children("ul:first").children(".last").removeClass("last").end().append(e.removeClass("last")).children("li:last").addClass("last")):(e.addClass("last"),c.parent().removeClass("leaf").append("<ul/>"),c.parent().hasClass("open")||c.parent().addClass("closed"),c.parent().children("ul:first").prepend(e)),c.parent().hasClass("closed")&&this.open_branch(c)}(0==d.find("li").size()?((o=d.parent()).removeClass("open").removeClass("closed").addClass("leaf"),o.is(".tree")||o.children("ul").remove(),o.parents("ul:eq(0)").children("li.last").removeClass("last").end()):(d.children("li.last").removeClass("last"),d)).children("li:last").addClass("last"),n?this.callback("oncopy",[this.get_node(e).get(0),this.get_node(t).get(0),i,this,r]):s?this.callback("oncreate",[this.get_node(e).get(0),c.is("ul")?-1:this.get_node(t).get(0),i,this,r]):this.callback("onmove",[this.get_node(e).get(0),this.get_node(t).get(0),i,this,r])}return e},error:function(e){return this.callback("error",[e,this]),!1},lock:function(e){this.locked=e,this.locked?this.container.children("ul:eq(0)").addClass("locked"):this.container.children("ul:eq(0)").removeClass("locked")},cut:function(e){return this.locked?this.error("LOCKED"):(e=e?this.get_node(e):this.container.find("a.clicked").filter(":first-child").parent())&&e.size()?(_.cut_copy.copy_nodes=!1,void(_.cut_copy.cut_nodes=e)):this.error("CUT: NO NODE SELECTED")},copy:function(e){return this.locked?this.error("LOCKED"):(e=e?this.get_node(e):this.container.find("a.clicked").filter(":first-child").parent())&&e.size()?(_.cut_copy.copy_nodes=e,void(_.cut_copy.cut_nodes=!1)):this.error("COPY: NO NODE SELECTED")},paste:function(e,t){if(this.locked)return this.error("LOCKED");var i=!1;if(e=-1==e?(i=!0,this.container):e?this.get_node(e):this.selected,!(i||e&&e.size()))return this.error("PASTE: NO NODE SELECTED");if(!_.cut_copy.copy_nodes&&!_.cut_copy.cut_nodes)return this.error("PASTE: NOTHING TO DO");var s=t;if("before"==t?(t=e.parent().children().index(e),e=e.parents("li:eq(0)")):"after"==t?(t=e.parent().children().index(e)+1,e=e.parents("li:eq(0)")):"undefined"!=(typeof t).toLowerCase()&&"inside"!=t||(t="top"==this.settings.rules.createat?0:e.children("ul:eq(0)").children("li").size()),i||0!=e.size()||(i=!0,e=this.container),_.cut_copy.copy_nodes&&_.cut_copy.copy_nodes.size()){var n=!0;if(!i&&!this.check_move(_.cut_copy.copy_nodes,e.children("a:eq(0)"),"inside"))return!1;0==e.children("ul").size()||1==i&&0==e.children("ul").children("li").size()?i?this.moved(_.cut_copy.copy_nodes,this.container.children("ul:eq(0)"),"inside",!1,!0):this.moved(_.cut_copy.copy_nodes,e.children("a:eq(0)"),"inside",!1,!0):"before"==s&&e.children("ul:eq(0)").children("li:nth-child("+(t+1)+")").size()?this.moved(_.cut_copy.copy_nodes,e.children("ul:eq(0)").children("li:nth-child("+(t+1)+")").children("a:eq(0)"),"before",!1,!0):"after"==s&&e.children("ul:eq(0)").children("li:nth-child("+t+")").size()?this.moved(_.cut_copy.copy_nodes,e.children("ul:eq(0)").children("li:nth-child("+t+")").children("a:eq(0)"),"after",!1,!0):e.children("ul:eq(0)").children("li:nth-child("+(t+1)+")").size()?this.moved(_.cut_copy.copy_nodes,e.children("ul:eq(0)").children("li:nth-child("+(t+1)+")").children("a:eq(0)"),"before",!1,!0):this.moved(_.cut_copy.copy_nodes,e.children("ul:eq(0)").children("li:last").children("a:eq(0)"),"after",!1,!0),_.cut_copy.copy_nodes=!1}return _.cut_copy.cut_nodes&&_.cut_copy.cut_nodes.size()?(n=!0,e.parents().andSelf().each(function(){if(-1!=_.cut_copy.cut_nodes.index(this))return n=!1}),n?!(!i&&!this.check_move(_.cut_copy.cut_nodes,e.children("a:eq(0)"),"inside"))&&(0==e.children("ul").size()||1==i&&0==e.children("ul").children("li").size()?i?this.moved(_.cut_copy.cut_nodes,this.container.children("ul:eq(0)"),"inside"):this.moved(_.cut_copy.cut_nodes,e.children("a:eq(0)"),"inside"):"before"==s&&e.children("ul:eq(0)").children("li:nth-child("+(t+1)+")").size()?this.moved(_.cut_copy.cut_nodes,e.children("ul:eq(0)").children("li:nth-child("+(t+1)+")").children("a:eq(0)"),"before"):"after"==s&&e.children("ul:eq(0)").children("li:nth-child("+t+")").size()?this.moved(_.cut_copy.cut_nodes,e.children("ul:eq(0)").children("li:nth-child("+t+")").children("a:eq(0)"),"after"):e.children("ul:eq(0)").children("li:nth-child("+(t+1)+")").size()?this.moved(_.cut_copy.cut_nodes,e.children("ul:eq(0)").children("li:nth-child("+(t+1)+")").children("a:eq(0)"),"before"):this.moved(_.cut_copy.cut_nodes,e.children("ul:eq(0)").children("li:last").children("a:eq(0)"),"after"),void(_.cut_copy.cut_nodes=!1)):this.error("Invalid paste")):void 0},search:function(t,i){var s=this;if((!t||this.srch&&t!=this.srch)&&(this.srch="",this.srch_opn=!1,this.container.find("a.search").removeClass("search")),this.srch=t)if(i=i||"contains",this.settings.data.async)if(this.srch_opn)if(this.srch_opn.length){if(this.srch_opn&&this.srch_opn.length){for(var e,n=!1,r=0;r<this.srch_opn.length;r++)0<this.get_node("#"+this.srch_opn[r]).size()&&(n=!0,e="#"+this.srch_opn[r],delete this.srch_opn[r],this.open_branch(e,!0,function(){s.search.apply(s,[t,i])}));n||(this.srch_opn=[],s.search.apply(s,[t,i]))}}else{this.srch_opn=!1;var a="a";this.settings.languages.length&&(a+="."+this.current_lang),this.callback("onsearch",[this.container.find(a+":"+i+"('"+t+"')"),this])}else{var l=f.extend({search:t},this.callback("beforedata",[!1,this]));f.ajax({type:this.settings.data.opts.method,url:this.settings.data.opts.url,data:l,dataType:"text",success:function(e){s.srch_opn=f.unique(e.split(",")),s.search.apply(s,[t,i])}})}else{a="a",l=(this.settings.languages.length&&(a+="."+this.current_lang),this.container.find(a+":"+i+"('"+t+"')"));l.parents("li.closed").each(function(){s.open_branch(this,!0)}),this.callback("onsearch",[l,this])}},add_sheet:_.add_sheet,destroy:function(){if(this.callback("ondestroy",[this]),this.container.unbind(".jstree"),f("#"+this.container.attr("id")).die("click.jstree").die("dblclick.jstree").die("mouseover.jstree").die("mouseout.jstree").die("mousedown.jstree"),this.container.removeClass("tree ui-widget ui-widget-content tree-default tree-"+this.settings.ui.theme_name).children("ul").removeClass("no_dots ltr locked").find("li").removeClass("leaf").removeClass("open").removeClass("closed").removeClass("last").children("a").removeClass("clicked hover search"),this.cntr==_.focused)for(var e in _.inst)if(e!=this.cntr&&e!=this.container.attr("id")){_.inst[e].focus();break}_.inst[this.cntr]=!1,_.inst[this.container.attr("id")]=!1,delete _.inst[this.cntr],delete _.inst[this.container.attr("id")],_.cntr--}}}f.jstree={datastores:{},plugins:{},defaults:{data:{async:!1,type:"html",opts:{method:"GET",url:!1}},selected:!1,opened:[],languages:[],ui:{dots:!0,animation:0,scroll_spd:4,theme_path:!1,theme_name:"default",selected_parent_close:"select_parent",selected_delete:"select_previous"},types:{default:{clickable:!0,renameable:!0,deletable:!0,creatable:!0,draggable:!0,max_children:-1,max_depth:-1,valid_children:"all",icon:{image:!1,position:!1}}},rules:{multiple:!1,multitree:"none",type_attr:"rel",createat:"bottom",drag_copy:"ctrl",drag_button:"left",use_max_children:!0,use_max_depth:!0,max_children:-1,max_depth:-1,valid_children:"all"},lang:{new_node:"New folder",loading:"Loading ..."},callback:{beforechange:function(e,t){return!0},beforeopen:function(e,t){return!0},beforeclose:function(e,t){return!0},beforemove:function(e,t,i,s){return!0},beforecreate:function(e,t,i,s){return!0},beforerename:function(e,t,i){return!0},beforedelete:function(e,t){return!0},beforedata:function(e,t){return{id:f(e).attr("id")||0}},ondata:function(e,t){return e},onparse:function(e,t){return e},onhover:function(e,t){},onselect:function(e,t){},ondeselect:function(e,t){},onchange:function(e,t){},onrename:function(e,t,i){},onmove:function(e,t,i,s,n){},oncopy:function(e,t,i,s,n){},oncreate:function(e,t,i,s,n){},ondelete:function(e,t,i){},onopen:function(e,t){},onopen_all:function(e){},onclose_all:function(e){},onclose:function(e,t){},error:function(e,t){},ondblclk:function(e,t){t.toggle_branch.call(t,e),t.select_branch.call(t,e)},onrgtclk:function(e,t,i){},onload:function(e){},oninit:function(e){},onfocus:function(e){},ondestroy:function(e){},onsearch:function(e,t){e.addClass("search")},ondrop:function(e,t,i,s){},check:function(e,t,i,s){return i},check_move:function(e,t,i,s){return!0}},plugins:{}},create:function(){return new _},focused:function(){return _.inst[_.focused]},reference:function(e){var t=f(e);return(t=t.size()?t:f("#"+e)).size()&&(t=(t.is(".tree")?t:t.parents(".tree:eq(0)")).attr("id"),_.inst[t])||null},rollback:function(e){for(var t in e){var i,s;e.hasOwnProperty(t)&&((s=!(i=_.inst[t]).locked)&&i.lock(!0),i.inp=!1,i.container.html(e[t].html).find(".dragged").removeClass("dragged").end().find(".hover").removeClass("hover"),e[t].selected&&(i.selected=f("#"+e[t].selected),i.selected_arr=[],i.container.find("a.clicked").each(function(){i.selected_arr.push(i.get_node(this))})),s&&i.lock(!1),delete s,delete i)}},drop_mode:function(e){e=f.extend(e,{show:!1,type:"default",str:"Foreign node"}),_.drag_drop.foreign=!0,_.drag_drop.isdown=!0,_.drag_drop.moving=!0,_.drag_drop.appended=!1,_.drag_drop.f_type=e.type,(_.drag_drop.f_data=e).show?(_.drag_drop.drag_help=f("<div id='jstree-dragged' class='tree tree-default'><ul><li class='last dragged foreign'><a href='#'><ins>&nbsp;</ins>"+e.str+"</a></li></ul></div>"),_.drag_drop.drag_node=_.drag_drop.drag_help.find("li:eq(0)")):(_.drag_drop.drag_help=!1,_.drag_drop.drag_node=!1),!1!==f.jstree.drag_start&&f.jstree.drag_start.call(null,!1)},drag_start:!1,drag:!1,drag_end:!1},f.fn.jstree=function(t){return this.each(function(){var e=f.extend({},t);_.inst&&_.inst[f(this).attr("id")]&&_.inst[f(this).attr("id")].destroy(),!1!==e&&(new _).init(this,e)})},_.cntr=0,_.inst={},_.themes=[],_.drag_drop={isdown:!1,drag_node:!1,drag_help:!1,dragged:!1,init_x:!1,init_y:!1,moving:!1,origin_tree:!1,marker:!1,move_type:!1,ref_node:!1,appended:!1,foreign:!1,droppable:[],open_time:!1,scroll_time:!1},_.mouseup=function(e){var t,i=_.drag_drop;if(i.open_time&&clearTimeout(i.open_time),i.scroll_time&&clearTimeout(i.scroll_time),i.moving&&!1!==f.jstree.drag_end&&f.jstree.drag_end.call(null,e,i),!1===i.foreign&&i.drag_node&&i.drag_node.size()&&(i.drag_help.remove(),i.move_type&&(t=_.inst[i.ref_node.parents(".tree:eq(0)").attr("id")])&&t.moved(i.dragged,i.ref_node,i.move_type,!1,"on"==i.origin_tree.settings.rules.drag_copy||"ctrl"==i.origin_tree.settings.rules.drag_copy&&e.ctrlKey),i.move_type=!1,i.ref_node=!1),!1!==i.foreign&&(i.drag_help&&i.drag_help.remove(),i.move_type&&(t=_.inst[i.ref_node.parents(".tree:eq(0)").attr("id")])&&t.callback("ondrop",[i.f_data,t.get_node(i.ref_node).get(0),i.move_type,t]),i.foreign=!1,i.move_type=!1,i.ref_node=!1),_.drag_drop.marker&&_.drag_drop.marker.hide(),i.dragged&&i.dragged.size()&&i.dragged.removeClass("dragged"),i.dragged=!1,i.drag_help=!1,i.drag_node=!1,i.f_type=!1,i.f_data=!1,i.init_x=!1,i.init_y=!1,i.moving=!1,i.appended=!1,i.origin_tree=!1,i.isdown)return i.isdown=!1,e.preventDefault(),e.stopPropagation(),!1},_.mousemove=function(e){var t=_.drag_drop,i=!1;if(t.isdown){if(!t.moving&&Math.abs(t.init_x-e.pageX)<5&&Math.abs(t.init_y-e.pageY)<5)e.preventDefault(),e.stopPropagation();else if(t.moving||(i=_.drag_drop.moving=!0),t.open_time&&clearTimeout(t.open_time),!1!==t.drag_help&&(t.appended||(!1!==t.foreign&&(t.origin_tree=f.jstree.focused()),f("body").append(t.drag_help),t.w=t.drag_help.width(),t.appended=!0),t.drag_help.css({left:e.pageX+5,top:e.pageY+15})),i&&!1!==f.jstree.drag_start&&f.jstree.drag_start.call(null,e,t),!1!==f.jstree.drag&&f.jstree.drag.call(null,e,t),"DIV"!=e.target.tagName||"jstree-marker"!=e.target.id){var s=f(e.target),i=(s=s.is("ins")?s.parent():s).is(".tree")?s:s.parents(".tree:eq(0)");if(0!=i.size()&&_.inst[i.attr("id")]){var n=_.inst[i.attr("id")],r=(n.off_height(),t.scroll_time&&clearTimeout(t.scroll_time),t.scroll_time=setTimeout(function(){n.scroll_check(e.pageX,e.pageY)},50),!1);i.scrollTop();if("A"==e.target.tagName||"INS"==e.target.tagName){if(s.is("#jstree-dragged"))return!1;n.get_node(e.target).hasClass("closed")&&(t.open_time=setTimeout(function(){n.open_branch(s)},500));var a,l={x:(a=s.offset()).left-1,y:e.pageY-a.top},o=[],o=l.y<n.li_height/3+1?["before","inside","after"]:l.y>2*n.li_height/3-1?["after","inside","before"]:l.y<n.li_height/2?["inside","before","after"]:["inside","after","before"],d=!1,c=0==t.foreign?t.origin_tree.container.find("li.dragged"):t.f_type;if(f.each(o,function(e,t){if(n.check_move(c,s,t))return r=t,!(d=!0)}),d){switch(r){case"before":l.y=a.top-2,_.drag_drop.marker.attr("class","marker");break;case"after":l.y=a.top-2+n.li_height,_.drag_drop.marker.attr("class","marker");break;case"inside":l.x-=2,l.y=a.top-2+n.li_height/2,_.drag_drop.marker.attr("class","marker_plus")}t.move_type=r,t.ref_node=f(e.target),!1!==t.drag_help&&t.drag_help.find(".forbidden").removeClass("forbidden"),_.drag_drop.marker.css({left:l.x,top:l.y}).show()}}(s.is(".tree")||s.is("ul"))&&0==s.find("li:eq(0)").size()?(a=s.offset(),t.move_type="inside",t.ref_node=i.children("ul:eq(0)"),!1!==t.drag_help&&t.drag_help.find(".forbidden").removeClass("forbidden"),_.drag_drop.marker.attr("class","marker_plus"),_.drag_drop.marker.css({left:a.left+10,top:a.top+15}).show()):("A"==e.target.tagName||"INS"==e.target.tagName)&&d||(!1!==t.drag_help&&t.drag_help.find("li:eq(0) ins").addClass("forbidden"),t.move_type=!1,t.ref_node=!1,_.drag_drop.marker.hide()),e.preventDefault(),e.stopPropagation()}else t.scroll_time&&clearTimeout(t.scroll_time),!1!==t.drag_help&&t.drag_help.find("li:eq(0) ins").addClass("forbidden"),t.move_type=!1,t.ref_node=!1,_.drag_drop.marker.hide()}return!1}return!0},f(function(){f(document).bind("mousemove.jstree",_.mousemove),f(document).bind("mouseup.jstree",_.mouseup)}),_.cut_copy={copy_nodes:!1,cut_nodes:!1},_.css=!1,_.get_css=function(e,t){e=e.toLowerCase();var s=_.css.cssRules||_.css.rules,n=0;do{if(s.length&&n>s.length+5)return!1;if(s[n].selectorText&&s[n].selectorText.toLowerCase()==e)return 1==t?(_.css.removeRule&&document.styleSheets[i].removeRule(n),_.css.deleteRule&&document.styleSheets[i].deleteRule(n),!0):s[n]}while(s[++n]);return!1},_.add_css=function(e){return!_.get_css(e)&&(_.css.insertRule?_.css.insertRule(e+" { }",0):_.css.addRule(e,null,0),_.get_css(e))},_.remove_css=function(e){return _.get_css(e,!0)},_.add_sheet=function(e){var t;if(e.str)return(t=document.createElement("style")).type="text/css",t.styleSheet?t.styleSheet.cssText=e.str:t.appendChild(document.createTextNode(e.str)),document.getElementsByTagName("head")[0].appendChild(t),t.sheet;if(e.url){if(!document.createStyleSheet)return(t=document.createElement("link")).rel="stylesheet",t.type="text/css",t.media="all",t.href=e.url,document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet;try{document.createStyleSheet(e.url)}catch(e){}}},f(function(){var e=navigator.userAgent.toLowerCase(),t=(e.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],i='/* TREE LAYOUT */ .tree ul { margin:0 0 0 5px; padding:0 0 0 0; list-style-type:none; } .tree li { display:block; min-height:18px; line-height:18px; padding:0 0 0 15px; margin:0 0 0 0; /* Background fix */ clear:both; } .tree li ul { display:none; } .tree li a, .tree li span { display:inline-block;line-height:16px;height:16px;color:black;white-space:nowrap;text-decoration:none;padding:1px 4px 1px 4px;margin:0; } .tree li a:focus { outline: none; } .tree li a input, .tree li span input { margin:0;padding:0 0;display:inline-block;height:12px !important;border:1px solid white;background:white;font-size:10px;font-family:Verdana; } .tree li a input:not([class="xxx"]), .tree li span input:not([class="xxx"]) { padding:1px 0; } /* FOR DOTS */ .tree .ltr li.last { float:left; } .tree > ul li.last { overflow:visible; } /* OPEN OR CLOSE */ .tree li.open ul { display:block; } .tree li.closed ul { display:none !important; } /* FOR DRAGGING */ #jstree-dragged { position:absolute; top:-10px; left:-10px; margin:0; padding:0; } #jstree-dragged ul ul ul { display:none; } #jstree-marker { padding:0; margin:0; line-height:5px; font-size:1px; overflow:hidden; height:5px; position:absolute; left:-45px; top:-30px; z-index:1000; background-color:transparent; background-repeat:no-repeat; display:none; } #jstree-marker.marker { width:45px; background-position:-32px top; } #jstree-marker.marker_plus { width:5px; background-position:right top; } /* BACKGROUND DOTS */ .tree li li { overflow:hidden; } .tree > .ltr > li { display:table; } /* ICONS */ .tree ul ins { display:inline-block; text-decoration:none; width:16px; height:16px; } .tree .ltr ins { margin:0 4px 0 0px; } ';/msie/.test(e)&&!/opera/.test(e)&&(6==parseInt(t)&&(i+='.tree li { height:18px; zoom:1; } .tree li li { overflow:visible; } .tree .ltr li.last { margin-top: expression( (this.previousSibling && /open/.test(this.previousSibling.className) ) ? "-2px" : "0"); } .marker { width:45px; background-position:-32px top; } .marker_plus { width:5px; background-position:right top; }'),7==parseInt(t))&&(i+='.tree li li { overflow:visible; } .tree .ltr li.last { margin-top: expression( (this.previousSibling && /open/.test(this.previousSibling.className) ) ? "-2px" : "0"); }'),/opera/.test(e)&&(i+='.tree > ul > li.last:after { content:"."; display: block; height:1px; clear:both; visibility:hidden; }'),/mozilla/.test(e)&&!/(compatible|webkit)/.test(e)&&0==t.indexOf("1.8")&&(i+=".tree .ltr li a { display:inline; float:left; } .tree li ul { clear:both; }"),_.css=_.add_sheet({str:i})})}(jQuery),function(c){c.extend(c.jstree.datastores,{html:function(){return{get:function(e,t,i){return(e&&c(e).size()?c("<div>").append(t.get_node(e).clone()):t.container.children("ul:eq(0)")).html()},parse:function(e,t,i,s){return s&&s.call(null,e),e},load:function(e,s,t,n){t.url?c.ajax({type:t.method,url:t.url,data:e,dataType:"html",success:function(e,t){n.call(null,e)},error:function(e,t,i){n.call(null,!1),s.error(i+" "+t)}}):n.call(null,t.static||s.container.children("ul:eq(0)").html())}}},json:function(){return{get:function(e,t,i){var s,n=this;if(e=e&&0!=c(e).size()?c(e):t.container.children("ul").children("li"),(i=i||{}).outer_attrib||(i.outer_attrib=["id","rel","class"]),i.inner_attrib||(i.inner_attrib=[]),1<e.size())return s=[],e.each(function(){s.push(n.get(this,t,i))}),s;if(0==e.size())return[];var r={attributes:{},data:{}};for(a in e.hasClass("open")&&(r.data.state="open"),e.hasClass("closed")&&(r.data.state="closed"),i.outer_attrib)i.outer_attrib.hasOwnProperty(a)&&(void 0!==(d="class"==i.outer_attrib[a]?e.attr(i.outer_attrib[a]).replace(/(^| )last( |$)/gi," ").replace(/(^| )(leaf|closed|open)( |$)/gi," "):e.attr(i.outer_attrib[a]))&&0<d.toString().replace(" ","").length&&(r.attributes[i.outer_attrib[a]]=d),delete d);if(t.settings.languages.length){for(var a in t.settings.languages)if(t.settings.languages.hasOwnProperty(a)){var l=e.children("a."+t.settings.languages[a]);if(i.force||i.inner_attrib.length||l.children("ins").get(0).style.backgroundImage.toString().length||l.children("ins").get(0).className.length){if(r.data[t.settings.languages[a]]={},r.data[t.settings.languages[a]].title=t.get_text(e,t.settings.languages[a]),l.children("ins").get(0).style.className.length&&(r.data[t.settings.languages[a]].icon=l.children("ins").get(0).style.className),l.children("ins").get(0).style.backgroundImage.length&&(r.data[t.settings.languages[a]].icon=l.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","")),i.inner_attrib.length)for(var o in r.data[t.settings.languages[a]].attributes={},i.inner_attrib)i.inner_attrib.hasOwnProperty(o)&&(void 0!==(d=l.attr(i.inner_attrib[o]))&&0<d.toString().replace(" ","").length&&(r.data[t.settings.languages[a]].attributes[i.inner_attrib[o]]=d),delete d)}else r.data[t.settings.languages[a]]=t.get_text(e,t.settings.languages[a])}}else{var d,l=e.children("a");if(r.data.title=t.get_text(e),l.children("ins").size()&&l.children("ins").get(0).className.length&&(r.data.icon=l.children("ins").get(0).className),l.children("ins").size()&&l.children("ins").get(0).style.backgroundImage.length&&(r.data.icon=l.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","")),i.inner_attrib.length)for(var o in r.data.attributes={},i.inner_attrib)i.inner_attrib.hasOwnProperty(o)&&(void 0!==(d=l.attr(i.inner_attrib[o]))&&0<d.toString().replace(" ","").length&&(r.data.attributes[i.inner_attrib[o]]=d),delete d)}return 0<e.children("ul").size()&&(r.children=[],e.children("ul").children("li").each(function(){r.children.push(n.get(this,t,i))})),r},parse:function(e,t,i,s){if("[object Array]"===Object.prototype.toString.apply(e))for(var n="",r=0;r<e.length;r++)"function"!=typeof e[r]&&(n+=this.parse(e[r],t,i));else{if(!e||!e.data)return s&&s.call(null,!1),"";var n="",a=(n+="<li ",!1);if(e.attributes)for(var r in e.attributes)e.attributes.hasOwnProperty(r)&&("class"==r?(n+=" class='"+e.attributes[r]+" ","closed"!=e.state&&"open"!=e.state||(n+=" "+e.state+" "),n+="' ",a=!0):n+=" "+r+"='"+e.attributes[r]+"' ");if(a||"closed"!=e.state&&"open"!=e.state||(n+=" class='"+e.state+"' "),n+=">",t.settings.languages.length)for(r=0;r<t.settings.languages.length;r++){if((o={href:"",style:""}).class=t.settings.languages[r],e.data[t.settings.languages[r]]&&"undefined"!=(typeof e.data[t.settings.languages[r]].attributes).toLowerCase())for(var l in e.data[t.settings.languages[r]].attributes)e.data[t.settings.languages[r]].attributes.hasOwnProperty(l)&&("style"==l||"class"==l?o[l]+=" "+e.data[t.settings.languages[r]].attributes[l]:o[l]=e.data[t.settings.languages[r]].attributes[l]);for(l in n+="<a",o)o.hasOwnProperty(l)&&(n+=" "+l+'="'+o[l]+'" ');n+=">",e.data[t.settings.languages[r]]&&e.data[t.settings.languages[r]].icon?n+="<ins "+(-1==e.data[t.settings.languages[r]].icon.indexOf("/")?" class='"+e.data[t.settings.languages[r]].icon+"' ":" style='background-image:url(\""+e.data[t.settings.languages[r]].icon+"\");' ")+">&nbsp;</ins>":n+="<ins>&nbsp;</ins>",n+=("undefined"!=(typeof e.data[t.settings.languages[r]].title).toLowerCase()?e.data[t.settings.languages[r]].title:e.data[t.settings.languages[r]])+"</a>"}else{var o={href:"",style:"",class:""};if("undefined"!=(typeof e.data.attributes).toLowerCase())for(var r in e.data.attributes)e.data.attributes.hasOwnProperty(r)&&("style"==r||"class"==r?o[r]+=" "+e.data.attributes[r]:o[r]=e.data.attributes[r]);for(r in n+="<a",o)o.hasOwnProperty(r)&&(n+=" "+r+'="'+o[r]+'" ');n+=">",e.data.icon?n+="<ins "+(-1==e.data.icon.indexOf("/")?" class='"+e.data.icon+"' ":" style='background-image:url(\""+e.data.icon+"\");' ")+">&nbsp;</ins>":n+="<ins>&nbsp;</ins>",n+=("undefined"!=(typeof e.data.title).toLowerCase()?e.data.title:e.data)+"</a>"}if(e.children&&e.children.length){n+="<ul>";for(r=0;r<e.children.length;r++)n+=this.parse(e.children[r],t,i);n+="</ul>"}n+="</li>"}return s&&s.call(null,n),n},load:function(e,s,t,n){t.static?n.call(null,t.static):c.ajax({type:t.method,url:t.url,data:e,dataType:"json",success:function(e,t){n.call(null,e)},error:function(e,t,i){n.call(null,!1),s.error(i+" "+t)}})}}}})}(jQuery),define("/Users/alecmitchell/Development/egg-cache/eea.jquery-11.1-py3.8.egg/eea/jquery/plugins/jstree/jquery.tree.js",function(){}),jQuery.fn.selectToUISlider=function(e){var t,i,s,n=jQuery(this),r=jQuery.extend({labels:3,tooltip:!0,tooltipSrc:"text",labelSrc:"value",sliderOptions:null},e),a=(t=[],n.each(function(){t.push("handle_"+jQuery(this).attr("id"))}),t),l=(i=[],n.eq(0).find("option").each(function(){i.push({value:jQuery(this).attr("value"),text:jQuery(this).text()})}),i),o=0<n.eq(0).find("optgroup").size()?(s=[],n.eq(0).find("optgroup").each(function(e){s[e]={},s[e].label=jQuery(this).attr("label"),s[e].options=[],jQuery(this).find("option").each(function(){s[e].options.push({text:jQuery(this).text(),value:jQuery(this).attr("value")})})}),s):null;function d(e){return"text"==r.tooltipSrc?l[e].text:l[e].value}var c,h,u,p={step:1,min:0,orientation:"horizontal",max:l.length-1,range:1<n.length,slide:function(e,t){var i=jQuery(t.handle),s=d(t.value),s=(i.attr("aria-valuetext",s).attr("aria-valuenow",t.value).find(".ui-slider-tooltip .ttContent").text(s),jQuery("#"+i.attr("id").split("handle_")[1]));s.find("option").not(t.value).prop("selected",!1),s.find("option").eq(t.value).prop("selected",!0)},values:(c=[],n.each(function(){c.push(jQuery(this).get(0).selectedIndex)}),c)},g=(r.sliderOptions=e?jQuery.extend(p,e.sliderOptions):p,n.bind("change keyup click",function(){var e=jQuery(this).get(0).selectedIndex,t=jQuery("#handle_"+jQuery(this).attr("id")),i=t.data("handleNum");t.parents(".ui-slider:eq(0)").slider("values",i,e)}),jQuery("<div></div>"));function f(e){return(e/(l.length-1)*100).toFixed(2)+"%"}n.each(function(e){var t="",i=jQuery("label[for="+jQuery(this).attr("id")+"]"),s=0<i.size()?"Slider control for "+i.text():"",i=i.attr("id")||i.attr("id","label_"+a[e]).attr("id");!1===r.tooltip&&(t=' style="display: none;"'),jQuery('<a href="#" tabindex="0" id="'+a[e]+'" class="ui-slider-handle" role="slider" aria-labelledby="'+i+'" aria-valuemin="'+r.sliderOptions.min+'" aria-valuemax="'+r.sliderOptions.max+'" aria-valuenow="'+r.sliderOptions.values[e]+'" aria-valuetext="'+d(r.sliderOptions.values[e])+'" ><span class="screenReaderContext">'+s+'</span><span class="ui-slider-tooltip ui-widget-content ui-corner-all"'+t+'><span class="ttContent"></span><span class="ui-tooltip-pointer-down ui-widget-content"><span class="ui-tooltip-pointer-down-inner"></span></span></span></a>').data("handleNum",e).appendTo(g)}),o?(h=0,u=g.append('<dl class="ui-slider-scale ui-helper-reset" role="presentation"></dl>').find(".ui-slider-scale:eq(0)"),jQuery(o).each(function(e){u.append('<dt style="width: '+(100/o.length).toFixed(2)+"%; left:"+(e/(o.length-1)*100).toFixed(2)+'%"><span>'+this.label+"</span></dt>");var i=this.options;jQuery(this.options).each(function(e){var t=h==l.length-1||0===h?'style="display: none;"':"",e="text"==r.labelSrc?i[e].text:i[e].value;u.append('<dd style="left:'+f(h)+'"><span class="ui-slider-label">'+e+'</span><span class="ui-slider-tic ui-widget-content"'+t+"></span></dd>"),h++})})):(u=g.append('<ol class="ui-slider-scale ui-helper-reset" role="presentation"></ol>').find(".ui-slider-scale:eq(0)"),jQuery(l).each(function(e){var t=e==l.length-1||0===e?'style="display: none;"':"",i="text"==r.labelSrc?this.text:this.value;u.append('<li style="left:'+f(e)+'"><span class="ui-slider-label">'+i+'</span><span class="ui-slider-tic ui-widget-content"'+t+"></span></li>")})),1<r.labels&&g.find(".ui-slider-scale li:last span.ui-slider-label, .ui-slider-scale dd:last span.ui-slider-label").addClass("ui-slider-label-show");for(var _=Math.max(1,Math.round(l.length/r.labels)),m=0;m<l.length;m+=_)l.length-m>_&&g.find(".ui-slider-scale li:eq("+m+") span.ui-slider-label, .ui-slider-scale dd:eq("+m+") span.ui-slider-label").addClass("ui-slider-label-show");g.find(".ui-slider-scale dt").each(function(e){jQuery(this).css({left:(100/o.length*e).toFixed(2)+"%"})}),g.insertAfter(jQuery(this).eq(this.length-1)).slider(r.sliderOptions).attr("role","application").find(".ui-slider-label").each(function(){jQuery(this).css("marginLeft",-jQuery(this).width()/2)}),g.find(".ui-tooltip-pointer-down-inner").each(function(){var e=jQuery(".ui-tooltip-pointer-down-inner").css("borderTopWidth"),t=jQuery(this).parents(".ui-slider-tooltip").css("backgroundColor");jQuery(this).css("border-top",e+" solid "+t)});e=g.slider("values");return e.constructor==Array?jQuery(e).each(function(e){g.find(".ui-slider-tooltip .ttContent").eq(e).text(d(this))}):g.find(".ui-slider-tooltip .ttContent").eq(0).text(d(e)),this},define("/Users/alecmitchell/Development/egg-cache/eea.jquery-11.1-py3.8.egg/eea/jquery/plugins/select2uislider/selectToUISlider.jQuery.js",function(){}),function(E){var x,q={},j={},w=(E.tagcloud={id:"TagCloud",version:"0.5.0",defaults:{height:null,type:"cloud",sizemax:20,sizemin:10,colormax:"00F",colormin:"B4D2FF",seed:null,power:.5}},E.fn.extend({tagcloud:function(e){switch(null===(x=E.extend({},E.tagcloud.defaults,e)).seed&&(x.seed=Math.ceil(45309714203*Math.random())),x.type){case"sphere":case"cloud":q={position:"relative"},j={position:"absolute",display:"block"};break;case"list":q={height:"auto"},j={position:"static",display:"inline"}}return w.setSeed(x.seed+123456),this.each(function(e,t){for(var t=E(t),i=t.find(">li"),s=i.length,n=t.width(),r=null===x.height?.004*n*s:x.height,a=(t.css({width:n,height:r,listStyle:"none",margin:0,padding:0}),t.css(q),-2147483647),l=2147483648,o=-1,d=0;d<s;d++)a<(f=-1==(g=E(i[d])).attr("value")?o++:g.attr("value"))&&(a=f),f<l&&(l=f),o=f;for(var c=a-l,h=new Array,d=0;d<s;d++)h[d]=d;for(var u,p=h.length;p;d=parseInt(w.rand(0,1e3)/1e3*p),u=h[--p],h[p]=h[d],h[d]=u);o=-1;for(d=0;d<s;d++){var g,f,_,m,v,y,o=f=-1==(g=E(i[d])).attr("value")?o++:g.attr("value"),b=x.sizemin+(C=(f-l)/c)*(x.sizemax-x.sizemin),C=function(e,t,i){for(var s=O(e),n=O(t),r=[],a=0;a<3;a++)r.push(s[a]+Math.floor(i*(n[a]-s[a])));return function(e){for(var t="",i=0;i<3;i++){var s=e[i].toString(16);1==s.length&&(s="0"+s),t+=s}return t}(r)}(x.colormin,x.colormax,C),b=(g.css({fontSize:b,position:"absolute",color:"#"+C,margin:0,padding:0}).children().css({color:"#"+C}),g.width()),C=g.height(),k={};for(y in"list"!=x.type&&(b="cloud"==x.type?(v=w.rand(0,n-b),h[d]*(r/s)-C/2):(_=Math.pow(d/s,x.power),m=2.399963*(d+Math.PI/2),v=n/2-b/2+.5*n*_*Math.sin(m),r/2-C/2+.5*r*_*Math.cos(m)),k.left=v,k.top=b),j)k[y]=j[y];g.css(k)}})}}),new function(){this.seed=23145678901,this.A=48271,this.M=2147483647,this.Q=this.M/this.A,this.R=this.M%this.A,this.oneOverM=1/this.M});function O(e){for(var t=3==e.length,i=[],s=0;s<3;s++){var n=e.substring(s*(t?1:2),(s+1)*(t?1:2));i.push(parseInt(t?n+n:n,16))}return i}w.setSeed=function(e){this.seed=e},w.next=function(){var e=this.seed/this.Q,t=this.seed%this.Q,t=this.A*t-this.R*e;return this.seed=t+(0<t?0:this.M),this.seed*this.oneOverM},w.rand=function(e,t){return Math.floor((t-e+1)*this.next()+e)},E.fn.TagCloud=E.fn.Tagcloud=E.fn.tagcloud}(jQuery),define("/Users/alecmitchell/Development/egg-cache/eea.jquery-11.1-py3.8.egg/eea/jquery/plugins/tagcloud/jquery.tagcloud.js",function(){});
//# sourceMappingURL=faceted-navigation-jquery.min.js.map