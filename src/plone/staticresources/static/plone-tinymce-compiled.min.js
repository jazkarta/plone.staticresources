!function(e){define("tinymce",[],function(){return function(){return function(){"use strict";function i(e){return function(){return e}}function s(){return P}var v={noop:function(){for(var e=0;e<arguments.length;e++)e,0},noarg:function(t){return function(){for(var e=0;e<arguments.length;e++)e,0;return t()}},compose:function(t,n){return function(){for(var e=0;e<arguments.length;e++)e,0;return t(n.apply(null,arguments))}},constant:i,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(o){for(var e=1;e<arguments.length;e++)e-1,0;for(var i=new Array(arguments.length-1),t=1;t<arguments.length;t++)i[t-1]=arguments[t];return function(){for(var e=0;e<arguments.length;e++)e,0;for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var r=i.concat(t);return o.apply(null,r)}},not:function(t){return function(){for(var e=0;e<arguments.length;e++)e,0;return!t.apply(null,arguments)}},die:function(e){return function(){throw new Error(e)}},apply:function(e){return e()},call:function(e){e()},never:i(!1),always:i(!0)},A=v.never,D=v.always,P=(e={fold:function(e,t){return e()},is:A,isSome:A,isNone:D,getOr:B,getOrThunk:I,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:B,orThunk:I,map:s,ap:s,each:function(){},bind:s,flatten:s,exists:A,forall:D,filter:s,equals:O,equals_:O,toArray:function(){return[]},toString:v.constant("none()")},Object.freeze&&Object.freeze(e),e);function O(e){return e.isNone()}function I(e){return e()}function B(e){return e}function M(n){function e(){return n}function t(){return o}function r(e){return e(n)}var o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:D,isNone:A,getOr:e,getOrThunk:e,getOrDie:e,or:t,orThunk:t,map:function(e){return M(e(n))},ap:function(e){return e.fold(s,function(e){return M(e(n))})},each:function(e){e(n)},bind:r,flatten:e,exists:r,forall:r,filter:function(e){return e(n)?o:P},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(A,function(e){return t(n,e)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}function L(n){return function(e){return(null===(e=e)?"null":"object"==(t=typeof e)&&Array.prototype.isPrototypeOf(e)?"array":"object"==t&&String.prototype.isPrototypeOf(e)?"string":t)===n;var t}}function F(e,t){return-1<le(e,t)}function H(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o,e)}return r}function W(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n,e)}function $(e,t){for(var n=e.length-1;0<=n;n--)t(e[n],n,e)}function j(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n}function q(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n,e))return m.some(n);return m.none()}function V(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);ue.apply(t,e[n])}return t}function Z(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n,e))return!1;return!0}function ee(e,t){for(var n=null!=t?t:fe,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n}function te(e,t){for(var n,r,o=void 0!==t?t:fe,i=0;i<e.length;++i)n=o,r=e[i],void 0!==n[r]&&null!==n[r]||(n[r]={}),o=n[r];return o}function ne(){return pe.getOrDie("URL")}function re(e){return"matchMedia"in window&&matchMedia(e).matches}var oe,ie,ae,se,m={some:M,none:s,from:function(e){return null==e?P:M(e)}},l={isString:L("string"),isObject:L("object"),isArray:L("array"),isNull:L("null"),isBoolean:L("boolean"),isUndefined:L("undefined"),isFunction:L("function"),isNumber:L("number")},le=void 0===(oe=Array.prototype.indexOf)?function(e,t){return ce(e,t)}:function(e,t){return oe.call(e,t)},ce=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},ue=Array.prototype.push,de=Array.prototype.slice,e=l.isFunction(Array.from)?Array.from:function(e){return de.call(e)},b={map:H,each:W,eachr:$,partition:function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{pass:n,fail:r}},filter:j,groupBy:function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var s=e[i],l=t(s);l!==n&&(r.push(o),o=[]),n=l,o.push(s)}return 0!==o.length&&r.push(o),r},indexOf:function(e,t){e=le(e,t);return-1===e?m.none():m.some(e)},foldr:function(e,t,n){return $(e,function(e){n=t(n,e)}),n},foldl:function(e,t,n){return W(e,function(e){n=t(n,e)}),n},find:function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n,e))return m.some(o)}return m.none()},findIndex:q,flatten:V,bind:function(e,t){e=H(e,t);return V(e)},forall:Z,exists:function(e,t){return q(e,t).isSome()},contains:F,equal:function(e,n){return e.length===n.length&&Z(e,function(e,t){return e===n[t]})},reverse:function(e){e=de.call(e,0);return e.reverse(),e},chunk:function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},difference:function(e,t){return j(e,function(e){return!F(t,e)})},mapToObject:function(e,t){for(var n={},r=0,o=e.length;r<o;r++){var i=e[r];n[String(i)]=t(i,r)}return n},pure:function(e){return[e]},sort:function(e,t){e=de.call(e,0);return e.sort(t),e},range:function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},head:function(e){return 0===e.length?m.none():m.some(e[0])},last:function(e){return 0===e.length?m.none():m.some(e[e.length-1])},from:e},fe="undefined"!=typeof window?window:Function("return this;")(),me={path:ee,resolve:function(e,t){e=e.split(".");return ee(e,t)},forge:te,namespace:function(e,t){e=e.split(".");return te(e,t)}},pe={getOrDie:function(e,t){t=me.resolve(e,t);if(null==t)throw e+" not available on this browser";return t}},he={createObjectURL:function(e){return ne().createObjectURL(e)},revokeObjectURL:function(e){ne().revokeObjectURL(e)}},e=navigator,t=e.userAgent,ge=/Android/.test(t),n=/WebKit/.test(t),r=!n&&/MSIE/gi.test(t)&&/Explorer/gi.test(e.appName),e=(r=r&&/MSIE (\w+)\./.exec(t)[1],e=-1!==t.indexOf("Trident/")&&(-1!==t.indexOf("rv:")||-1!==e.appName.indexOf("Netscape"))&&11,wr=-1!==t.indexOf("Edge/")&&!r&&!e&&12,r=r||e||wr,!n&&!e&&/Gecko/.test(t)),ve=-1!==t.indexOf("Mac"),ye=/(iPad|iPhone)/.test(t),be="FormData"in window&&"FileReader"in window&&"URL"in window&&!!he.createObjectURL,we=re("only screen and (max-device-width: 480px)")&&(ge||ye),xe=re("only screen and (min-width: 800px)")&&(ge||ye),Ce=-1!==t.indexOf("Windows Phone"),K={opera:!1,webkit:n=wr?!1:n,ie:r,gecko:e,mac:ve,iOS:ye,android:ge,contentEditable:!ye||be||534<=parseInt(t.match(/AppleWebKit\/(\d*)/)[1],10),transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==r,range:window.getSelection&&"Range"in window,documentMode:r&&!wr?document.documentMode||7:10,fileApi:be,ceFalse:!1===r||8<r,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===r||11<r,desktop:!we&&!xe,windowsPhone:Ce},ke=window.Promise||(ie=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},ae=Te.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)},Te.prototype.catch=function(e){return this.then(null,e)},Te.prototype.then=function(n,r){var o=this;return new Te(function(e,t){Ee.call(o,new Ae(n,r,e,t))})},Te.all=function(){var s=Array.prototype.slice.call(1===arguments.length&&ie(arguments[0])?arguments[0]:arguments);return new Te(function(o,i){if(0===s.length)return o([]);var a=s.length;for(var e=0;e<s.length;e++)!function t(n,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if("function"==typeof r)return void r.call(e,function(e){t(n,e)},i)}s[n]=e,0==--a&&o(s)}catch(e){i(e)}}(e,s[e])})},Te.resolve=function(t){return t&&"object"==typeof t&&t.constructor===Te?t:new Te(function(e){e(t)})},Te.reject=function(n){return new Te(function(e,t){t(n)})},Te.race=function(o){return new Te(function(e,t){for(var n=0,r=o.length;n<r;n++)o[n].then(e,t)})},Te);function Se(e,t){return function(){e.apply(t,arguments)}}function Te(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],De(e,Se(Ne,this),Se(Re,this))}function Ee(n){var r=this;null===this._state?this._deferreds.push(n):ae(function(){var e,t=r._state?n.onFulfilled:n.onRejected;if(null===t)(r._state?n.resolve:n.reject)(r._value);else{try{e=t(r._value)}catch(e){return void n.reject(e)}n.resolve(e)}})}function Ne(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void De(Se(t,e),Se(Ne,this),Se(Re,this))}this._state=!0,this._value=e,_e.call(this)}catch(e){Re.call(this,e)}}function Re(e){this._state=!1,this._value=e,_e.call(this)}function _e(){for(var e=0,t=this._deferreds.length;e<t;e++)Ee.call(this,this._deferreds[e]);this._deferreds=null}function Ae(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function De(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){r||(r=!0,n(e))}}function Pe(e,t){for(var n=window.requestAnimationFrame,r=["ms","moz","webkit"],o=0;o<r.length&&!n;o++)n=window[r[o]+"RequestAnimationFrame"];(n=n||function(e){window.setTimeout(e,0)})(e,t)}function Oe(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)}function Ie(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)}function Be(t,n){var r,e=function(){var e=arguments;clearTimeout(r),r=Oe(function(){t.apply(this,e)},n)};return e.stop=function(){clearTimeout(r)},e}function Me(e,t){var n,r,o=t||{};for(n in e)rt[n]||(o[n]=e[n]);return o.target||(o.target=o.srcElement||document),K.experimentalShadowDom&&(o.target=ct(e,o.target)),e&&nt.test(e.type)&&void 0===e.pageX&&void 0!==e.clientX&&(r=(t=o.target.ownerDocument||document).documentElement,t=t.body,o.pageX=e.clientX+(r&&r.scrollLeft||t&&t.scrollLeft||0)-(r&&r.clientLeft||t&&t.clientLeft||0),o.pageY=e.clientY+(r&&r.scrollTop||t&&t.scrollTop||0)-(r&&r.clientTop||t&&t.clientTop||0)),o.preventDefault=function(){o.isDefaultPrevented=at,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},o.stopPropagation=function(){o.isPropagationStopped=at,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},!(o.stopImmediatePropagation=function(){o.isImmediatePropagationStopped=at,o.stopPropagation()})===ot(o)&&(o.isDefaultPrevented=it,o.isPropagationStopped=it,o.isImmediatePropagationStopped=it),void 0===o.metaKey&&(o.metaKey=!1),o}function Le(){function m(e,t){var n,r,o,i=(t=h[t])&&t[e.type];if(i)for(n=0,r=i.length;n<r;n++)if((o=i[n])&&!1===o.func.call(o.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}var p=this,h={},g="mce-data-"+(+new Date).toString(32),v="onmouseenter"in document.documentElement,y="onfocusin"in document.documentElement,b={mouseenter:"mouseover",mouseleave:"mouseout"},w=1;p.domLoaded=!1,p.events=h,p.bind=function(e,t,n,r){function o(e){m(Me(e||f.event),i)}var i,a,s,l,c,u,d,f=window;if(e&&3!==e.nodeType&&8!==e.nodeType){for(e[g]?i=e[g]:(i=w++,e[g]=i,h[i]={}),r=r||e,s=(t=t.split(" ")).length;s--;)u=o,c=d=!1,"DOMContentLoaded"===(l=t[s])&&(l="ready"),p.domLoaded&&"ready"===l&&"complete"===e.readyState?n.call(r,Me({type:l})):(v||(c=b[l])&&(u=function(e){var t=e.currentTarget,n=e.relatedTarget;if(n&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=Me(e||f.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,m(e,i))}),y||"focusin"!==l&&"focusout"!==l||(d=!0,c="focusin"===l?"focus":"blur",u=function(e){(e=Me(e||f.event)).type="focus"===e.type?"focusin":"focusout",m(e,i)}),(a=h[i][l])?"ready"===l&&p.domLoaded?n({type:l}):a.push({func:n,scope:r}):(h[i][l]=a=[{func:n,scope:r}],a.fakeName=c,a.capture=d,a.nativeHandler=u,"ready"===l?function(e,t,n){var r,o,i,a,s=e.document,l={type:"ready"};n.domLoaded?t(l):(r=function(){return"complete"===s.readyState||"interactive"===s.readyState&&s.body},o=function(){n.domLoaded||(n.domLoaded=!0,t(l))},i=function(){r()&&(lt(s,"readystatechange",i),o())},a=function(){try{s.documentElement.doScroll("left")}catch(e){return void tt.setTimeout(a)}o()},!s.addEventListener||K.ie&&K.ie<11?(st(s,"readystatechange",i),s.documentElement.doScroll&&e.self===e.top&&a()):r()?o():st(e,"DOMContentLoaded",o),st(e,"load",o))}(e,u,p):st(e,c||l,u,d)));return e=a=0,n}},p.unbind=function(t,e,n){var r,o,i,a,s,l,c,u,d;if(t&&3!==t.nodeType&&8!==t.nodeType&&(r=t[g])){if(s=h[r],e){for(o=(e=e.split(" ")).length;o--;)if(d=s[a=e[o]]){if(n)for(i=d.length;i--;)d[i].func===n&&(l=d.nativeHandler,c=d.fakeName,u=d.capture,(d=d.slice(0,i).concat(d.slice(i+1))).nativeHandler=l,d.fakeName=c,d.capture=u,s[a]=d);n&&0!==d.length||(delete s[a],lt(t,d.fakeName||a,d.nativeHandler,d.capture))}}else{for(a in s)d=s[a],lt(t,d.fakeName||a,d.nativeHandler,d.capture);s={}}for(a in s)return p;delete h[r];try{delete t[g]}catch(e){t[g]=null}}return p},p.fire=function(e,t,n){var r;if(e&&3!==e.nodeType&&8!==e.nodeType)for((n=Me(null,n)).type=t,n.target=e;(r=e[g])&&m(n,r),(e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow)&&!n.isPropagationStopped(););return p},p.clean=function(e){var t,n,r=p.unbind;if(e&&3!==e.nodeType&&8!==e.nodeType&&(e[g]&&r(e),e=e.getElementsByTagName?e:e.document)&&e.getElementsByTagName)for(r(e),t=(n=e.getElementsByTagName("*")).length;t--;)(e=n[t])[g]&&r(e);return p},p.destroy=function(){h={}},p.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}}function Fe(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(65536+r):String.fromCharCode(r>>10|55296,1023&r|56320)}var He,d,w,ze,Ue,We,$e,je,qe,Ve,Ke,Ye,Ge,Xe,Je,Qe,Ze,et,tt={requestAnimationFrame:function(e,t){se?se.then(e):se=new ke(function(e){t=t||document.body,Pe(e,t)}).then(e)},setTimeout:Oe,setInterval:Ie,setEditorTimeout:function(e,t,n){return Oe(function(){e.removed||t()},n)},setEditorInterval:function(e,t,n){var r=Ie(function(){e.removed?clearInterval(r):t()},n);return r},debounce:Be,throttle:Be,clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}},nt=/^(?:mouse|contextmenu)|click/,rt={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},ot=function(e){return e.isDefaultPrevented===at||e.isDefaultPrevented===it},it=function(){return!1},at=function(){return!0},st=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},lt=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},ct=function(e,t){var n=e.path;return n&&0<n.length&&(t=n[0]),t=e.composedPath&&(n=e.composedPath())&&0<n.length?n[0]:t},x=((Le.Event=new Le).bind(window,"ready",function(){}),"sizzle"+-new Date),ut=window.document,dt=0,ft=0,mt=Ft(),pt=Ft(),ht=Ft(),gt=function(e,t){return e===t&&(Ke=!0),0},vt="undefined",yt={}.hasOwnProperty,n=[],bt=n.pop,wt=n.push,xt=n.push,Ct=n.slice,kt=n.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},o="[\\x20\\t\\r\\n\\f]",e="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ve="\\["+o+"*("+e+")(?:"+o+"*([*^$|!~]?=)"+o+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+e+"))|)"+o+"*\\]",ge=":("+e+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ve+")*)|.*)\\)|)",St=new RegExp("^"+o+"+|((?:^|[^\\\\])(?:\\\\.)*)"+o+"+$","g"),Tt=new RegExp("^"+o+"*,"+o+"*"),Et=new RegExp("^"+o+"*([>+~]|"+o+")"+o+"*"),Nt=new RegExp("="+o+"*([^\\]'\"]*?)"+o+"*\\]","g"),Rt=new RegExp(ge),_t=new RegExp("^"+e+"$"),At={ID:new RegExp("^#("+e+")"),CLASS:new RegExp("^\\.("+e+")"),TAG:new RegExp("^("+e+"|[*])"),ATTR:new RegExp("^"+ve),PSEUDO:new RegExp("^"+ge),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+o+"*(even|odd|(([+-]|)(\\d*)n|)"+o+"*(?:([+-]|)"+o+"*(\\d+)|))"+o+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+o+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+o+"*((?:-\\d)?\\d*)"+o+"*\\)|)(?=[^-]|$)","i")},Dt=/^(?:input|select|textarea|button)$/i,Pt=/^h\d$/i,Ot=/^[^{]+\{\s*\[native \w/,It=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Bt=/[+~]/,Mt=/'|\\/g,Lt=new RegExp("\\\\([\\da-f]{1,6}"+o+"?|("+o+")|.)","ig");try{xt.apply(n=Ct.call(ut.childNodes),ut.childNodes),n[ut.childNodes.length].nodeType}catch(e){xt={apply:n.length?function(e,t){wt.apply(e,Ct.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function Y(e,t,n,r){var o,i,a,s,l,c,u;if((t?t.ownerDocument||t:ut)!==Ge&&Ye(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(o=(t=t||Ge).nodeType)&&9!==o)return[];if(Je&&!r){if(c=It.exec(e))if(u=c[1]){if(9===o){if(!(s=t.getElementById(u))||!s.parentNode)return n;if(s.id===u)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(u))&&et(t,s)&&s.id===u)return n.push(s),n}else{if(c[2])return xt.apply(n,t.getElementsByTagName(e)),n;if((u=c[3])&&d.getElementsByClassName)return xt.apply(n,t.getElementsByClassName(u)),n}if(d.qsa&&(!Qe||!Qe.test(e))){if(l=s=x,c=t,u=9===o&&e,1===o&&"object"!==t.nodeName.toLowerCase()){for(a=We(e),(s=t.getAttribute("id"))?l=s.replace(Mt,"\\$&"):t.setAttribute("id",l),l="[id='"+l+"'] ",i=a.length;i--;)a[i]=l+jt(a[i]);c=Bt.test(e)&&Wt(t.parentNode)||t,u=a.join(",")}if(u)try{return xt.apply(n,c.querySelectorAll(u)),n}catch(e){}finally{s||t.removeAttribute("id")}}}return je(e.replace(St,"$1"),t,n,r)}function Ft(){var n=[];function r(e,t){return n.push(e+" ")>w.cacheLength&&delete r[n.shift()],r[e+" "]=t}return r}function Ht(e){return e[x]=!0,e}function zt(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function Ut(a){return Ht(function(i){return i=+i,Ht(function(e,t){for(var n,r=a([],e.length,i),o=r.length;o--;)e[n=r[o]]&&(e[n]=!(t[n]=e[n]))})})}function Wt(e){return e&&typeof e.getElementsByTagName!==vt&&e}for(He in d=Y.support={},Ue=Y.isXML=function(e){e=e&&(e.ownerDocument||e).documentElement;return!!e&&"HTML"!==e.nodeName},Ye=Y.setDocument=function(e){var l=e?e.ownerDocument||e:ut,e=l.defaultView;return l!==Ge&&9===l.nodeType&&l.documentElement?(Xe=(Ge=l).documentElement,Je=!Ue(l),e&&e!==function(e){try{return e.top}catch(e){}return null}(e)&&(e.addEventListener?e.addEventListener("unload",function(){Ye()},!1):e.attachEvent&&e.attachEvent("onunload",function(){Ye()})),d.attributes=!0,d.getElementsByTagName=!0,d.getElementsByClassName=Ot.test(l.getElementsByClassName),d.getById=!0,w.find.ID=function(e,t){if(typeof t.getElementById!==vt&&Je)return(t=t.getElementById(e))&&t.parentNode?[t]:[]},w.filter.ID=function(e){var t=e.replace(Lt,Fe);return function(e){return e.getAttribute("id")===t}},w.find.TAG=d.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==vt)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],o=0,i=t.getElementsByTagName(e);if("*"!==e)return i;for(;n=i[o++];)1===n.nodeType&&r.push(n);return r},w.find.CLASS=d.getElementsByClassName&&function(e,t){if(Je)return t.getElementsByClassName(e)},Ze=[],Qe=[],d.disconnectedMatch=!0,Qe=Qe.length&&new RegExp(Qe.join("|")),Ze=Ze.length&&new RegExp(Ze.join("|")),e=Ot.test(Xe.compareDocumentPosition),et=e||Ot.test(Xe.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(n.contains?n.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},gt=e?function(e,t){var n;return e===t?(Ke=!0,0):(n=!e.compareDocumentPosition-!t.compareDocumentPosition)||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e===l||e.ownerDocument===ut&&et(ut,e)?-1:t===l||t.ownerDocument===ut&&et(ut,t)?1:Ve?kt.call(Ve,e)-kt.call(Ve,t):0:4&n?-1:1)}:function(e,t){if(e===t)return Ke=!0,0;var n,r=0,o=e.parentNode,i=t.parentNode,a=[e],s=[t];if(!o||!i)return e===l?-1:t===l?1:o?-1:i?1:Ve?kt.call(Ve,e)-kt.call(Ve,t):0;if(o===i)return zt(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?zt(a[r],s[r]):a[r]===ut?-1:s[r]===ut?1:0},l):Ge},Y.matches=function(e,t){return Y(e,null,null,t)},Y.matchesSelector=function(e,t){if((e.ownerDocument||e)!==Ge&&Ye(e),t=t.replace(Nt,"='$1']"),d.matchesSelector&&Je&&(!Ze||!Ze.test(t))&&(!Qe||!Qe.test(t)))try{var n=(void 0).call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<Y(t,Ge,null,[e]).length},Y.contains=function(e,t){return(e.ownerDocument||e)!==Ge&&Ye(e),et(e,t)},Y.attr=function(e,t){(e.ownerDocument||e)!==Ge&&Ye(e);var n=w.attrHandle[t.toLowerCase()],n=n&&yt.call(w.attrHandle,t.toLowerCase())?n(e,t,!Je):void 0;return void 0!==n?n:d.attributes||!Je?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},Y.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},Y.uniqueSort=function(e){var t,n=[],r=0,o=0;if(Ke=!d.detectDuplicates,Ve=!d.sortStable&&e.slice(0),e.sort(gt),Ke){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return Ve=null,e},ze=Y.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=ze(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=ze(t);return n},(w=Y.selectors={cacheLength:50,createPseudo:Ht,match:At,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Lt,Fe),e[3]=(e[3]||e[4]||e[5]||"").replace(Lt,Fe),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Y.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Y.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return At.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&Rt.test(n)&&(t=(t=We(n,!0))&&n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Lt,Fe).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=mt[e+" "];return t||(t=new RegExp("(^|"+o+")"+e+"("+o+"|$)"))&&mt(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==vt&&e.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(e){e=Y.attr(e,t);return null==e?"!="===n:!n||(e+="","="===n?e===r:"!="===n?e!==r:"^="===n?r&&0===e.indexOf(r):"*="===n?r&&-1<e.indexOf(r):"$="===n?r&&e.slice(-r.length)===r:"~="===n?-1<(" "+e+" ").indexOf(r):"|="===n&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(m,e,t,p,h){var g="nth"!==m.slice(0,3),v="last"!==m.slice(-4),y="of-type"===e;return 1===p&&0===h?function(e){return!!e.parentNode}:function(e,t,n){var r,o,i,a,s,l,c=g!=v?"nextSibling":"previousSibling",u=e.parentNode,d=y&&e.nodeName.toLowerCase(),f=!n&&!y;if(u){if(g){for(;c;){for(i=e;i=i[c];)if(y?i.nodeName.toLowerCase()===d:1===i.nodeType)return!1;l=c="only"===m&&!l&&"nextSibling"}return!0}if(l=[v?u.firstChild:u.lastChild],v&&f){for(s=(r=(o=u[x]||(u[x]={}))[m]||[])[0]===dt&&r[1],a=r[0]===dt&&r[2],i=s&&u.childNodes[s];i=++s&&i&&i[c]||(a=s=0,l.pop());)if(1===i.nodeType&&++a&&i===e){o[m]=[dt,s,a];break}}else if(f&&(r=(e[x]||(e[x]={}))[m])&&r[0]===dt)a=r[1];else for(;(i=++s&&i&&i[c]||(a=s=0,l.pop()))&&((y?i.nodeName.toLowerCase()!==d:1!==i.nodeType)||!++a||(f&&((i[x]||(i[x]={}))[m]=[dt,a]),i!==e)););return(a-=h)===p||a%p==0&&0<=a/p}}},PSEUDO:function(e,i){var t,a=w.pseudos[e]||w.setFilters[e.toLowerCase()]||Y.error("unsupported pseudo: "+e);return a[x]?a(i):1<a.length?(t=[e,e,"",i],w.setFilters.hasOwnProperty(e.toLowerCase())?Ht(function(e,t){for(var n,r=a(e,i),o=r.length;o--;)e[n=kt.call(e,r[o])]=!(t[n]=r[o])}):function(e){return a(e,0,t)}):a}},pseudos:{not:Ht(function(e){var r=[],o=[],s=$e(e.replace(St,"$1"));return s[x]?Ht(function(e,t,n,r){for(var o,i=s(e,null,r,[]),a=e.length;a--;)(o=i[a])&&(e[a]=!(t[a]=o))}):function(e,t,n){return r[0]=e,s(r,null,n,o),!o.pop()}}),has:Ht(function(t){return function(e){return 0<Y(t,e).length}}),contains:Ht(function(t){return t=t.replace(Lt,Fe),function(e){return-1<(e.textContent||e.innerText||ze(e)).indexOf(t)}}),lang:Ht(function(n){return _t.test(n||"")||Y.error("unsupported lang: "+n),n=n.replace(Lt,Fe).toLowerCase(),function(e){var t;do{if(t=Je?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===Xe},focus:function(e){return e===Ge.activeElement&&(!Ge.hasFocus||Ge.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return Pt.test(e.nodeName)},input:function(e){return Dt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:Ut(function(){return[0]}),last:Ut(function(e,t){return[t-1]}),eq:Ut(function(e,t,n){return[n<0?n+t:n]}),even:Ut(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:Ut(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:Ut(function(e,t,n){for(var r=n<0?n+t:n;0<=--r;)e.push(r);return e}),gt:Ut(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=w.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[He]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(He);for(He in{submit:!0,reset:!0})w.pseudos[He]=function(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}(He);function $t(){}function jt(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function qt(a,e,t){var s=e.dir,l=t&&"parentNode"===s,c=ft++;return e.first?function(e,t,n){for(;e=e[s];)if(1===e.nodeType||l)return a(e,t,n)}:function(e,t,n){var r,o,i=[dt,c];if(n){for(;e=e[s];)if((1===e.nodeType||l)&&a(e,t,n))return!0}else for(;e=e[s];)if(1===e.nodeType||l){if((r=(o=e[x]||(e[x]={}))[s])&&r[0]===dt&&r[1]===c)return i[2]=r[2];if((o[s]=i)[2]=a(e,t,n))return!0}}}function Vt(o){return 1<o.length?function(e,t,n){for(var r=o.length;r--;)if(!o[r](e,t,n))return!1;return!0}:o[0]}function Kt(e,t,n,r,o){for(var i,a=[],s=0,l=e.length,c=null!=t;s<l;s++)!(i=e[s])||n&&!n(i,r,o)||(a.push(i),c&&t.push(s));return a}function Yt(m,p,h,g,v,e){return g&&!g[x]&&(g=Yt(g)),v&&!v[x]&&(v=Yt(v,e)),Ht(function(e,t,n,r){var o,i,a,s=[],l=[],c=t.length,u=e||function(e,t,n){for(var r=0,o=t.length;r<o;r++)Y(e,t[r],n);return n}(p||"*",n.nodeType?[n]:n,[]),d=!m||!e&&p?u:Kt(u,s,m,n,r),f=h?v||(e?m:c||g)?[]:t:d;if(h&&h(d,f,n,r),g)for(o=Kt(f,l),g(o,[],n,r),i=o.length;i--;)(a=o[i])&&(f[l[i]]=!(d[l[i]]=a));if(e){if(v||m){if(v){for(o=[],i=f.length;i--;)(a=f[i])&&o.push(d[i]=a);v(null,f=[],o,r)}for(i=f.length;i--;)(a=f[i])&&-1<(o=v?kt.call(e,a):s[i])&&(e[o]=!(t[o]=a))}}else f=Kt(f===t?f.splice(c,f.length):f),v?v(null,t,f,r):xt.apply(t,f)})}function Gt(g,v){function e(e,t,n,r,o){var i,a,s,l=0,c="0",u=e&&[],d=[],f=qe,m=e||b&&w.find.TAG("*",o),p=dt+=null==f?1:Math.random()||.1,h=m.length;for(o&&(qe=t!==Ge&&t);c!==h&&null!=(i=m[c]);c++){if(b&&i){for(a=0;s=g[a++];)if(s(i,t,n)){r.push(i);break}o&&(dt=p)}y&&((i=!s&&i)&&l--,e)&&u.push(i)}if(l+=c,y&&c!==l){for(a=0;s=v[a++];)s(u,d,t,n);if(e){if(0<l)for(;c--;)u[c]||d[c]||(d[c]=bt.call(r));d=Kt(d)}xt.apply(r,d),o&&!e&&0<d.length&&1<l+v.length&&Y.uniqueSort(r)}return o&&(dt=p,qe=f),u}var y=0<v.length,b=0<g.length;return y?Ht(e):e}$t.prototype=w.filters=w.pseudos,w.setFilters=new $t,We=Y.tokenize=function(e,t){var n,r,o,i,a,s,l,c=pt[e+" "];if(c)return t?0:c.slice(0);for(a=e,s=[],l=w.preFilter;a;){for(i in n&&!(r=Tt.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(o=[])),n=!1,(r=Et.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(St," ")}),a=a.slice(n.length)),w.filter)!(r=At[i].exec(a))||l[i]&&!(r=l[i](r))||(n=r.shift(),o.push({value:n,type:i,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?Y.error(e):pt(e,s).slice(0)},$e=Y.compile=function(e,t){var n,r=[],o=[],i=ht[e+" "];if(!i){for(n=(t=t||We(e)).length;n--;)((i=function e(t){for(var r,n,o,i=t.length,a=w.relative[t[0].type],s=a||w.relative[" "],l=a?1:0,c=qt(function(e){return e===r},s,!0),u=qt(function(e){return-1<kt.call(r,e)},s,!0),d=[function(e,t,n){return!a&&(n||t!==qe)||((r=t).nodeType?c:u)(e,t,n)}];l<i;l++)if(n=w.relative[t[l].type])d=[qt(Vt(d),n)];else{if((n=w.filter[t[l].type].apply(null,t[l].matches))[x]){for(o=++l;o<i&&!w.relative[t[o].type];o++);return Yt(1<l&&Vt(d),1<l&&jt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(St,"$1"),n,l<o&&e(t.slice(l,o)),o<i&&e(t=t.slice(o)),o<i&&jt(t))}d.push(n)}return Vt(d)}(t[n]))[x]?r:o).push(i);(i=ht(e,Gt(o,r))).selector=e}return i},je=Y.select=function(e,t,n,r){var o,i,a,s,l,c="function"==typeof e&&e,u=!r&&We(e=c.selector||e);if(n=n||[],1===u.length){if(2<(i=u[0]=u[0].slice(0)).length&&"ID"===(a=i[0]).type&&d.getById&&9===t.nodeType&&Je&&w.relative[i[1].type]){if(!(t=(w.find.ID(a.matches[0].replace(Lt,Fe),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(o=At.needsContext.test(e)?0:i.length;o--&&(a=i[o],!w.relative[s=a.type]);)if((l=w.find[s])&&(r=l(a.matches[0].replace(Lt,Fe),Bt.test(i[0].type)&&Wt(t.parentNode)||t))){if(i.splice(o,1),e=r.length&&jt(i))break;return xt.apply(n,r),n}}return(c||$e(e,u))(r,t,!Je,n,Bt.test(e)&&Wt(t.parentNode)||t),n},d.sortStable=x.split("").sort(gt).join("")===x,d.detectDuplicates=!!Ke,Ye(),d.sortDetached=!0;function Xt(e,t,n){var r,o;if(!e)return 0;if(n=n||e,void 0!==e.length){for(r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1}function Jt(e,t,n){for(var r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return r;return-1}function Qt(e){return null==e?"":(""+e).replace(wn,"")}function Zt(e,t){return t?!("array"!==t||!y.isArray(e))||typeof e===t:void 0!==e}function en(e,n,r,o){o=o||this,e&&(r&&(e=e[r]),y.each(e,function(e,t){if(!1===n.call(o,e,t,r))return!1;en(e,n,r,o)}))}function tn(e){return void 0!==e}function nn(e){return"string"==typeof e}function rn(e,t){var n,r=(t=t||xn).createElement("div"),o=t.createDocumentFragment();for(r.innerHTML=e;n=r.firstChild;)o.appendChild(n);return o}function on(e,t,n,r){var o;if(nn(t))t=rn(t,dn(e[0]));else if(t.length&&!t.nodeType){if(t=G.makeArray(t),r)for(o=t.length-1;0<=o;o--)on(e,t[o],n,r);else for(o=0;o<t.length;o++)on(e,t[o],n,r);return e}if(t.nodeType)for(o=e.length;o--;)n.call(e[o],t);return e}function an(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function sn(e,t,n){var r,o;return t=G(t)[0],e.each(function(){var e=this;n&&r===e.parentNode||(r=e.parentNode,o=t.cloneNode(!1),e.parentNode.insertBefore(o,e)),o.appendChild(e)}),e}function G(e,t){return new G.fn.init(e,t)}function ln(e){return null==e?"":(""+e).replace(On,"")}function cn(e,t){var n,r,o,i;if(e)if(void 0===(n=e.length)){for(r in e)if(e.hasOwnProperty(r)&&(i=e[r],!1===t.call(i,r,i)))break}else for(o=0;o<n&&(i=e[o],!1!==t.call(i,o,i));o++);return e}function un(e,n){var r=[];return cn(e,function(e,t){n(t,e)&&r.push(t)}),r}function dn(e){return e?9===e.nodeType?e:e.ownerDocument:xn}function fn(e,t,n){var r=[],o=e[t];for("string"!=typeof n&&n instanceof G&&(n=n[0]);o&&9!==o.nodeType;){if(void 0!==n){if(o===n)break;if("string"==typeof n&&G(o).is(n))break}1===o.nodeType&&r.push(o),o=o[t]}return r}function mn(e,t,n,r){var o=[];for(r instanceof G&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==r){if(e===r)break;if("string"==typeof r&&G(e).is(r))break}o.push(e)}return o}function pn(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null}function hn(n,r,e){cn(e,function(e,t){n[e]=n[e]||{},n[e][r]=t})}function gn(){return Bn(0,0)}function vn(e){var t=e.current;return{current:t,version:e.version,isEdge:jn(Fn,t),isChrome:jn(Hn,t),isIE:jn(zn,t),isOpera:jn(Un,t),isFirefox:jn(Wn,t),isSafari:jn($n,t)}}function yn(e){var t=e.current;return{current:t,version:e.version,isWindows:er(Kn,t),isiOS:er(Yn,t),isAndroid:er(Gn,t),isOSX:er(Jn,t),isLinux:er(Xn,t),isSolaris:er(Qn,t),isFreeBSD:er(Zn,t)}}var bn=Array.isArray,y={isArray:bn,toArray:function(e){var t,n,r=e;if(!bn(e))for(r=[],t=0,n=e.length;t<n;t++)r[t]=e[t];return r},each:Xt,map:function(n,r){var o=[];return Xt(n,function(e,t){o.push(r(e,t,n))}),o},filter:function(n,r){var o=[];return Xt(n,function(e,t){r&&!r(e,t,n)||o.push(e)}),o},indexOf:function(e,t){var n,r;if(e)for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},reduce:function(e,t,n,r){var o=0;for(arguments.length<3&&(n=e[0]);o<e.length;o++)n=t.call(r,n,e[o],o);return n},findIndex:Jt,find:function(e,t,n){t=Jt(e,t,n);if(-1!==t)return e[t]},last:function(e){return e[e.length-1]}},wn=/^\s*|\s*$/g,X={trim:Qt,isArray:y.isArray,is:Zt,toArray:y.toArray,makeMap:function(e,t,n){var r;for(t=t||",",n=n||{},r=(e="string"==typeof(e=e||[])?e.split(t):e).length;r--;)n[e[r]]={};return n},each:y.each,map:y.map,grep:y.filter,inArray:y.indexOf,hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},extend:function(e,t){for(var n,r=2;r<arguments.length;r++)r-2,0;for(var o,i=arguments,a=1,s=i.length;a<s;a++)for(n in t=i[a])t.hasOwnProperty(n)&&void 0!==(o=t[n])&&(e[n]=o);return e},create:function(e,t,n){var r,o,i,a,s,l=this,c=0;e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),i=e[3].match(/(^|\.)(\w+)$/i)[2],(o=l.createNS(e[3].replace(/\.\w+$/,""),n))[i]||("static"===e[2]?(o[i]=t,this.onCreate&&this.onCreate(e[2],e[3],o[i])):(t[i]||(t[i]=function(){},c=1),o[i]=t[i],l.extend(o[i].prototype,t),e[5]&&(r=l.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=o[i],o[i]=c?function(){return r[a].apply(this,arguments)}:function(){return this.parent=r[a],s.apply(this,arguments)},o[i].prototype[i]=o[i],l.each(r,function(e,t){o[i].prototype[t]=r[t]}),l.each(t,function(e,t){r[t]?o[i].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!==i&&(o[i].prototype[t]=e)})),l.each(t.static,function(e,t){o[i][t]=e})))},walk:en,createNS:function(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)t[r=e[n]]||(t[r]={}),t=t[r];return t},resolve:function(e,t){var n,r;for(t=t||window,n=0,r=(e=e.split(".")).length;n<r&&(t=t[e[n]]);n++);return t},explode:function(e,t){return!e||Zt(e,"array")?e:y.map(e.split(t||","),Qt)},_addCacheSuffix:function(e){var t=K.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},xn=document,Cn=Array.prototype.push,kn=Array.prototype.slice,Sn=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Tn=Le.Event,En=X.makeMap("children,contents,next,prev"),Nn=X.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),Rn=X.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),_n={for:"htmlFor",class:"className",readonly:"readOnly"},An={float:"cssFloat"},Dn={},Pn={},On=/^\s*|\s*$/g,ye=(G.fn=G.prototype={constructor:G,selector:"",context:null,length:0,init:function(e,t){var n,r,o=this;if(e)if(e.nodeType)o.context=o[0]=e,o.length=1;else{if(t&&t.nodeType)o.context=t;else{if(t)return G(e).attr(t);o.context=t=document}if(nn(e)){if(!(n="<"===(o.selector=e).charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:Sn.exec(e)))return G(t).find(e);if(n[1])for(r=rn(e,dn(t)).firstChild;r;)Cn.call(o,r),r=r.nextSibling;else{if(!(r=dn(t).getElementById(n[2])))return o;if(r.id!==n[2])return o.find(e);o.length=1,o[0]=r}}else this.add(e,!1)}return o},toArray:function(){return X.toArray(this)},add:function(e,t){var n,r,o=this;if(nn(e))return o.add(G(e));if(!1!==t)for(n=G.unique(o.toArray().concat(G.makeArray(e))),o.length=n.length,r=0;r<n.length;r++)o[r]=n[r];else Cn.apply(o,G.makeArray(e));return o},attr:function(t,n){var e,r=this;if("object"==typeof t)cn(t,function(e,t){r.attr(e,t)});else{if(!tn(n)){if(r[0]&&1===r[0].nodeType){if((e=Dn[t])&&e.get)return e.get(r[0],t);if(Rn[t])return r.prop(t)?t:void 0;null===(n=r[0].getAttribute(t,2))&&(n=void 0)}return n}this.each(function(){var e;1===this.nodeType&&((e=Dn[t])&&e.set?e.set(this,n):null===n?this.removeAttribute(t,2):this.setAttribute(t,n,2))})}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=_n[e]||e))cn(e,function(e,t){n.prop(e,t)});else{if(!tn(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1===this.nodeType&&(this[e]=t)})}return n},css:function(t,n){function e(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})}function r(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})}var o,i,a=this;if("object"==typeof t)cn(t,function(e,t){a.css(e,t)});else if(tn(n))t=e(t),"number"!=typeof n||Nn[t]||(n=n.toString()+"px"),a.each(function(){var e=this.style;if((i=Pn[t])&&i.set)i.set(this,n);else{try{this.style[An[t]||t]=n}catch(e){}null!==n&&""!==n||(e.removeProperty?e.removeProperty(r(t)):e.removeAttribute(t))}});else{if(o=a[0],(i=Pn[t])&&i.get)return i.get(o);if(!o.ownerDocument.defaultView)return o.currentStyle?o.currentStyle[e(t)]:"";try{return o.ownerDocument.defaultView.getComputedStyle(o,null).getPropertyValue(r(t))}catch(e){return}}return a},remove:function(){for(var e,t=this.length;t--;)e=this[t],Tn.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this.length;t--;)for(e=this[t];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(t){var n,r=this;if(tn(t)){n=r.length;try{for(;n--;)r[n].innerHTML=t}catch(e){G(r[n]).empty().append(t)}return r}return r[0]?r[0].innerHTML:""},text:function(e){var t,n=this;if(tn(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return on(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return on(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?on(this,arguments,function(e){this.parentNode.insertBefore(e,this)}):this},after:function(){return this[0]&&this[0].parentNode?on(this,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):this},appendTo:function(e){return G(e).append(this),this},prependTo:function(e){return G(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return sn(this,e)},wrapAll:function(e){return sn(this,e,!0)},wrapInner:function(e){return this.each(function(){G(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){G(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),G(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(o,i){var e=this;return"string"==typeof o&&(-1!==o.indexOf(" ")?cn(o.split(" "),function(){e.toggleClass(this,i)}):e.each(function(e,t){var n,r=an(t,o);r!==i&&(n=t.className,r?t.className=ln((" "+n+" ").replace(" "+o+" "," ")):t.className+=n?" "+o:o)})),e},hasClass:function(e){return an(this[0],e)},each:function(e){return cn(this,e)},on:function(e,t){return this.each(function(){Tn.bind(this,e,t)})},off:function(e,t){return this.each(function(){Tn.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?Tn.fire(this,e.type,e):Tn.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new G(kn.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){for(var t=[],n=0,r=this.length;n<r;n++)G.find(e,this[n],t);return G(t)},filter:function(n){return G("function"==typeof n?un(this.toArray(),function(e,t){return n(t,e)}):G.filter(n,this.toArray()))},closest:function(n){var r=[];return n instanceof G&&(n=n[0]),this.each(function(e,t){for(;t;){if("string"==typeof n&&G(t).is(n)){r.push(t);break}if(t===n){r.push(t);break}t=t.parentNode}}),G(r)},offset:function(e){var t,n,r=0,o=0;return e?this.css(e):((e=this[0])&&(n=(t=e.ownerDocument).documentElement,e.getBoundingClientRect)&&(r=(e=e.getBoundingClientRect()).left+(n.scrollLeft||t.body.scrollLeft)-n.clientLeft,o=e.top+(n.scrollTop||t.body.scrollTop)-n.clientTop),{left:r,top:o})},push:Cn,sort:[].sort,splice:[].splice},X.extend(G,{extend:X.extend,makeArray:function(e){var t;return(t=e)&&t===t.window||e.nodeType?[e]:X.toArray(e)},inArray:function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},isArray:X.isArray,each:cn,trim:ln,grep:un,find:Y,expr:Y.selectors,unique:Y.uniqueSort,text:Y.getText,contains:Y.contains,filter:function(e,t,n){var r=t.length;for(n&&(e=":not("+e+")");r--;)1!==t[r].nodeType&&t.splice(r,1);return t=1===t.length?G.find.matchesSelector(t[0],e)?[t[0]]:[]:G.find.matches(e,t)}}),cn({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return fn(e,"parentNode")},next:function(e){return pn(e,"nextSibling",1)},prev:function(e){return pn(e,"previousSibling",1)},children:function(e){return mn(e.firstChild,"nextSibling",1)},contents:function(e){return X.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,r){G.fn[e]=function(t){var n=[];return this.each(function(){var e=r.call(n,this,t,n);e&&(G.isArray(e)?n.push.apply(n,e):n.push(e))}),1<this.length&&(En[e]||(n=G.unique(n)),0===e.indexOf("parents"))&&(n=n.reverse()),n=G(n),t?n.filter(t):n}}),cn({parentsUntil:function(e,t){return fn(e,"parentNode",t)},nextUntil:function(e,t){return mn(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return mn(e,"previousSibling",1,t).slice(1)}},function(r,o){G.fn[r]=function(t,e){var n=[];return this.each(function(){var e=o.call(n,this,t,n);e&&(G.isArray(e)?n.push.apply(n,e):n.push(e))}),1<this.length&&(n=G.unique(n),0!==r.indexOf("parents")&&"prevUntil"!==r||(n=n.reverse())),n=G(n),e?n.filter(e):n}}),G.fn.is=function(e){return!!e&&0<this.filter(e).length},G.fn.init.prototype=G.fn,G.overrideDefaults=function(n){function r(e,t){return o=o||n(),0===arguments.length&&(e=o.element),t=t||o.context,new r.fn.init(e,t)}var o;return G.extend(r,this),r},K.ie&&K.ie<8&&(hn(Dn,"get",{maxlength:function(e){e=e.maxLength;if(2147483647!==e)return e},size:function(e){e=e.size;if(20!==e)return e},class:function(e){return e.className},style:function(e){e=e.style.cssText;if(0!==e.length)return e}}),hn(Dn,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),K.ie&&K.ie<9&&(An.float="styleFloat",hn(Pn,"set",{opacity:function(e,t){e=e.style;null===t||""===t?e.removeAttribute("filter"):(e.zoom=1,e.filter="alpha(opacity="+100*t+")")}})),G.attrHooks=Dn,G.cssHooks=Pn,function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(null,arguments)),t}}),In=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}},Bn=function(e,t){return{major:e,minor:t}},Mn=function(e,t){var n,r,t=String(t).toLowerCase();return 0===e.length?gn():(r=In(e=e,n=t))?Bn((e=function(e){return Number(n.replace(r,"$"+e))})(1),e(2)):{major:0,minor:0}},Ln=gn,Fn="Edge",Hn="Chrome",zn="IE",Un="Opera",Wn="Firefox",$n="Safari",jn=function(e,t){return function(){return t===e}},qn=function(){return vn({current:void 0,version:Ln()})},Vn=vn,Kn=(v.constant(Fn),v.constant(Hn),v.constant(zn),v.constant(Un),v.constant(Wn),v.constant($n),"Windows"),Yn="iOS",Gn="Android",Xn="Linux",Jn="OSX",Qn="Solaris",Zn="FreeBSD",er=function(e,t){return function(){return t===e}},tr=function(){return yn({current:void 0,version:Ln()})},nr=yn;v.constant(Kn),v.constant(Yn),v.constant(Gn),v.constant(Xn),v.constant(Jn),v.constant(Qn),v.constant(Zn);function rr(e,t){var n=String(t).toLowerCase();return b.find(e,function(e){return e.search(n)})}function or(t){return function(e){return yr(e,t)}}function ir(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:v.constant(e)}}function ar(e){return e.dom().nodeName.toLowerCase()}function sr(e){return e.dom().nodeType}function lr(t){return function(e){return sr(e)===t}}function cr(n,r){var o={};return Er(n,function(e,t){e=r(e,t,n);o[e.k]=e.v}),o}function ur(e,n){var r=[];return Er(e,function(e,t){r.push(n(e,t))}),r}function dr(e){return ur(e,function(e){return e})}function fr(e,t,n){if(!(l.isString(n)||l.isBoolean(n)||l.isNumber(n)))throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")}function mr(e,t,n){if(!l.isString(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Or.isSupported(e)&&e.style.setProperty(t,n)}function pr(e,t){Or.isSupported(e)&&e.style.removeProperty(t)}function hr(e,t){return Or.isSupported(e)?e.style.getPropertyValue(t):""}var gr=function(e,n){return rr(e,n).map(function(e){var t=Mn(e.versionRegexes,n);return{current:e.name,version:t}})},vr=function(e,n){return rr(e,n).map(function(e){var t=Mn(e.versionRegexes,n);return{current:e.name,version:t}})},yr=function(e,t){return-1!==e.indexOf(t)},br=function(e){return e.replace(/^\s+|\s+$/g,"")},t=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,wr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return yr(e,"edge/")&&yr(e,"chrome")&&yr(e,"safari")&&yr(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,t],search:function(e){return yr(e,"chrome")&&!yr(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return yr(e,"msie")||yr(e,"trident")}},{name:"Opera",versionRegexes:[t,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:or("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:or("firefox")},{name:"Safari",versionRegexes:[t,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(yr(e,"safari")||yr(e,"mobile/"))&&yr(e,"applewebkit")}}],be=[{name:"Windows",search:or("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return yr(e,"iphone")||yr(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:or("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:or("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:or("linux"),versionRegexes:[]},{name:"Solaris",search:or("sunos"),versionRegexes:[]},{name:"FreeBSD",search:or("freebsd"),versionRegexes:[]}],xr={browsers:v.constant(wr),oses:v.constant(be)},Cr=function(e){var t,n,r,o,i,a,s,l=xr.browsers(),c=xr.oses(),l=gr(l,e).fold(qn,Vn),c=vr(c,e).fold(tr,nr),e=(n=l,e=e,r=(t=c).isiOS()&&!0===/ipad/i.test(e),o=t.isiOS()&&!r,i=t.isAndroid()&&3===t.version.major,a=t.isAndroid()&&4===t.version.major,i=r||i||a&&!0===/mobile/i.test(e),s=(a=t.isiOS()||t.isAndroid())&&!i,n=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(e),{isiPad:v.constant(r),isiPhone:v.constant(o),isTablet:v.constant(i),isPhone:v.constant(s),isTouch:v.constant(a),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:v.constant(n)});return{browser:l,os:c,deviceType:e}},kr={detect:ye(function(){var e=navigator.userAgent;return Cr(e)})},z={fromHtml:function(e,t){t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",e),"HTML must have a single root node";return ir(t.childNodes[0])},fromTag:function(e,t){t=(t||document).createElement(e);return ir(t)},fromText:function(e,t){t=(t||document).createTextNode(e);return ir(t)},fromDom:ir,fromPoint:function(e,t,n){return m.from(e.dom().elementFromPoint(t,n)).map(ir)}},Sr=8,r=9,we=1,xe=lr(we),Ce=lr(3),e=lr(r),c={name:ar,type:sr,value:function(e){return e.dom().nodeValue},isElement:xe,isText:Ce,isDocument:e,isComment:function(e){return sr(e)===Sr||"#comment"===ar(e)}},Tr=void 0===(ve=Object.keys)?function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n}:ve,Er=function(e,t){for(var n=Tr(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i,e)}},Nr={bifilter:function(e,n){var r={},o={};return Er(e,function(e,t){(n(e,t)?r:o)[t]=e}),{t:r,f:o}},each:Er,map:function(e,r){return cr(e,function(e,t,n){return{k:t,v:r(e,t,n)}})},mapToArray:ur,tupleMap:cr,find:function(e,t){for(var n=Tr(e),r=0,o=n.length;r<o;r++){var i=n[r],a=e[i];if(t(a,i,e))return m.some(a)}return m.none()},keys:Tr,values:dr,size:function(e){return dr(e).length}},Rr=function(e,t,n){fr(e.dom(),t,n)},_r=function(e,t){e=e.dom().getAttribute(t);return null===e?void 0:e},Ar=function(e,t){e=e.dom();return!(!e||!e.hasAttribute)&&e.hasAttribute(t)},C={clone:function(e){return b.foldl(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},set:Rr,setAll:function(e,t){var n=e.dom();Nr.each(t,function(e,t){fr(n,t,e)})},get:_r,has:Ar,remove:function(e,t){e.dom().removeAttribute(t)},hasNone:function(e){e=e.dom().attributes;return null==e||0===e.length},transfer:function(r,o,e){c.isElement(r)&&c.isElement(o)&&b.each(e,function(e){var t,n;n=o,Ar(t=r,e=e)&&!Ar(n,e)&&Rr(n,e,_r(t,e))})}},ge=ye(function(){return Dr(z.fromDom(document))}),Dr=function(e){e=e.dom().body;if(null==e)throw"Body is not available yet";return z.fromDom(e)},Pr={body:ge,getBody:Dr,inBody:function(e){e=c.isText(e)?e.dom().parentNode:e.dom();return null!=e&&e.ownerDocument.body.contains(e)}},Or={isSupported:function(e){return void 0!==e.style}},Ir=function(e,t,n){e=e.dom();mr(e,t,n)},Br=function(e,t){e=e.dom(),e=hr(e,t);return m.from(e).filter(function(e){return 0<e.length})},Mr={copy:function(e,t){e=e.dom(),t=t.dom();Or.isSupported(e)&&Or.isSupported(t)&&(t.style.cssText=e.style.cssText)},set:Ir,preserve:function(e,t){var n=C.get(e,"style"),t=t(e);return(void 0===n?C.remove:C.set)(e,"style",n),t},setAll:function(e,t){var n=e.dom();Nr.each(t,function(e,t){mr(n,t,e)})},setOptions:function(e,t){var n=e.dom();Nr.each(t,function(e,t){e.fold(function(){pr(n,t)},function(e){mr(n,t,e)})})},remove:function(e,t){var n=e.dom();pr(n,t),C.has(e,"style")&&""===br(C.get(e,"style"))&&C.remove(e,"style")},get:function(e,t){var n=e.dom(),r=window.getComputedStyle(n).getPropertyValue(t),e=""!==r||Pr.inBody(e)?r:hr(n,t);return null===e?void 0:e},getRaw:Br,getAllRaw:function(e){var t={},n=e.dom();if(Or.isSupported(n))for(var r=0;r<n.style.length;r++){var o=n.style.item(r);t[o]=n.style[o]}return t},isValidValue:function(e,t,n){e=z.fromTag(e);return Ir(e,t,n),Br(e,t).isSome()},reflow:function(e){return e.dom().offsetWidth},transfer:function(r,o,e){c.isElement(r)&&c.isElement(o)&&b.each(e,function(e){var t,n;t=o,Br(r,n=e).each(function(e){Br(t,n).isNone()&&Ir(t,n,e)})})}};function Lr(e){return e.slice(0).sort()}var Fr=function(e,t){throw new Error("All required keys ("+Lr(e).join(", ")+") were not specified. Specified keys were: "+Lr(t).join(", ")+".")},Hr=function(e){throw new Error("Unsupported keys for object: "+Lr(e).join(", "))},zr=function(t,e){if(!l.isArray(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");b.each(e,function(e){if(!l.isString(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")})},Ur=function(e){var n=Lr(e);b.find(n,function(e,t){return t<n.length-1&&e===n[t+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+n.join(", ")+"].")})};function Wr(){return pe.getOrDie("Node")}function $r(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}function jr(e){return e.nodeType!==io&&e.nodeType!==ao||0===e.childElementCount}function qr(e,t){return e.dom()===t.dom()}function Vr(e){return z.fromDom(e.dom().ownerDocument)}function Kr(e){return e=e.dom(),m.from(e.parentNode).map(z.fromDom)}function Yr(e){return e=e.dom(),m.from(e.previousSibling).map(z.fromDom)}function Gr(e){return e=e.dom(),m.from(e.nextSibling).map(z.fromDom)}function Xr(e){return e=e.dom(),b.map(e.childNodes,z.fromDom)}function Jr(e,t){return e=e.dom().childNodes,m.from(e[t]).map(z.fromDom)}function Qr(e){function r(e){t()?i(e):o.push(e)}function t(){return n.isSome()}var n=m.none(),o=[],i=function(t){n.each(function(e){setTimeout(function(){t(e)},0)})};return e(function(e){n=m.some(e),e=o,b.each(e,i),o=[]}),{get:r,map:function(n){return Qr(function(t){r(function(e){t(n(e))})})},isReady:t}}function Zr(t){function e(e){t(po(e))}return{map:function(n){return Zr(function(t){e(function(e){e=n(e);t(e)})})},bind:function(n){return Zr(function(t){e(function(e){n(e).get(t)})})},anonBind:function(n){return Zr(function(t){e(function(e){n.get(t)})})},toLazy:function(){return mo(e)},get:e}}function eo(e){return go(e,ho.nu)}function to(n){return{is:function(e){return n===e},isValue:v.always,isError:v.never,getOr:v.constant(n),getOrThunk:v.constant(n),getOrDie:v.constant(n),or:function(e){return to(n)},orThunk:function(e){return to(n)},fold:function(e,t){return t(n)},map:function(e){return to(e(n))},each:function(e){e(n)},bind:function(e){return e(n)},exists:function(e){return e(n)},forall:function(e){return e(n)},toOption:function(){return m.some(n)}}}function no(n){return{is:v.never,isValue:v.never,isError:v.always,getOr:v.identity,getOrThunk:function(e){return e()},getOrDie:function(){return v.die(String(n))()},or:function(e){return e},orThunk:function(e){return e()},fold:function(e,t){return e(n)},map:function(e){return no(n)},each:v.noop,bind:function(e){return no(n)},exists:v.never,forall:v.always,toOption:m.none}}var n={immutable:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(t.length!==n.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+n.length+" arguments");var r={};return b.each(t,function(e,t){r[e]=v.constant(n[t])}),r}},immutableBag:function(o,i){var a=o.concat(i);if(0===a.length)throw new Error("You must specify at least one required or optional field.");return zr("required",o),zr("optional",i),Ur(a),function(t){var n=Nr.keys(t),e=(b.forall(o,function(e){return b.contains(n,e)})||Fr(o,n),b.filter(n,function(e){return!b.contains(a,e)})),r=(0<e.length&&Hr(e),{});return b.each(o,function(e){r[e]=v.constant(t[e])}),b.each(i,function(e){r[e]=v.constant(Object.prototype.hasOwnProperty.call(t,e)?m.some(t[e]):m.none())}),r}}},ro=function(e,t){for(var n=[],r=function(e){return n.push(e),t(e)},o=t(e);(o=o.bind(r)).isSome(););return n},oo=function(e,t){return $r(e,t,Wr().DOCUMENT_POSITION_CONTAINED_BY)},io=we,ao=r,so={all:function(e,t){t=void 0===t?document:t.dom();return jr(t)?[]:b.map(t.querySelectorAll(e),z.fromDom)},is:function(e,t){e=e.dom();if(e.nodeType!==io)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},one:function(e,t){t=void 0===t?document:t.dom();return jr(t)?m.none():m.from(t.querySelector(e)).map(z.fromDom)}},t=kr.detect().browser.isIE()?function(e,t){return oo(e.dom(),t.dom())}:function(e,t){e=e.dom(),t=t.dom();return e!==t&&e.contains(t)},f={eq:qr,isEqualNode:function(e,t){return e.dom().isEqualNode(t.dom())},member:function(e,t){return b.exists(t,v.curry(qr,e))},contains:t,is:so.is},lo=n.immutable("element","offset"),u={owner:Vr,defaultView:function(e){e=e.dom().ownerDocument.defaultView;return z.fromDom(e)},documentElement:function(e){e=Vr(e);return z.fromDom(e.dom().documentElement)},parent:Kr,findIndex:function(t){return Kr(t).bind(function(e){e=Xr(e);return b.findIndex(e,function(e){return f.eq(t,e)})})},parents:function(e,t){for(var n=l.isFunction(t)?t:v.constant(!1),r=e.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,a=z.fromDom(i);if(o.push(a),!0===n(a))break;r=i}return o},siblings:function(t){return Kr(t).map(Xr).map(function(e){return b.filter(e,function(e){return!f.eq(t,e)})}).getOr([])},prevSibling:Yr,offsetParent:function(e){e=e.dom();return m.from(e.offsetParent).map(z.fromDom)},prevSiblings:function(e){return b.reverse(ro(e,Yr))},nextSibling:Gr,nextSiblings:function(e){return ro(e,Gr)},children:Xr,child:Jr,firstChild:function(e){return Jr(e,0)},lastChild:function(e){return Jr(e,e.dom().childNodes.length-1)},childNodesCount:function(e){return e.dom().childNodes.length},hasChildNodes:function(e){return e.dom().hasChildNodes()},leaf:function(e,t){var n=Xr(e);return 0<n.length&&t<n.length?lo(n[t],0):lo(e,t)}},co=kr.detect().browser,uo=function(e){return b.find(e,c.isElement)},fo=function(e,t,n){var r,o,i=0,a=0,s=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===Mr.get(z.fromDom(e),"position"))return{x:i=(o=t.getBoundingClientRect()).left+(s.documentElement.scrollLeft||e.scrollLeft)-s.documentElement.clientLeft,y:a=o.top+(s.documentElement.scrollTop||e.scrollTop)-s.documentElement.clientTop};for(r=t;r&&r!==n&&r.nodeType;)i+=r.offsetLeft||0,a+=r.offsetTop||0,r=r.offsetParent;for(r=t.parentNode;r&&r!==n&&r.nodeType;)i-=r.scrollLeft||0,a-=r.scrollTop||0,r=r.parentNode;a+=(o=z.fromDom(t),co.isFirefox()&&"table"===c.name(o)?uo(u.children(o)).filter(function(e){return"caption"===c.name(e)}).bind(function(r){return uo(u.nextSiblings(r)).map(function(e){var e=e.dom().offsetTop,t=r.dom().offsetTop,n=r.dom().offsetHeight;return e<=t?-n:0})}).getOr(0):0)}return{x:i,y:a}},mo=Qr,po=function(n){return function(){var e=Array.prototype.slice.call(arguments),t=this;setTimeout(function(){n.apply(t,e)},0)}},ho={nu:Zr,pure:function(t){return Zr(function(e){e(t)})}},go=function(a,e){return e(function(r){var o=[],i=0;0===a.length?r([]):b.each(a,function(e,t){var n;e.get((n=t,function(e){o[n]=e,++i>=a.length&&r(o)}))})})},vo={par:eo,mapM:function(e,t){e=b.map(e,t);return eo(e)},compose:function(t,n){return function(e){return n(e).bind(t)}}},yo={value:to,error:no};function bo(f,e){function m(e){f.getElementsByTagName("head")[0].appendChild(e)}function r(t){return ho.nu(function(e){n(t,v.compose(e,v.constant(yo.value(t))),v.compose(e,v.constant(yo.error(t))))})}function o(e){return e.fold(v.identity,v.identity)}var p,h=0,g={},n=(p=(e=e||{}).maxLoadTime||5e3,function(e,t,n){function r(){for(var e=u.passed,t=e.length;t--;)e[t]();u.status=2,u.passed=[],u.failed=[]}function o(e,t){e()||((new Date).getTime()-c<p?tt.setTimeout(t):d())}function i(){o(function(){for(var e,t=f.styleSheets,n=t.length;n--;)if((e=(e=t[n]).ownerNode||e.owningElement)&&e.id===s.id)return r(),1},i)}function a(){o(function(){try{var e=l.sheet.cssRules;return r(),e}catch(e){}},a)}var s,l,c,u,d=function(){for(var e=u.failed,t=e.length;t--;)e[t]();u.status=3,u.passed=[],u.failed=[]};if(e=X._addCacheSuffix(e),g[e]?u=g[e]:(u={passed:[],failed:[]},g[e]=u),t&&u.passed.push(t),n&&u.failed.push(n),1!==u.status)if(2===u.status)r();else if(3===u.status)d();else{if(u.status=1,(s=f.createElement("link")).rel="stylesheet",s.type="text/css",s.id="u"+h++,s.async=!1,s.defer=!1,c=(new Date).getTime(),"onload"in s&&!((t=navigator.userAgent.match(/WebKit\/(\d*)/))&&parseInt(t[1],10)<536))s.onload=i,s.onerror=d;else{if(0<navigator.userAgent.indexOf("Firefox"))return(l=f.createElement("style")).textContent='@import "'+e+'"',a(),void m(l);i()}m(s),s.href=e}});return{load:n,loadAll:function(e,t,n){vo.par(b.map(e,r)).get(function(e){e=b.partition(e,function(e){return e.isValue()});0<e.fail.length?n(e.fail.map(o)):t(e.pass.map(o))})}}}function J(e,a){function t(e,t,n,r){var o,i;if(e){if(!r&&e[t])return e[t];if(e!==a){if(o=e[n])return o;for(i=e.parentNode;i&&i!==a;i=i.parentNode)if(o=i[n])return o}}}var n=e;this.current=function(){return n},this.next=function(e){return n=t(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=t(n,"lastChild","previousSibling",e)},this.prev2=function(e){return n=function(e,t,n,r){var o;if(e&&(n=e[n],!a||n!==a)){if(n){if(!r)for(o=n[t];o;o=o[t])if(!o[t])return o;return n}return(r=e.parentNode)&&r!==a?r:void 0}}(n,"lastChild","previousSibling",e)}}function wo(t){var n;return function(e){return(n=n||b.mapToObject(t,v.constant(!0))).hasOwnProperty(c.name(e))}}function xo(e){return c.isElement(e)&&!Po(e)}function Co(t){return function(e){return!!e&&e.nodeType===t}}function ko(e){var r=e.toLowerCase().split(" ");return function(e){var t,n;if(e&&e.nodeType)for(n=e.nodeName.toLowerCase(),t=0;t<r.length;t++)if(n===r[t])return!0;return!1}}function So(t){return function(e){if(Uo(e)){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}}function To(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")}function Eo(e,t){var n,r,o=t.childNodes;if(!Q.isElement(t)||!To(t)){for(n=o.length-1;0<=n;n--)Eo(e,o[n]);if(!1===Q.isDocument(t)){if(Q.isText(t)&&0<t.nodeValue.length){var i=X.trim(t.nodeValue).length;if(e.isBlock(t.parentNode)||0<i)return;if(0===i&&(r=(i=t).previousSibling&&"SPAN"===i.previousSibling.nodeName,i=i.nextSibling&&"SPAN"===i.nextSibling.nodeName,r)&&i)return}else if(Q.isElement(t)&&(1===(o=t.childNodes).length&&To(o[0])&&t.parentNode.insertBefore(o[0],t),o.length||Lo(z.fromDom(t))))return;e.remove(t)}return t}}function No(e,t){var n,r,o,i={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),Go[r]||(o="&"+e[n+1]+";",i[r]=o,i[o]=r);return i}}function Ro(e,t){return e.replace(t?jo:qo,function(e){return Go[e]||e})}function _o(e,t){return e.replace(t?jo:qo,function(e){return 1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":Go[e]||"&#"+e.charCodeAt(0)+";"})}function Ao(e,t,n){return n=n||Jo,e.replace(t?jo:qo,function(e){return Go[e]||n[e]||e})}var Do=wo(["h1","h2","h3","h4","h5","h6"]),Po=wo(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Oo=function(e){return c.isElement(e)&&"br"===c.name(e)},Io=wo(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Bo=wo(["ul","ol","dl"]),Mo=wo(["li","dd","dt"]),Lo=wo(["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"]),Fo=wo(["thead","tbody","tfoot"]),Ho=wo(["td","th"]),zo=wo(["pre","script","textarea","style"]),Uo=Co(1),wr=Co(3),be=Co(8),xe=Co(9),Ce=ko("br"),e=So("true"),ve=So("false"),Q={isText:wr,isElement:Uo,isComment:be,isDocument:xe,isBr:Ce,isContentEditableTrue:e,isContentEditableFalse:ve,matchNodeNames:ko,hasPropValue:function(t,n){return function(e){return Uo(e)&&e[t]===n}},hasAttribute:function(t,e){return function(e){return Uo(e)&&e.hasAttribute(t)}},hasAttributeValue:function(t,n){return function(e){return Uo(e)&&e.getAttribute(t)===n}},matchStyleValues:function(r,e){var o=e.toLowerCase().split(" ");return function(e){var t;if(Uo(e))for(t=0;t<o.length;t++){var n=e.ownerDocument.defaultView.getComputedStyle(e,null);if((n?n.getPropertyValue(r):null)===o[t])return!0}return!1}},isBogus:function(e){return Uo(e)&&e.hasAttribute("data-mce-bogus")},isBogusAll:function(e){return Uo(e)&&"all"===e.getAttribute("data-mce-bogus")},isTable:function(e){return Uo(e)&&"TABLE"===e.tagName}},Wo=Eo,$o=X.makeMap,jo=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,qo=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Vo=/[<>&\"\']/g,Ko=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Yo={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Go={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Xo={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Jo=No("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Qo={encodeRaw:Ro,encodeAllRaw:function(e){return(""+e).replace(Vo,function(e){return Go[e]||e})},encodeNumeric:_o,encodeNamed:Ao,getEncodeFunc:function(e,t){var n=No(t)||Jo,e=$o(e.replace(/\+/g,","));return e.named&&e.numeric?function(e,t){return e.replace(t?jo:qo,function(e){return void 0!==Go[e]?Go[e]:void 0!==n[e]?n[e]:1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"})}:e.named?t?function(e,t){return Ao(e,t,n)}:Ao:e.numeric?_o:Ro},decode:function(e){return e.replace(Ko,function(e,t){return t?65535<(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):Yo[t]||String.fromCharCode(t):Xo[e]||Jo[e]||(t=e,(e=z.fromTag("div").dom()).innerHTML=t,e.textContent)||e.innerText||t})}},Zo={},ei={},ti=X.makeMap,ni=X.each,ri=X.extend,oi=X.explode,ii=X.inArray,E=function(e,t){return(e=X.trim(e))?e.split(t||" "):[]},ai=function(e){function t(e,t,n){function r(e,t){for(var n={},r=0,o=e.length;r<o;r++)n[e[r]]=t||{};return n}var o,i;for(t=t||"","string"==typeof(n=n||[])&&(n=E(n)),o=(e=E(e)).length;o--;)i={attributes:r(i=E([a,t].join(" "))),attributesOrder:i,children:r(n,ei)},l[e[o]]=i}function n(e,t){var n,r,o,i=(e=E(e)).length;for(t=E(t);i--;)for(n=l[e[i]],r=0,o=t.length;r<o;r++)n.attributes[t[r]]={},n.attributesOrder.push(t[r])}var a,r,o,i,s,l={};return Zo[e]||(a="id accesskey class dir lang style tabindex title role",r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(a+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",r+=" article aside details dialog figure header footer hgroup section nav",o+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(a+=" xml:lang",o=[o,s="acronym applet basefont big font strike tt"].join(" "),ni(E(s),function(e){t(e,"",o)}),r=[r,s="center dir isindex noframes"].join(" "),i=[r,o].join(" "),ni(E(s),function(e){t(e,"",i)})),i=i||[r,o].join(" "),t("html","manifest","head body"),t("head","","base command link meta noscript script style title"),t("title hr noscript br"),t("base","href target"),t("link","href rel media hreflang type sizes hreflang"),t("meta","name http-equiv content charset"),t("style","media type scoped"),t("script","src async defer type charset"),t("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",i),t("address dt dd div caption","",i),t("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),t("blockquote","cite",i),t("ol","reversed start type","li"),t("ul","","li"),t("li","value",i),t("dl","","dt dd"),t("a","href target rel media hreflang type",o),t("q","cite",o),t("ins del","cite datetime",i),t("img","src sizes srcset alt usemap ismap width height"),t("iframe","src name width height",i),t("embed","src type width height"),t("object","data type typemustmatch name usemap form width height",[i,"param"].join(" ")),t("param","name value"),t("map","name",[i,"area"].join(" ")),t("area","alt coords shape href target rel media hreflang type"),t("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),t("colgroup","span","col"),t("col","span"),t("tbody thead tfoot","","tr"),t("tr","","td th"),t("td","colspan rowspan headers",i),t("th","colspan rowspan headers scope abbr",i),t("form","accept-charset action autocomplete enctype method name novalidate target",i),t("fieldset","disabled form name",[i,"legend"].join(" ")),t("label","form for",o),t("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),t("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?i:o),t("select","disabled form multiple name required size","option optgroup"),t("optgroup","disabled label","option"),t("option","disabled label selected value"),t("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),t("menu","type label",[i,"li"].join(" ")),t("noscript","",i),"html4"!==e&&(t("wbr"),t("ruby","",[o,"rt rp"].join(" ")),t("figcaption","",i),t("mark rt rp summary bdi","",o),t("canvas","width height",i),t("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[i,"track source"].join(" ")),t("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[i,"track source"].join(" ")),t("picture","","img source"),t("source","src srcset type media sizes"),t("track","kind src srclang label default"),t("datalist","",[o,"option"].join(" ")),t("article section nav aside header footer","",i),t("hgroup","","h1 h2 h3 h4 h5 h6"),t("figure","",[i,"figcaption"].join(" ")),t("time","datetime",o),t("dialog","open",i),t("command","type label icon disabled checked radiogroup command"),t("output","for form name",o),t("progress","value max",o),t("meter","value min max low high optimum",o),t("details","open",[i,"summary"].join(" ")),t("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(n("script","language xml:space"),n("style","xml:space"),n("object","declare classid code codebase codetype archive standby align border hspace vspace"),n("embed","align name hspace vspace"),n("param","valuetype type"),n("a","charset name rev shape coords"),n("br","clear"),n("applet","codebase archive code object alt name width height align hspace vspace"),n("img","name longdesc align border hspace vspace"),n("iframe","longdesc frameborder marginwidth marginheight scrolling align"),n("font basefont","size color face"),n("input","usemap align"),n("select","onchange"),n("textarea"),n("h1 h2 h3 h4 h5 h6 div p legend caption","align"),n("ul","type compact"),n("li","type"),n("ol dl menu dir","compact"),n("pre","width xml:space"),n("hr","align noshade size width"),n("isindex","prompt"),n("table","summary width frame rules cellspacing cellpadding align bgcolor"),n("col","width align char charoff valign"),n("colgroup","width align char charoff valign"),n("thead","align char charoff valign"),n("tr","align char charoff valign bgcolor"),n("th","axis align char charoff valign nowrap bgcolor width height"),n("form","accept"),n("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),n("tfoot","align char charoff valign"),n("tbody","align char charoff valign"),n("area","nohref"),n("body","background bgcolor text link vlink alink")),"html4"!==e&&(n("input button select textarea","autofocus"),n("input textarea","placeholder"),n("a","download"),n("link script img","crossorigin"),n("iframe","sandbox seamless allowfullscreen")),ni(E("a form meter progress dfn"),function(e){l[e]&&delete l[e].children[e]}),delete l.caption.children.table,delete l.script,Zo[e]=l)},si=function(e,n){var r;return e&&(r={},ni(e="string"==typeof e?{"*":e}:e,function(e,t){r[t]=r[t.toUpperCase()]=("map"===n?ti:oi)(e,/[, ]/)})),r};function li(o){function e(e,t,n){var r=o[e];return r?r=ti(r,/[, ]/,ti(r.toUpperCase(),/[, ]/)):(r=Zo[e])||(r=ti(t," ",ti(t.toUpperCase()," ")),r=ri(r,n),Zo[e]=r),r}function t(e){var t,n,r,o,i,a,s,l,c,u,d,f,m,p,h,g,v,y,b,w=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,x=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,C=/[*?+]/;if(e)for(e=E(e,","),k["@"]&&(g=k["@"].attributes,v=k["@"].attributesOrder),t=0,n=e.length;t<n;t++)if(i=w.exec(e[t])){if(p=i[1],c=i[2],h=i[3],l=i[5],a={attributes:f={},attributesOrder:m=[]},"#"===p&&(a.paddEmpty=!0),"-"===p&&(a.removeEmpty=!0),"!"===i[4]&&(a.removeEmptyAttrs=!0),g){for(y in g)f[y]=g[y];m.push.apply(m,v)}if(l)for(r=0,o=(l=E(l,"|")).length;r<o;r++)(i=x.exec(l[r]))&&(s={},d=i[1],u=i[2].replace(/[\\:]:/g,":"),p=i[3],b=i[4],"!"===d&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(u),s.required=!0),"-"===d?(delete f[u],m.splice(ii(m,u),1)):(p&&("="===p&&(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:u,value:b}),s.defaultValue=b),":"===p&&(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:u,value:b}),s.forcedValue=b),"<"===p)&&(s.validValues=ti(b,"?")),C.test(u)?(a.attributePatterns=a.attributePatterns||[],s.pattern=T(u),a.attributePatterns.push(s)):(f[u]||m.push(u),f[u]=s)));g||"@"!==c||(g=f,v=m),h&&(a.outputName=c,k[h]=a),C.test(c)?(a.pattern=T(c),S.push(a)):k[c]=a}}function n(e){k={},S=[],t(e),ni(c,function(e,t){w[t]=e.children})}function r(e){var o=/^(~)?(.+)$/;e&&(Zo.text_block_elements=Zo.block_elements=null,ni(E(e,","),function(e){var e=o.exec(e),t="~"===e[1],n=t?"span":"div",r=e[2];w[r]=w[n],x[r]=n,t||(h[r.toUpperCase()]={},h[r]={}),k[r]||(e=k[n],delete(e=ri({},e)).removeEmptyAttrs,delete e.removeEmpty,k[r]=e),ni(w,function(e,t){e[n]&&(w[t]=e=ri({},w[t]),e[r]=e[n])})}))}function i(e){var r=/^([+\-]?)(\w+)\[([^\]]+)\]$/;Zo[o.schema]=null,e&&ni(E(e,","),function(e){var t,n,e=r.exec(e);e&&(n=e[1],t=n?w[e[2]]:w[e[2]]={"#comment":{}},t=w[e[2]],ni(E(e[3],"|"),function(e){"-"===n?delete t[e]:t[e]={}}))})}function a(e){var t,n=k[e];if(n)return n;for(t=S.length;t--;)if((n=S[t]).pattern.test(e))return n}var s,l,c,u,d,f,m,p,h,g,v,y,b,k={},w={},S=[],x={},C={},T=(c=ai((o=o||{}).schema),!1===o.verify_html&&(o.valid_elements="*[*]"),s=si(o.valid_styles),l=si(o.invalid_styles,"map"),p=si(o.valid_classes,"map"),u=e("whitespace_elements","pre script noscript style textarea video audio iframe object code"),d=e("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),f=e("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),m=e("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),g=e("non_empty_elements","td th iframe video audio object script pre code",f),v=e("move_caret_before_on_enter_elements","table",g),y=e("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),h=e("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",y),b=e("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),ni((o.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(e){C[e]=new RegExp("</"+e+"[^>]*>","gi")}),function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")});o.valid_elements?n(o.valid_elements):(ni(c,function(e,t){k[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},w[t]=e.children}),"html5"!==o.schema&&ni(E("strong/b em/i"),function(e){e=E(e,"/"),k[e[1]].outputName=e[0]}),ni(E("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){k[e]&&(k[e].removeEmpty=!0)}),ni(E("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(e){k[e].paddEmpty=!0}),ni(E("span"),function(e){k[e].removeEmptyAttrs=!0})),r(o.custom_elements),i(o.valid_children),t(o.extended_valid_elements),i("+ol[ul|ol],+ul[ul|ol]"),ni({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,t){k[t]&&(k[t].parentsRequired=E(e))}),o.invalid_elements&&ni(oi(o.invalid_elements),function(e){k[e]&&delete k[e]}),a("span")||t("span[!data-mce-type|*]");return{children:w,elements:k,getValidStyles:function(){return s},getValidClasses:function(){return p},getBlockElements:function(){return h},getInvalidStyles:function(){return l},getShortEndedElements:function(){return f},getTextBlockElements:function(){return y},getTextInlineElements:function(){return b},getBoolAttrs:function(){return m},getElementRule:a,getSelfClosingElements:function(){return d},getNonEmptyElements:function(){return g},getMoveCaretBeforeOnEnterElements:function(){return v},getWhiteSpaceElements:function(){return u},getSpecialElements:function(){return C},isValidChild:function(e,t){e=w[e.toLowerCase()];return!(!e||!e[t.toLowerCase()])},isValid:function(e,t){var n,r,o=a(e);if(o){if(!t)return!0;if(o.attributes[t])return!0;if(n=o.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},getCustomElements:function(){return x},addValidElements:t,setValidElements:n,addCustomElements:r,addValidChildren:i}}var ci=function(e,t,n,r){function o(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e}return"#"+o(t)+o(n)+o(r)};function ui(y,e){var b,t,c,u,w=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,x=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,C=/\s*([^:]+):\s*([^;]+);?/g,k=/\s+$/,S={},T="\ufeff";for(y=y||{},e&&(c=e.getValidStyles(),u=e.getInvalidStyles()),t=("\\\" \\' \\; \\: ; : "+T).split(" "),b=0;b<t.length;b++)S[t[b]]=T+b,S[T+b]=t[b];return{toHex:function(e){return e.replace(w,ci)},parse:function(e){function t(e,t,n){var r,o,i,a=f[e+"-top"+t];if(a&&(r=f[e+"-right"+t])&&(o=f[e+"-bottom"+t])&&(i=f[e+"-left"+t])){var s=[a,r,o,i];for(b=s.length-1;b--&&s[b]===s[b+1];);-1<b&&n||(f[e+t]=-1===b?s[0]:s.join(" "),delete f[e+"-top"+t],delete f[e+"-right"+t],delete f[e+"-bottom"+t],delete f[e+"-left"+t])}}function n(e){return s=!0,S[e]}function r(e){return e.replace(/\\[0-9a-f]+/gi,v)}function o(e,t,n,r,o,i){if(o=o||i)return"'"+(o=g(o)).replace(/\'/g,"\\'")+"'";if(t=g(t||n||r),!y.allow_script_urls){i=t.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(i))return"";if(!y.allow_svg_data_urls&&/^data:image\/svg/i.test(i))return""}return"url('"+(t=m?m.call(p,t,"style"):t).replace(/\'/g,"\\'")+"')"}var i,a,s,l,c,u,d,f={},m=y.url_converter,p=y.url_converter_scope||this,h=function(e){var t,n=f[e];if(n){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return!1;return f[e]=n[0],!0}},g=function(e,t){return s&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return S[e]})),e=t?e:e.replace(/\\([\'\";:])/g,"$1")},v=function(e){return String.fromCharCode(parseInt(e.slice(1),16))};if(e){for(e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,n).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,n)});a=C.exec(e);)C.lastIndex=a.index+a[0].length,i=a[1].replace(k,"").toLowerCase(),a=a[2].replace(k,""),i&&a&&(i=r(i),a=r(a),-1===i.indexOf(T))&&-1===i.indexOf('"')&&(y.allow_script_urls||"behavior"!==i&&!/expression\s*\(|\/\*|\*\//.test(a))&&("font-weight"===i&&"700"===a?a="bold":"color"!==i&&"background-color"!==i||(a=a.toLowerCase()),a=(a=a.replace(w,ci)).replace(x,o),f[i]=s?g(a,!0):a);t("border","",!0),t("border","-width"),t("border","-color"),t("border","-style"),t("padding",""),t("margin",""),l="border",u="border-style",d="border-color",h(c="border-width")&&h(u)&&h(d)&&(f[l]=f[c]+" "+f[u]+" "+f[d],delete f[c],delete f[u],delete f[d]),"medium none"===f.border&&delete f.border,"none"===f["border-image"]&&delete f["border-image"]}return f},serialize:function(i,e){function t(e){var t,n,r,o=c[e];if(o)for(t=0,n=o.length;t<n;t++)e=o[t],(r=i[e])&&(l+=(0<l.length?" ":"")+e+": "+r+";")}var n,r,o,a,s,l="";if(e&&c)t("*"),t(e);else for(n in i)!(r=i[n])||u&&(o=n,a=e,s=void 0,(s=u["*"])&&s[o]||(s=u[a])&&s[o])||(l+=(0<l.length?" ":"")+n+": "+r+";");return l}}}function di(e,t){var n=t.attr("style"),e=(e=e.serialize(e.parse(n),t[0].nodeName))||null;t.attr("data-mce-style",e)}function fi(e,t){var n,r,o=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!==r||r!==n&&e.nodeValue.length)&&(o++,n=r);return o}var mi=X.each,pi=X.grep,hi=K.ie,gi=/^([a-z0-9],?)+$/i,vi=/^[ \t\r\n]*$/;function yi(a,i){var s,n,r,o,l,M=this,c=(void 0===i&&(i={}),{}),u=window,d={},L=0,f=!0,e=bo(a),m=[],p=i.schema||li({}),h=ui({url_converter:i.url_converter,url_converter_scope:i.url_converter_scope},i.schema),g=i.ownEvents?new Le(i.proxy):Le.Event,v=p.getBlockElements(),t=G.overrideDefaults(function(){return{context:a,element:B.getRoot()}}),y=function(e){var t;return e&&a&&"string"==typeof e?(t=a.getElementById(e))&&t.id!==e?a.getElementsByName(e)[1]:t:e},b=function(e){return"string"==typeof e&&(e=y(e)),t(e)},w=function(e,t,n){var r,o,e=b(e);return o=void 0===(o=e.length?(r=s[t])&&r.get?r.get(e,t):e.attr(t):o)?n||"":o},x=function(e){e=y(e);return e?e.attributes:[]},C=function(e,t,n){""===n&&(n=null);var r,e=b(e),o=e.attr(t);e.length&&((r=s[t])&&r.set?r.set(e,n,t):e.attr(t,n),o!==n)&&i.onSetAttrib&&i.onSetAttrib({attrElm:e,attrName:t,attrValue:n})},k=function(){return i.root_element||a.body},S=function(e,t){return fo(a.body,y(e),t)},T=function(e,t,n){e=b(e);return n?e.css(t):("float"===(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}))&&(t=K.ie&&K.ie<12?"styleFloat":"cssFloat"),e[0]&&e[0].style?e[0].style[t]:void 0)},E=function(e){var t,n;return e=y(e),t=T(e,"width"),n=T(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},N=function(e,t){if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(gi.test(t)){for(var n=t.toLowerCase().split(/,/),r=e.nodeName.toLowerCase(),o=n.length-1;0<=o;o--)if(n[o]===r)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}e=Array.isArray(e)?e:[e];return 0<Y(t,e[0].ownerDocument||e[0],null,e).length},R=function(e,t,n,r){var o,i=[],a=y(e);for(r=void 0===r,n=n||("BODY"!==k().nodeName?k().parentNode:null),X.is(t,"string")&&(t="*"===(o=t)?function(e){return 1===e.nodeType}:function(e){return N(e,o)});a&&a!==n&&a.nodeType&&9!==a.nodeType;){if(!t||"function"==typeof t&&t(a)){if(!r)return[a];i.push(a)}a=a.parentNode}return r?i:null},_=function(e,t,n){var r=t;if(e)for("string"==typeof t&&(r=function(e){return N(e,t)}),e=e[n];e;e=e[n])if("function"==typeof r&&r(e))return e;return null},A=function(e,n,r){var o,e="string"==typeof e?y(e):e;return!!e&&(X.isArray(e)&&(e.length||0===e.length)?(o=[],mi(e,function(e,t){e&&("string"==typeof e&&(e=y(e)),o.push(n.call(r,e,t)))}),o):n.call(r||M,e))},D=function(e,t){b(e).each(function(e,n){mi(t,function(e,t){C(n,t,e)})})},F=function(e,n){e=b(e);hi?e.each(function(e,t){if(!1!==t.canHaveHTML){for(;t.firstChild;)t.removeChild(t.firstChild);try{t.innerHTML="<br>"+n,t.removeChild(t.firstChild)}catch(e){G("<div></div>").html("<br>"+n).contents().slice(1).appendTo(t)}return n}}):e.html(n)},H=function(e,n,r,o,i){return A(e,function(e){var t="string"==typeof n?a.createElement(n):n;return D(t,r),o&&("string"!=typeof o&&o.nodeType?t.appendChild(o):"string"==typeof o&&F(t,o)),i?t:e.appendChild(t)})},P=function(e,t,n){return H(a.createElement(e),e,t,n,!0)},z=Qo.decode,U=Qo.encodeAllRaw,O=function(e,t){e=b(e);return(t?e.each(function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}):e).remove(),1<e.length?e.toArray():e[0]},W=function(e,t,n){b(e).toggleClass(t,n).each(function(){""===this.className&&G(this).attr("class",null)})},$=function(t,e,n){return A(e,function(e){return X.is(e,"array")&&(t=t.cloneNode(!0)),n&&mi(pi(e.childNodes),function(e){t.appendChild(e)}),e.parentNode.replaceChild(t,e)})},I=function(){return a.createRange()},j=function(e,t,n,r){if(X.isArray(e)){for(var o=e.length;o--;)e[o]=j(e[o],t,n,r);return e}return!i.collect||e!==a&&e!==u||m.push([e,t,n,r]),g.bind(e,t,n,r||B)},q=function(e,t,n){var r;if(X.isArray(e)){for(r=e.length;r--;)e[r]=q(e[r],t,n);return e}if(m&&(e===a||e===u))for(r=m.length;r--;){var o=m[r];e!==o[0]||t&&t!==o[1]||n&&n!==o[2]||g.unbind(o[0],o[1],o[2])}return g.unbind(e,t,n)},V=function(e){var t;return e&&Q.isElement(e)?(t=e.getAttribute("data-mce-contenteditable"))&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null:null},B={doc:a,settings:i,win:u,files:d,stdMode:!0,boxModel:f,styleSheetLoader:e,boundEvents:m,styles:h,schema:p,events:g,isBlock:function(e){if("string"==typeof e)return!!v[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!v[e.nodeName])}return!1},$:t,$$:b,root:null,clone:function(t,e){var n;return!hi||1!==t.nodeType||e?t.cloneNode(e):e?null:(n=a.createElement(t.nodeName),mi(x(t),function(e){C(n,e.nodeName,w(t,e.nodeName))}),n)},getRoot:k,getViewPort:function(e){var e=e||u,t=e.document,t=f?t.documentElement:t.body;return{x:e.pageXOffset||t.scrollLeft,y:e.pageYOffset||t.scrollTop,w:e.innerWidth||t.clientWidth,h:e.innerHeight||t.clientHeight}},getRect:function(e){var t;return e=y(e),t=S(e),e=E(e),{x:t.x,y:t.y,w:e.w,h:e.h}},getSize:E,getParent:function(e,t,n){e=R(e,t,n,!1);return e&&0<e.length?e[0]:null},getParents:R,get:y,getNext:function(e,t){return _(e,t,"nextSibling")},getPrev:function(e,t){return _(e,t,"previousSibling")},select:function(e,t){return Y(e,y(t)||i.root_element||a,[])},is:N,add:H,create:P,createHTML:function(e,t,n){var r,o="";for(r in o+="<"+e,t)t.hasOwnProperty(r)&&null!==t[r]&&void 0!==t[r]&&(o+=" "+r+'="'+U(t[r])+'"');return void 0!==n?o+">"+n+"</"+e+">":o+" />"},createFragment:function(e){var t,n=a.createElement("div"),r=a.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)r.appendChild(t);return r},remove:O,setStyle:function(e,t,n){e=b(e).css(t,n);i.update_styles&&di(h,e)},getStyle:T,setStyles:function(e,t){e=b(e).css(t);i.update_styles&&di(h,e)},removeAllAttribs:function(e){return A(e,function(e){for(var t=e.attributes,n=t.length-1;0<=n;n--)e.removeAttributeNode(t.item(n))})},setAttrib:C,setAttribs:D,getAttrib:w,getPos:S,parseStyle:function(e){return h.parse(e)},serializeStyle:function(e,t){return h.serialize(e,t)},addStyle:function(e){var t,n;if(B!==yi.DOM&&a===document){if(c[e])return;c[e]=!0}(n=a.getElementById("mceDefaultStyles"))||((n=a.createElement("style")).id="mceDefaultStyles",n.type="text/css",(t=a.getElementsByTagName("head")[0]).firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(a.createTextNode(e))},loadCSS:function(e){var t;B!==yi.DOM&&a===document?yi.DOM.loadCSS(e):(e=e||"",t=a.getElementsByTagName("head")[0],mi(e.split(","),function(e){e=X._addCacheSuffix(e),d[e]||(d[e]=!0,e=P("link",{rel:"stylesheet",href:e}),t.appendChild(e))}))},addClass:function(e,t){b(e).addClass(t)},removeClass:function(e,t){W(e,t,!1)},hasClass:function(e,t){return b(e).hasClass(t)},toggleClass:W,show:function(e){b(e).show()},hide:function(e){b(e).hide()},isHidden:function(e){return"none"===b(e).css("display")},uniqueId:function(e){return(e||"mce_")+L++},setHTML:F,getOuterHTML:function(e){e="string"==typeof e?y(e):e;return Q.isElement(e)?e.outerHTML:G("<div></div>").append(G(e).clone()).html()},setOuterHTML:function(e,t){b(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}O(G(this).html(t),!0)})},decode:z,encode:U,insertAfter:function(e,t){var r=y(t);return A(e,function(e){var t=r.parentNode,n=r.nextSibling;return n?t.insertBefore(e,n):t.appendChild(e),e})},replace:$,rename:function(t,e){var n;return t.nodeName!==e.toUpperCase()&&(n=P(e),mi(x(t),function(e){C(n,e.nodeName,w(t,e.nodeName))}),$(n,t,!0)),n||t},findCommonAncestor:function(e,t){for(var n,r=e;r;){for(n=t;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},toHex:function(e){return h.toHex(X.trim(e))},run:A,getAttribs:x,isEmpty:function(e,t){var n,r,o,i,a,s,l=0;if(e=e.firstChild){a=new J(e,e.parentNode),t=t||(p?p.getNonEmptyElements():null),i=p?p.getWhiteSpaceElements():{};do{if(o=e.nodeType,Q.isElement(e)){var c=e.getAttribute("data-mce-bogus");if(c){e=a.next("all"===c);continue}if(s=e.nodeName.toLowerCase(),t&&t[s]){if("br"!==s)return!1;l++,e=a.next();continue}for(n=(r=x(e)).length;n--;)if("name"===(s=r[n].nodeName)||"data-mce-bookmark"===s)return!1}if(8===o)return!1;if(3===o&&!vi.test(e.nodeValue))return!1;if(3===o&&e.parentNode&&i[e.parentNode.nodeName]&&vi.test(e.nodeValue))return!1;e=a.next()}while(e)}return l<=1},createRng:I,nodeIndex:fi,split:function(e,t,n){var r,o,i=I();if(e&&t)return i.setStart(e.parentNode,fi(e)),i.setEnd(t.parentNode,fi(t)),r=i.extractContents(),(i=I()).setStart(t.parentNode,fi(t)+1),i.setEnd(e.parentNode,fi(e)+1),i=i.extractContents(),(o=e.parentNode).insertBefore(Wo(B,r),e),n?o.insertBefore(n,e):o.insertBefore(t,e),o.insertBefore(Wo(B,i),e),O(e),n||t},bind:j,unbind:q,fire:function(e,t,n){return g.fire(e,t,n)},getContentEditable:V,getContentEditableParent:function(e){for(var t=k(),n=null;e&&e!==t&&null===(n=V(e));e=e.parentNode);return n},destroy:function(){if(m)for(var e=m.length;e--;){var t=m[e];g.unbind(t[0],t[1],t[2])}Y.setDocument&&Y.setDocument()},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset}};return n=h,o=function(){return B},e={},l=(r=i).keep_values,e={style:{set:function(e,t){null!==t&&"object"==typeof t?e.css(t):(l&&e.attr("data-mce-style",t),e.attr("style",t))},get:function(e){var t=e.attr("data-mce-style")||e.attr("style");return n.serialize(n.parse(t),e[0].nodeName)}}},l&&(e.href=e.src={set:function(e,t,n){r.url_converter&&(t=r.url_converter.call(r.url_converter_scope||o(),t,n,e[0])),e.attr("data-mce-"+n,t).attr(n,t)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}}),s=e,B}(ye=yi=yi||{}).DOM=ye(document),ye.nodeIndex=fi;function bi(e){return"function"==typeof e}var p=yi,wi=p.DOM,xi=X.each,Ci=X.grep,ki=function(){var d={},o=[],i={},a=[],f=0;this.isDone=function(e){return 2===d[e]},this.markDone=function(e){d[e]=2},this.add=this.load=function(e,t,n,r){void 0===d[e]&&(o.push(e),d[e]=0),t&&(i[e]||(i[e]=[]),i[e].push({success:t,failure:r,scope:n||this}))},this.remove=function(e){delete d[e],delete i[e]},this.loadQueue=function(e,t,n){this.loadScripts(o,e,t,n)},this.loadScripts=function(t,e,n,r){var l,c=[],u=function(t,e){xi(i[e],function(e){bi(e[t])&&e[t].call(e.scope)}),i[e]=void 0};a.push({success:e,failure:r,scope:n||this}),(l=function(){var e=Ci(t);t.length=0,xi(e,function(e){var t,n,r,o,i,a;function s(){o.remove(i),a&&(a.onreadystatechange=a.onload=a=null),n()}2===d[e]?u("success",e):3===d[e]?u("failure",e):1!==d[e]&&(d[e]=1,f++,t=e,n=function(){d[e]=2,f--,u("success",e),l()},r=function(){d[e]=3,f--,c.push(e),u("failure",e),l()},i=(o=wi).uniqueId(),(a=document.createElement("script")).id=i,a.type="text/javascript",a.src=X._addCacheSuffix(t),"onreadystatechange"in a?a.onreadystatechange=function(){/loaded|complete/.test(a.readyState)&&s()}:a.onload=s,a.onerror=function(){bi(r)?r():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(a))}),f||(e=a.slice(0),a.length=0,xi(e,function(e){0===c.length?bi(e.success)&&e.success.call(e.scope):bi(e.failure)&&e.failure.call(e.scope,c)}))})()}},Si=(ki.ScriptLoader=new ki,X.each);function Ti(){function a(t,e,n){var r=c(name);Si(r,function(e){e=u(t,e);d(e.resource,e,void 0,void 0)}),e&&(n?e.call(n):e.call(ki))}var r=this,o=[],s={},l={},i=[],c=function(e){var t;return(t=l[e]?l[e].dependencies:t)||[]},u=function(e,t){return"object"==typeof t?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}},d=function(e,t,n,r,o){var i;s[e]||(0!==(i="string"==typeof t?t:t.prefix+t.resource+t.suffix).indexOf("/")&&-1===i.indexOf("://")&&(i=Ti.baseURL+"/"+i),s[e]=i.substring(0,i.lastIndexOf("/")),l[e]?a(t,n,r):ki.ScriptLoader.add(i,function(){return a(t,n,r)},r,o))};return{items:o,urls:s,lookup:l,_listeners:i,get:function(e){if(l[e])return l[e].instance},dependencies:c,requireLangPack:function(e,t){var n=Ti.language;if(n&&!1!==Ti.languageLoad){if(t)if(-1!==(t=","+t+",").indexOf(","+n.substr(0,2)+","))n=n.substr(0,2);else if(-1===t.indexOf(","+n+","))return;ki.ScriptLoader.add(s[e]+"/langs/"+n+".js")}},add:function(t,e,n){o.push(e),l[t]={instance:e,dependencies:n};n=b.partition(i,function(e){return e.name===t});return i=n.fail,Si(n.pass,function(e){e.callback()}),e},remove:function(e){delete s[e],delete l[e]},createUrl:u,addComponents:function(e,t){var n=r.urls[e];Si(t,function(e){ki.ScriptLoader.add(n+"/"+e)})},load:d,waitFor:function(e,t){l.hasOwnProperty(e)?t():i.push({name:e,callback:t})}}}(ge=Ti=Ti||{}).PluginManager=ge(),ge.ThemeManager=ge();function Ei(e){var t=e.container();return e&&Q.isText(t)&&t.data.charAt(e.offset())===h.ZWSP}function Ni(e){var t=e.container();return e&&Q.isText(t)&&t.data.charAt(e.offset()-1)===h.ZWSP}function Ri(e,t,n){var r;return(e=t.ownerDocument.createElement(e)).setAttribute("data-mce-caret",n?"before":"after"),e.setAttribute("data-mce-bogus","all"),e.appendChild(((r=document.createElement("br")).setAttribute("data-mce-bogus","1"),r)),r=t.parentNode,n?r.insertBefore(e,t):t.nextSibling?r.insertBefore(e,t.nextSibling):r.appendChild(e),e}function _i(e){return!oa(e)&&(ea(e)?!ta(e.parentNode):na(e)||Zi(e)||ra(e)||aa(e))}function Ai(e,t){return e=ca(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e}function Di(e,t,n){return 0<=e&&e<=Math.min(t.height,n.height)/2}function Pi(e,t){return e.bottom-e.height/2<t.top||!(e.top>t.bottom)&&Di(t.top-e.bottom,e,t)}function Oi(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&Di(t.bottom-e.top,e,t)}function Ii(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null}function Bi(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e}function Mi(e){for(var t=1;t<arguments.length;t++)t-1,0;var n=ha.call(arguments);return n.length-1>=e.length?e.apply(this,n.slice(1)):function(){var e=n.concat([].slice.call(arguments));return Mi.apply(this,e)}}function Li(e){return e&&/[\r\n\t ]/.test(e)}function Fi(e){function r(e){0===e.height||0<o.length&&ua(e,o[o.length-1])||o.push(e)}function t(e,t){var n=Ea(e.ownerDocument);if(t<e.data.length){if(pa(e.data[t]))return;if(pa(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!Ra(n)))return r(Oa(Pa(n),!1))}0<t&&(n.setStart(e,t-1),n.setEnd(e,t),Ra(n)||r(Oa(Pa(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),Ra(n)||r(Oa(Pa(n),!0)))}var n,o=[];if(Ca(e.container()))t(e.container(),e.offset());else if(ya(e.container()))if(e.isAtEnd())n=Ta(e.container(),e.offset()),Ca(n)&&t(n,n.data.length),wa(n)&&!ka(n)&&r(Oa(Pa(n),!1));else{if(n=Ta(e.container(),e.offset()),Ca(n)&&t(n,0),wa(n)&&e.isAtEnd())return r(Oa(Pa(n),!1)),o;e=Ta(e.container(),e.offset()-1),!wa(e)||ka(e)||!ba(e)&&!ba(n)&&wa(n)||r(Oa(Pa(e),!1)),wa(n)&&r(Oa(Pa(n),!0))}return o}var Hi,zi="\ufeff",h={isZwsp:function(e){return e===zi},ZWSP:zi,trim:function(e){return e.replace(new RegExp(zi,"g"),"")}},Ui=Q.isElement,Wi=Q.isText,$i=function(e){return Wi(e)&&(e=e.parentNode),Ui(e)&&e.hasAttribute("data-mce-caret")},ji=function(e){return Wi(e)&&h.isZwsp(e.data)},qi=function(e){return $i(e)||ji(e)},Vi=function(e){return e.firstChild!==e.lastChild||!Q.isBr(e.firstChild)},Ki=function(e){return Wi(e)&&e.data[0]===h.ZWSP},Yi=function(e){return Wi(e)&&e.data[e.data.length-1]===h.ZWSP},Gi=function(e){e=e.getElementsByTagName("br"),e=e[e.length-1];Q.isBogus(e)&&e.parentNode.removeChild(e)},Xi=function(e){return e&&e.hasAttribute("data-mce-caret")?(Gi(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null},Ji=Q.isContentEditableTrue,Qi=Q.isContentEditableFalse,Zi=Q.isBr,ea=Q.isText,ta=Q.matchNodeNames("script style textarea"),na=Q.matchNodeNames("img input textarea hr iframe video audio object"),ra=Q.matchNodeNames("table"),oa=qi,ia=function(e){return Q.isElement(e)&&"true"===e.getAttribute("unselectable")},aa=function(e){return!1===ia(e)&&Qi(e)},sa=function(e,t){return _i(e)&&function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(aa(e))return!1;if(Ji(e))return!0}return!0}(e,t)},la=Math.round,ca=function(e){return e?{left:la(e.left),top:la(e.top),bottom:la(e.bottom),right:la(e.right),width:la(e.width),height:la(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},ua=function(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right},da=function(e,t){return t.left>e.left&&t.right<e.right?0:t.left<e.left?t.left-e.left:t.right-e.right},fa=function(e,t){return t.top>e.top&&t.bottom<e.bottom?0:t.top<e.top?t.top-e.top:t.bottom-e.bottom},ma=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),pa=function(e){return"string"==typeof e&&768<=e.charCodeAt(0)&&ma.test(e)},ha=[].slice,ga={constant:function(e){return function(){return e}},negate:function(t){return function(e){return!t(e)}},and:function(){for(var e=0;e<arguments.length;e++)e,0;var n=ha.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(!n[t](e))return!1;return!0}},or:function(){for(var e=0;e<arguments.length;e++)e,0;var n=ha.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(n[t](e))return!0;return!1}},curry:Mi,compose:function(t,n){return function(e){return t(n(e))}},noop:function(){}},va={cat:function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},findMap:function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return m.none()},liftN:function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r];if(!o.isSome())return m.none();n.push(o.getOrDie())}return m.some(t.apply(null,n))}},ya=Q.isElement,we=_i,ba=Q.matchStyleValues("display","block table"),r=Q.matchStyleValues("float","left right"),wa=ga.and(ya,we,ga.negate(r)),xa=ga.negate(Q.matchStyleValues("white-space","pre pre-line pre-wrap")),Ca=Q.isText,ka=Q.isBr,Sa=p.nodeIndex,Ta=Bi,Ea=function(e){return"createRange"in e?e.createRange():p.DOM.createRng()},Na=function(e){return!!e.setStart&&!!e.setEnd},Ra=function(e){var t=e.startContainer,n=e.startOffset;return!!(Li(e.toString())&&xa(t.parentNode)&&Q.isText(t)&&(e=t.data,Li(e[n-1])||Li(e[n+1])))},_a=function(e){var t=e.ownerDocument,n=Ea(t),t=t.createTextNode(" "),r=e.parentNode;return r.insertBefore(t,e),n.setStart(t,0),n.setEnd(t,1),e=ca(n.getBoundingClientRect()),r.removeChild(t),e},Aa=function(e){var t=e.startContainer,n=e.endContainer,r=e.startOffset,o=e.endOffset;return t===n&&Q.isText(n)&&0===r&&1===o?((t=e.cloneRange()).setEndAfter(n),Pa(t)):null},Da=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},Pa=function(e){var t=e.getClientRects(),t=0<t.length?ca(t[0]):ca(e.getBoundingClientRect());return!Na(e)&&ka(e)&&Da(t)?_a(e):Da(t)&&Na(e)?Aa(e):t},Oa=function(e,t){e=Ai(e,t);return e.width=1,e.right=e.left+1,e};function g(t,n,e){function r(){return e=e||Fi(g(t,n))}return{container:ga.constant(t),offset:ga.constant(n),toRange:function(){var e=Ea(t.ownerDocument);return e.setStart(t,n),e.setEnd(t,n),e},getClientRects:r,isVisible:function(){return 0<r().length},isAtStart:function(){return Ca(t),0===n},isAtEnd:function(){return Ca(t)?n>=t.data.length:n>=t.childNodes.length},isEqual:function(e){return e&&t===e.container()&&n===e.offset()},getNode:function(e){return Ta(t,e?n-1:n)}}}(Hi=g=g||{}).fromRangeStart=function(e){return Hi(e.startContainer,e.startOffset)},Hi.fromRangeEnd=function(e){return Hi(e.endContainer,e.endOffset)},Hi.after=function(e){return Hi(e.parentNode,Sa(e)+1)},Hi.before=function(e){return Hi(e.parentNode,Sa(e))},Hi.isAbove=function(e,t){return va.liftN([b.head(t.getClientRects()),b.last(e.getClientRects())],Pi).getOr(!1)},Hi.isBelow=function(e,t){return va.liftN([b.last(t.getClientRects()),b.head(e.getClientRects())],Oi).getOr(!1)},Hi.isAtStart=function(e){return!!e&&e.isAtStart()},Hi.isAtEnd=function(e){return!!e&&e.isAtEnd()},Hi.isTextPosition=function(e){return!!e&&Q.isText(e.container())},Hi.isElementPosition=function(e){return!1===Hi.isTextPosition(e)};function Ia(e,t){0===t.length?Is(e):e.nodeValue=t}function Ba(e){var t=h.trim(e);return{count:e.length-t.length,text:t}}function Ma(e){var t;Ps(e)&&qi(e)&&(Vi(e)?e.removeAttribute("data-mce-caret"):Is(e)),Os(e)&&(t=h.trim(function(e){try{return e.nodeValue}catch(e){return""}}(e)),Ia(e,t))}function La(e,t){var n,r=e?t.firstChild:t.lastChild;return Q.isText(r)?m.some(S(r,e?0:r.data.length)):r?_i(r)?m.some(e?S.before(r):(n=r,Q.isBr(n)?S.before(n):S.after(n))):(n=t,t=r,t=(r=e)?S.before(t):S.after(t),$s(r,n,t)):m.none()}function Fa(e,t,n,r,o){return t._selectionOverrides.showCaret(e,n,r,o)}function Ha(e,t,n){return t&&t.collapsed&&Ks(e,t,n)||t}function za(e,t){return e===Ds.Backwards?t.reverse():t}function Ua(e,t,n,r){for(var o,i,a,s=Vl(n),l=r,c=[];l&&(i=s,a=l,i=t===Ds.Forwards?i.next(a):i.prev(a));){if(Q.isBr(i.getNode(!1)))return t===Ds.Forwards?{positions:za(t,c).concat([i]),breakType:As.Br,breakAt:m.some(i)}:{positions:za(t,c),breakType:As.Br,breakAt:m.some(i)};if(i.isVisible()){if(e(l,i))return a=l,o=i,o=Q.isBr(o.getNode(t===Ds.Forwards))?As.Br:!1===Tl(a,o)?As.Block:As.Wrap,{positions:za(t,c),breakType:o,breakAt:m.some(i)};c.push(i)}l=i}return{positions:za(t,c),breakType:As.Eol,breakAt:m.none()}}function Wa(n,r,o,e){return r(o,e).breakAt.map(function(e){var t=r(o,e).positions;return n===Ds.Backwards?t.concat(e):[e].concat(t)}).getOr([])}function $a(e,o){return b.foldl(e,function(e,r){return e.fold(function(){return m.some(r)},function(n){return va.liftN([b.head(n.getClientRects()),b.head(r.getClientRects())],function(e,t){e=Math.abs(o-e.left);return Math.abs(o-t.left)<=e?r:n}).or(e)})},m.none())}function ja(t,e){return b.head(e.getClientRects()).bind(function(e){return $a(t,e.left)})}function qa(e,t,n,r,o){var i,a,s,n=tl.descendants(z.fromDom(n),"td,th").map(function(e){return e.dom()}),e=b.filter((i=e,b.bind(n,function(e){var t=nl(e.getBoundingClientRect(),-1);return[{x:t.left,y:i(t),cell:e},{x:t.right,y:i(t),cell:e}]})),function(e){return t(e,o)});return a=r,s=o,b.foldl(e,function(e,r){return e.fold(function(){return m.some(r)},function(e){var t=Math.sqrt(Math.abs(e.x-a)+Math.abs(e.y-s)),n=Math.sqrt(Math.abs(r.x-a)+Math.abs(r.y-s));return m.some(n<t?r:e)})},m.none()).map(function(e){return e.cell})}function Va(t,n){return b.head(n.getClientRects()).bind(function(e){return rl(t,e.left,e.top)}).bind(function(e){return ja((t=e,k.lastPositionIn(t).map(function(e){return Ys(t,e).positions.concat(e)}).getOr([])),n);var t})}function Ka(t,n){return b.last(n.getClientRects()).bind(function(e){return ol(t,e.left,e.top)}).bind(function(e){return ja((t=e,k.firstPositionIn(t).map(function(e){return[e].concat(Gs(t,e).positions)}).getOr([])),n);var t})}function Ya(e){for(var t=0,n=0,r=e;r&&r.nodeType;)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}}function Ga(e,t,n){var r=e.getParam(t,n);return-1!==r.indexOf("=")?(t=e.getParam(t,"","hash")).hasOwnProperty(e.id)?t[e.id]:n:r}function Xa(t,n){u.parent(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})}function Ja(e,t){e.dom().appendChild(t.dom())}function Qa(){return al.isIE()||al.isEdge()||al.isFirefox()}function Za(e,t){e.selection.setRng(t),il.scrollRangeIntoView(e,t)}function es(t,n,e){return(e=t(n,e)).breakType===As.Wrap&&0===e.positions.length?e.breakAt.map(function(e){return t(n,e).breakAt.isNone()}).getOr(!0):e.breakAt.isNone()}function ts(e,t,n,r){var o,i,a,s=e.selection.getRng(),l=t?1:-1;return!(!Qa()||(o=t,i=n,a=S.fromRangeStart(s),!k.positionIn(!o,i).map(function(e){return e.isEqual(a)}).getOr(!1))||(s=Fa(l,e,n,!t,!0),Za(e,s),0))}function ns(e,t){return t=t.getNode(e),Q.isElement(t)&&"TABLE"===t.nodeName?m.some(t):m.none()}function rs(s,l,c){var e=ns(!!l,c),t=!1===l;e.fold(function(){return Za(s,c.toRange())},function(a){return k.positionIn(t,s.getBody()).filter(function(e){return e.isEqual(c)}).fold(function(){return Za(s,c.toRange())},function(e){var n,r,o,t,i;n=l,r=s,o=a,t=c,(i=T.getForcedRootBlock(r))?r.undoManager.transact(function(){var e=z.fromTag(i),t=(C.setAll(e,T.getForcedRootBlockAttrs(r)),N.append(e,z.fromTag("br")),n?N.after(z.fromDom(o),e):N.before(z.fromDom(o),e),r.dom.createRng());t.setStart(e.dom(),0),t.setEnd(e.dom(),0),Za(r,t)}):Za(r,t.toRange())})})}function os(e,t,n,r){var o,i,a,s,l,c,u,d=e.selection.getRng(),d=S.fromRangeStart(d),f=e.getBody();return!t&&sl(r,d)?(l=f,o=Va(c=n,u=d).orThunk(function(){return b.head(u.getClientRects()).bind(function(e){return $a(Xs(l,S.before(c)),e.left)})}).getOr(S.before(c)),rs(e,t,o),!0):!(!t||!ll(r,d)||(i=f,o=Ka(a=n,s=d).orThunk(function(){return b.head(s.getClientRects()).bind(function(e){return $a(Js(i,S.after(a)),e.left)})}).getOr(S.after(a)),rs(e,t,o),0))}function is(e,t,n){var r,o,i=Ai(t.getBoundingClientRect(),n),e="BODY"===e.tagName?(o=e.ownerDocument.documentElement,r=e.scrollLeft||o.scrollLeft,e.scrollTop||o.scrollTop):(o=e.getBoundingClientRect(),r=e.scrollLeft-o.left,e.scrollTop-o.top);return i.left+=r,i.right+=r,i.top+=e,i.bottom+=e,i.width=1,0<(o=t.offsetWidth-t.clientWidth)&&(n&&(o*=-1),i.left+=o,i.right+=o),i}function as(e,t){for(var n;n=e(t);)if(!yl(n))return n;return null}function ss(e,t){for(;e&&e!==t;){if(gl(e))return e;e=e.parentNode}return null}function ls(e,t){var n;return t&&(n=t.container(),t=t.offset(),wl(n))?n.childNodes[t+e]:null}function cs(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n}function us(e,t){return e=ls(e,t),hl(e)&&!Q.isBogusAll(e)}function ds(e,t){return Q.isTable(ls(e,t))}function fs(e,t){return m.from(ls(e?0:-1,t)).filter(hl)}function ms(e,t,n){return t=_l(e,t,n),-1===e?g.fromRangeStart(t):g.fromRangeEnd(t)}function ps(e){return X.grep(e.childNodes,function(e){return"LI"===e.nodeName})}function hs(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&(" "===(e=e.firstChild).data||Q.isBr(e))}function gs(e){return 0<e.length&&Gl(e[e.length-1])?e.slice(0,-1):e}function vs(e,t){return(t=e.getParent(t,e.isBlock))&&"LI"===t.nodeName?t:null}function ys(e){return e=e.parentNode,tc(e)?ys(e):e}function bs(e){return e?y.reduce(e.childNodes,function(e,t){return tc(t)&&"BR"!==t.nodeName?e=e.concat(bs(t)):e.push(t),e},[]):[]}function ws(t){return function(e){return t===e}}function xs(e){var r,t=ec(e)?"text()":e.nodeName.toLowerCase();return t+"["+(r=bs(ys(t=e)),e=y.findIndex(r,ws(t),t),r=r.slice(0,e+1),e=y.reduce(r,function(e,t,n){return ec(t)&&ec(r[n-1])&&e++,e},0),r=y.filter(r,Q.matchNodeNames(t.nodeName)),y.findIndex(r,ws(t),t)-e)+"]"}function Cs(e,t,n,r,o){var i=r[o?"startContainer":"endContainer"],r=r[o?"startOffset":"endOffset"],a=[],o=0,s=e.getRoot();for(Q.isText(i)?a.push(n?function(e,t,n){for(var r=e(t.data.slice(0,n)).length,o=t.previousSibling;o&&Q.isText(o);o=o.previousSibling)r+=e(o.data).length;return r}(t,i,r):r):(r>=(t=i.childNodes).length&&t.length&&(o=1,r=Math.max(0,t.length-1)),a.push(e.nodeIndex(t[r],n)+o));i&&i!==s;i=i.parentNode)a.push(e.nodeIndex(i,n));return a}function ks(e,t){var n,r=e[(o=t?"start":"end")+"Container"],o=e[o+"Offset"];Q.isElement(r)&&"TR"===r.nodeName&&(r=(n=r.childNodes)[Math.min(t?o:o-1,n.length-1)])&&(o=t?0:r.childNodes.length,e["set"+(t?"Start":"End")](r,o))}function Ss(e,t){return Q.isElement(e)&&(e=Bi(e,t),ic(e))?e:qi(e)&&(t=(e=Q.isText(e)&&$i(e)?e.parentNode:e).previousSibling,ic(t)||(t=e.nextSibling,ic(t)))?t:void 0}function Ts(e,t,n){var r=n.getNode(),o=r?r.nodeName:null,i=n.getRng();return ic(r)||"IMG"===o?{name:o,index:lc(n.dom,o,r)}:(r=uc(i))?{name:o=r.tagName,index:lc(n.dom,o,r)}:ac(e,n,t,i)}function Es(e,t){var n=e.dom,r=e.getRng(),o=n.uniqueId(),i=e.isCollapsed(),a=e.getNode(),s=a.nodeName;return"IMG"===s?{name:s,index:lc(n,s,a)}:(s=cc(r.cloneRange()),i||(s.collapse(!1),a=dc(n,o+"_end",t),s.insertNode(a),sc(a.nextSibling)),(r=cc(r)).collapse(!0),i=dc(n,o+"_start",t),r.insertNode(i),sc(i.previousSibling),e.moveToBookmark({id:o,keep:1}),{id:o})}function Ns(e,t,n){return!(!1!==t.hasChildNodes()||!hc(e,t)||(e=n,t=(n=t).ownerDocument.createTextNode(h.ZWSP),n.appendChild(t),e.setStart(t,0),e.setEnd(t,0),0))}function Rs(e){return Q.isText(e)&&0<e.data.length}function _s(e){null!==(e=e.dom()).parentNode&&e.parentNode.removeChild(e)}var As,Ds,S=g,Ps=Q.isElement,Os=Q.isText,Is=function(e){var t=e.parentNode;t&&t.removeChild(e)},Bs=function(e,t){return Ma(e),t},Ms=function(e,t){var n=Ba(e.data.substr(0,t.offset())),r=Ba(e.data.substr(t.offset())),r=n.text+r.text;return 0<r.length?(Ia(e,r),S(e,t.offset()-n.count)):t},Ls=function(e,t){var n=t.container(),r=b.indexOf(b.from(n.childNodes),e).map(function(e){return e<t.offset()?S(n,t.offset()-1):t}).getOr(t);return Ma(e),r},Fs={removeAndReposition:function(e,t){return S.isTextPosition(t)?(r=t,(Os(n=e)&&r.container()===n?Ms:Bs)(n,r)):(n=e,((r=t).container()===n.parentNode?Ls:Bs)(n,r));var n,r},remove:Ma},Hs=function(e){return S.isTextPosition(e)?0===e.offset():_i(e.getNode())},zs=function(e){var t;return S.isTextPosition(e)?(t=e.container(),e.offset()===t.data.length):_i(e.getNode(!0))},Us=function(e,t){return!S.isTextPosition(e)&&!S.isTextPosition(t)&&e.getNode()===t.getNode(!0)},Ws=function(e){return!S.isTextPosition(e)&&Q.isBr(e.getNode())},$s=function(e,t,n){t=Vl(t);return m.from(e?t.next(n):t.prev(n))},k={fromPosition:$s,nextPosition:v.curry($s,!0),prevPosition:v.curry($s,!1),navigate:function(r,o,i){return $s(r,o,i).bind(function(e){return Tl(i,e,o)&&(t=i,n=e,r?!Us(t,n)&&!Ws(t)&&zs(t)&&Hs(n):!Us(n,t)&&Hs(t)&&zs(n))?$s(r,o,e):m.some(e);var t,n})},positionIn:La,firstPositionIn:v.curry(La,!0),lastPositionIn:v.curry(La,!1)},js=Q.isContentEditableTrue,qs=Q.isContentEditableFalse,Vs=function(e,t){return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?null:((t=(e=t).ownerDocument.createRange()).selectNode(e),t)},Ks=function(e,t,n){var t=_l(1,e.getBody(),t),t=S.fromRangeStart(t),r=t.getNode();return qs(r)?Fa(1,e,r,!t.isAtEnd(),!1):(r=t.getNode(!0),qs(r)?Fa(1,e,r,!1,!1):(r=e.dom.getParent(t.getNode(),function(e){return qs(e)||js(e)}),qs(r)?Fa(1,e,r,!1,n):null))},Ys=((t=As=As||{})[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol",v.curry(Ua,g.isAbove,-1)),Gs=v.curry(Ua,g.isBelow,1),Xs=v.curry(Wa,-1,Ys),Js=v.curry(Wa,1,Gs),Qs=function(e,t,n){return b.filter(u.parents(e,n),t)},Zs=function(e,t){return b.filter(u.siblings(e),t)},el=function(e,t){return b.filter(u.children(e),t)},tl={all:function(e){return so.all(e)},ancestors:function(e,t,n){return Qs(e,function(e){return so.is(e,t)},n)},siblings:function(e,t){return Zs(e,function(e){return so.is(e,t)})},children:function(e,t){return el(e,function(e){return so.is(e,t)})},descendants:function(e,t){return so.all(t,e)}},nl=function(e,t){return{left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t}},rl=v.curry(qa,function(e){return e.bottom},function(e,t){return e.y<t}),ol=v.curry(qa,function(e){return e.top},function(e,t){return e.y>t}),il={scrollElementIntoView:function(e,t,n){var r,o,i,a=e.dom,s=a.getRoot(),l=0;if(!function(e,t,n){t={elm:t,alignToTop:n};return e.fire("scrollIntoView",t),t.isDefaultPrevented()}(e,t,n)&&Q.isElement(t)){if(!1===n&&(l=t.offsetHeight),"BODY"!==s.nodeName){n=e.selection.getScrollContainer();if(n)return r=Ya(t).y-Ya(n).y+l,i=n.clientHeight,void((r<(o=n.scrollTop)||o+i<r+25)&&(n.scrollTop=r<o?r:r-i+25))}s=a.getViewPort(e.getWin()),r=a.getPos(t).y+l,o=s.y,i=s.h,(r<s.y||o+i<r+25)&&e.getWin().scrollTo(0,r<o?r:r-i+25)}},scrollRangeIntoView:function(r,e){b.head(g.fromRangeStart(e).getClientRects()).each(function(e){var t,n=(n=r).inline?n.getBody().getBoundingClientRect():{left:0,right:(n=n.getWin()).innerWidth,top:0,bottom:n.innerHeight,width:n.innerWidth,height:n.innerHeight},n={x:da(n=n,e=e),y:fa(n,e)};e=0!==n.x?0<n.x?n.x+4:n.x-4:0,n=0!==n.y?0<n.y?n.y+4:n.y-4:0,(t=r).inline?(t.getBody().scrollLeft+=e,t.getBody().scrollTop+=n):t.getWin().scrollBy(e,n)})}},T={getIframeAttrs:function(e){return e.getParam("iframe_attrs",{})},getDocType:function(e){return e.getParam("doctype","<!DOCTYPE html>")},getDocumentBaseUrl:function(e){return e.getParam("document_base_url","")},getBodyId:function(e){return Ga(e,"body_id","tinymce")},getBodyClass:function(e){return Ga(e,"body_class","")},getContentSecurityPolicy:function(e){return e.getParam("content_security_policy","")},shouldPutBrInPre:function(e){return e.getParam("br_in_pre",!0)},getForcedRootBlock:function(e){return e.getParam("force_p_newlines",!1)?"p":!1===(e=e.getParam("forced_root_block","p"))?"":e},getForcedRootBlockAttrs:function(e){return e.getParam("forced_root_block_attrs",{})},getBrNewLineSelector:function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},getNoNewLineSelector:function(e){return e.getParam("no_newline_selector","")},shouldKeepStyles:function(e){return e.getParam("keep_styles",!0)},shouldEndContainerOnEmptyBlock:function(e){return e.getParam("end_container_on_empty_block",!1)},getFontStyleValues:function(e){return X.explode(e.getParam("font_size_style_values",""))},getFontSizeClasses:function(e){return X.explode(e.getParam("font_size_classes",""))}},N={before:Xa,after:function(e,t){u.nextSibling(e).fold(function(){u.parent(e).each(function(e){Ja(e,t)})},function(e){Xa(e,t)})},prepend:function(t,n){u.firstChild(t).fold(function(){Ja(t,n)},function(e){t.dom().insertBefore(n.dom(),e.dom())})},append:Ja,appendAt:function(e,t,n){u.child(e,n).fold(function(){Ja(e,t)},function(e){Xa(e,t)})},wrap:function(e,t){Xa(e,t),Ja(t,e)}},al=kr.detect().browser,sl=ga.curry(es,Ys),ll=ga.curry(es,Gs),cl=function(t,n){return function(){return m.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(function(e){return m.from(t.dom.getParent(e,"table")).map(function(e){return ts(t,n,e)})}).getOr(!1)}},ul=function(n,r){return function(){return m.from(n.dom.getParent(n.selection.getNode(),"td,th")).bind(function(t){return m.from(n.dom.getParent(t,"table")).map(function(e){return os(n,r,e,t)})}).getOr(!1)}},dl=function(e){function t(){return n}var n=e;return{get:t,set:function(e){n=e},clone:function(){return dl(n)}}},fl=Q.isContentEditableFalse,ml=function(i,o,a){function s(){for(var e,t,n,r=G("*[contentEditable=false]",i),o=0;o<r.length;o++)t=(e=r[o]).previousSibling,Yi(t)&&(1===(n=t.data).length?t.parentNode.removeChild(t):t.deleteData(n.length-1,1)),t=e.nextSibling,Ki(t)&&(1===(n=t.data).length?t.parentNode.removeChild(t):t.deleteData(0,1));c&&(Fs.remove(c),c=null),u.get().each(function(e){G(e.caret).remove(),u.set(m.none())}),clearInterval(l)}var l,c,u=dl(m.none());return{show:function(t,e){var n,r;return s(),r=e,Q.isElement(r)&&/^(TD|TH)$/i.test(r.tagName)?null:(o(e)?(c=Ri("p",e,t),r=is(i,e,t),G(c).css("top",r.top),r=G('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(r).appendTo(i)[0],u.set(m.some({caret:r,element:e,before:t})),u.get().each(function(e){t&&G(e.caret).addClass("mce-visual-caret-before")}),l=tt.setInterval(function(){a()?G("div.mce-visual-caret",i).toggleClass("mce-visual-caret-hidden"):G("div.mce-visual-caret",i).addClass("mce-visual-caret-hidden")},500),(n=e.ownerDocument.createRange()).setStart(c,0),n.setEnd(c,0)):(c=function(e,t){var n,r=e.ownerDocument.createTextNode(h.ZWSP),o=e.parentNode;if(t){if(n=e.previousSibling,Wi(n)){if(qi(n))return n;if(Yi(n))return n.splitText(n.data.length-1)}o.insertBefore(r,e)}else{if(n=e.nextSibling,Wi(n)){if(qi(n))return n;if(Ki(n))return n.splitText(1),n}e.nextSibling?o.insertBefore(r,e.nextSibling):o.appendChild(r)}return r}(e,t),n=e.ownerDocument.createRange(),fl(c.nextSibling)?(n.setStart(c,0),n.setEnd(c,0)):(n.setStart(c,1),n.setEnd(c,1))),n)},hide:s,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){u.get().each(function(e){var t=is(i,e.element,e.before);G(e.caret).css(t)})},destroy:function(){return tt.clearInterval(l)}}},pl=function(e){return fl(e)||Q.isTable(e)&&Qa()},hl=Q.isContentEditableFalse,gl=Q.matchStyleValues("display","block table table-cell table-caption list-item"),vl=qi,yl=$i,bl=ga.curry,wl=Q.isElement,xl=_i,Cl=function(e){return 0<e},kl=function(e){return e<0},Sl=function(e,t,n,r,o){var i=new J(e,r);if(kl(t)){if((hl(e)||yl(e))&&n(e=as(i.prev,!0)))return e;for(;e=as(i.prev,o);)if(n(e))return e}if(Cl(t)){if((hl(e)||yl(e))&&n(e=as(i.next,!0)))return e;for(;e=as(i.next,o);)if(n(e))return e}return null},Tl=function(e,t,n){return ss(e.container(),n)===ss(t.container(),n)},El=function(e,t,n){for(var r,o,i,a=e?"previousSibling":"nextSibling";n&&n!==t;){if(r=n[a],vl(r)&&(r=r[a]),hl(r)){if(i=n,ss(r,o=t)===ss(i,o))return r;break}if(xl(r))break;n=n.parentNode}return null},Nl=bl(cs,!0),Rl=bl(cs,!1),_l=function(e,t,n){var r,o,i=bl(El,!0,t),t=bl(El,!1,t),a=n.startContainer,s=n.startOffset;if($i(a)){if("before"===(o=(a=wl(a)?a:a.parentNode).getAttribute("data-mce-caret"))&&(r=a.nextSibling,pl(r)))return Nl(r);if("after"===o&&(r=a.previousSibling,pl(r)))return Rl(r)}if(n.collapsed&&Q.isText(a)){if(vl(a)){if(1===e){if(r=t(a))return Nl(r);if(r=i(a))return Rl(r)}if(-1===e){if(r=i(a))return Rl(r);if(r=t(a))return Nl(r)}return n}if(Yi(a)&&s>=a.data.length-1)return 1===e&&(r=t(a))?Nl(r):n;if(Ki(a)&&s<=1)return-1===e&&(r=i(a))?Rl(r):n;if(s===a.data.length)return(r=t(a))?Nl(r):n;if(0===s)return(r=i(a))?Rl(r):n}return n},Al=bl(us,0),Dl=bl(us,-1),Pl=bl(ds,0),Ol=bl(ds,-1),Il=((wr=Ds=Ds||{})[wr.Backwards=-1]="Backwards",wr[wr.Forwards=1]="Forwards",Q.isContentEditableFalse),Bl=Q.isText,Ml=Q.isElement,Ll=Q.isBr,Fl=_i,Hl=function(e){return na(e)||!!aa(e=e)&&!0!==y.reduce(e.getElementsByTagName("*"),function(e,t){return e||Ji(t)},!1)},zl=sa,Ul=function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n},Wl=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},$l=function(e,t){if(Cl(e)){if(Fl(t.previousSibling)&&!Bl(t.previousSibling))return S.before(t);if(Bl(t))return S(t,0)}if(kl(e)){if(Fl(t.nextSibling)&&!Bl(t.nextSibling))return S.after(t);if(Bl(t))return S(t,t.data.length)}return!kl(e)||Ll(t)?S.before(t):S.after(t)},jl=function(e,t){var n;return!!Q.isBr(e)&&!!(n=ql(1,S.after(e),t))&&!Tl(S.before(e),S.before(n),t)},ql=function(e,t,n){var r,o,i,a;if(!Ml(n)||!t)return null;if(t.isEqual(S.after(n))&&n.lastChild){if(a=S.after(n.lastChild),kl(e)&&Fl(n.lastChild)&&Ml(n.lastChild))return Ll(n.lastChild)?S.before(n.lastChild):a}else a=t;var t=a.container(),s=a.offset();if(Bl(t)){if(kl(e)&&0<s)return S(t,--s);if(Cl(e)&&s<t.length)return S(t,++s);r=t}else{if(kl(e)&&0<s&&(o=Wl(t,s-1),Fl(o)))return!Hl(o)&&(i=Sl(o,e,zl,o))?Bl(i)?S(i,i.data.length):S.after(i):Bl(o)?S(o,o.data.length):S.before(o);if(Cl(e)&&s<t.childNodes.length&&(o=Wl(t,s),Fl(o)))return Ll(o)&&n.lastChild===o?null:jl(o,n)?ql(e,S.after(o),n):!Hl(o)&&(i=Sl(o,e,zl,o))?Bl(i)?S(i,0):S.before(i):Bl(o)?S(o,0):S.after(o);r=o||a.getNode()}return(Cl(e)&&a.isAtEnd()||kl(e)&&a.isAtStart())&&(r=Sl(r,e,ga.constant(!0),n,!0),zl(r,n))?$l(e,r):(o=Sl(r,e,zl,n),!(s=y.last(y.filter(Ul(t,n),Il)))||o&&s.contains(o)?o?$l(e,o):null:Cl(e)?S.after(s):S.before(s))},Vl=function(t){return{next:function(e){return ql(Ds.Forwards,e,t)},prev:function(e){return ql(Ds.Backwards,e,t)}}},Kl=function(e,t){return e.getBlockElements()[t.name]&&(e=t).firstChild&&e.firstChild===e.lastChild&&("br"===(e=t.firstChild).name||" "===e.value)},Yl=function(e){var t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e},Gl=function(e){return!e.firstChild||hs(e)},Xl=function(e,t){var n=t.cloneRange(),t=t.cloneRange();return n.setStartBefore(e),t.setEndAfter(e),[n.cloneContents(),t.cloneContents()]},Jl=function(e,t){e=S.before(e),t=Vl(t).next(e);return t?t.toRange():null},Ql=function(e,t){e=S.after(e),t=Vl(t).prev(e);return t?t.toRange():null},Zl={isListFragment:function(e,t){var n,r,o=t.firstChild,t=t.lastChild;return o&&"meta"===o.name&&(o=o.next),t&&"mce_marker"===t.attr("id")&&(t=t.prev),n=t,r=(e=e).getNonEmptyElements(),n&&(n.isEmpty(r)||Kl(e,n))&&(t=t.prev),!(!o||o!==t||"ul"!==o.name&&"ol"!==o.name)},insertAtCaret:function(e,r,o,t){function n(e){var t=S.fromRangeStart(o),n=Vl(r.getRoot());return!(e=1===e?n.prev(t):n.next(t))||vs(r,e.getNode())!==f}var i,a,s,l,c,u,d,e=function(e,t,n){t=t.serialize(n),n=e.createFragment(t);return Yl(n)}(r,e,t),f=vs(r,o.startContainer),t=gs(ps(e.firstChild)),e=r.getRoot();return n(1)?(a=e,s=(i=f).parentNode,X.each(t,function(e){s.insertBefore(e,i)}),Jl(i,a)):n(2)?(a=f,c=t,u=e,r.insertAfter(c.reverse(),a),Ql(c[0],u)):(c=t,u=e,t=Xl(l=f,t=o),(d=l.parentNode).insertBefore(t[0],l),X.each(c,function(e){d.insertBefore(e,l)}),d.insertBefore(t[1],l),d.removeChild(l),Ql(c[c.length-1],u))},isParentBlockLi:function(e,t){return!!vs(e,t)},trimListItems:gs,listItems:ps},ec=Q.isText,tc=Q.isBogus,nc=p.nodeIndex,rc=function(e,t){var n,r,o=[],i=t.container(),t=t.offset();return ec(i)?n=function(e,t){for(;(e=e.previousSibling)&&ec(e);)t+=e.data.length;return t}(i,t):(t>=(r=i.childNodes).length?(n="after",t=r.length-1):n="before",i=r[t]),o.push(xs(i)),r=function(e,t,n){var r=[];for(t=t.parentNode;t!==e&&(!n||!n(t));t=t.parentNode)r.push(t);return r}(e,i),r=y.filter(r,ga.negate(Q.isBogus)),(o=o.concat(y.map(r,xs))).reverse().join("/")+","+n},oc=function(e,t){var n;if(!t)return null;if(t=(n=t.split(","))[0].split("/"),n=1<n.length?n[1]:"before",!(t=y.reduce(t,function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),e=e,n=t[1],t=parseInt(t[2],10),r=bs(e),r=y.filter(r,function(e,t){return!ec(e)||!ec(r[t-1])}),(r=y.filter(r,Q.matchNodeNames(n)))[t]):null;var n,r},e)))return null;if(ec(t)){for(var r,o=t,i=parseInt(n,10),a=o,s=0;ec(a);){if(r=a.data.length,s<=i&&i<=s+r){o=a,i-=s;break}if(!ec(a.nextSibling)){o=a,i=r;break}s+=r,a=a.nextSibling}return ec(o)&&i>o.data.length&&(i=o.data.length),S(o,i)}return n="after"===n?nc(t)+1:nc(t),S(t.parentNode,n)},ic=Q.isContentEditableFalse,ac=function(e,t,n,r){var o=t.dom,i={};return i.start=Cs(o,e,n,r,!0),t.isCollapsed()||(i.end=Cs(o,e,n,r,!1)),i},sc=function(e){Q.isText(e)&&0===e.data.length&&e.parentNode.removeChild(e)},lc=function(e,t,n){var r=0;return X.each(e.select(t),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void r++}),r},cc=function(e){return ks(e,!0),ks(e,!1),e},uc=function(e){return Ss(e.startContainer,e.startOffset)||Ss(e.endContainer,e.endOffset)},dc=function(e,t,n){t={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",t,"&#xFEFF;"):e.create("span",t)},fc={getBookmark:function(e,t,n){return 2===t?Ts(h.trim,n,e):3===t?(r=(n=e).getRng(),{start:rc(n.dom.getRoot(),S.fromRangeStart(r)),end:rc(n.dom.getRoot(),S.fromRangeEnd(r))}):t?{rng:e.getRng()}:Es(e,!1);var r},getUndoBookmark:v.curry(Ts,v.identity,!0),getPersistentBookmark:Es},mc="_mce_caret",pc=function(e){return Q.isElement(e)&&e.id===mc},hc=function(e,t){for(;t&&t!==e;){if(t.id===mc)return t;t=t.parentNode}return null},gc=function(e,t){return!e.isBlock(t)||t.innerHTML||K.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t},vc=function(e,t,n,r){var o,i,a,s,l,c=n[t?"start":"end"],u=e.getRoot();if(c){for(n=c[0],i=u,o=c.length-1;1<=o;o--){if(a=i.childNodes,Ns(u,i,r))return!0;if(c[o]>a.length-1)return!!Ns(u,i,r)||(s=i,l=r,k.lastPositionIn(s).fold(function(){return!1},function(e){return l.setStart(e.container(),e.offset()),l.setEnd(e.container(),e.offset()),!0}));i=a[c[o]]}3===i.nodeType&&(n=Math.min(c[0],i.nodeValue.length)),1===i.nodeType&&(n=Math.min(c[0],i.childNodes.length)),t?r.setStart(i,n):r.setEnd(i,n)}return!0},yc=function(e,t,n){var r,o,i,a,s=e.get(n.id+"_"+t),l=n.keep;if(s){if(i=s.parentNode,a=(i=(r="start"===t?l?s.hasChildNodes()?(i=s.firstChild,1):Rs(s.nextSibling)?(i=s.nextSibling,0):Rs(s.previousSibling)?(i=s.previousSibling,s.previousSibling.data.length):(i=s.parentNode,e.nodeIndex(s)+1):e.nodeIndex(s):l?s.hasChildNodes()?(i=s.firstChild,1):Rs(s.previousSibling)?(i=s.previousSibling,s.previousSibling.data.length):(i=s.parentNode,e.nodeIndex(s)):e.nodeIndex(s),i),r),!l){for(l=s.previousSibling,o=s.nextSibling,X.each(X.grep(s.childNodes),function(e){Q.isText(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});s=e.get(n.id+"_"+t);)e.remove(s,!0);l&&o&&l.nodeType===o.nodeType&&Q.isText(l)&&!K.opera&&(r=l.nodeValue.length,l.appendData(o.nodeValue),e.remove(o),a=(i=l,r))}return m.some(S(i,a))}return m.none()},bc=function(e,t){return e.isSome()?e:t},wc=function(e,t){var n,r,o,i,a,s,l,e=e.dom;if(t){if(X.isArray(t.start))return s=t,l=(a=e).createRng(),vc(a,!0,s,l)&&vc(a,!1,s,l)?m.some(l):m.none();if("string"==typeof t.start)return m.some((a=t,l=(s=e).createRng(),i=oc(s.getRoot(),a.start),l.setStart(i.container(),i.offset()),i=oc(s.getRoot(),a.end),l.setEnd(i.container(),i.offset()),l));if(t.hasOwnProperty("id"))return o=yc(r=e,"start",i=t),i=yc(r,"end",i),va.liftN([o,bc(i,o)],function(e,t){var n=r.createRng();return n.setStart(gc(r,e.container()),e.offset()),n.setEnd(gc(r,t.container()),t.offset()),n});if(t.hasOwnProperty("name"))return n=e,o=t,m.from(n.select(o.name)[o.index]).map(function(e){var t=n.createRng();return t.selectNode(e),t});if(t.hasOwnProperty("rng"))return m.some(t.rng)}return m.none()},xc={getBookmark:function(e,t,n){return fc.getBookmark(e,t,n)},moveToBookmark:function(t,e){wc(t,e).each(function(e){t.setRng(e)})},isBookmarkNode:function(e){return Q.isElement(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")}},Cc=X.each,kc=function(o){this.compare=function(e,t){var n,r;return e.nodeName===t.nodeName&&!(!(r=function(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(void 0===(n=t[r]))return!1;if(e[r]!==n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0})((n=function(t){var n={};return Cc(o.getAttribs(t),function(e){e=e.nodeName.toLowerCase();0!==e.indexOf("_")&&"style"!==e&&0!==e.indexOf("data-")&&(n[e]=o.getAttrib(t,e))}),n})(e),n(t))||!r(o.parseStyle(o.getAttrib(e,"style")),o.parseStyle(o.getAttrib(t,"style")))||xc.isBookmarkNode(e)||xc.isBookmarkNode(t))}},Sc={before:function(t,e){b.each(e,function(e){N.before(t,e)})},after:function(n,r){b.each(r,function(e,t){t=0===t?n:r[t-1];N.after(t,e)})},prepend:function(t,e){b.each(e.slice().reverse(),function(e){N.prepend(t,e)})},append:function(t,e){b.each(e,function(e){N.append(t,e)})}},Tc={empty:function(e){e.dom().textContent="",b.each(u.children(e),function(e){_s(e)})},remove:_s,unwrap:function(e){var t=u.children(e);0<t.length&&Sc.before(e,t),_s(e)}};Ec=c.isText,Nc="text",be=kr.detect().browser;var Ec,Nc,Rc,_c={get:function(e){if(Ec(e))return Rc(e).getOr("");throw new Error("Can only get "+Nc+" value of a "+Nc+" node")},getOption:Rc=be.isIE()&&10===be.version.major?function(e){try{return Ac(e)}catch(e){return m.none()}}:Ac,set:function(e,t){if(!Ec(e))throw new Error("Can only set raw "+Nc+" value of a "+Nc+" node");e.dom().nodeValue=t}};function Ac(e){return Ec(e)?m.from(e.dom().nodeValue):m.none()}function Dc(e){return c.isText(e)?" "===Pc.get(e):Oo(e)}var Pc={get:function(e){return _c.get(e)},getOption:function(e){return _c.getOption(e)},set:function(e,t){_c.set(e,t)}},Oc={removeTrailingBr:function(e){var t=tl.descendants(e,"br"),e=b.filter(function(e){for(var t=[],n=e.dom();n;)t.push(z.fromDom(n)),n=n.lastChild;return t}(e).slice(-1),Oo);t.length===e.length&&b.each(e,Tc.remove)},fillWithPaddingBr:function(e){Tc.empty(e),N.append(e,z.fromHtml('<br data-mce-bogus="1">'))},isPaddedElement:function(e){return 1===b.filter(u.children(e),Dc).length},trimBlockTrailingBr:function(n){u.lastChild(n).each(function(t){u.prevSibling(t).each(function(e){Po(n)&&Oo(t)&&Po(e)&&Tc.remove(t)})})}},Ic=X.makeMap;function Bc(e){var s=[],l=(e=e||{}).indent,c=Ic(e.indent_before||""),u=Ic(e.indent_after||""),d=Qo.getEncodeFunc(e.entity_encoding||"raw",e.entities),f="html"===e.element_format;return{start:function(e,t,n){var r,o,i,a;if(l&&c[e]&&0<s.length&&0<(a=s[s.length-1]).length&&"\n"!==a&&s.push("\n"),s.push("<",e),t)for(r=0,o=t.length;r<o;r++)i=t[r],s.push(" ",i.name,'="',d(i.value,!0),'"');s[s.length]=!n||f?">":" />",n&&l&&u[e]&&0<s.length&&0<(a=s[s.length-1]).length&&"\n"!==a&&s.push("\n")},end:function(e){s.push("</",e,">"),l&&u[e]&&0<s.length&&0<(e=s[s.length-1]).length&&"\n"!==e&&s.push("\n")},text:function(e,t){0<e.length&&(s[s.length]=t?e:d(e))},cdata:function(e){s.push("<![CDATA[",e,"]]>")},comment:function(e){s.push("\x3c!--",e,"--\x3e")},pi:function(e,t){t?s.push("<?",e," ",d(t),"?>"):s.push("<?",e,"?>"),l&&s.push("\n")},doctype:function(e){s.push("<!DOCTYPE",e,">",l?"\n":"")},reset:function(){s.length=0},getContent:function(){return s.join("").replace(/\n$/,"")}}}function Mc(t,m){void 0===m&&(m=li());var p=Bc(t);(t=t||{}).validate=!("validate"in t)||t.validate;return{serialize:function(e){var u=t.validate,d={3:function(e){p.text(e.value,e.raw)},8:function(e){p.comment(e.value)},7:function(e){p.pi(e.name,e.value)},10:function(e){p.doctype(e.value)},4:function(e){p.cdata(e.value)},11:function(e){if(e=e.firstChild)for(;f(e),e=e.next;);}},f=(p.reset(),function(e){var t,n,r,o,i,a,s,l,c=d[e.type];if(c)c(e);else{if(c=e.name,t=e.shortEnded,n=e.attributes,u&&n&&1<n.length&&((i=[]).map={},l=m.getElementRule(e.name))){for(a=0,s=l.attributesOrder.length;a<s;a++)(r=l.attributesOrder[a])in n.map&&(o=n.map[r],i.map[r]=o,i.push({name:r,value:o}));for(a=0,s=n.length;a<s;a++)(r=n[a].name)in i.map||(o=n.map[r],i.map[r]=o,i.push({name:r,value:o}));n=i}if(p.start(e.name,n,t),!t){if(e=e.firstChild)for(;f(e),e=e.next;);p.end(c)}}});return 1!==e.type||t.inner?d[11](e):f(e),p.getContent()}}}function Lc(n,e,t){function r(e){function t(e){return n[e]&&3===n[e].nodeType}var n=(r=p.getRng()).startContainer,r=r.startOffset;return 3===n.nodeType&&(0<r?e=e.replace(/^&nbsp;/," "):t("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),r<n.length?e=e.replace(/&nbsp;(<br>|)$/," "):t("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}var o,i,a,s,l,c,u,d,f,m=n.schema.getTextInlineElements(),p=n.selection,h=n.dom;if(/^ | $/.test(e)&&(e=r(e)),o=n.parser,f=t.merge,i=Mc({validate:n.settings.validate},n.schema),d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',l={content:e,format:"html",selection:!0,paste:t.paste},(l=n.fire("BeforeSetContent",l)).isDefaultPrevented())n.fire("SetContent",{content:l.content,format:"html",selection:!0,paste:t.paste});else{-1===(e=l.content).indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,d);var g,v=(g=p.getRng()).startContainer||(g.parentElement?g.parentElement():null),y=n.getBody(),v=(v===y&&p.isCollapsed()&&h.isBlock(y.firstChild)&&(v=y.firstChild)&&!n.schema.getShortEndedElements()[v.nodeName]&&h.isEmpty(y.firstChild)&&((g=h.createRng()).setStart(y.firstChild,0),g.setEnd(y.firstChild,0),p.setRng(g)),p.isCollapsed()||(n.selection.setRng(Hc.normalize(n.selection.getRng())),n.getDoc().execCommand("Delete",!1,null),v=p.getRng(),y=v.startContainer,C=v.startOffset,3===y.nodeType&&v.collapsed&&(" "===y.data[C]?(y.deleteData(C,1),/[\u00a0| ]$/.test(e)||(e+=" ")):" "===y.data[C-1]&&(y.deleteData(C-1,1),/[\u00a0| ]$/.test(e)||(e=" "+e)))),{context:(a=p.getNode()).nodeName.toLowerCase(),data:t.data,insert:!0}),b=o.parse(e,v);if(!0===t.paste&&Zl.isListFragment(n.schema,b)&&Zl.isParentBlockLi(h,a))g=Zl.insertAtCaret(i,h,n.selection.getRng(),b),n.selection.setRng(g),n.fire("SetContent",l);else{for(var w,x,C,k=b;k=k.walk();)1===k.type&&k.attr("data-mce-fragment","1");if("mce_marker"===(u=b.lastChild).attr("id"))for(u=(c=u).prev;u;u=u.walk(!0))if(3===u.type||!h.isBlock(u.name)){n.schema.isValidChild(u.parent.name,"span")&&u.parent.insert(c,u,"br"===u.name);break}if(n._selectionOverrides.showBlockCaretContainer(a),v.invalid){for(p.setContent(d),a=p.getNode(),s=n.getBody(),9===a.nodeType?a=u=s:u=a;u!==s;)u=(a=u).parentNode;e=a===s?s.innerHTML:h.getOuterHTML(a),e=i.serialize(o.parse(e.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return i.serialize(b)}))),a===s?h.setHTML(s,e):h.setOuterHTML(a,e)}else e=i.serialize(b),Uc(n,e,a);f&&(w=n.getBody(),x=new kc(h),X.each(h.select("*[data-mce-fragment]"),function(e){for(var t=e.parentNode;t&&t!==w;t=t.parentNode)m[e.nodeName.toLowerCase()]&&x.compare(t,e)&&h.remove(e,!0)})),(y=h.get("mce_marker"))&&(p.scrollIntoView(y),(C=function(e){for(var t=n.getBody();e&&e!==t;e=e.parentNode)if("false"===n.dom.getContentEditable(e))return e;return null}(y))?(h.remove(y),p.select(C)):(g=h.createRng(),(u=y.previousSibling)&&3===u.nodeType?(g.setStart(u,u.nodeValue.length),K.ie||(t=y.nextSibling)&&3===t.nodeType&&(u.appendData(t.data),t.parentNode.removeChild(t))):(g.setStartBefore(y),g.setEndBefore(y)),C=h.getParent(y,h.isBlock),h.remove(y),C&&h.isEmpty(C)&&(n.$(C).empty(),g.setStart(C,0),g.setEnd(C,0),zc(C)||C.getAttribute("data-mce-fragment")||!(y=function(e){e=S.fromRangeStart(e);if(e=Vl(n.getBody()).next(e))return e.toRange()}(g))?h.add(C,h.create("br",{"data-mce-bogus":"1"})):(g=y,h.remove(C))),p.setRng(g))),v=n.getBody(),X.each(v.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")}),Wc(n.dom,n.selection.getStart()),n.fire("SetContent",l),n.addVisual()}}}var Fc=function(e,t,n,r){var o=document.createRange();return o.setStart(e,t),o.setEnd(n,r),o},Hc={normalize:function(e){return e.collapsed?e:(t=e,n=S.fromRangeStart(t),r=S.fromRangeEnd(t),o=t.commonAncestorContainer,k.fromPosition(!1,o,r).map(function(e){return!Tl(n,r,o)&&Tl(n,e,o)?Fc(n.container(),n.offset(),e.container(),e.offset()):t}).getOr(t));var t,n,r,o}},zc=Q.matchNodeNames("td th"),Uc=function(e,t,n){var r,o;"all"===n.getAttribute("data-mce-bogus")?n.parentNode.insertBefore(e.dom.createFragment(t),n):(r=n.firstChild,o=n.lastChild,!r||r===o&&"BR"===r.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t))},Wc=function(e,t){m.from(e.getParent(t,"td,th")).map(z.fromDom).each(Oc.trimBlockTrailingBr)},$c={insertAtCaret:function(e,t){var n="string"!=typeof(t=t)?(n=X.extend({paste:t.paste,data:{paste:t.paste}},t),{content:t.content,details:n}):{content:t,details:{}};Lc(e,n.content,n.details)}};function jc(e,t,n,r,o){return e(n,r)?m.some(n):l.isFunction(o)&&o(n)?m.none():t(n,r,o)}function qc(e,t,n){for(var r=e.dom(),o=l.isFunction(n)?n:v.constant(!1);r.parentNode;){var r=r.parentNode,i=z.fromDom(r);if(t(i))return m.some(i);if(o(i))break}return m.none()}function Vc(e,t){return b.find(e.dom().childNodes,v.compose(t,z.fromDom)).map(z.fromDom)}function Kc(e,r){function o(e){for(var t=0;t<e.childNodes.length;t++){if(r(z.fromDom(e.childNodes[t])))return m.some(z.fromDom(e.childNodes[t]));var n=o(e.childNodes[t]);if(n.isSome())return n}return m.none()}return o(e.dom())}function Yc(e){return e=l.isArray(e)?e.join(" "):e,e=b.map(l.isString(e)?e.split(" "):[],br),b.filter(e,function(e){return 0<e.length})}function Gc(e,t){return e.sections().hasOwnProperty(t)}function Xc(e,t,n,r){var n=Yc(n.forced_plugins),o=Yc(r.plugins),e=e&&Gc(t,"mobile")?b.filter(o,v.curry(b.contains,dd)):o,o=(t=e,[].concat(Yc(n)).concat(Yc(t)));return X.extend(r,{plugins:o.join(" ")})}function Jc(e,t,n){return m.from(t.settings[n]).filter(e)}function Qc(e,t,n,r){var o,i,a,s=t in e.settings?e.settings[t]:n;return"hash"===r?(a={},"string"==typeof(i=s)?b.each(0<i.indexOf("=")?i.split(/[;,](?![^=;,]*(?:[;,]|$))/):i.split(","),function(e){e=e.split("=");1<e.length?a[X.trim(e[0])]=X.trim(e[1]):a[X.trim(e[0])]=X.trim(e)}):a=i,a):"string"===r?Jc(l.isString,e,t).getOr(n):"number"===r?Jc(l.isNumber,e,t).getOr(n):"boolean"===r?Jc(l.isBoolean,e,t).getOr(n):"object"===r?Jc(l.isObject,e,t).getOr(n):"array"===r?Jc(l.isArray,e,t).getOr(n):"string[]"===r?Jc((o=l.isString,function(e){return l.isArray(e)&&b.forall(e,o)}),e,t).getOr(n):"function"===r?Jc(l.isFunction,e,t).getOr(n):s}function Zc(e,t){var n=t.container(),r=t.offset();return e?ji(n)?Q.isText(n.nextSibling)?S(n.nextSibling,0):S.after(n):Ei(t)?S(n,r+1):t:ji(n)?Q.isText(n.previousSibling)?S(n.previousSibling,n.previousSibling.data.length):S.before(n):Ni(t)?S(n,r-1):t}function eu(e,t,n){return ld.ancestor(e,function(e){return so.is(e,t)},n)}function tu(e,t){return Q.isText(t)&&/^[ \t\r\n]*$/.test(t.data)&&!1===function(e,t){e=z.fromDom(e),t=z.fromDom(t);return bd(t,"pre,code",v.curry(f.eq,e))}(e,t)}function nu(e,t,n){return f.contains(t,e)?u.parents(e,function(e){return n(e)||f.eq(e,t)}).slice(0,-1):[]}function ru(e,t){return nu(e,t,v.constant(!1))}function ou(n,r,o){var i;return Sd.isEmpty(o)?(Tc.remove(o),Sd.isEmpty(r)&&Oc.fillWithPaddingBr(r),k.firstPositionIn(r.dom())):(Bd(!0,r),Bd(!1,o),i=Id(r),Ld(r,o).fold(function(){Md(n,r);var e=k.lastPositionIn(o.dom());return b.each(i,function(e){N.append(o,e)}),e},function(t){var e=k.prevPosition(o.dom(),S.before(t.dom()));return b.each(i,function(e){N.before(t,e)}),Md(n,r),e}))}function iu(e,t){return t=z.fromDom(t),e=v.curry(f.eq,e),ld.ancestor(t,Ho,e).isSome()}function au(t,e,n,r){function o(e){return xo(z.fromDom(e))&&!Tl(n,r,t)}return fs(!e,n).fold(function(){return fs(e,r).fold(v.constant(!1),o)},o)}function su(e,t,n,r){var o=r.getNode(!1===t);return vd.getParentBlock(z.fromDom(e),z.fromDom(n.getNode())).map(function(e){return Sd.isEmpty(e)?jd.remove(e.dom()):jd.moveToElement(o)}).orThunk(function(){return m.some(jd.moveToElement(o))})}function lu(n,r,o){return k.fromPosition(r,n,o).bind(function(e){return t=e.getNode(),Ho(z.fromDom(t))||Mo(z.fromDom(t))||au(n,r,o,e)?m.none():r&&Q.isContentEditableFalse(e.getNode())||!1===r&&Q.isContentEditableFalse(e.getNode(!0))?su(n,r,o,e):r&&Dl(o)||!1===r&&Al(o)?m.some(jd.moveToPosition(e)):m.none();var t})}function cu(r,e,o){return function(e,t){t=t.getNode(!1===e),e=e?"after":"before";return Q.isElement(t)&&t.getAttribute("data-mce-caret")===e}(e,o)?(t=e,n=o.getNode(!1===e),(t&&Q.isContentEditableFalse(n.nextSibling)?m.some(jd.moveToElement(n.nextSibling)):!1===t&&Q.isContentEditableFalse(n.previousSibling)?m.some(jd.moveToElement(n.previousSibling)):m.none()).fold(function(){return lu(r,e,o)},m.some)):lu(r,e,o).bind(function(e){return t=r,n=o,e.fold(function(e){return m.some(jd.remove(e))},function(e){return m.some(jd.moveToElement(e))},function(e){return Tl(n,e,t)?m.none():m.some(jd.moveToPosition(e))});var t,n});var t,n}function uu(e){return _i(e.previousSibling)?m.some((t=e.previousSibling,Q.isText(t)?S(t,t.data.length):S.after(t))):e.previousSibling?k.lastPositionIn(e.previousSibling):m.none();var t}function du(e){return _i(e.nextSibling)?m.some((t=e.nextSibling,Q.isText(t)?S(t,0):S.before(t))):e.nextSibling?k.firstPositionIn(e.nextSibling):m.none();var t}function fu(r,o){return uu(o).orThunk(function(){return du(o)}).orThunk(function(){return e=r,t=o,n=S.before(t.previousSibling||t.parentNode),k.prevPosition(e,n).fold(function(){return k.nextPosition(e,S.after(t))},m.some);var e,t,n})}function mu(n,r){return du(r).orThunk(function(){return uu(r)}).orThunk(function(){return e=n,t=r,k.nextPosition(e,S.after(t)).fold(function(){return k.prevPosition(e,S.before(t))},m.some);var e,t})}function pu(t,n,e){e.fold(function(){t.focus()},function(e){t.selection.setRng(e.toRange(),n)})}function hu(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(c.name(t))}function gu(e){var t;return Sd.isEmpty(e)?(t=z.fromHtml('<br data-mce-bogus="1">'),Tc.empty(e),N.append(e,t),m.some(S.before(t.dom()))):m.none()}function vu(e,t){return Q.isText(e.container())?of(t,e.container()):of(t,e.getNode())}function yu(e,t){return(t=t.get())&&e.container()===t&&ji(t)}function bu(e,t,n){var r=R.normalizeForwards(n),o=df(t,r.container());return R.findRootInline(e,o,r).fold(function(){return k.nextPosition(o,r).bind(v.curry(R.findRootInline,e,o)).map(function(e){return uf.before(e)})},m.none)}function wu(e,t){return null===hc(e,t)}function xu(e,t,n){var r=R.normalizeBackwards(n);return ff(e,t,r).bind(function(e){return k.prevPosition(e,r).isNone()?m.some(uf.start(e)):m.none()})}function Cu(e,t,n){var r=R.normalizeForwards(n);return ff(e,t,r).bind(function(e){return k.nextPosition(e,r).isNone()?m.some(uf.end(e)):m.none()})}function ku(e,t,n){var r=R.normalizeBackwards(n),o=df(t,r.container());return R.findRootInline(e,o,r).fold(function(){return k.prevPosition(o,r).bind(v.curry(R.findRootInline,e,o)).map(function(e){return uf.after(e)})},m.none)}function Su(e){return e.fold(v.constant("before"),v.constant("start"),v.constant("end"),v.constant("after"))}function Tu(e,t){return e?t.fold(v.compose(m.some,uf.start),m.none,v.compose(m.some,uf.after),m.none):t.fold(m.none,v.compose(m.some,uf.before),m.none,v.compose(m.some,uf.end))}function Eu(e,a,s,l){var t=R.normalizePosition(e,l),c=pf(a,s,t);return pf(a,s,t).bind(v.curry(Tu,e)).orThunk(function(){return t=e,n=a,r=s,o=c,i=R.normalizePosition(t,l),k.fromPosition(t,r,i).map(v.curry(R.normalizePosition,t)).fold(function(){return o.map(gf)},function(e){return pf(n,r,e).map(v.curry(vf,t,n,r,i,e)).filter(v.curry(yf,o))}).filter(mf);var t,n,r,o,i})}function Nu(e){return l.isFunction(e.selection.getSel().modify)}function Ru(e,t,n){var r=e?1:-1;return t.setRng(S(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0}function _u(e){return!1!==e.settings.inline_boundaries}function Au(e,t,n){return function(){return!!_u(t)&&wf(e,t)}}function Du(e,t){return yd.closest(z.fromDom(e),"td,th",t)}function Pu(e,t){return yd.ancestor(e,"table",t)}function Ou(e){return!1===f.eq(e.start(),e.end())}function Iu(e){return tl.descendants(e,"td,th")}function Bu(r,e){var t=Du(e.startContainer,r),n=Du(e.endContainer,r);return e.collapsed?m.none():va.liftN([t,n],Af).fold(function(){return t.fold(function(){return n.bind(function(t){return Pu(t,r).bind(function(e){return b.head(Iu(e)).map(function(e){return Af(e,t)})})})},function(t){return Pu(t,r).bind(function(e){return b.last(Iu(e)).map(function(e){return Af(t,e)})})})},function(e){return Mu(r,e)?m.none():(n=r,Pu((t=e).start(),n).bind(function(e){return b.last(Iu(e)).map(function(e){return Af(t.start(),e)})}));var t,n})}function Mu(e,t){return If(t,e).isSome()}function Lu(e,t){return b.findIndex(e,function(e){return f.eq(e,t)})}function Fu(n){return Lf(n).map(function(e){var t=n.cells();return e.length===t.length?Pf.removeTable(n.table()):Pf.emptyCells(e)})}function Hu(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t}function zu(e){return b.filter(Hf.getSelectedNodes(e),Ho)}function Uu(e){return tl.descendants(e,"td[data-mce-selected],th[data-mce-selected]")}function Wu(e,t){return t=Uu(t),e=zu(e),0<t.length?t:e}function $u(e,t){return Yd.deleteElement(e,!1,t),!0}function ju(e,t){return b.find(Od.parentsAndSelf(t,e),Ho)}function qu(e,t){return Oc.fillWithPaddingBr(t),e.selection.setCursorLocation(t.dom(),0),m.some(!0)}function Vu(a,s,l,c,u){return k.navigate(l,a.getBody(),u).bind(function(e){return n=c,r=l,o=u,i=e,k.firstPositionIn(n.dom()).bind(function(t){return k.lastPositionIn(n.dom()).map(function(e){return r?o.isEqual(t)&&i.isEqual(e):o.isEqual(e)&&i.isEqual(t)})}).getOr(!0)?qf(a,c):(t=c,jf(s,z.fromDom(e.getNode())).map(function(e){return!1===f.eq(e,t)}));var t,n,r,o,i}).or(m.some(!0))}function Ku(e,t){e.getDoc().execCommand(t,!1,null)}function Yu(t,n,e){function r(e){return Mr.getRaw(e,t)}return ld.closest(z.fromDom(e),function(e){return r(e).isSome()},function(e){return f.eq(z.fromDom(n),e)}).bind(r)}function Gu(r){return function(n,e){return m.from(e).map(z.fromDom).filter(c.isElement).bind(function(e){return Yu(r,n,e.dom()).or((t=r,e=e.dom(),m.from(p.DOM.getStyle(e,t,!0))));var t}).getOr("")}}function Xu(e){return k.firstPositionIn(e.getBody()).map(function(e){e=e.container();return Q.isText(e)?e.parentNode:e})}function Ju(n){return m.from(n.selection.getRng()).bind(function(e){var t=n.getBody();return(e=e).startContainer===t&&0===e.startOffset?m.none():m.from(n.selection.getStart(!0))})}function Qu(e,t){var n,r;return/^[0-9\.]+$/.test(t)&&1<=(n=parseInt(t,10))&&n<=7?(r=T.getFontStyleValues(e),(e=T.getFontSizeClasses(e))?e[n-1]||t:r[n-1]||t):t}function Zu(e,t,n){return null!==function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(e,t,n)}function ed(e,t,n,r){var o,i,a=e.getRoot(),s=!1,l=r[(n?"start":"end")+"Container"],c=r[(n?"start":"end")+"Offset"],r=Q.isElement(l)&&c===l.childNodes.length,u=e.schema.getNonEmptyElements(),d=n;if(qi(l))return m.none();if(Q.isElement(l)&&c>l.childNodes.length-1&&(d=!1),Q.isDocument(l)&&(l=a,c=0),l===a){if(d&&(i=l.childNodes[0<c?c-1:0])){if(qi(i))return m.none();if(u[i.nodeName]||nm(i))return m.none()}if(l.hasChildNodes()){if(c=Math.min(!d&&0<c?c-1:c,l.childNodes.length-1),l=l.childNodes[c],c=Q.isText(l)&&r?l.data.length:0,!t&&l===a.lastChild&&nm(l))return m.none();if(am(a,l)||qi(l))return m.none();if(l.hasChildNodes()&&!1===nm(l)){o=new J(i=l,a);do{if(Q.isContentEditableFalse(i)||qi(i)){s=!1;break}if(Q.isText(i)&&0<i.nodeValue.length){c=d?0:i.nodeValue.length,l=i,s=!0;break}if(u[i.nodeName.toLowerCase()]&&!rm(i)){c=e.nodeIndex(i),l=i.parentNode,d||c++,s=!0;break}}while(i=d?o.next():o.prev())}}}return t&&(Q.isText(l)&&0===c&&sm(e,r,t,!0,l).each(function(e){l=e.container(),c=e.offset(),s=!0}),Q.isElement(l))&&(i=(i=l.childNodes[c])||l.childNodes[c-1])&&Q.isBr(i)&&!im(i,"A")&&!om(e,i,!1)&&!om(e,i,!0)&&sm(e,r,t,!0,i).each(function(e){l=e.container(),c=e.offset(),s=!0}),d&&!t&&Q.isText(l)&&c===l.nodeValue.length&&sm(e,r,t,!1,l).each(function(e){l=e.container(),c=e.offset(),s=!0}),s?m.some(g(l,c)):m.none()}function td(e){return e&&"A"===e.nodeName&&"href"in e}function nd(e,t){t.fold(v.noop,v.curry(fm,e),v.curry(mm,e),v.noop)}function rd(e){return bm.range(e.start(),xm(e.soffset(),e.start()),e.finish(),xm(e.foffset(),e.finish()))}function od(e){return!0===e.inline||wm.isIE()}function id(e){return bm.range(z.fromDom(e.startContainer),e.startOffset,z.fromDom(e.endContainer),e.endOffset)}function ad(e){var t=u.defaultView(e);return Sm(t.dom()).filter(km(e))}function sd(e){return(e.bookmark||m.none()).bind(v.curry(Tm,z.fromDom(e.getBody()))).bind(Em)}var ld={first:function(e){return Kc(Pr.body(),e)},ancestor:qc,closest:function(e,t,n){return jc(function(e){return t(e)},qc,e,t,n)},sibling:function(t,n){var e=t.dom();return e.parentNode?Vc(z.fromDom(e.parentNode),function(e){return!f.eq(t,e)&&n(e)}):m.none()},child:Vc,descendant:Kc},cd=n.immutable("sections","settings"),ud=kr.detect().deviceType.isTouch(),dd=["lists","autolink","autosave"],fd={theme:"mobile"},md=function(e,t,n){return{id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:t,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:n.convertURL,url_converter_scope:n,ie7_compat:!0}},pd=function(e,t,n,r){var o,i,r=function(n,e){e=Nr.bifilter(e,function(e,t){return b.contains(n,t)});return cd(e.t,e.f)}(["mobile"],r),t=X.extend(t,n,r.settings(),(t=e,i=(o=r).settings().inline,t&&Gc(o,"mobile")&&!i?function(e,t,n){e=e.sections(),e=e.hasOwnProperty(t)?e[t]:{};return X.extend({},n,e)}(r,"mobile",fd):{}),{validate:!0,content_editable:r.settings().inline,external_plugins:function(e,t){t=t.external_plugins||{};return e&&e.external_plugins?X.extend({},e.external_plugins,t):t}(n,r.settings())});return Xc(e,r,n,t)},hd=v.curry(Jc,l.isString),gd=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,R={isInlineTarget:function(e,t){e=hd(e,"inline_boundaries_selector").getOr("a[href],code");return so.is(z.fromDom(t),e)},findRootInline:function(e,t,n){e=e,t=t;n=b.filter(p.DOM.getParents(n.container(),"*",t),e);return m.from(n[n.length-1])},isRtl:function(e){return"rtl"===p.DOM.getStyle(e,"direction",!0)||(e=e.textContent,gd.test(e))},isAtZwsp:function(e){return Ei(e)||Ni(e)},normalizePosition:Zc,normalizeForwards:v.curry(Zc,!0),normalizeBackwards:v.curry(Zc,!1),hasSameParentBlock:function(e,t,n){t=ss(t,e),n=ss(n,e);return t&&t===n}},vd={getParentBlock:function(e,t){return f.contains(e,t)?ld.closest(t,function(e){return Io(e)||Mo(e)},(n=e,function(e){return f.eq(n,z.fromDom(e.dom().parentNode))})):m.none();var n},paddEmptyBody:function(e){var t;e.dom.isEmpty(e.getBody())&&(e.setContent(""),t=(t=(e=e).getBody()).firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t,e.selection.setCursorLocation(t,0))},willDeleteLastPositionInElement:function(o,i,a){return va.liftN([k.firstPositionIn(a),k.lastPositionIn(a)],function(e,t){var n=R.normalizePosition(!0,e),r=R.normalizePosition(!1,t),e=R.normalizePosition(!1,i);return(o?k.nextPosition(a,e).map(function(e){return e.isEqual(r)&&i.isEqual(n)}):k.prevPosition(a,e).map(function(e){return e.isEqual(n)&&i.isEqual(r)})).getOr(!1)}).getOr(!0)}},yd={first:function(e){return so.one(e)},ancestor:eu,sibling:function(e,t){return ld.sibling(e,function(e){return so.is(e,t)})},child:function(e,t){return ld.child(e,function(e){return so.is(e,t)})},descendant:function(e,t){return so.one(t,e)},closest:function(e,t,n){return jc(so.is,eu,e,t,n)}},bd=function(e,t,n){return yd.ancestor(e,t,n).isSome()},wd=function(e,t){return _i(t)&&!1===tu(e,t)||(e=t,Q.isElement(e)&&"A"===e.nodeName&&e.hasAttribute("name"))||xd(t)},xd=Q.hasAttribute("data-mce-bookmark"),Cd=Q.hasAttribute("data-mce-bogus"),kd=Q.hasAttributeValue("data-mce-bogus","all"),Sd={isEmpty:function(e){var t,n,r=e.dom(),o=0;if(wd(r,r))return!1;if(!(n=r.firstChild))return!0;t=new J(n,r);do{if(kd(n))n=t.next(!0);else{if(!Cd(n))if(Q.isBr(n))o++;else if(wd(r,n))return!1;n=t.next()}}while(n);return o<=1}},Td=n.immutable("block","position"),Ed=n.immutable("from","to"),Nd=function(e,t){var e=z.fromDom(e),n=z.fromDom(t.container());return vd.getParentBlock(e,n).map(function(e){return Td(e,t)})},Rd=function(e){return!1===f.eq(e.from().block(),e.to().block())},_d=function(e){return u.parent(e.from().block()).bind(function(t){return u.parent(e.to().block()).filter(function(e){return f.eq(t,e)})}).isSome()},Ad=function(e){return!1===Q.isContentEditableFalse(e.from().block())&&!1===Q.isContentEditableFalse(e.to().block())},Dd=function(t,n,r){return Q.isBr(r.position().getNode())&&!1===Sd.isEmpty(r.block())?k.positionIn(!1,r.block().dom()).bind(function(e){return e.isEqual(r.position())?k.fromPosition(n,t,e).bind(function(e){return Nd(t,e)}):m.some(r)}).getOr(r):r},Pd=function(e,t,n){return n.collapsed?(o=t,t=n,t=Nd(r=e,S.fromRangeStart(t)),n=t.bind(function(e){return k.fromPosition(o,r,e.position()).bind(function(e){return Nd(r,e).map(function(e){return Dd(r,o,e)})})}),va.liftN([t,n],Ed).filter(function(e){return Rd(e)&&_d(e)&&Ad(e)})):m.none();var r,o},Od={parentsUntil:nu,parents:ru,parentsAndSelf:function(e,t){return[e].concat(ru(e,t))}},Id=function(e){t=u.children(e);var t,e=b.findIndex(t,Po).fold(function(){return t},function(e){return t.slice(0,e)});return b.each(e,function(e){Tc.remove(e)}),e},Bd=function(e,t){k.positionIn(e,t.dom()).each(function(e){e=e.getNode();Q.isBr(e)&&Tc.remove(z.fromDom(e))})},Md=function(e,t){t=Od.parentsAndSelf(t,e);return b.find(t.reverse(),Sd.isEmpty).each(Tc.remove)},Ld=function(n,r){return f.contains(r,n)?u.parent(n).bind(function(e){var t;return f.eq(e,r)?m.some(n):(t=r,e=n,e=u.parents(e,function(e){return f.eq(e,t)}),m.from(e[e.length-2]))}):m.none()},Fd=function(e,t,n,r){return t?ou(e,r,n):ou(e,n,r)},Hd={backspaceDelete:function(t,n){var r=z.fromDom(t.getBody()),e=Pd(r.dom(),n,t.selection.getRng()).bind(function(e){return Fd(r,n,e.from().block(),e.to().block())});return e.each(function(e){t.selection.setRng(e.toRange())}),e.isSome()}},zd=function(n,r){var o=r.getRng();return va.liftN([vd.getParentBlock(n,z.fromDom(o.startContainer)),vd.getParentBlock(n,z.fromDom(o.endContainer))],function(e,t){return!1===f.eq(e,t)&&(o.deleteContents(),Fd(n,!0,e,t).each(function(e){r.setRng(e.toRange())}),!0)}).getOr(!1)},Ud=function(e,t){var n=k.prevPosition(e.dom(),S.fromRangeStart(t)).isNone(),r=k.nextPosition(e.dom(),S.fromRangeEnd(t)).isNone();return!(iu(e=e,(t=t).startContainer)||iu(e,t.endContainer))&&n&&r},Wd=function(e){return e.setContent(""),e.selection.setCursorLocation(),!0},$d={backspaceDelete:function(e,t){return!e.selection.isCollapsed()&&(e=e,n=z.fromDom(e.getBody()),r=e.selection.getRng(),Ud(n,r)?Wd(e):zd(n,e.selection));var n,r}},xe=function(a){if(!l.isArray(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");var s=[],n={};return b.each(a,function(e,r){var t=Nr.keys(e);if(1!==t.length)throw new Error("one and only one name per case");var o=t[0],i=e[o];if(void 0!==n[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!l.isArray(i))throw new Error("case arguments must be an array");s.push(o),n[o]=function(){var e=arguments.length;if(e!==i.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+i.length+" ("+i+"), got "+e);for(var n=new Array(e),t=0;t<n.length;t++)n[t]=arguments[t];return{fold:function(){if(arguments.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+arguments.length);return arguments[r].apply(null,n)},match:function(e){var t=Nr.keys(e);if(s.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+"\nActual: "+t.join(","));if(b.forall(s,function(e){return b.contains(t,e)}))return e[o].apply(null,n);throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+s.join(", "))},log:function(e){console.log(e,{constructors:s,constructor:o,params:n})}}}}),n},jd=xe([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),qd=function(e,t,n){n=_l(t?1:-1,e,n),n=S.fromRangeStart(n);return!1===t&&Dl(n)?m.some(jd.remove(n.getNode(!0))):t&&Al(n)?m.some(jd.remove(n.getNode())):cu(e,t,n)},Vd=function(e,t){return e=e,r=(n=t).container(),o=n.offset(),!1===S.isTextPosition(n)&&r===e.parentNode&&o>S.before(e).offset()?S(t.container(),t.offset()-1):t;var n,r,o},Kd=function(e,t,n){return(e?mu:fu)(t,n)},Yd={deleteElement:function(t,n,e){s=n,l=t.getBody(),r=e.dom();var r,o,i,a,s=Kd(s,l,r).map(v.curry(Vd,r)),l=ld.ancestor(e,v.curry(hu,t),(o=t.getBody(),function(e){return e.dom()===o})),c=(i=e,a=s,va.liftN([u.prevSibling(i),u.nextSibling(i),a],function(e,t,n){var r,e=e.dom(),o=t.dom();return Q.isText(e)&&Q.isText(o)?(r=e.data.length,e.appendData(o.data),Tc.remove(t),Tc.remove(i),n.container()===o?S(e,r):n):(Tc.remove(i),n)}).orThunk(function(){return Tc.remove(i),a}));t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):l.bind(gu).fold(function(){pu(t,n,c)},function(e){pu(t,n,m.some(e))})}},Gd=function(t,n){return function(e){return t._selectionOverrides.hideFakeCaret(),Yd.deleteElement(t,n,z.fromDom(e)),!0}},Xd=function(t,n){return function(e){e=n?S.before(e):S.after(e);return t.selection.setRng(e.toRange()),!0}},Jd=function(t){return function(e){return t.selection.setRng(e.toRange()),!0}},Qd=function(e){b.each(tl.descendants(e,".mce-offscreen-selection"),Tc.remove)},Zd={backspaceDelete:function(e,t){return e.selection.isCollapsed()?(o=t,qd((r=e).getBody(),o,r.selection.getRng()).map(function(e){return e.fold(Gd(r,o),Xd(r,o),Jd(r))}).getOr(!1)):(t=t,n=(e=e).selection.getNode(),!!Q.isContentEditableFalse(n)&&(Qd(z.fromDom(e.getBody())),Yd.deleteElement(e,t,z.fromDom(e.selection.getNode())),vd.paddEmptyBody(e),!0));var n,r,o},paddEmptyElement:function(e){var t,n=function(e,t){for(;t&&t!==e;){if(Q.isContentEditableTrue(t)||Q.isContentEditableFalse(t))return t;t=t.parentNode}return null}(e.getBody(),e.selection.getNode());return Q.isContentEditableTrue(n)&&e.dom.isBlock(n)&&e.dom.isEmpty(n)&&(t=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(n,""),n.appendChild(t),e.selection.setRng(S.before(t).toRange())),!0}},ef=Q.isText,tf=function(e){return ef(e)&&e.data[0]===h.ZWSP},nf=function(e){return ef(e)&&e.data[e.data.length-1]===h.ZWSP},rf=function(e){return e.ownerDocument.createTextNode(h.ZWSP)},of=function(e,t){return e?ef((e=t).previousSibling)?(nf(e.previousSibling)||e.previousSibling.appendData(h.ZWSP),e.previousSibling):ef(e)?(tf(e)||e.insertData(0,h.ZWSP),e):(n=rf(e),e.parentNode.insertBefore(n,e),n):ef((e=t).nextSibling)?(tf(e.nextSibling)||e.nextSibling.insertData(0,h.ZWSP),e.nextSibling):ef(e)?(nf(e)||e.appendData(h.ZWSP),e):(n=rf(e),e.nextSibling?e.parentNode.insertBefore(n,e.nextSibling):e.parentNode.appendChild(n),n);var n},af=v.curry(of,!0),sf=v.curry(of,!1),lf=function(t,e){return e.fold(function(e){Fs.remove(t.get());e=af(e);return t.set(e),m.some(S(e,e.length-1))},function(e){return k.firstPositionIn(e).map(function(e){return yu(e,t)?S(t.get(),1):(Fs.remove(t.get()),e=vu(e,!0),t.set(e),S(e,1))})},function(e){return k.lastPositionIn(e).map(function(e){return yu(e,t)?S(t.get(),t.get().length-1):(Fs.remove(t.get()),e=vu(e,!1),t.set(e),S(e,e.length-1))})},function(e){Fs.remove(t.get());e=sf(e);return t.set(e),m.some(S(e,1))})},cf=function(e,t){for(var n=0;n<e.length;n++){var r=e[n].apply(null,t);if(r.isSome())return r}return m.none()},uf=xe([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),df=function(e,t){t=ss(t,e);return t||e},ff=function(e,t,n){return R.findRootInline(e,t,n).filter(v.curry(wu,t))},mf=function(e){return!1===R.isRtl(hf(e))},pf=function(e,t,n){return cf([bu,xu,Cu,ku],[e,t,n]).filter(mf)},hf=function(e){return e.fold(v.identity,v.identity,v.identity,v.identity)},gf=function(e){return e.fold(uf.before,uf.before,uf.after,uf.after)},vf=function(n,e,r,t,o,i){return va.liftN([R.findRootInline(e,r,t),R.findRootInline(e,r,o)],function(e,t){return e!==t&&R.hasSameParentBlock(r,e,t)?uf.after(n?e:t):i}).getOr(i)},yf=function(e,n){return e.fold(v.constant(!0),function(e){return t=n,!(Su(e=e)===Su(t)&&hf(e)===hf(t));var t})},bf={readLocation:pf,findLocation:Eu,prevLocation:v.curry(Eu,!1),nextLocation:v.curry(Eu,!0),getElement:hf,outside:gf,inside:function(e){return e.fold(uf.start,uf.start,uf.end,uf.end)}},wf=function(e,t){var n=t.selection.getRng(),n=e?S.fromRangeEnd(n):S.fromRangeStart(n);return!!Nu(t)&&(e&&Ei(n)?Ru(!0,t.selection,n):!(e||!Ni(n))&&Ru(!1,t.selection,n))},xf=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},Cf=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},kf=function(t,e,n){return lf(e,n).map(function(e){return xf(t,e),n})},Sf={move:function(a,s,l){return function(){return!!_u(a)&&(n=s,e=l,r=(t=a).getBody(),o=S.fromRangeStart(t.selection.getRng()),i=v.curry(R.isInlineTarget,t),bf.findLocation(e,i,r,o).bind(function(e){return kf(t,n,e)}).isSome());var t,n,e,r,o,i}},moveNextWord:v.curry(Au,!0),movePrevWord:v.curry(Au,!1),setupSelectedState:function(s){var l=dl(null),c=v.curry(R.isInlineTarget,s);return s.on("NodeChange",function(e){var n,r,o,t,i,a;_u(s)&&(i=c,a=s.dom,t=e.parents,a=b.filter(a.select('*[data-mce-selected="inline-boundary"]'),i),t=b.filter(t,i),b.each(b.difference(a,t),v.curry(Cf,!1)),b.each(b.difference(t,a),v.curry(Cf,!0)),i=l,(t=s).selection.isCollapsed()&&!0!==t.composing&&i.get()&&(a=S.fromRangeStart(t.selection.getRng()),S.isTextPosition(a))&&!1===R.isAtZwsp(a)&&(xf(t,Fs.removeAndReposition(i.get(),a)),i.set(null)),n=c,r=s,o=l,t=e.parents,r.selection.isCollapsed())&&(t=b.filter(t,n),b.each(t,function(e){var t=S.fromRangeStart(r.selection.getRng());bf.readLocation(n,r.getBody(),t).bind(function(e){return kf(r,o,e)})}))}),l},setCaretPosition:xf},Tf=function(r){return va.liftN([k.firstPositionIn(r),k.lastPositionIn(r)],function(e,t){var e=R.normalizePosition(!0,e),n=R.normalizePosition(!1,t);return k.nextPosition(r,e).map(function(e){return e.isEqual(n)}).getOr(!0)}).getOr(!0)},Ef=function(t,n){return function(e){return lf(n,e).map(function(e){return Sf.setCaretPosition(t,e),!0}).getOr(!1)}},Nf=function(r,o,i,a){var s=r.getBody(),l=v.curry(R.isInlineTarget,r);r.undoManager.ignore(function(){var e,t,n;r.selection.setRng((e=i,t=a,(n=document.createRange()).setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n)),r.execCommand("Delete"),bf.readLocation(l,s,S.fromRangeStart(r.selection.getRng())).map(bf.inside).map(Ef(r,o))}),r.nodeChanged()},Rf=function(e,t){t=ss(t,e);return t||e},_f={backspaceDelete:function(e,t,n){var r,o,i,a,s,l,c,u;return!(!e.selection.isCollapsed()||!1===e.settings.inline_boundaries)&&(r=S.fromRangeStart(e.selection.getRng()),i=t,a=n,s=r,l=Rf((o=e).getBody(),s.container()),c=v.curry(R.isInlineTarget,o),(u=bf.readLocation(c,l,s)).bind(function(e){return a?e.fold(v.constant(m.some(bf.inside(e))),m.none,v.constant(m.some(bf.outside(e))),m.none):e.fold(m.none,v.constant(m.some(bf.outside(e))),m.none,v.constant(m.some(bf.inside(e))))}).map(Ef(o,i)).getOrThunk(function(){var t=k.navigate(a,l,s),e=t.bind(function(e){return bf.readLocation(c,l,e)});return(u.isSome()&&e.isSome()?R.findRootInline(c,l,s).map(function(e){return!!Tf(e)&&(Yd.deleteElement(o,a,z.fromDom(e)),!0)}):e.bind(function(e){return t.map(function(e){return a?Nf(o,i,s,e):Nf(o,i,e,s),!0})})).getOr(!1)}))}},Af=n.immutable("start","end"),Df=n.immutable("rng","table","cells"),Pf=xe([{removeTable:["element"]},{emptyCells:["cells"]}]),Of=function(e){return v.curry(f.eq,e)},If=function(e,n){return Pu(e.start(),n).bind(function(t){return Pu(e.end(),n).bind(function(e){return f.eq(t,e)?m.some(t):m.none()})})},Bf=function(e,t){var n=Du(e.startContainer,t),r=Du(e.endContainer,t);return va.liftN([n,r],Af).filter(Ou).filter(function(e){return Mu(t,e)}).orThunk(function(){return Bu(t,e)})},Mf=function(t,e){return If(t,e).map(function(e){return Df(t,e,Iu(e))})},Lf=function(n){return va.liftN([Lu(n.cells(),n.rng().start()),Lu(n.cells(),n.rng().end())],function(e,t){return n.cells().slice(e,t+1)})},Ff=function(e,t){return t=t,n=Of(e),Bf(t,n).bind(function(e){return Mf(e,n)}).bind(Fu);var n},Hf={getRanges:Hu,getSelectedNodes:function(e){return b.bind(e,function(e){e=Ii(e);return e?[z.fromDom(e)]:[]})},hasMultipleRanges:function(e){return 1<Hu(e).length}},zf={getCellsFromRanges:zu,getCellsFromElement:Uu,getCellsFromElementOrRanges:Wu,getCellsFromEditor:function(e){return Wu(Hf.getRanges(e.selection.getSel()),z.fromDom(e.getBody()))}},Uf=function(e,t){return b.each(t,Oc.fillWithPaddingBr),e.selection.setCursorLocation(t[0].dom(),0),!0},Wf=qu,$f=function(n,e,r,t){return jf(e,t).fold(function(){return t=n,Ff(e,r).map(function(e){return e.fold(v.curry($u,t),v.curry(Uf,t))});var t},function(e){return Wf(n,e)}).getOr(!1)},jf=function(e,t){return b.find(Od.parentsAndSelf(t,e),function(e){return"caption"===c.name(e)})},qf=qu,Vf=function(r,o,i,e){var a=S.fromRangeStart(r.selection.getRng());return ju(i,e).bind(function(e){return Sd.isEmpty(e)?qu(r,e):(t=i,n=e,e=a,k.navigate(o,r.getBody(),e).bind(function(e){return ju(t,z.fromDom(e.getNode())).map(function(e){return!1===f.eq(e,n)})}));var t,n})},Kf=function(e,t,n,r){var o=S.fromRangeStart(e.selection.getRng());return Sd.isEmpty(r)?qu(e,r):Vu(e,n,t,r,o)},Yf={backspaceDelete:function(e,t){var n,r,o,i,a,s=z.fromDom(e.selection.getStart(!0)),l=zf.getCellsFromEditor(e);return e.selection.isCollapsed()&&0===l.length?(r=e,o=t,i=s,a=z.fromDom(r.getBody()),jf(a,i).fold(function(){return Vf(r,o,a,i)},function(e){return Kf(r,o,a,e)}).getOr(!1)):(l=e,t=s,e=z.fromDom(l.getBody()),s=l.selection.getRng(),0!==(n=zf.getCellsFromEditor(l)).length?Uf(l,n):$f(l,e,s,t))}},Gf={deleteCommand:function(e){Zd.backspaceDelete(e,!1)||_f.backspaceDelete(e,!1)||Hd.backspaceDelete(e,!1)||Yf.backspaceDelete(e)||$d.backspaceDelete(e,!1)||(Ku(e,"Delete"),vd.paddEmptyBody(e))},forwardDeleteCommand:function(e){Zd.backspaceDelete(e,!0)||_f.backspaceDelete(e,!0)||Hd.backspaceDelete(e,!0)||Yf.backspaceDelete(e)||$d.backspaceDelete(e,!0)||Ku(e,"ForwardDelete")}},Xf={getFontSize:Gu("font-size"),getFontFamily:v.compose(function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},Gu("font-family")),toPt:function(e,t){return/[0-9.]+px$/.test(e)?function(e,t){t=Math.pow(10,t);return Math.round(e*t)/t}(72*parseInt(e,10)/96,t||0)+"pt":e}},Jf=function(e,t){e.formatter.toggle("fontname",{value:Qu(e,t)}),e.nodeChanged()},Qf=function(t){return Ju(t).fold(function(){return Xu(t).map(function(e){return Xf.getFontFamily(t.getBody(),e)}).getOr("")},function(e){return Xf.getFontFamily(t.getBody(),e)})},Zf=function(e,t){e.formatter.toggle("fontsize",{value:Qu(e,t)}),e.nodeChanged()},em=function(t){return Ju(t).fold(function(){return Xu(t).map(function(e){return Xf.getFontSize(t.getBody(),e)}).getOr("")},function(e){return Xf.getFontSize(t.getBody(),e)})},tm={isEq:function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}},nm=function(e){return e&&"TABLE"===e.nodeName},rm=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},om=function(e,t,n){for(var r=new J(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=r[n?"prev":"next"]();)if(Q.isBr(t))return!0},im=function(e,t){return e.previousSibling&&e.previousSibling.nodeName===t},am=function(e,t){for(;t&&t!==e;){if(Q.isContentEditableFalse(t))return!0;t=t.parentNode}return!1},sm=function(e,t,n,r,o){var i,a,s,l,c,u=e.getRoot(),d=e.schema.getNonEmptyElements(),f=e.getParent(o.parentNode,e.isBlock)||u;if(r&&Q.isBr(o)&&t&&e.isEmpty(f))return m.some(g(o.parentNode,e.nodeIndex(o)));for(i=new J(o,f);s=i[r?"prev":"next"]();){if("false"===e.getContentEditableParent(s)||(c=u,qi(l=s)&&!1===Zu(l,c,pc)))return m.none();if(Q.isText(s)&&0<s.nodeValue.length)return!1===function(e,t,n){return Zu(e,t,function(e){return e.nodeName===n})}(s,u,"A")?m.some(g(s,r?s.nodeValue.length:0)):m.none();if(e.isBlock(s)||d[s.nodeName.toLowerCase()])return m.none();a=s}return n&&a?m.some(g(a,0)):m.none()},lm={normalize:function(e,t){var n=t.collapsed,r=t.cloneRange(),o=g.fromRangeStart(t);return ed(e,n,!0,r).each(function(e){n&&g.isAbove(o,e)||r.setStart(e.container(),e.offset())}),n||ed(e,n,!1,r).each(function(e){r.setEnd(e.container(),e.offset())}),n&&r.collapse(!0),tm.isEq(t,r)?m.none():m.some(r)}},cm=function(e,t,n){for(var r,o=new J(t,n),i=e.getNonEmptyElements();r=o.next();)if(i[r.nodeName.toLowerCase()]||0<r.length)return!0},um=function(e,t,n){var r=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(r,n),t.scrollIntoView(r),e.remove(r)},dm=function(e,t,n,r){e=e.createRng();r?(e.setStartBefore(n),e.setEndBefore(n)):(e.setStartAfter(n),e.setEndAfter(n)),t.setRng(e)},fm=function(e,t){var n=z.fromTag("br");N.before(z.fromDom(t),n),e.undoManager.add()},mm=function(e,t){!function(e,t){if(pm(S.after(t)))return true;else return k.nextPosition(e,S.after(t)).map(function(e){return Q.isBr(e.getNode())}).getOr(false)}(e.getBody(),t)&&N.after(z.fromDom(t),z.fromTag("br"));var n=z.fromTag("br");N.after(z.fromDom(t),n),um(e.dom,e.selection,n.dom()),dm(e.dom,e.selection,n.dom(),!1),e.undoManager.add()},pm=function(e){return Q.isBr(e.getNode())},hm=function(e){return e.fold(v.constant(!1),td,td,v.constant(!1))},gm={insert:function(e,t){r=e,d=v.curry(R.isInlineTarget,r),n=S.fromRangeStart(r.selection.getRng());var n,r,o,i,a,s,l,c,u,d=bf.readLocation(d,r.getBody(),n).filter(hm);d.isSome()?d.each(v.curry(nd,e)):(r=t,d=(n=e).selection,t=n.dom,a=d.getRng(),lm.normalize(t,a).each(function(e){a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)}),e=a.startOffset,1===(s=a.startContainer).nodeType&&s.hasChildNodes()&&(l=e>s.childNodes.length-1,s=s.childNodes[Math.min(e,s.childNodes.length-1)]||s,e=l&&3===s.nodeType?s.nodeValue.length:0),l=t.getParent(s,t.isBlock),c=l?t.getParent(l.parentNode,t.isBlock):null,u=c?c.nodeName.toUpperCase():"",r=r&&r.ctrlKey,"LI"!==u||r||(l=c),s&&3===s.nodeType&&e>=s.nodeValue.length&&(cm(n.schema,s,l)||(o=t.create("br"),a.insertNode(o),a.setStartAfter(o),a.setEndAfter(o),i=!0)),o=t.create("br"),a.insertNode(o),um(t,d,o),dm(t,d,o,i),n.undoManager.add())}},Ce=xe([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),vm={before:Ce.before,on:Ce.on,after:Ce.after,cata:function(e,t,n,r){return e.fold(t,n,r)},getStart:function(e){return e.fold(v.identity,v.identity,v.identity)}},ym=xe([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),e=n.immutable("start","soffset","finish","foffset"),bm={domRange:ym.domRange,relative:ym.relative,exact:ym.exact,exactFromRange:function(e){return ym.exact(e.start(),e.soffset(),e.finish(),e.foffset())},range:e,getWin:function(e){e=e.match({domRange:function(e){return z.fromDom(e.startContainer)},relative:function(e,t){return vm.getStart(e)},exact:function(e,t,n,r){return e}});return u.defaultView(e)}},wm=kr.detect().browser,xm=function(e,t){t=c.isText(t)?Pc.get(t).length:u.children(t).length+1;return t<e?t:e<0?0:e},Cm=function(e,t){return f.contains(e,t)||f.eq(e,t)},km=function(t){return function(e){return Cm(t,e.start())&&Cm(t,e.finish())}},Sm=function(e){e=e.getSelection();return(e&&0!==e.rangeCount?m.from(e.getRangeAt(0)):m.none()).map(id)},Tm=function(e,t){return m.from(t).filter(km(e)).map(rd)},Em=function(e){var t=document.createRange();try{return t.setStart(e.start().dom(),e.soffset()),t.setEnd(e.finish().dom(),e.foffset()),m.some(t)}catch(e){return m.none()}},Nm={store:function(e){var t=od(e)?ad(z.fromDom(e.getBody())):m.none();e.bookmark=t.isSome()?t:e.bookmark},storeNative:function(e,t){var n=z.fromDom(e.getBody()),t=(od(e)?m.from(t):m.none()).map(id).filter(km(n));e.bookmark=t.isSome()?t:e.bookmark},readRange:Sm,restore:function(t){sd(t).each(function(e){t.selection.setRng(e)})},getRng:sd,getBookmark:ad,validate:Tm},Rm=function(e,s){var t=e.settings,l=e.dom,n=e.selection,r=e.formatter,c=/[a-z%]+$/i.exec(t.indentation)[0],u=parseInt(t.indentation,10),d=e.getParam("indent_use_margin",!1);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||(t.forced_root_block||l.getParent(n.getNode(),l.isBlock)||r.apply("div"),b.each(n.getSelectedBlocks(),function(e){var t,n,r,o,i,a;n=s,r=d,o=u,i=c,e=e,"false"!==(t=l).getContentEditable(e)&&"LI"!==e.nodeName&&(r=r?"margin":"padding",r="TABLE"===e.nodeName?"margin":r,r+="rtl"===t.getStyle(e,"direction",!0)?"Right":"Left","outdent"===n?(a=Math.max(0,parseInt(e.style[r]||0,10)-o),t.setStyle(e,r,a?a+i:"")):(a=parseInt(e.style[r]||0,10)+o+i,t.setStyle(e,r,a)))}))},_m=X.each,Am=X.extend,Dm=X.map,Pm=X.inArray;function Om(a){function t(e){var t;if(!a.quirks.isHidden()&&!a.removed){if(e=e.toLowerCase(),t=p.state[e])return t(e);try{return a.getDoc().queryCommandState(e)}catch(e){}return!1}}function e(e,n){n=n||"exec",_m(e,function(t,e){_m(e.toLowerCase().split(","),function(e){p[n][e]=t})})}function n(e,t,n){e=e.toLowerCase(),p.value[e]=function(){return t.call(n||a)}}function r(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),a.getDoc().execCommand(e,t,n)}function o(e){return f.match(e)}function i(e,t){f.toggle(e,t?{value:t}:void 0),a.nodeChanged()}function s(e){m=d.getBookmark(e)}function l(){d.moveToBookmark(m)}function c(t){return function(){var e=d.isCollapsed()?[u.getParent(d.getNode(),u.isBlock)]:d.getSelectedBlocks(),e=Dm(e,function(e){return!!f.matchNode(e,t)});return-1!==Pm(e,!0)}}var u,d,f,m,p={state:{},exec:{},value:{}},h=a.settings;a.on("PreInit",function(){u=a.dom,d=a.selection,h=a.settings,f=a.formatter}),Am(this,{execCommand:function(t,n,r,e){var o,i=!1;if(!a.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||e&&e.skip_focus?Nm.restore(a):a.focus(),(e=a.fire("BeforeExecCommand",{command:t,ui:n,value:r})).isDefaultPrevented())return!1;if(e=t.toLowerCase(),o=p.exec[e])return o(e,n,r),a.fire("ExecCommand",{command:t,ui:n,value:r}),!0;if(_m(a.plugins,function(e){if(e.execCommand&&e.execCommand(t,n,r))return a.fire("ExecCommand",{command:t,ui:n,value:r}),!(i=!0)}),i)return i;if(a.theme&&a.theme.execCommand&&a.theme.execCommand(t,n,r))return a.fire("ExecCommand",{command:t,ui:n,value:r}),!0;try{i=a.getDoc().execCommand(t,n,r)}catch(e){}return!!i&&(a.fire("ExecCommand",{command:t,ui:n,value:r}),!0)}},queryCommandState:t,queryCommandValue:function(e){var t;if(!a.quirks.isHidden()&&!a.removed){if(e=e.toLowerCase(),t=p.value[e])return t(e);try{return a.getDoc().queryCommandValue(e)}catch(e){}}},queryCommandSupported:function(e){if(e=e.toLowerCase(),p.exec[e])return!0;try{return a.getDoc().queryCommandSupported(e)}catch(e){}return!1},addCommands:e,addCommand:function(e,o,i){e=e.toLowerCase(),p.exec[e]=function(e,t,n,r){return o.call(i||a,t,n,r)}},addQueryStateHandler:function(e,t,n){e=e.toLowerCase(),p.state[e]=function(){return t.call(n||a)}},addQueryValueHandler:n,hasCustomCommand:function(e){return e=e.toLowerCase(),!!p.exec[e]}}),e({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){a.undoManager.add()},"Cut,Copy,Paste":function(e){var t,n=a.getDoc();try{r(e)}catch(e){t=!0}!(t="paste"!==e||n.queryCommandEnabled(e)?t:!0)&&n.queryCommandSupported(e)||(t=a.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead."),K.mac&&(t=t.replace(/Ctrl\+/g,"⌘+")),a.notificationManager.open({text:t,type:"error"}))},unlink:function(){var e;d.isCollapsed()?(e=a.dom.getParent(a.selection.getStart(),"a"))&&a.dom.remove(e,!0):f.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"===t&&(t="justify"),_m("left,center,right,justify".split(","),function(e){t!==e&&f.remove("align"+e)}),"none"!==t&&i("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var t;r(e),(e=u.getParent(d.getNode(),"ol,ul"))&&(t=e.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(t.nodeName))&&(s(),u.split(t,e),l())},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){i(e)},"ForeColor,HiliteColor":function(e,t,n){i(e,n)},FontName:function(e,t,n){Jf(a,n)},FontSize:function(e,t,n){Zf(a,n)},RemoveFormat:function(e){f.remove(e)},mceBlockQuote:function(){i("blockquote")},FormatBlock:function(e,t,n){return i(n||"p")},mceCleanup:function(){var e=d.getBookmark();a.setContent(a.getContent()),d.moveToBookmark(e)},mceRemoveNode:function(e,t,n){n=n||d.getNode();n!==a.getBody()&&(s(),a.dom.remove(n,!0),l())},mceSelectNodeDepth:function(e,t,n){var r=0;u.getParent(d.getNode(),function(e){if(1===e.nodeType&&r++===n)return d.select(e),!1},a.getBody())},mceSelectNode:function(e,t,n){d.select(n)},mceInsertContent:function(e,t,n){$c.insertAtCaret(a,n)},mceInsertRawHTML:function(e,t,n){var r=a.getContent();d.setContent("tiny_mce_marker"),a.setContent(r.replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){i(n)},mceSetContent:function(e,t,n){a.setContent(n)},"Indent,Outdent":function(e){Rm(a,e)},mceRepaint:function(){},InsertHorizontalRule:function(){a.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){a.hasVisual=!a.hasVisual,a.addVisual()},mceReplaceContent:function(e,t,n){a.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,d.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;"string"==typeof n&&(n={href:n}),r=u.getParent(d.getNode(),"a"),n.href=n.href.replace(" ","%20"),r&&n.href||f.remove("link"),n.href&&f.apply("link",n,r)},selectAll:function(){var e,t=u.getParent(d.getStart(),Q.isContentEditableTrue);t&&((e=u.createRng()).selectNodeContents(t),d.setRng(e))},delete:function(){Gf.deleteCommand(a)},forwardDelete:function(){Gf.forwardDeleteCommand(a)},mceNewDocument:function(){a.setContent("")},InsertLineBreak:function(e,t,n){return gm.insert(a,n),!0}});e({JustifyLeft:c("alignleft"),JustifyCenter:c("aligncenter"),JustifyRight:c("alignright"),JustifyFull:c("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o,mceBlockQuote:function(){return o("blockquote")},Outdent:function(){var e;if(h.inline_styles){if((e=u.getParent(d.getStart(),u.isBlock))&&0<parseInt(e.style.paddingLeft,10))return!0;if((e=u.getParent(d.getEnd(),u.isBlock))&&0<parseInt(e.style.paddingLeft,10))return!0}return t("InsertUnorderedList")||t("InsertOrderedList")||!h.inline_styles&&!!u.getParent(d.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=u.getParent(d.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),e({Undo:function(){a.undoManager.undo()},Redo:function(){a.undoManager.redo()}}),n("FontName",function(){return Qf(a)},this),n("FontSize",function(){return em(a)},this)}function Im(a){function s(){return!1}function l(){return!0}function r(e,t,n,r){var o,i,a;if(t=!1===t?s:t)for(t={func:t},r&&X.extend(t,r),a=(i=e.toLowerCase().split(" ")).length;a--;)e=i[a],(o=m[e])||(o=m[e]=[],d(e,!0)),n?o.unshift(t):o.push(t);return f}function c(e,t){var n,r,o,i,a;if(e)for(n=(i=e.toLowerCase().split(" ")).length;n--;){if(e=i[n],r=m[e],!e){for(o in m)d(o,!1),delete m[o];return f}if(r){if(t)for(a=r.length;a--;)r[a].func===t&&(r=r.slice(0,a).concat(r.slice(a+1)),m[e]=r);else r.length=0;r.length||(d(e,!1),delete m[e])}}else{for(e in m)d(e,!1);m={}}return f}var u,d,f=this,m={};u=(a=a||{}).scope||f,d=a.toggleEvent||s,f.fire=function(e,t){var n,r,o,i;if(e=e.toLowerCase(),(t=t||{}).type=e,t.target||(t.target=u),t.preventDefault||(t.preventDefault=function(){t.isDefaultPrevented=l},t.stopPropagation=function(){t.isPropagationStopped=l},t.stopImmediatePropagation=function(){t.isImmediatePropagationStopped=l},t.isDefaultPrevented=s,t.isPropagationStopped=s,t.isImmediatePropagationStopped=s),a.beforeFire&&a.beforeFire(t),n=m[e])for(r=0,o=n.length;r<o;r++){if((i=n[r]).once&&c(e,i.func),t.isImmediatePropagationStopped())return t.stopPropagation(),t;if(!1===i.func.call(u,t))return t.preventDefault(),t}return t},f.on=r,f.off=c,f.once=function(e,t,n){return r(e,t,n,{once:!0})},f.has=function(e){return e=e.toLowerCase(),!(!m[e]||0===m[e].length)}}function Bm(n){return n._eventDispatcher||(n._eventDispatcher=new Im({scope:n,toggleEvent:function(e,t){Im.isNative(e)&&n.toggleNativeEvent&&n.toggleNativeEvent(e,t)}})),n._eventDispatcher}var Mm=X.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),ve=(Im.isNative=function(e){return!!Mm[e.toLowerCase()]},{fire:function(e,t,n){if((!this.removed||"remove"===e)&&(t=Bm(this).fire(e,t,n),!1!==n)&&this.parent)for(var r=this.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},on:function(e,t,n){return Bm(this).on(e,t,n)},off:function(e,t){return Bm(this).off(e,t)},once:function(e,t){return Bm(this).once(e,t)},hasEventListeners:function(e){return Bm(this).has(e)}});function Lm(e,t){return void 0===(e=C.get(e,t))||""===e?[]:e.split(" ")}function Fm(e){return Km(e,"class")}function Hm(e,t){return Ym(e,"class",t)}function zm(e,t){return Gm(e,"class",t)}function Um(e,t){return Xm.supports(e)&&e.dom().classList.contains(t)}function Wm(e,t){np(z.fromDom(e.getBody()),"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e.readonly=!0,e.getBody().contentEditable="false"):(e.readonly=!1,e.getBody().contentEditable="true",tp(e,"StyleWithCSS",!1),tp(e,"enableInlineTableEditing",!1),tp(e,"enableObjectResizing",!1),e.focus(),e.nodeChanged())}function $m(e,t){return"selectionchange"===t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=op.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()}function jm(e,t,n){ip(e)?e.fire(t,n):rp(e)&&n.preventDefault()}function qm(i,a){var e,t;i.delegates||(i.delegates={}),i.delegates[a]||i.removed||(e=$m(i,a),i.settings.event_root?(Vm||(Vm={},i.editorManager.on("removeEditor",function(){if(!i.editorManager.activeEditor&&Vm){for(var e in Vm)i.dom.unbind($m(i,e));Vm=null}})),Vm[a]||(Vm[a]=t=function(e){for(var t=e.target,n=i.editorManager.get(),r=n.length;r--;){var o=n[r].getBody();o!==t&&!op.isChildOf(t,o)||jm(n[r],a,e)}},op.bind(e,a,t))):(op.bind(e,a,t=function(e){jm(i,a,e)}),i.delegates[a]=t))}var Vm,Km=Lm,Ym=function(e,t,n){n=Lm(e,t).concat([n]);C.set(e,t,n.join(" "))},Gm=function(e,t,n){var r=b.filter(Lm(e,t),function(e){return e!==n});0<r.length?C.set(e,t,r.join(" ")):C.remove(e,t)},Xm={get:Fm,add:Hm,remove:zm,toggle:function(e,t){(b.contains(Fm(e),t)?zm:Hm)(e,t)},supports:function(e){return void 0!==e.dom().classList}},Jm=function(e,t){Xm.supports(e)?e.dom().classList.add(t):Xm.add(e,t)},Qm=function(e,t){Xm.supports(e)?e.dom().classList.remove(t):Xm.remove(e,t),t=e,0===(Xm.supports(t)?t.dom().classList:Xm.get(t)).length&&C.remove(t,"class")},Zm=Um,ep={firePreProcess:function(e,t){return e.fire("PreProcess",t)},firePostProcess:function(e,t){return e.fire("PostProcess",t)},fireRemove:function(e){return e.fire("remove")},fireSwitchMode:function(e,t){return e.fire("SwitchMode",{mode:t})},fireObjectResizeStart:function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})},fireObjectResized:function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})}},tp=function(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},np=function(e,t,n){Zm(e,t)&&!1===n?Qm(e,t):n&&Jm(e,t)},rp=function(e){return!0===e.readonly},op=p.DOM,ip=function(e){return!e.hidden&&!e.readonly},ye=X.extend({},ve,{bindPendingEventDelegates:function(){var t=this;X.each(t._pendingNativeEvents,function(e){qm(t,e)})},toggleNativeEvent:function(e,t){var n=this;"focus"!==e&&"blur"!==e&&(t?n.initialized?qm(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind($m(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this,n=t.getBody(),r=t.dom;if(t.delegates){for(e in t.delegates)t.dom.unbind($m(t,e),e,t.delegates[e]);delete t.delegates}!t.inline&&n&&r&&(n.onload=null,r.unbind(t.getWin()),r.unbind(t.getDoc())),r&&(r.unbind(n),r.unbind(t.getContainer()))}}),ap=X.each,sp=X.explode,lp={f9:120,f10:121,f11:122},cp=X.makeMap("alt,ctrl,shift,meta,access");function up(i){function a(e,t,n,r){return(e=X.map(sp(e,">"),l))[e.length-1]=X.extend(e[e.length-1],{func:n,scope:r||i}),X.extend(e[0],{desc:i.translate(t),subpatterns:e.slice(1)})}function n(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)}function r(e){e.func&&e.func.call(e.scope)}var s={},o=[],l=function(e){var t,n,r={};for(n in ap(sp(e,"+"),function(e){e in cp?r[e]=!0:/^[0-9]{2,}$/.test(e)?r.keyCode=parseInt(e,10):(r.charCode=e.charCodeAt(0),r.keyCode=lp[e]||e.toUpperCase().charCodeAt(0))}),t=[r.keyCode],cp)r[n]?t.push(n):r[n]=!1;return r.id=t.join(","),r.access&&(r.alt=!0,K.mac?r.ctrl=!0:r.shift=!0),r.meta&&(K.mac?r.meta=!0:(r.ctrl=!0,r.meta=!1)),r};i.on("keyup keypress keydown",function(t){var e;((e=t).altKey||e.ctrlKey||e.metaKey||"keydown"===(e=t).type&&112<=e.keyCode&&e.keyCode<=123)&&!t.isDefaultPrevented()&&(ap(s,function(e){if(n(t,e))return o=e.subpatterns.slice(0),"keydown"===t.type&&r(e),!0}),n(t,o[0]))&&(1===o.length&&"keydown"===t.type&&r(o[0]),o.shift())}),this.add=function(e,t,n,r){var o=n;return"string"==typeof n?n=function(){i.execCommand(o,!1,null)}:X.isArray(o)&&(n=function(){i.execCommand(o[0],o[1],o[2])}),ap(sp(X.trim(e.toLowerCase())),function(e){e=a(e,t,n,r);s[e.id]=e}),!0},this.remove=function(e){e=a(e);return!!s[e.id]&&(delete s[e.id],!0)}}function dp(e){e.dom().focus()}function fp(e){return e=void 0!==e?e.dom():document,m.from(e.activeElement).map(z.fromDom)}function mp(t,e){return((e=e).collapsed?m.from(Bi(e.startContainer,e.startOffset)).map(z.fromDom):m.none()).bind(function(e){return Fo(e)?m.some(e):!1===f.contains(t,e)?m.some(t):m.none()})}function pp(e,t){return t.dom()[e]}function hp(e,t){return parseInt(Mr.get(t,e),10)}var gp=function(e,t,n){return ld.closest(e,t,n).isSome()},vp={hasFocus:function(e){var t=u.owner(e).dom();return e.dom()===t.activeElement},focus:dp,blur:function(e){e.dom().blur()},active:fp,search:function(t){return fp(u.owner(t)).filter(function(e){return t.dom().contains(e.dom())})},focusInside:function(t){var e=u.owner(t);fp(e).filter(function(e){return gp(e,v.curry(f.eq,t))}).fold(function(){dp(t)},v.noop)}},yp=function(t,e){return t.dom.getParent(e,function(e){return"true"===t.dom.getContentEditable(e)})},bp=function(t,e){mp(z.fromDom(t.getBody()),e).bind(function(e){return k.firstPositionIn(e.dom())}).fold(function(){t.selection.normalize()},function(e){return t.selection.setRng(e.toRange())})},wp=function(t){if(t.setActive)try{t.setActive()}catch(e){t.focus()}else t.focus()},xp=function(e){return vp.hasFocus(e)||vp.search(e).isSome()},Cp=function(e){var t;return e.inline?(t=(t=e).getBody())&&xp(z.fromDom(t)):(t=e).iframeElement&&vp.hasFocus(z.fromDom(t.iframeElement))},kp=function(e){return e.editorManager.setActive(e)},Sp={focus:function(e,t){var n,r,o;e.removed||(t?kp(e):(t=(n=e).selection,e=n.settings.content_editable,r=n.getBody(),o=t.getRng(),n.quirks.refreshContentEditable(),t=yp(n,t.getNode()),n.$.contains(r,t)?(wp(t),bp(n,o)):(void 0!==n.bookmark&&!1===Cp(n)&&Nm.getRng(n).each(function(e){n.selection.setRng(e),o=e}),e||(K.opera||wp(r),n.getWin().focus()),(K.gecko||e)&&(wp(r),bp(n,o))),kp(n)))},hasFocus:Cp},Tp=v.curry(pp,"clientWidth"),Ep=v.curry(pp,"clientHeight"),Np=v.curry(hp,"margin-top"),Rp=v.curry(hp,"margin-left"),_p=function(e){return e.dom().getBoundingClientRect()},Ap={isXYInContentArea:function(e,t,n){var r,o,i=z.fromDom(e.getBody()),i=e.inline?i:u.documentElement(i),t=(e=e.inline,t=t,n=n,r=_p(o=i),{x:t-(e?r.left+o.dom().clientLeft+Rp(o):0),y:n-(e?r.top+o.dom().clientTop+Np(o):0)});return n=t.x,e=t.y,o=Tp(r=i),r=Ep(r),0<=n&&0<=e&&n<=o&&e<=r},isEditorAttachedToDom:function(e){e=e.inline?e.getBody():e.getContentAreaContainer();return m.from(e).map(z.fromDom).map(function(e){return f.contains(u.owner(e),e)}).getOr(!1)}};function Dp(n){function t(t){if(!n.removed&&Ap.isEditorAttachedToDom(n))return b.find(o,function(e){return a(i().getArgs(e),t)}).getOrThunk(function(){n.editorManager.setActive(n);var e=i().open(t,function(){c(e),s()});return l(e),s(),e})}var r,o=[],i=function(){var e=n.theme;return e&&e.getNotificationManagerImpl?e.getNotificationManagerImpl():{open:t,close:t,reposition:t,getArgs:t};function t(){throw new Error("Theme did not provide a NotificationManager implementation.")}},a=function(e,t){return!(e.type!==t.type||e.text!==t.text||e.progressBar||e.timeout||t.progressBar||t.timeout)},s=function(){0<o.length&&i().reposition(o)},l=function(e){o.push(e)},c=function(t){b.findIndex(o,function(e){return e===t}).each(function(e){o.splice(e,1)})};return(r=n).on("SkinLoaded",function(){var e=r.settings.service_message;e&&t({text:e,type:"warning",timeout:0,icon:""})}),r.on("ResizeEditor ResizeWindow",function(){tt.requestAnimationFrame(s)}),r.on("remove",function(){b.each(o,function(e){i().close(e)})}),{open:t,close:function(){m.from(o[0]).each(function(e){i().close(e),c(e),s()})},getNotifications:function(){return o}}}function Pp(n){function r(){var e=n.theme;return e&&e.getWindowManagerImpl?e.getWindowManagerImpl():{open:t,alert:t,confirm:t,close:t,getParams:t,setParams:t};function t(){throw new Error("Theme did not provide a WindowManager implementation.")}}function o(e,t){return function(){return t?t.apply(e,arguments):void 0}}function i(e){s.push(e),t(e)}function a(t){b.findIndex(s,function(e){return e===t}).each(function(e){s.splice(e,1),l(t),0===s.length&&n.focus()})}function e(){return m.from(s[s.length-1])}var s=[],t=function(e){n.fire("OpenWindow",{win:e})},l=function(e){n.fire("CloseWindow",{win:e})};return n.on("remove",function(){b.each(s.slice(0),function(e){r().close(e)})}),{windows:s,open:function(e,t){n.editorManager.setActive(n),Nm.store(n);e=r().open(e,t,a);return i(e),e},alert:function(e,t,n){e=r().alert(e,o(n||this,t),a);i(e)},confirm:function(e,t,n){e=r().confirm(e,o(n||this,t),a);i(e)},close:function(){e().each(function(e){r().close(e),a(e)})},getParams:function(){return e().map(r().getParams).getOr(null)},setParams:function(t){e().each(function(e){r().setParams(e,t)})},getWindows:function(){return s}}}function Op(e,t){e._skinLoaded?Mp(e,t):e.on("SkinLoaded",function(){Mp(e,t)})}var Ip=Ti.PluginManager,Bp=function(e,t){for(var n in Ip.urls)if(Ip.urls[n]+"/plugin"+t+".js"===e)return n;return null},Mp=function(e,t){e.notificationManager.open({type:"error",text:t})},Lp={pluginLoadError:function(e,t){Op(e,function(e,t){e=Bp(t,e.suffix);return e?"Failed to load plugin: "+e+" from url "+t:"Failed to load plugin url: "+t}(e,t))},uploadError:function(e,t){Op(e,"Failed to upload image: "+t)},displayError:Op,initError:function(e){for(var t=1;t<arguments.length;t++)t-1,0;var n=window.console;n&&(n.error||n.log).apply(n,arguments)}},Fp=Ti.PluginManager,Hp=Ti.ThemeManager;function zp(){return new(pe.getOrDie("XMLHttpRequest"))}function Up(s,a){function l(e,t){return{url:t,blobInfo:e,status:!0}}function c(e,t){return{url:"",blobInfo:e,status:!1,error:t}}function u(e,t){X.each(n[e],function(e){e(t)}),delete n[e]}var n={},o=function(e,n,r,t){var o,i=new zp;i.open("POST",a.url),i.withCredentials=a.credentials,i.upload.onprogress=function(e){t(e.loaded/e.total*100)},i.onerror=function(){r("Image upload failed due to a XHR Transport error. Code: "+i.status)},i.onload=function(){var e,t;i.status<200||300<=i.status?r("HTTP Error: "+i.status):(t=JSON.parse(i.responseText))&&"string"==typeof t.location?n((e=a.basePath,t=t.location,e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t)):r("Invalid JSON: "+i.responseText)},(o=new FormData).append("file",e.blob(),e.filename()),i.send(o)},i=function(o,i,a){return s.markPending(o.blobUri()),new ke(function(t){function e(){}var n;try{var r=function(){n&&(n.close(),0)};i(o,function(e){r(),s.markUploaded(o.blobUri(),e),u(o.blobUri(),l(o,e)),t(l(o,e))},function(e){r(),s.removeFailed(o.blobUri()),u(o.blobUri(),c(o,e)),t(c(o,e))},function(e){e<0||100<e||(n=n||a()).progressBar.value(e)})}catch(e){t(c(o,e.message))}})},d=function(e){var t=e.blobUri();return new ke(function(e){n[t]=n[t]||[],n[t].push(e)})};return a=X.extend({credentials:!1,handler:o},a),{upload:function(e,t){return a.url||a.handler!==o?(n=e,r=t,n=X.grep(e,function(e){return!s.isUploaded(e.blobUri())}),ke.all(X.map(n,function(e){return s.isPending(e.blobUri())?d(e):i(e,a.handler,r)}))):new ke(function(e){e([])});var n,r}}}function Wp(e,t){return new(pe.getOrDie("Blob"))(e,t)}function $p(){return new(pe.getOrDie("FileReader"))}function jp(e){return new(pe.getOrDie("Uint8Array"))(e)}function qp(n,r,o,t){var i,a;0===r.src.indexOf("blob:")?(a=n.getByUri(r.src))?o({image:r,blobInfo:a}):Gp.uriToBlob(r.src).then(function(t){Gp.blobToDataUri(t).then(function(e){i=Gp.parseDataUri(e).data,a=n.create(Jp(),t,i),n.add(a),o({image:r,blobInfo:a})})},function(e){t(e)}):(i=Gp.parseDataUri(r.src).data,(a=n.findFirst(function(e){return e.base64()===i}))?o({image:r,blobInfo:a}):Gp.uriToBlob(r.src).then(function(e){a=n.create(Jp(),e,i),n.add(a),o({image:r,blobInfo:a})},function(e){t(e)}))}function Vp(e){return e?e.getElementsByTagName("img"):[]}var Kp={atob:function(e){return pe.getOrDie("atob")(e)},requestAnimationFrame:function(e){pe.getOrDie("requestAnimationFrame")(e)}},Yp=function(e){var t,n;return e=decodeURIComponent(e).split(","),{type:t=(n=/data:([^;]+)/.exec(e[0]))?n[1]:t,data:e[1]}},Gp={uriToBlob:function(e){var o,i;return 0===e.indexOf("blob:")?(o=e,new ke(function(e,t){function n(){t("Cannot convert "+o+" to Blob. Resource might not exist or is inaccessible.")}try{var r=new zp;r.open("GET",o,!0),r.responseType="blob",r.onload=function(){200===this.status?e(this.response):n()},r.onerror=n,r.send()}catch(e){n()}})):0===e.indexOf("data:")?(i=e,new ke(function(t){var e,n,r;i=Yp(i);try{e=Kp.atob(i.data)}catch(e){return void t(new Wp([]))}for(n=new jp(e.length),r=0;r<n.length;r++)n[r]=e.charCodeAt(r);t(new Wp([n],{type:i.type}))})):null},blobToDataUri:function(n){return new ke(function(e){var t=new $p;t.onloadend=function(){e(t.result)},t.readAsDataURL(n)})},parseDataUri:Yp},Xp=0,Jp=function(e){return(e||"blobid")+Xp++};var Qp=0,Zp={uuid:function(e){return e+Qp+++("s"+(new Date).getTime().toString(36)+t()+t()+t());function t(){return Math.round(4294967295*Math.random()).toString(36)}}};function eh(){function o(e){var t,n;if(e.blob&&e.base64)return t=e.id||Zp.uuid("blobid"),n=e.name||t,{id:r(t),name:r(n),filename:r(n+"."+i(e.blob.type)),blob:r(e.blob),base64:r(e.base64),blobUri:r(e.blobUri||he.createObjectURL(e.blob)),uri:r(e.uri)};throw new Error("blob and base64 representations of the image are required for BlobInfo to be created")}function t(t){return e(function(e){return e.id()===t})}var n=[],r=ga.constant,i=function(e){return{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[e.toLowerCase()]||"dat"},e=function(e){return y.filter(n,e)[0]};return{create:function(e,t,n,r){return o("object"==typeof e?e:{id:e,name:r,blob:t,base64:n})},add:function(e){t(e.id())||n.push(e)},get:t,getByUri:function(t){return e(function(e){return e.blobUri()===t})},findFirst:e,removeByUri:function(t){n=y.filter(n,function(e){return e.blobUri()!==t||(he.revokeObjectURL(e.blobUri()),!1)})},destroy:function(){y.each(n,function(e){he.revokeObjectURL(e.blobUri())}),n=[]}}}function th(){function n(e,t){return{status:e,resultUri:t}}function t(e){return e in r}var r={};return{hasBlobUri:t,getResultUri:function(e){e=r[e];return e?e.resultUri:null},isPending:function(e){return!!t(e)&&1===r[e].status},isUploaded:function(e){return!!t(e)&&2===r[e].status},markPending:function(e){r[e]=n(1,null)},markUploaded:function(e,t){r[e]=n(2,t)},removeFailed:function(e){delete r[e]},destroy:function(){r={}}}}function nh(a){function r(e,t,n){for(var r=0;-1!==(r=e.indexOf(t,r))&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1),-1!==r;);return e}function n(t,n){y.each(a.undoManager.data,function(e){"fragmented"===e.type?e.fragments=y.map(e.fragments,function(e){return m(e,t,n)}):e.content=m(e.content,t,n)})}function t(t){return i=i||Up(d,{url:u.images_upload_url,basePath:u.images_upload_base_path,credentials:u.images_upload_credentials,handler:u.images_upload_handler}),g().then(f(function(n){var e=y.map(n,function(e){return e.blobInfo});return i.upload(e,p).then(f(function(e){e=y.map(e,function(e,t){t=n[t].image;return e.status&&!1!==a.settings.images_replace_blob_uris?h(t,e.url):e.error&&Lp.uploadError(a,e.error),{element:t,status:e.status}});return t&&t(e),e}))}))}function e(e){if(!1!==u.automatic_uploads)return t(e)}function s(e){return!u.images_dataimg_filter||u.images_dataimg_filter(e)}function o(e){return e.replace(/src="(blob:[^"]+)"/g,function(e,n){var t=d.getResultUri(n);return t?'src="'+t+'"':(t=(t=c.getByUri(n))||y.reduce(a.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null))?'src="data:'+t.blob().type+";base64,"+t.base64()+'"':e})}var i,l,c=eh(),u=a.settings,d=th(),f=function(t){return function(e){return a.selection?t(e):[]}},m=function(e,t,n){return e=r(e,'src="'+t+'"','src="'+n+'"'),e=r(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},p=function(){return a.notificationManager.open({text:a.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},h=function(e,t){c.removeByUri(e.src),n(e.src,t),a.$(e).attr({src:u.images_reuse_filename?t+("?"+(new Date).getTime()):t,"data-mce-src":a.convertURL(t,"src")})},g=function(){var r,o,i;return l||(r=d,o=c,i={},l={findAll:function(e,n){n=n||ga.constant(!0),e=y.filter(Vp(e),function(e){var t=e.src;return!(!K.fileApi||e.hasAttribute("data-mce-bogus")||e.hasAttribute("data-mce-placeholder")||!t||t===K.transparentSrc)&&(0===t.indexOf("blob:")?!r.isUploaded(t):0===t.indexOf("data:")&&n(e))});e=y.map(e,function(n){var e;return i[n.src]?new ke(function(t){i[n.src].then(function(e){if("string"==typeof e)return e;t({image:n,blobInfo:e.blobInfo})})}):(e=new ke(function(e,t){qp(o,n,e,t)}).then(function(e){return delete i[e.image.src],e}).catch(function(e){return delete i[n.src],e}),i[n.src]=e)});return ke.all(e)}}),l.findAll(a.getBody(),s).then(f(function(e){return e=y.filter(e,function(e){return"string"!=typeof e||(Lp.displayError(a,e),!1)}),y.each(e,function(e){n(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),e}))};return a.on("setContent",function(){(!1!==a.settings.automatic_uploads?e:g)()}),a.on("RawSaveContent",function(e){e.content=o(e.content)}),a.on("getContent",function(e){e.source_view||"raw"===e.format||(e.content=o(e.content))}),a.on("PostRender",function(){a.parser.addNodeFilter("img",function(e){y.each(e,function(e){var t=e.attr("src");c.getByUri(t)||(t=d.getResultUri(t))&&e.attr("src",t)})})}),{blobCache:c,uploadImages:t,uploadImagesAuto:e,scanForImages:g,destroy:function(){c.destroy(),d.destroy(),l=i=null}}}function rh(e,t){return e.hasOwnProperty(t.nodeName)}function oh(e){var t,n,r,o,i,a,s,l=e.settings,c=e.dom,u=e.selection,d=e.schema,f=d.getBlockElements(),m=u.getStart(),p=e.getBody(),h=l.forced_root_block;if(m&&Q.isElement(m)&&h&&(l=p.nodeName.toLowerCase(),d.isValidChild(l,h.toLowerCase()))&&!ch(f,p,m)){for(l=(d=u.getRng()).startContainer,t=d.startOffset,n=d.endContainer,r=d.endOffset,s=Sp.hasFocus(e),m=p.firstChild;m;)lh(f,m)?uh(f,m)?(m=(i=m).nextSibling,c.remove(i)):(o||(o=c.create(h,e.settings.forced_root_block_attrs),m.parentNode.insertBefore(o,m),a=!0),m=(i=m).nextSibling,o.appendChild(i)):(o=null,m=m.nextSibling);a&&s&&(d.setStart(l,t),d.setEnd(n,r),u.setRng(d),e.nodeChanged())}}function ih(t){return u.firstChild(t).fold(v.constant([t]),function(e){return[t].concat(ih(e))})}function ah(t){return u.lastChild(t).fold(v.constant([t]),function(e){return"br"===c.name(e)?u.prevSibling(e).map(function(e){return[t].concat(ah(e))}).getOr([]):[t].concat(ah(e))})}function sh(n,e){return va.liftN([(r=(t=e).startContainer,t=t.startOffset,Q.isText(r)?0===t?m.some(z.fromDom(r)):m.none():m.from(r.childNodes[t]).map(z.fromDom)),(t=(r=e).endContainer,r=r.endOffset,Q.isText(t)?r===t.data.length?m.some(z.fromDom(t)):m.none():m.from(t.childNodes[r-1]).map(z.fromDom))],function(e,t){e=b.find(ih(n),v.curry(f.eq,e)),t=b.find(ah(n),v.curry(f.eq,t));return e.isSome()&&t.isSome()}).getOr(!1);var t,r}var lh=function(e,t){return!!Q.isText(t)||!!Q.isElement(t)&&!rh(e,t)&&!xc.isBookmarkNode(t)},ch=function(t,e,n){return b.exists(Od.parents(z.fromDom(n),z.fromDom(e)),function(e){return rh(t,e.dom())})},uh=function(e,t){if(Q.isText(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||rh(e,t.nextSibling)))return!0}return!1},dh=function(e){e.settings.forced_root_block&&e.on("NodeChange",v.curry(oh,e))},fh=function(e,t,n,r){var o=n,i=new J(n,o),a=e.schema.getNonEmptyElements();do{if(3===n.nodeType&&0!==X.trim(n.nodeValue).length)return void(r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(a[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(r?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(K.ie&&K.ie<11&&e.isBlock(n)&&e.isEmpty(n))return void(r?t.setStart(n,0):t.setEnd(n,0))}while(n=r?i.next():i.prev());"BODY"===o.nodeName&&(r?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},mh=function(e){e=e.selection.getSel();return e&&0<e.rangeCount};function ph(o){var n,r=[];"onselectionchange"in o.getDoc()||o.on("NodeChange Click MouseUp KeyUp Focus",function(e){var t=o.selection.getRng(),t={startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset};"nodechange"!==e.type&&tm.isEq(t,n)||o.fire("SelectionChange"),n=t}),o.on("contextmenu",function(){o.fire("SelectionChange")}),o.on("SelectionChange",function(){var e=o.selection.getStart(!0);!e||!K.range&&o.selection.isCollapsed()||mh(o)&&!function(e){var t,n=o.$(e).parentsUntil(o.getBody()).add(e);if(n.length===r.length){for(t=n.length;0<=t&&n[t]===r[t];t--);if(-1===t)return r=n,!0}return r=n,!1}(e)&&o.dom.isChildOf(e,o.getBody())&&o.nodeChanged({selectionChange:!0})}),o.on("MouseUp",function(e){!e.isDefaultPrevented()&&mh(o)&&("IMG"===o.selection.getNode().nodeName?tt.setEditorTimeout(o,function(){o.nodeChanged()}):o.nodeChanged())}),this.nodeChanged=function(e){var t,n,r=o.selection;o.initialized&&r&&!o.settings.disable_nodechange&&!o.readonly&&(n=o.getBody(),(r=r.getStart(!0)||n).ownerDocument===o.getDoc()&&o.dom.isChildOf(r,n)||(r=n),t=[],o.dom.getParent(r,function(e){if(e===n)return!0;t.push(e)}),(e=e||{}).element=r,e.parents=t,o.fire("NodeChange",e))}}function hh(e){e.dragging=!1,e.element=null,Bh(e.ghost)}function gh(e){return y.reduce(e,function(e,t){return e.concat(Uh(t))},[])}function vh(o,i,a,e,s,t){function n(e){var t,n,r=gh([e]);for(-1===o&&(r=r.reverse()),t=0;t<r.length;t++)if(n=r[t],!a(n,u)){if(0<c.length&&i(n,y.last(c))&&l++,n.line=l,s(n))return!0;c.push(n)}}var l=0,c=[],u=y.last(t.getClientRects());return u&&(n(t=t.getNode()),function(e,t,n,r){for(;r=Sl(r,e,sa,t);)if(n(r))return}(o,e,n,t)),c}function yh(e,t,n,r){function o(e){return y.last(e.getClientRects())}var i,a,s,l,t=Vl(t),c=[],u=0,d=1===e?(i=t.next,a=Oi,s=Pi,S.after(r)):(i=t.prev,a=Pi,s=Oi,S.before(r)),f=o(d);do{if(d.isVisible()&&!s(l=o(d),f)){if(0<c.length&&a(l,y.last(c))&&u++,(l=ca(l)).position=d,l.line=u,n(l))return c;c.push(l)}}while(d=i(d));return c}function bh(t){return function(e){return e.line>t}}function wh(t){return function(e){return e.line===t}}function xh(e,t){return Math.abs(e.left-t)}function Ch(e,t){return Math.abs(e.right-t)}function kh(e,t){return e>=t.left&&e<=t.right}function Sh(e,o){return y.reduce(e,function(e,t){var n=Math.min(xh(e,o),Ch(e,o)),r=Math.min(xh(t,o),Ch(t,o));return kh(o,t)||!kh(o,e)&&(r===n&&jh(t.node)||r<n)?t:e})}function Th(e,t,n,r){for(;r=qh(r,e,sa,t);)if(n(r))return}function Eh(e,n){function t(t,e){return e=y.filter(gh([e]),function(e){return!t(e,n)}),r=r.concat(e),0===e.length}var r=[];return r.push(n),Th(_h.Up,e,v.curry(t,Pi),n.node),Th(_h.Down,e,v.curry(t,Oi),n.node),r}function Nh(s){function r(e){e&&s.selection.setRng(e)}function n(){return s.selection.getRng()}function o(e,t){var n,r,o,i=s.$,a=s.dom;if(!e)return null;if(e.collapsed){if(!g(e))if(!1===t){if(r=p(-1,e),pl(r.getNode(!0)))return m(-1,r.getNode(!0),!1,!1);if(pl(r.getNode()))return m(-1,r.getNode(),!r.isAtEnd(),!1)}else{if(r=p(1,e),pl(r.getNode()))return m(1,r.getNode(),!r.isAtEnd(),!1);if(pl(r.getNode(!0)))return m(1,r.getNode(!0),!1,!1)}return null}return t=e.startContainer,r=e.startOffset,o=e.endOffset,3===t.nodeType&&0===r&&Jh(t.parentNode)&&(t=t.parentNode,r=a.nodeIndex(t),t=t.parentNode),1!==t.nodeType||(o===r+1&&(n=t.childNodes[r]),!Jh(n))||(o=n.cloneNode(!0),(t=s.fire("ObjectSelected",{target:n,targetClone:o})).isDefaultPrevented())?null:(r=yd.descendant(z.fromDom(s.getBody()),"#"+f).fold(function(){return i([])},function(e){return i([e.dom()])}),t=t.targetClone,0===r.length&&(r=i('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",f)).appendTo(s.getBody()),e=s.dom.createRng(),t===o&&K.ie?(r.empty().append('<p style="font-size: 0" data-mce-bogus="all"> </p>').append(t),e.setStartAfter(r[0].firstChild.firstChild),e.setEndAfter(t)):(r.empty().append(" ").append(t).append(" "),e.setStart(r[0].firstChild,1),e.setEnd(r[0].lastChild,0)),r.css({top:a.getPos(n,s.getBody()).y}),r[0].focus(),(o=s.selection.getSel()).removeAllRanges(),o.addRange(e),b.each(tl.descendants(z.fromDom(s.getBody()),"*[data-mce-selected]"),function(e){C.remove(e,"data-mce-selected")}),n.setAttribute("data-mce-selected","1"),l=n,v(),e)}function i(){l&&l.removeAttribute("data-mce-selected"),yd.descendant(z.fromDom(s.getBody()),"#"+f).each(Tc.remove),l=null}var l,e,t,a,c,u=s.getBody(),d=ml(s.getBody(),function(e){return s.dom.isBlock(e)},function(){return Sp.hasFocus(s)}),f="sel-"+s.dom.uniqueId(),m=function(e,t,n,r){return void 0===r&&(r=!0),s.fire("ShowCaret",{target:t,direction:e,before:n}).isDefaultPrevented()?null:(r&&s.selection.scrollIntoView(t,-1===e),d.show(n,t))},p=function(e,t){return t=_l(e,u,t),-1===e?S.fromRangeStart(t):S.fromRangeEnd(t)},h=function(e){return qi(e)||Ki(e)||Yi(e)},g=function(e){return h(e.startContainer)||h(e.endContainer)},v=function(){d.hide()};function y(e,t){var e=s.dom.getParent(e,s.dom.isBlock),t=s.dom.getParent(t,s.dom.isBlock);return!(!e||!s.dom.isChildOf(e,t)||!1!==Jh(eg(s,e)))||e&&(t=t,!(s.dom.getParent(e,s.dom.isBlock)===s.dom.getParent(t,s.dom.isBlock)))&&(e=Vl(t=e),!!t.firstChild&&(t=S.before(t.firstChild),e=e.next(t))&&!Zh(e)&&!Qh(e))}return K.ceFalse&&(s.on("mouseup",function(e){var t=n();t.collapsed&&Ap.isXYInContentArea(s,e.clientX,e.clientY)&&r(Ks(s,t,!1))}),s.on("click",function(e){var t=eg(s,e.target);t&&(Jh(t)&&(e.preventDefault(),s.focus()),Xh(t))&&s.dom.isChildOf(t,s.selection.getNode())&&i()}),s.on("blur NewBlock",function(){i()}),s.on("ResizeWindow FullscreenStateChanged",function(){return d.reposition()}),c=!1,(a=s).on("touchstart",function(){c=!1}),a.on("touchmove",function(){c=!0}),a.on("touchend",function(e){var t=eg(a,e.target);Jh(t)&&!c&&(e.preventDefault(),o(Vs(a,t)))}),s.on("mousedown",function(e){var t,n=e.target;n!==u&&"HTML"!==n.nodeName&&!s.dom.isChildOf(n,u)||!1===Ap.isXYInContentArea(s,e.clientX,e.clientY)||((t=eg(s,n))?Jh(t)?(e.preventDefault(),o(Vs(s,t))):(i(),Xh(t)&&e.shiftKey||Kh.isXYWithinRange(e.clientX,e.clientY,s.selection.getRng())||(v(),s.selection.placeCaretAt(e.clientX,e.clientY))):!1===pl(n)&&(i(),v(),t=Vh(u,e.clientX,e.clientY))&&!y(e.target,t.node)&&(e.preventDefault(),n=m(1,t.node,t.before,!1),s.getBody().focus(),r(n)))}),s.on("keypress",function(e){U.modifierPressed(e)||(e.keyCode,Jh(s.selection.getNode())&&e.preventDefault())}),s.on("getSelectionRange",function(e){var t=e.range;l&&(l.parentNode?((t=t.cloneRange()).selectNode(l),e.range=t):l=null)}),s.on("setSelectionRange",function(e){var t=o(e.range,e.forward);t&&(e.range=t)}),s.on("AfterSetSelectionRange",function(e){var e=e.range;g(e)||v(),e=e.startContainer.parentNode,s.dom.hasClass(e,"mce-offscreen-selection")||i()}),s.on("copy",function(e){var t,n=e.clipboardData;e.isDefaultPrevented()||!e.clipboardData||K.ie||(t=(t=s.dom.get(f))&&t.getElementsByTagName("*")[0])&&(e.preventDefault(),n.clearData(),n.setData("text/html",t.outerHTML),n.setData("text/plain",t.outerText))}),zh.init(s),Gh.setup(s),e=s.contentStyles,t=".mce-content-body",e.push(d.getCss()),e.push(t+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+t+" *[contentEditable=false] {cursor: default;}"+t+" *[contentEditable=true] {cursor: text;}")),{showCaret:m,showBlockCaretContainer:function(e){e.hasAttribute("data-mce-caret")&&(Xi(e),r(n()),s.selection.scrollIntoView(e[0]))},hideFakeCaret:v,destroy:function(){d.destroy(),l=null}}}function Rh(e,t,n){var r,o,i=1,a=e.getShortEndedElements(),s=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g;for(s.lastIndex=r=n;o=s.exec(t);){if(r=s.lastIndex,"/"===o[1])i--;else if(!o[1]){if(o[2]in a)continue;i++}if(0===i)break}return r}var _h,Ah=function(e){var t=e.getBoundingClientRect(),e=e.ownerDocument,n=e.documentElement,e=e.defaultView;return{top:t.top+e.pageYOffset-n.clientTop,left:t.left+e.pageXOffset-n.clientLeft}},Dh=function(e){var t=e.getBody(),n=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},t={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:t},Ph=function(e,t){return o=(o=e).inline?Ah(o.getBody()):{left:0,top:0},r=(n=e).getBody(),n=n.inline?{left:r.scrollLeft,top:r.scrollTop}:{left:0,top:0},r=e,{pageX:(t=(e=t).target.ownerDocument!==r.getDoc()?(t=Ah(r.getContentAreaContainer()),r=Dh(r),{left:e.pageX-t.left+r.left,top:e.pageY-t.top+r.top}):{left:e.pageX,top:e.pageY}).left-o.left+n.left,pageY:t.top-o.top+n.top};var n,r,o},Oh=Q.isContentEditableFalse,Ih=Q.isContentEditableTrue,Bh=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},Mh=function(i,a){return function(e){var t,n,r,o;0===e.button&&(n=y.find(a.dom.getParents(e.target),ga.or(Oh,Ih)),r=a.getBody(),Oh(o=n))&&o!==r&&(o=a.dom.getPos(n),r=a.getBody(),t=a.getDoc().documentElement,i.element=n,i.screenX=e.screenX,i.screenY=e.screenY,i.maxX=(a.inline?r.scrollWidth:t.offsetWidth)-2,i.maxY=(a.inline?r.scrollHeight:t.offsetHeight)-2,i.relX=e.pageX-o.x,i.relY=e.pageY-o.y,i.width=n.offsetWidth,i.height=n.offsetHeight,i.ghost=(r=a,t=n,e=i.width,o=i.height,t=t.cloneNode(!0),r.dom.setStyles(t,{width:e,height:o}),r.dom.setAttrib(t,"data-mce-selected",null),n=r.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"}),r.dom.setStyles(n,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:e,height:o}),r.dom.setStyles(t,{margin:0,boxSizing:"border-box"}),n.appendChild(t),n))}},Lh=function(c,u){var d=tt.throttle(function(e,t){u._selectionOverrides.hideFakeCaret(),u.selection.placeCaretAt(e,t)},0);return function(e){var t,n,r,o,i,a,s,l=Math.max(Math.abs(e.screenX-c.screenX),Math.abs(e.screenY-c.screenY));if(c.element&&!c.dragging&&10<l){if(u.fire("dragstart",{target:c.element}).isDefaultPrevented())return;c.dragging=!0,u.focus()}c.dragging&&(l=c,l={pageX:(s=Ph(u,e)).pageX-l.relX,pageY:s.pageY+5},s=c.ghost,a=u.getBody(),s.parentNode!==a&&a.appendChild(s),a=c.ghost,s=l,l=c.width,t=c.height,n=c.maxX,r=c.maxY,i=o=0,a.style.left=s.pageX+"px",a.style.top=s.pageY+"px",s.pageX+l>n&&(o=s.pageX+l-n),s.pageY+t>r&&(i=s.pageY+t-r),a.style.width=l-o+"px",a.style.height=t-i+"px",d(e.clientX,e.clientY))}},Fh=function(i,a){return function(e){var t,n,r,o;i.dragging&&(r=function(e){e=e.getSel().getRangeAt(0).startContainer;return 3===e.nodeType?e.parentNode:e}((n=a).selection),o=i.element,r===o||n.dom.isChildOf(r,o)||Oh(r)||(t=function(e){e=e.cloneNode(!0);return e.removeAttribute("data-mce-selected"),e}(i.element),(n=a.fire("drop",{targetClone:t,clientX:e.clientX,clientY:e.clientY})).isDefaultPrevented())||(t=n.targetClone,a.undoManager.transact(function(){Bh(i.element),a.insertContent(a.dom.getOuterHTML(t)),a._selectionOverrides.hideFakeCaret()}))),hh(i)}},Hh=function(e,t){return function(){e.dragging&&t.fire("dragend"),hh(e)}},zh={init:function(e){var t,n,r,o,i,a,s,l,c;t=e,n={},r=p.DOM,o=document,i=Mh(n,t),a=Lh(n,t),s=Fh(n,t),l=Hh(n,t),t.on("mousedown",i),t.on("mousemove",a),t.on("mouseup",s),r.bind(o,"mousemove",a),r.bind(o,"mouseup",l),t.on("remove",function(){r.unbind(o,"mousemove",a),r.unbind(o,"mouseup",l)}),(c=e).on("drop",function(e){var t=void 0!==e.clientX?c.getDoc().elementFromPoint(e.clientX,e.clientY):null;(Oh(t)||Oh(c.dom.getContentEditableParent(t)))&&e.preventDefault()})}},Uh=function(t){function e(e){return y.map(e,function(e){return(e=ca(e)).node=t,e})}var n;return Q.isElement(t)?e(t.getClientRects()):Q.isText(t)?((n=t.ownerDocument.createRange()).setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())):void 0},Wh=((ge=_h=_h||{})[ge.Up=-1]="Up",ge[ge.Down=1]="Down",v.curry(vh,_h.Up,Pi,Oi)),$h=v.curry(vh,_h.Down,Oi,Pi),jh=Q.isContentEditableFalse,qh=Sl,Vh=function(e,t,n){var r=gh(y.filter(y.toArray(e.getElementsByTagName("*")),pl)),r=y.filter(r,function(e){return n>=e.top&&n<=e.bottom}),r=Sh(r,t);return(r=r&&Sh(Eh(e,r),t))&&pl(r.node)?(e=t,{node:(t=r).node,before:xh(t,e)<Ch(t,e)}):null},Kh={isXYWithinRange:function(r,o,e){return!e.collapsed&&b.foldl(e.getClientRects(),function(e,t){return e||(e=o,(n=r)>=(t=t).left&&n<=t.right&&e>=t.top&&e<=t.bottom);var n},!1)}},Yh=function(t,n){var r=null;return{cancel:function(){null!==r&&(clearTimeout(r),r=null)},throttle:function(){var e=arguments;null===r&&(r=setTimeout(function(){t.apply(null,e),e=r=null},n))}}},Gh={setup:function(t){var e=Yh(function(){var e;t.removed||t.selection.getRng().collapsed&&(e=Ha(t,t.selection.getRng(),!1),t.selection.setRng(e))},0);t.on("focus",function(){e.throttle()}),t.on("blur",function(){e.cancel()})}},U={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return K.mac?e.metaKey:e.ctrlKey&&!e.altKey}},Xh=Q.isContentEditableTrue,Jh=Q.isContentEditableFalse,Qh=Dl,Zh=Al,eg=function(e,t){for(var n=e.getBody();t&&t!==n;){if(Xh(t)||Jh(t))return t;t=t.parentNode}return null};function tg(F,H){void 0===H&&(H=li());function e(){}!1!==(F=F||{}).fix_self_closing&&(F.fix_self_closing=!0);var z=F.comment||e,U=F.cdata||e,W=F.text||e,$=F.start||e,j=F.end||e,q=F.pi||e,V=F.doctype||e;return{parse:function(e){for(var t,n,r,s,o,i,a,l,c,u,d,f,m,p,h,g,v,y,b,w=0,x=[],C=0,k=Qo.decode,S=X.makeMap("src,href,data,background,formaction,poster,xlink:href"),T=/((java|vb)script|mhtml):/i,E=function(e){for(var t,n=x.length;n--&&x[n].name!==e;);if(0<=n){for(t=x.length-1;n<=t;t--)(e=x[t]).valid&&j(e.name);x.length=n}},N=function(e,t,n,r,o){var i,a;if(n=(t=t.toLowerCase())in P?t:k(n||r||o||""),O&&!l&&!1==(0===(r=t).indexOf("data-")||0===r.indexOf("aria-"))){if(!(i=p[t])&&h){for(a=h.length;a--&&!(i=h[a]).pattern.test(t););-1===a&&(i=null)}if(!i)return;if(i.validValues&&!(n in i.validValues))return}if(S[t]&&!F.allow_script_urls){var o=n.replace(/[\s\u0000-\u001F]+/g,"");try{o=decodeURIComponent(o)}catch(e){o=unescape(o)}if(T.test(o))return;if(r=o,!(o=F).allow_html_data_urls&&(/^data:image\//i.test(r)?!1===o.allow_svg_data_urls&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)))return}l&&(t in S||0===t.indexOf("on"))||(s.map[t]=n,s.push({name:t,value:n}))},R=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),_=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,A=H.getShortEndedElements(),D=F.self_closing_elements||H.getSelfClosingElements(),P=H.getBoolAttrs(),O=F.validate,I=F.remove_internals,B=F.fix_self_closing,M=H.getSpecialElements(),L=e+">";t=R.exec(L);){if(w<t.index&&W(k(e.substr(w,t.index-w))),n=t[6])E(n=":"===(n=n.toLowerCase()).charAt(0)?n.substr(1):n);else if(n=t[7]){if(t.index+t[0].length>e.length){W(k(e.substr(t.index))),w=t.index+t[0].length;continue}if(c=(n=":"===(n=n.toLowerCase()).charAt(0)?n.substr(1):n)in A,B&&D[n]&&0<x.length&&x[x.length-1].name===n&&E(n),!O||(u=H.getElementRule(n))){if(d=!0,O&&(p=u.attributes,h=u.attributePatterns),(m=t[8])?((l=-1!==m.indexOf("data-mce-type"))&&I&&(d=!1),(s=[]).map={},m.replace(_,N)):(s=[]).map={},O&&!l){if(g=u.attributesRequired,v=u.attributesDefault,y=u.attributesForced,u.removeEmptyAttrs&&!s.length&&(d=!1),y)for(o=y.length;o--;)a=(f=y[o]).name,"{$uid}"===(b=f.value)&&(b="mce_"+C++),s.map[a]=b,s.push({name:a,value:b});if(v)for(o=v.length;o--;)(a=(f=v[o]).name)in s.map||("{$uid}"===(b=f.value)&&(b="mce_"+C++),s.map[a]=b,s.push({name:a,value:b}));if(g){for(o=g.length;o--&&!(g[o]in s.map););-1===o&&(d=!1)}if(f=s.map["data-mce-bogus"]){if("all"===f){w=Rh(H,e,R.lastIndex),R.lastIndex=w;continue}d=!1}}d&&$(n,s,c)}else d=!1;if(r=M[n]){r.lastIndex=w=t.index+t[0].length,w=(t=r.exec(e))?(d&&(i=e.substr(w,t.index-w)),t.index+t[0].length):(i=e.substr(w),e.length),d&&(0<i.length&&W(i,!0),j(n)),R.lastIndex=w;continue}c||(m&&m.indexOf("/")===m.length-1?d&&j(n):x.push({name:n,valid:d}))}else(n=t[1])?(">"===n.charAt(0)&&(n=" "+n),F.allow_conditional_comments||"[if"!==n.substr(0,3).toLowerCase()||(n=" "+n),z(n)):(n=t[2])?U(n.replace(/<!--|-->/g,"")):(n=t[3])?V(n):(n=t[4])&&q(n,t[5]);w=t.index+t[0].length}for(w<e.length&&W(k(e.substr(w))),o=x.length-1;0<=o;o--)(n=x[o]).valid&&j(n.name)}}}(tg=tg||{}).findEndTag=Rh;function ng(e,t){for(var n,r,o,i=t,a=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,s=e.schema,i=function(e,t){e=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(e,"")}(e.getTempAttrs(),i),l=s.getShortEndedElements();o=a.exec(i);)n=a.lastIndex,r=o[0].length,o=l[o[1]]?n:sg.findEndTag(s,i,n),i=i.substring(0,n-r)+i.substring(o),a.lastIndex=n-r;return h.trim(i)}function rg(e){return Q.isElement(e)?e.outerHTML:Q.isText(e)?Qo.encodeRaw(e.data,!1):Q.isComment(e)?"\x3c!--"+e.data+"--\x3e":""}function og(e){return e.dom().innerHTML}function ig(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}}function ag(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}}var sg=tg,lg={trimExternal:ng,trimInternal:ng},cg={KEEP:0,DELETE:2,INSERT:1,diff:function(p,h){function c(e,t,n,r,o){var i=function(e,t,n,r){var o=t-e,i=r-n;if(o===0||i===0)return null;var a=o-i,s=i+o,l=(s%2===0?s:s+1)/2,c,u,d,f,m;for(g[1+l]=e,v[1+l]=t+1,c=0;c<=l;++c){for(u=-c;u<=c;u+=2){d=u+l;if(u===-c||u!==c&&g[d-1]<g[d+1])g[d]=g[d+1];else g[d]=g[d-1]+1;f=g[d];m=f-e+n-u;while(f<t&&m<r&&p[f]===h[m]){g[d]=++f;++m}if(a%2!==0&&a-c<=u&&u<=a+c)if(v[d-a]<=g[d])return y(v[d-a],u+e-n,t,r)}for(u=a-c;u<=a+c;u+=2){d=u+l-a;if(u===a-c||u!==a+c&&v[d+1]<=v[d-1])v[d]=v[d+1]-1;else v[d]=v[d-1];f=v[d]-1;m=f-e+n-u;while(f>=e&&m>=n&&p[f]===h[m]){v[d]=f--;m--}if(a%2===0&&-c<=u&&u<=c)if(v[d]<=g[d+a])return y(v[d],u+e-n,t,r)}}}(e,t,n,r);if(null===i||i.start===t&&i.diag===t-r||i.end===e&&i.diag===e-n)for(var a=e,s=n;a<t||s<r;)a<t&&s<r&&p[a]===h[s]?(o.push([0,p[a]]),++a,++s):r-n<t-e?(o.push([2,p[a]]),++a):(o.push([1,h[s]]),++s);else{c(e,i.start,n,i.start-i.diag,o);for(var l=i.start;l<i.end;++l)o.push([0,p[l]]);c(i.end,t,i.end-i.diag,r,o)}}var e=p.length+h.length+2,g=new Array(e),v=new Array(e),y=function(e,t,n,r){for(var o=e;o-t<r&&o<n&&p[o]===h[o-t];)++o;return{start:e,end:o,diag:t}},e=[];return c(0,p.length,0,h.length,e),e}},ug=function(e,t,n){t=function(e){var t,n=document.createElement("div"),r=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)r.appendChild(t);return r}(t);e.hasChildNodes()&&n<e.childNodes.length?(n=e.childNodes[n]).parentNode.insertBefore(t,n):e.appendChild(t)},dg=function(e,t){e.hasChildNodes()&&t<e.childNodes.length&&(e=e.childNodes[t]).parentNode.removeChild(e)},fg=function(e){return y.filter(y.map(e.childNodes,rg),function(e){return 0<e.length})},mg=function(e,t){var n,r,o=y.map(t.childNodes,rg);return o=cg.diff(o,e),n=t,r=0,y.each(o,function(e){e[0]===cg.KEEP?r++:e[0]===cg.INSERT?(ug(n,e[1],r),r++):e[0]===cg.DELETE&&dg(n,r)}),t},pg=function(e,t){t=(t||document).createElement("div");return t.innerHTML=e,u.children(z.fromDom(t))},hg=og,gg=function(e,t){var n=u.owner(e).dom(),r=z.fromDom(n.createDocumentFragment()),t=pg(t,n);Sc.append(r,t),Tc.empty(e),N.append(e,r)},vg=dl(m.none()),yg=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},bg=function(e){var t=z.fromTag("body",vg.get().getOrThunk(function(){var e=document.implementation.createHTMLDocument("undo");return vg.set(m.some(e)),e}));return gg(t,yg(e)),b.each(tl.descendants(t,"*[data-mce-bogus]"),Tc.unwrap),hg(t)},wg={createFragmentedLevel:ig,createCompleteLevel:ag,createFromEditor:function(t){var e=fg(t.getBody()),e=b.bind(e,function(e){e=lg.trimInternal(t.serializer,e);return 0<e.length?[e]:[]}),n=e.join("");return-1!==n.indexOf("</iframe>")?ig(e):ag(n)},applyToEditor:function(e,t,n){"fragmented"===t.type?mg(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(n?t.beforeBookmark:t.bookmark)},isEq:function(e,t){return!(!e||!t)&&(n=t,yg(e)===yg(n)||(n=t,bg(e)===bg(n)));var n}};function xg(i){function a(e){i.setDirty(e)}function r(e){f(!1),l.add({},e)}function t(){l.typing&&(f(!1),l.add())}var s,o,l=this,c=0,u=[],n=0,d=function(){return 0===n},f=function(e){d()&&(l.typing=e)};i.on("init",function(){l.add()}),i.on("BeforeExecCommand",function(e){e=e.command;"Undo"!==e&&"Redo"!==e&&"mceRepaint"!==e&&(t(),l.beforeChange())}),i.on("ExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&r(e)}),i.on("ObjectResizeStart Cut",function(){l.beforeChange()}),i.on("SaveContent ObjectResized blur",r),i.on("DragEnd",r),i.on("KeyUp",function(e){var t=e.keyCode;e.isDefaultPrevented()||((33<=t&&t<=36||37<=t&&t<=40||45===t||e.ctrlKey)&&(r(),i.nodeChanged()),46!==t&&8!==t||i.nodeChanged(),o&&l.typing&&!1===wg.isEq(wg.createFromEditor(i),u[0])&&(!1===i.isDirty()&&(a(!0),i.fire("change",{level:u[0],lastLevel:null})),i.fire("TypingUndo"),o=!1,i.nodeChanged()))}),i.on("KeyDown",function(e){var t,n=e.keyCode;e.isDefaultPrevented()||(33<=n&&n<=36||37<=n&&n<=40||45===n?l.typing&&r(e):(t=e.ctrlKey&&!e.altKey||e.metaKey,!(n<16||20<n)||224===n||91===n||l.typing||t||(l.beforeChange(),f(!0),l.add({},e),o=!0)))}),i.on("MouseDown",function(e){l.typing&&r(e)});return i.on("input",function(e){var t;e.inputType&&("insertReplacementText"===e.inputType||"insertText"===(t=e).inputType&&null===t.data)&&r(e)}),i.addShortcut("meta+z","","Undo"),i.addShortcut("meta+y,meta+shift+z","","Redo"),i.on("AddUndo Undo Redo ClearUndos",function(e){e.isDefaultPrevented()||i.nodeChanged()}),l={data:u,typing:!1,beforeChange:function(){d()&&(s=fc.getUndoBookmark(i.selection))},add:function(e,t){var n,r=i.settings,o=wg.createFromEditor(i);if(e=X.extend(e=e||{},o),!1===d()||i.removed)return null;if(o=u[c],i.fire("BeforeAddUndo",{level:e,lastLevel:o,originalEvent:t}).isDefaultPrevented())return null;if(o&&wg.isEq(o,e))return null;if(u[c]&&(u[c].beforeBookmark=s),r.custom_undo_redo_levels&&u.length>r.custom_undo_redo_levels){for(n=0;n<u.length-1;n++)u[n]=u[n+1];u.length--,c=u.length}e.bookmark=fc.getUndoBookmark(i.selection),c<u.length-1&&(u.length=c+1),u.push(e),c=u.length-1;r={level:e,lastLevel:o,originalEvent:t};return i.fire("AddUndo",r),0<c&&(a(!0),i.fire("change",r)),e},undo:function(){var e;return l.typing&&(l.add(),l.typing=!1,f(!1)),0<c&&(e=u[--c],wg.applyToEditor(i,e,!0),a(!0),i.fire("undo",{level:e})),e},redo:function(){var e;return c<u.length-1&&(e=u[++c],wg.applyToEditor(i,e,!1),a(!0),i.fire("redo",{level:e})),e},clear:function(){u=[],c=0,l.typing=!1,l.data=u,i.fire("ClearUndos")},hasUndo:function(){return 0<c||l.typing&&u[0]&&!wg.isEq(wg.createFromEditor(i),u[0])},hasRedo:function(){return c<u.length-1&&!l.typing},transact:function(e){return t(),l.beforeChange(),l.ignore(e),l.add()},ignore:function(e){try{n++,e()}finally{n--}},extra:function(e,t){var n;l.transact(e)&&(e=u[c].bookmark,n=u[c-1],wg.applyToEditor(i,n,!0),l.transact(t))&&(u[c-1].beforeBookmark=e)}}}function Cg(e){return e&&/^(IMG)$/.test(e.nodeName)}function kg(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function Sg(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),""+(t="fontFamily"===n?t.replace(/[\'\"]/g,"").replace(/,\s+/g,","):t)}function Tg(e,t){for(var n=t;n;){if(1===n.nodeType&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t}function Eg(e,t,n,r,o,i){var a,s,l,c;if(3===n.nodeType){if(-1!==(l=jg(o,i,n,r)))return{container:n,offset:l};c=n}for(a=new J(n,e.getParent(n,e.isBlock)||t);s=a[o?"prev":"next"]();)if(3===s.nodeType){if(-1!==(l=jg(o,i,c=s)))return{container:s,offset:l}}else if(e.isBlock(s))break;if(c)return{container:c,offset:r=o?0:c.length}}function Ng(e,t,n,r,o){var i,a,s,l;for(3===r.nodeType&&0===r.nodeValue.length&&r[o]&&(r=r[o]),i=Hg(e,r),a=0;a<i.length;a++)for(s=0;s<t.length;s++)if(!("collapsed"in(l=t[s])&&l.collapsed!==n.collapsed)&&e.is(i[a],l.selector))return i[a];return r}function Rg(t,e,n,r){var o,i,a=t.dom,s=a.getRoot();if((i=e[0].wrapper?i:a.getParent(n,e[0].block,s))||(o=a.getParent(n,"LI,TD,TH"),i=a.getParent(3===n.nodeType?n.parentNode:n,function(e){return e!==s&&Ug(t,e)},o)),!(i=i&&e[0].wrapper?Hg(a,i,"ul,ol").reverse()[0]||i:i))for(i=n;i[r]&&!a.isBlock(i[r])&&(i=i[r],!_.isEq(i,"br")););return i||n}function _g(e,t,n,r,o,i,a){var s,l,c=s=a?n:o,u=a?"previousSibling":"nextSibling",d=e.getRoot();if(3!==c.nodeType||zg(c)||!(a?0<r:i<c.nodeValue.length))for(;;){if(!t[0].block_expand&&e.isBlock(s))return s;for(l=s[u];l;l=l[u])if(!Fg(l)&&!zg(l)&&!$g(l))return s;if(s===d||s.parentNode===d){c=s;break}s=s.parentNode}return c}function Ag(t,e,n,r){var o=t.dom.getRoot();return e!==o&&(e=t.dom.getParent(e,function(e){return!!Kg(t,e,n)||e.parentNode===o||!!Yg(t,e,n,r,!0)}),Yg(t,e,n,r))}function Dg(e,t,n){return!!Vg(t,n.inline)||!!Vg(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0)}function Pg(e,t,n,r,o,i){var a,s,l,c=n[r];if(n.onmatch)return n.onmatch(t,n,r);if(c)if(void 0===c.length){for(a in c)if(c.hasOwnProperty(a)){if(s="attributes"===r?e.getAttrib(t,a):_.getStyle(e,t,a),o&&!s&&!n.exact)return;if((!o||n.exact)&&!Vg(s,_.normalizeStyleValue(e,_.replaceVars(c[a],i),a)))return}}else for(l=0;l<c.length;l++)if("attributes"===r?e.getAttrib(t,c[l]):_.getStyle(e,t,c[l]))return n;return n}function Og(e,t){return e.splitText(t)}function Ig(e){return 0<function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==Jg||1<e.childNodes.length)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t}(e).length}function Bg(e,t,n,r,o){if(r)nv(t,n,r,o);else if(!(r=hc(e,n.getStart())))for(;r=t.get(Qg);)nv(t,n,r,!1)}function Mg(e,t){return e.appendChild(t),t}function Lg(e,t){return e.schema.getTextInlineElements().hasOwnProperty(c.name(t))&&!pc(t.dom())&&!Q.isBogus(t.dom())}var _={isInlineBlock:Cg,moveStart:function(e,t,n){var r,o,i,a=n.startOffset,s=n.startContainer;if((n.startContainer!==n.endContainer||!Cg(n.startContainer.childNodes[n.startOffset]))&&1===s.nodeType)for(a<(i=s.childNodes).length?r=new J(s=i[a],e.getParent(s,e.isBlock)):(r=new J(s=i[i.length-1],e.getParent(s,e.isBlock))).next(!0),o=r.current();o;o=r.next())if(3===o.nodeType&&!kg(o))return n.setStart(o,0),void t.setRng(n)},getNonWhiteSpaceSibling:function(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1===e.nodeType||!kg(e))return e},isTextBlock:function(e,t){return t.nodeType&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},isValid:function(e,t,n){return e.schema.isValidChild(t,n)},isWhiteSpaceNode:kg,replaceVars:function(e,n){return"string"!=typeof e?e=e(n):n&&(e=e.replace(/%(\w+)/g,function(e,t){return n[t]||e})),e},isEq:function(e,t){return e=""+((e=e||"").nodeName||e),t=""+((t=t||"").nodeName||t),e.toLowerCase()===t.toLowerCase()},normalizeStyleValue:Sg,getStyle:function(e,t,n){return Sg(e,e.getStyle(t,n),n)},getTextDecoration:function(t,e){var n;return t.getParent(e,function(e){return(n=t.getStyle(e,"text-decoration"))&&"none"!==n}),n},getParents:function(e,t,n){return e.getParents(t,n,e.getRoot())}},Fg=xc.isBookmarkNode,Hg=_.getParents,zg=_.isWhiteSpaceNode,Ug=_.isTextBlock,Wg=function(e,t){for(void 0===t&&(t=(3===e.nodeType?e:e.childNodes).length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=(3===e.nodeType?e:e.childNodes).length);return{node:e,offset:t}},$g=function(e){return"BR"===e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling},jg=function(e,t,n,r){var o,i,n=n.nodeValue;return void 0===r&&(r=e?n.length:0),e?(o=n.lastIndexOf(" ",r),-1===(o=(i=n.lastIndexOf(" ",r))<o?o:i)||t||o++):(o=n.indexOf(" ",r),i=n.indexOf(" ",r),o=-1!==o&&(-1===i||o<i)?o:i),o},qg={expandRng:function(e,t,n,r){var o,i=t.startContainer,a=t.startOffset,s=t.endContainer,l=t.endOffset,c=e.dom;return 1===i.nodeType&&i.hasChildNodes()&&3===(i=Bi(i,a)).nodeType&&(a=0),1===s.nodeType&&s.hasChildNodes()&&3===(s=Bi(s,t.collapsed?l:l-1)).nodeType&&(l=s.nodeValue.length),i=Tg(c,i),s=Tg(c,s),(Fg(i.parentNode)||Fg(i))&&3===(i=(i=Fg(i)?i:i.parentNode).nextSibling||i).nodeType&&(a=0),(Fg(s.parentNode)||Fg(s))&&3===(s=(s=Fg(s)?s:s.parentNode).previousSibling||s).nodeType&&(l=s.length),n[0].inline&&(t.collapsed&&((o=Eg(c,e.getBody(),i,a,!0,r))&&(i=o.container,a=o.offset),o=Eg(c,e.getBody(),s,l,!1,r))&&(s=o.container,l=o.offset),s=r?s:function(e,t){var n=Wg(e,t);if(n.node){for(;n.node&&0===n.offset&&n.node.previousSibling;)n=Wg(n.node.previousSibling);n.node&&0<n.offset&&3===n.node.nodeType&&" "===n.node.nodeValue.charAt(n.offset-1)&&1<n.offset&&(e=n.node).splitText(n.offset-1)}return e}(s,l)),(n[0].inline||n[0].block_expand)&&(n[0].inline&&3===i.nodeType&&0!==a||(i=_g(c,n,i,a,s,l,!0)),n[0].inline&&3===s.nodeType&&l!==s.nodeValue.length||(s=_g(c,n,i,a,s,l,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(i=Ng(c,n,t,i,"previousSibling"),s=Ng(c,n,t,s,"nextSibling")),(n[0].block||n[0].selector)&&(i=Rg(e,n,i,"previousSibling"),s=Rg(e,n,s,"nextSibling"),n[0].block)&&(c.isBlock(i)||(i=_g(c,n,i,a,s,l,!0)),c.isBlock(s)||(s=_g(c,n,i,a,s,l,!1))),1===i.nodeType&&(a=c.nodeIndex(i),i=i.parentNode),1===s.nodeType&&(l=c.nodeIndex(s)+1,s=s.parentNode),{startContainer:i,startOffset:a,endContainer:s,endOffset:l}}},Vg=_.isEq,Kg=function(e,t,n){var r=e.formatter.get(n);if(r)for(var o=0;o<r.length;o++)if(!1===r[o].inherit&&e.dom.is(t,r[o].selector))return!0;return!1},Yg=function(e,t,n,r,o){var i,a,s,l,c=e.formatter.get(n),u=e.dom;if(c&&t)for(a=0;a<c.length;a++)if(i=c[a],Dg(e.dom,t,i)&&Pg(u,t,i,"attributes",o,r)&&Pg(u,t,i,"styles",o,r)){if(l=i.classes)for(s=0;s<l.length;s++)if(!e.dom.hasClass(t,l[s]))return;return i}},Gg={matchNode:Yg,matchName:Dg,match:function(e,t,n,r){var o;return r?Ag(e,r,t,n):(r=e.selection.getNode(),!!Ag(e,r,t,n)||!((o=e.selection.getStart())===r||!Ag(e,o,t,n)))},matchAll:function(r,o,i){var a=[],s={},e=r.selection.getStart();return r.dom.getParent(e,function(e){for(var t,n=0;n<o.length;n++)t=o[n],!s[t]&&Yg(r,e,t,i)&&(s[t]=!0,a.push(t))},r.dom.getRoot()),a},canApply:function(e,t){var n,r,o,i,a=e.formatter.get(t),s=e.dom;if(a)for(t=e.selection.getStart(),n=_.getParents(s,t),o=a.length-1;0<=o;o--){if(!(i=a[o].selector)||a[o].defaultBlock)return!0;for(r=n.length-1;0<=r;r--)if(s.is(n[r],i))return!0}return!1},matchesUnInheritedFormatSelector:Kg},Xg={split:function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,e=e.endOffset;return t===r&&Q.isText(t)?0<n&&n<t.nodeValue.length&&(t=(r=Og(t,n)).previousSibling,n<e?(t=r=Og(r,e-=n).previousSibling,e=r.nodeValue.length,n=0):e=0):(Q.isText(t)&&0<n&&n<t.nodeValue.length&&(t=Og(t,n),n=0),Q.isText(r)&&0<e&&e<r.nodeValue.length&&(e=(r=Og(r,e).previousSibling).nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:e}}},Jg=h.ZWSP,Qg="_mce_caret",Zg=function(e,t){return e.importNode(t,!0)},ev=function(e){var t;if(e)for(e=(t=new J(e,e)).current();e;e=t.next())if(3===e.nodeType)return e;return null},tv=function(e){var t=z.fromTag("span");return C.setAll(t,{id:Qg,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&N.append(t,z.fromText(Jg)),t},nv=function(e,t,n,r){var o=t.getRng(!0),i=e.getParent(n,e.isBlock);Ig(n)?(!1!==r&&(o.setStartBefore(n),o.setEndBefore(n)),e.remove(n)):(r=function(e){e=ev(e);return e&&e.nodeValue.charAt(0)===Jg&&e.deleteData(0,1),e}(n),o.startContainer===r&&0<o.startOffset&&o.setStart(r,o.startOffset-1),o.endContainer===r&&0<o.endOffset&&o.setEnd(r,o.endOffset-1),e.remove(n,!0)),i&&e.isEmpty(i)&&Oc.fillWithPaddingBr(z.fromDom(i)),t.setRng(o)},rv=function(e,t,n){var r=e.dom,e=r.getParent(n,ga.curry(_.isTextBlock,e));e&&r.isEmpty(e)||(Oc.removeTrailingBr(z.fromDom(n)),r.isEmpty(n))?n.parentNode.replaceChild(t,n):r.insertAfter(t,n)},ov=function(e,t){e=b.foldr(e,function(e,t){return Mg(e,t.cloneNode(!1))},t);return Mg(e,e.ownerDocument.createTextNode(Jg))},iv=function(e){var o=e.dom,i=e.selection,a=e.getBody();e.on("mouseup keydown",function(e){var t,n,r;t=a,n=o,r=i,e=e.keyCode,Bg(t,n,r,null,!1),8===e&&r.isCollapsed()&&r.getStart().innerHTML===Jg&&Bg(t,n,r,hc(t,r.getStart())),37!==e&&39!==e||Bg(t,n,r,hc(t,r.getStart()))})},av={},sv=y.filter,lv=y.each;we=function(e){var t,n=e.selection.getRng(),r=Q.matchNodeNames("pre");n.collapsed||(t=e.selection.getSelectedBlocks(),lv(sv(sv(t,r),function(e){return r(e.previousSibling)&&-1!==y.indexOf(t,e.previousSibling)}),function(e){var t;t=e.previousSibling,G(e=e).remove(),G(t).append("<br><br>").append(e.childNodes)}))},av[r="pre"]||(av[r]=[]),av[r].push(we);function cv(e){return/^(TH|TD)$/.test(e.nodeName)}function uv(e,t,n){var r,o=t[n?"startContainer":"endContainer"],t=t[n?"startOffset":"endOffset"];return Q.isElement(o)&&(r=o.childNodes.length-1,!n&&t&&t--,o=o.childNodes[r<t?r:t]),Q.isText(o)&&n&&t>=o.nodeValue.length&&(o=new J(o,e.getBody()).next()||o),o=Q.isText(o)&&!n&&0===t?new J(o,e.getBody()).prev()||o:o}function dv(e,t,n){var r,o,i=new kc(e);if(t&&n&&(t=Rv(t,"previousSibling"),n=Rv(n,"nextSibling"),i.compare(t,n))){for(r=t.nextSibling;r&&r!==n;)r=(o=r).nextSibling,t.appendChild(o);return e.remove(n),X.each(X.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n}function fv(n,e){return v.curry(function(e,t){return!(!t||!_.getStyle(n,t,e))},e)}function mv(r,e,t){return v.curry(function(e,t,n){r.setStyle(n,e,t),""===n.getAttribute("style")&&n.removeAttribute("style"),Av(r,n)},e,t)}function pv(e,t){var n;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(n=_.getTextDecoration(e,t.parentNode),e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null))}function hv(p,h,g,r){function v(n,e){var t;e=e||w,n&&(e.onformat&&e.onformat(n,e,g,r),Lv(e.styles,function(e,t){m.setStyle(n,t,_.replaceVars(e,g))}),e.styles&&(t=m.getAttrib(n,"style"))&&n.setAttribute("data-mce-style",t),Lv(e.attributes,function(e,t){m.setAttrib(n,t,_.replaceVars(e,g))}),Lv(e.classes,function(e){e=_.replaceVars(e,g),m.hasClass(n,e)||m.addClass(n,e)}))}function y(e,t){var n=!1;return!!w.selector&&(Lv(e,function(e){return!("collapsed"in e&&e.collapsed!==f)&&m.is(t,e.selector)&&!pc(t)?(v(t,e),!(n=!0)):void 0}),n)}function e(l,e,t,c){var u=[],d=!0,f=w.inline||w.block,m=l.create(f);v(m),yv(l,e,function(e){var a,s=function(e){var t,n=d,r=e.nodeName.toLowerCase(),o=e.parentNode.nodeName.toLowerCase();if(1===e.nodeType&&l.getContentEditable(e)&&(n=d,d="true"===l.getContentEditable(e),t=!0),_.isEq(r,"br"))a=0,w.block&&l.remove(e);else if(w.wrapper&&Gg.matchNode(p,e,h,g))a=0;else if(d&&!t&&w.block&&!w.wrapper&&_.isTextBlock(p,r)&&_.isValid(p,o,f))e=l.rename(e,f),v(e),u.push(e),a=0;else{if(w.selector){var i=y(b,e);if(!w.inline||i)return void(a=0)}!d||t||!_.isValid(p,f,r)||!_.isValid(p,o,f)||!c&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||pc(e)||w.inline&&l.isBlock(e)?(a=0,Lv(X.grep(e.childNodes),s),t&&(d=n),a=0):(a||(a=l.clone(m,!1),e.parentNode.insertBefore(a,e),u.push(a)),a.appendChild(e))}};Lv(e,s)}),!0===w.links&&Lv(u,function(e){var t=function(e){"A"===e.nodeName&&v(e,w),Lv(X.grep(e.childNodes),t)};t(e)}),Lv(u,function(e){var t,n,r,o=function(e){var n=!1;return Lv(e.childNodes,function(e){if((t=e)&&1===t.nodeType&&!xc.isBookmarkNode(t)&&!pc(t)&&!Q.isBogus(t))return n=e,!1;var t}),n};t=0,Lv(e.childNodes,function(e){_.isWhiteSpaceNode(e)||xc.isBookmarkNode(e)||t++}),n=t,(1<u.length||!l.isBlock(e))&&0===n?l.remove(e,1):(w.inline||w.wrapper)&&(w.exact||1!==n||((o=o(n=e))&&!xc.isBookmarkNode(o)&&Gg.matchName(l,o,w)&&(r=l.clone(o,!1),v(r),l.replace(r,n,!0),l.remove(o,1)),e=r||n),Dv(p,b,g,e),Mv(p,w,h,g,e),Ov(l,w,g,e),Iv(l,w,g,e),Bv(l,w,g,e))})}var t,n,o,i,a,s,l,c,u,d,b=p.formatter.get(h),w=b[0],f=!r&&p.selection.isCollapsed(),m=p.dom,x=p.selection;if("false"===m.getContentEditable(x.getNode())){r=x.getNode();for(var C=0,k=b.length;C<k;C++)if(b[C].ceFalseOverride&&m.is(r,b[C].selector))return void v(r,b[C])}else w&&(r?r.nodeType?y(b,r)||((n=m.createRng()).setStartBefore(r),n.setEndAfter(r),e(m,qg.expandRng(p,n,b),0,!0)):e(m,r,0,!0):f&&w.inline&&!m.select("td[data-mce-selected],th[data-mce-selected]").length?(n=h,o=g,a=(t=p).selection,s=a.getRng(!0),l=s.startOffset,c=s.startContainer.nodeValue,(u=hc(t.getBody(),a.getStart()))&&(i=ev(u)),d=/[^\s\u00a0\u00ad\u200b\ufeff]/,c&&0<l&&l<c.length&&d.test(c.charAt(l))&&d.test(c.charAt(l-1))?(d=a.getBookmark(),s.collapse(!0),s=qg.expandRng(t,s,t.formatter.get(n)),s=Xg.split(s),t.formatter.apply(n,o,s),a.moveToBookmark(d)):(u&&i.nodeValue===Jg||(i=(u=Zg(t.getDoc(),tv(!0).dom())).firstChild,s.insertNode(u),l=1),t.formatter.apply(n,o,u),a.setCursorLocation(i,l))):(c=p.selection.getNode(),p.settings.forced_root_block||!b[0].defaultBlock||m.getParent(c,m.isBlock)||hv(p,b[0].defaultBlock),p.selection.setRng(Hc.normalize(p.selection.getRng())),d=fc.getPersistentBookmark(p.selection,!0),e(m,qg.expandRng(p,x.getRng(),b)),w.styles&&Pv(m,w,g,c),x.moveToBookmark(d),_.moveStart(m,x,x.getRng()),p.nodeChanged()),gv(h,p))}var gv=function(e,t){lv(av[e],function(e){e(t)})},vv=X.each,yv=function(e,t,o){var n,i,a,s,r=t.startContainer,l=t.startOffset,c=t.endContainer,u=t.endOffset,t=e.select("td[data-mce-selected],th[data-mce-selected]");if(0<t.length)vv(t,function(e){o([e])});else{var d,f,m,p=function(e){var t=e[0];return 3===t.nodeType&&t===r&&l>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===u&&0<e.length&&t===c&&3===t.nodeType&&e.splice(e.length-1,1),e},h=function(e,t,n){for(var r=[];e&&e!==n;e=e[t])r.push(e);return r},t=function(e,t){do{if(e.parentNode===t)return e}while(e=e.parentNode)},g=function(e,t,n){var r=n?"nextSibling":"previousSibling";for(a=(i=e).parentNode;i&&i!==t;i=a)a=i.parentNode,(s=h(i===e?i:i[r],r)).length&&(n||s.reverse(),o(p(s)))};if(1===r.nodeType&&r.hasChildNodes()&&(r=r.childNodes[l]),1===c.nodeType&&c.hasChildNodes()&&(f=u,m=(d=c).childNodes,--f>m.length-1?f=m.length-1:f<0&&(f=0),c=m[f]||d),r===c)return o(p([r]));for(n=e.findCommonAncestor(r,c),i=r;i;i=i.parentNode){if(i===c)return g(r,n,!0);if(i===n)break}for(i=c;i;i=i.parentNode){if(i===r)return g(c,n);if(i===n)break}m=t(r,n)||r,f=t(c,n)||c,g(r,m,!0),(s=h(m===r?m:m.nextSibling,"nextSibling",f===c?f.nextSibling:f)).length&&o(p(s)),g(c,f)}},bv=/^(src|href|style)$/,wv=X.each,xv=_.isEq,Cv=function(e,t,n,r){e=e.create(n,r);return t.parentNode.insertBefore(e,t),e.appendChild(t),e},kv=function(e,t,n,r){return!(t=_.getNonWhiteSpaceSibling(t,n,r))||"BR"===t.nodeName||e.isBlock(t)},Sv=function(e,n,r,o,i){var t,a,s,l,c,u,d,f,m,p,h=e.dom;if(f=h,!(xv(u=o,(c=n).inline)||xv(u,c.block)||(c.selector?Q.isElement(u)&&f.is(u,c.selector):void 0)||(f=o,n.links&&"A"===f.tagName)))return!1;if("all"!==n.remove)for(wv(n.styles,function(e,t){e=_.normalizeStyleValue(h,_.replaceVars(e,r),t),"number"==typeof t&&(t=e,i=0),!n.remove_similar&&i&&!xv(_.getStyle(h,i,t),e)||h.setStyle(o,t,""),s=1}),s&&""===h.getAttrib(o,"style")&&(o.removeAttribute("style"),o.removeAttribute("data-mce-style")),wv(n.attributes,function(e,t){var n;e=_.replaceVars(e,r),"number"==typeof t&&(t=e,i=0),i&&!xv(h.getAttrib(i,t),e)||("class"===t&&(e=h.getAttrib(o,t))&&(n="",wv(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(n+=(n?" ":"")+e)}),n)?h.setAttrib(o,t,n):("class"===t&&o.removeAttribute("className"),bv.test(t)&&o.removeAttribute("data-mce-"+t),o.removeAttribute(t)))}),wv(n.classes,function(e){e=_.replaceVars(e,r),i&&!h.hasClass(i,e)||h.removeClass(o,e)}),a=h.getAttribs(o),t=0;t<a.length;t++){var g=a[t].nodeName;if(0!==g.indexOf("_")&&0!==g.indexOf("data-"))return!1}return"none"!==n.remove?(l=e,u=n,f=(c=o).parentNode,m=l.dom,p=l.settings.forced_root_block,u.block&&(p?f!==m.getRoot()||u.list_block&&xv(c,u.list_block)||wv(X.grep(c.childNodes),function(e){_.isValid(l,p,e.nodeName.toLowerCase())?d?d.appendChild(e):(d=Cv(m,e,p),m.setAttribs(d,l.settings.forced_root_block_attrs)):d=0}):m.isBlock(c)&&!m.isBlock(f)&&(kv(m,c,!1)||kv(m,c.firstChild,!0,1)||c.insertBefore(m.create("br"),c.firstChild),kv(m,c,!0)||kv(m,c.lastChild,!1,1)||c.appendChild(m.create("br")))),u.selector&&u.inline&&!xv(u.inline,c)||m.remove(c,1),!0):void 0},Tv={removeFormat:Sv,remove:function(w,x,C,e,k){function o(e){n=w,r=x,o=C,i=k,wv(_.getParents(n.dom,e.parentNode).reverse(),function(e){var t;a||"_start"===e.id||"_end"===e.id||(t=Gg.matchNode(n,e,r,o,i))&&!1!==t.split&&(a=e)});var n,r,o,i,a,t,s,l,c,u,d,f=w,m=S,p=a,h=e,g=!0,v=T,y=C,b=f.dom;if(p){for(d=p.parentNode,t=h.parentNode;t&&t!==d;t=t.parentNode){for(s=b.clone(t,!1),u=0;u<m.length;u++)if(Sv(f,m[u],y,s,s)){s=0;break}s&&(l&&s.appendChild(l),c=c||s,l=s)}!g||v.mixed&&b.isBlock(p)||(h=b.split(p,h)),l&&(e.parentNode.insertBefore(l,e),c.appendChild(e))}return h}function i(e){var t=s.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return xc.isBookmarkNode(n)&&(n=n[e?"firstChild":"lastChild"]),Q.isText(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),s.remove(t,!0),n}function t(e){var t,n,r=e.commonAncestorContainer;if(e=qg.expandRng(w,e,S,!0),T.split){if((t=uv(w,e,!0))!==(n=uv(w,e))){if(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TR"===t.nodeName?t.firstChild.firstChild||t:t.firstChild||t),r&&/^T(HEAD|BODY|FOOT|R)$/.test(r.nodeName)&&cv(n)&&n.firstChild&&(n=n.firstChild||n),s.isChildOf(t,n)&&t!==n&&!s.isBlock(n)&&!cv(t)&&!cv(n))return t=Cv(s,t,"span",{id:"_start","data-mce-type":"bookmark"}),o(t),t=i(!0);t=Cv(s,t,"span",{id:"_start","data-mce-type":"bookmark"}),n=Cv(s,n,"span",{id:"_end","data-mce-type":"bookmark"}),o(t),o(n),t=i(!0),n=i()}else t=n=o(t);e.startContainer=t.parentNode||t,e.startOffset=s.nodeIndex(t),e.endContainer=n.parentNode||n,e.endOffset=s.nodeIndex(n)+1}yv(s,e,function(e){wv(e,function(e){l(e),Q.isElement(e)&&"underline"===w.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===_.getTextDecoration(s,e.parentNode)&&Sv(w,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var S=w.formatter.get(x),T=S[0],a=!0,s=w.dom,n=w.selection,l=function(e){var t,n,r,o,i;if(Q.isElement(e)&&s.getContentEditable(e)&&(o=a,a="true"===s.getContentEditable(e),i=!0),t=X.grep(e.childNodes),a&&!i)for(n=0,r=S.length;n<r&&!Sv(w,S[n],C,e,e);n++);if(T.deep&&t.length){for(n=0,r=t.length;n<r;n++)l(t[n]);i&&(a=o)}};if(e)e.nodeType?((g=s.createRng()).setStartBefore(e),g.setEndAfter(e),t(g)):t(e);else if("false"===s.getContentEditable(n.getNode())){e=n.getNode();for(var r=0,c=S.length;r<c&&(!S[r].ceFalseOverride||!Sv(w,S[r],C,e,e));r++);}else if(n.isCollapsed()&&T.inline&&!s.select("td[data-mce-selected],th[data-mce-selected]").length){var u,d,f=w,m=x,p=C,h=k,g=f.dom,v=f.selection,y=[],b=v.getRng(),E=b.startContainer,N=b.startOffset,R=E;for(3===E.nodeType&&(N!==E.nodeValue.length&&(u=!0),R=R.parentNode);R;){if(Gg.matchNode(f,R,m,p,h)){d=R;break}R.nextSibling&&(u=!0),y.push(R),R=R.parentNode}d&&(u?(N=v.getBookmark(),b.collapse(!0),E=qg.expandRng(f,b,f.formatter.get(m),!0),E=Xg.split(E),f.formatter.remove(m,p,E),v.moveToBookmark(N)):(b=hc(f.getBody(),d),E=tv(!1).dom(),N=ov(y,E),rv(f,E,b||d),nv(g,v,b,!1),v.setCursorLocation(N,1),g.isEmpty(d)&&g.remove(d)))}else E=fc.getPersistentBookmark(w.selection,!0),t(n.getRng()),n.moveToBookmark(E),T.inline&&Gg.match(w,x,C,n.getStart())&&_.moveStart(s,n,n.getRng()),w.nodeChanged()}},Ev=X.each,Nv=function(e){return e&&1===e.nodeType&&!xc.isBookmarkNode(e)&&!pc(e)&&!Q.isBogus(e)},Rv=function(e,t){for(var n=e;n;n=n[t]){if(3===n.nodeType&&0!==n.nodeValue.length)return e;if(1===n.nodeType&&!xc.isBookmarkNode(n))return n}return e},_v=function(e,t,n){Ev(e.childNodes,function(e){Nv(e)&&(t(e)&&n(e),e.hasChildNodes())&&_v(e,t,n)})},Av=function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)},Dv=function(i,e,a,s){Ev(e,function(t){var r,e,n,o;Ev(i.dom.select(t.inline,s),function(e){Nv(e)&&Tv.removeFormat(i,t,a,e,t.exact?e:null)}),r=i.dom,n=s,(e=t).clear_child_styles&&(o=e.links?"*:not(a)":"*",Ev(r.select(o,n),function(n){Nv(n)&&Ev(e.styles,function(e,t){r.setStyle(n,t,"")})}))})},Pv=function(e,t,n,r){(t.styles.color||t.styles.textDecoration)&&(X.walk(r,v.curry(pv,e),"childNodes"),pv(e,r))},Ov=function(e,t,n,r){t.styles&&t.styles.backgroundColor&&_v(r,fv(e,"fontSize"),mv(e,"backgroundColor",_.replaceVars(t.styles.backgroundColor,n)))},Iv=function(e,t,n,r){"sub"!==t.inline&&"sup"!==t.inline||(_v(r,fv(e,"fontSize"),mv(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",r),!0))},Bv=function(e,t,n,r){r&&!1!==t.merge_siblings&&(r=dv(e,_.getNonWhiteSpaceSibling(r),r),dv(e,r,_.getNonWhiteSpaceSibling(r,!0)))},Mv=function(t,n,r,o,i){Gg.matchNode(t,i.parentNode,r,o)&&Tv.removeFormat(t,n,o,i)||n.merge_with_parents&&t.dom.getParent(i.parentNode,function(e){if(Gg.matchNode(t,e,r,o))return Tv.removeFormat(t,n,o,i),!0})},Lv=X.each,Fv={applyFormat:hv},Hv=X.each,zv={formatChanged:function(e,t,n,r,o){var i,a,s,l,c,u;null===t.get()&&(a=e,s={},(i=t).set({}),a.on("NodeChange",function(n){var r=_.getParents(a.dom,n.element),o={},r=X.grep(r,function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")});Hv(i.get(),function(e,n){Hv(r,function(t){return a.formatter.matchNode(t,n,{},e.similar)?(s[n]||(Hv(e,function(e){e(!0,{node:t,format:n,parents:r})}),s[n]=e),o[n]=e,!1):!Gg.matchesUnInheritedFormatSelector(a,t,n)&&void 0})}),Hv(s,function(e,t){o[t]||(delete s[t],Hv(e,function(e){e(!1,{node:n.element,format:t,parents:r})}))})})),e=n,l=r,c=o,u=(n=t).get(),Hv(e.split(","),function(e){u[e]||(u[e]=[],u[e].similar=c),u[e].push(l)}),n.set(u)}},Uv={get:function(r){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(n,e,t){X.each(t,function(e,t){r.setAttrib(n,t,e)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return X.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){t[e]={block:e,remove:"all"}}),t}};function Wv(e){function n(e,t){e&&("string"!=typeof e?X.each(e,function(e,t){n(t,e)}):(t=t.length?t:[t],X.each(t,function(e){void 0===e.deep&&(e.deep=!e.selector),void 0===e.split&&(e.split=!e.selector||e.inline),void 0===e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),r[e]=t))}var r={};return n(Uv.get(e.dom)),n(e.settings.formats),{get:function(e){return e?r[e]:r},register:n,unregister:function(e){return e&&r[e]&&delete r[e],r}}}function $v(e,t){function l(e){var t,n;return r="string"==typeof e?{name:e,classes:[],attrs:{}}:e,e=Vv.create(r.name),t=e,(n=r).classes.length&&Vv.addClass(t,n.classes.join(" ")),Vv.setAttribs(t,n.attrs),e}function c(t,e,n){var r,o,i=0<e.length&&e[0],a=i&&i.name,s=function(e,t){e="string"!=typeof e?e.nodeName.toLowerCase():e,e=u.getElementRule(e),e=e&&e.parentsRequired;return!(!e||!e.length)&&(t&&-1!==X.inArray(e,t)?t:e[0])}(t,a);if(s)a===s?(o=e[0],e=e.slice(1)):o=s;else if(i)o=e[0],e=e.slice(1);else if(!n)return t;return o&&(r=l(o)).appendChild(t),n&&(r||(r=Vv.create("div")).appendChild(t),X.each(n,function(e){e=l(e);r.insertBefore(e,t)})),c(r,e,o&&o.siblings)}var r,n,u=t&&t.schema||li({});return e&&e.length?(r=e[0],t=l(r),(n=Vv.create("div")).appendChild(c(t,e.slice(1),r.siblings)),n):""}function jv(e){return e&&"string"==typeof e?(e=(e=e.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),X.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var e=X.map(e.split(/(?:~\+|~|\+)/),Kv),t=e.pop();return e.length&&(t.siblings=e),t}).reverse()):[]}var qv=X.each,Vv=p.DOM,Kv=function(e){var t,i={classes:[],attrs:{}};return"*"!==(e=i.selector=X.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,t,n,r,o){switch(t){case"#":i.attrs.id=n;break;case".":i.classes.push(n);break;case":":-1!==X.inArray("checked disabled enabled read-only required".split(" "),n)&&(i.attrs[n]=n)}return"["===r&&(t=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/))&&(i.attrs[t[1]]=t[2]),""})),i.name=t||"div",i},Yv={getCssText:function(n,e){var t,r,o,i,a="",s=n.settings.preview_styles;if(!1===s)return"";"string"!=typeof s&&(s="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");function l(e){return e.replace(/%(\w+)/g,"")}if("string"==typeof e){if(!(e=n.formatter.get(e)))return;e=e[0]}return"preview"in e&&!1===(s=e.preview)?"":(t=e.block||e.inline||"span",o=(o=jv(e.selector)).length?(o[0].name||(o[0].name=t),t=e.selector,$v(o,n)):$v([t],n),r=Vv.select(t,o)[0]||o.firstChild,qv(e.styles,function(e,t){(e=l(e))&&Vv.setStyle(r,t,e)}),qv(e.attributes,function(e,t){(e=l(e))&&Vv.setAttrib(r,t,e)}),qv(e.classes,function(e){e=l(e),Vv.hasClass(r,e)||Vv.addClass(r,e)}),n.fire("PreviewFormats"),Vv.setStyles(o,{position:"absolute",left:-65535}),n.getBody().appendChild(o),i=Vv.getStyle(n.getBody(),"fontSize",!0),i=/px$/.test(i)?parseInt(i,10):0,qv(s.split(" "),function(e){var t=Vv.getStyle(r,e,!0);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=Vv.getStyle(n.getBody(),e,!0),"#ffffff"===Vv.toHex(t).toLowerCase())||"color"===e&&"#000000"===Vv.toHex(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===i)return;t=parseFloat(t)/(/%$/.test(t)?100:1)*i+"px"}"border"===e&&t&&(a+="padding:0 2px;"),a+=e+":"+t+";"}}),n.fire("AfterPreviewFormats"),Vv.remove(o),a)},parseSelector:jv,selectorToHtml:function(e,t){return $v(jv(e),t)}},Gv={toggle:function(e,t,n,r,o){t=t.get(n);!Gg.match(e,n,r,o)||"toggle"in t[0]&&!t[0].toggle?Fv.applyFormat(e,n,r,o):Tv.remove(e,n,r,o)}},Xv={setup:function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])}};function Jv(e){var t=Wv(e),n=dl(null);return Xv.setup(e),iv(e),{get:t.get,register:t.register,unregister:t.unregister,apply:v.curry(Fv.applyFormat,e),remove:v.curry(Tv.remove,e),toggle:v.curry(Gv.toggle,e,t),match:v.curry(Gg.match,e),matchAll:v.curry(Gg.matchAll,e),matchNode:v.curry(Gg.matchNode,e),canApply:v.curry(Gg.canApply,e),formatChanged:v.curry(zv.formatChanged,e,n),getCssText:v.curry(Yv.getCssText,e)}}function Qv(a){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var o,i=e[r];for(o in i)i.hasOwnProperty(o)&&(n[o]=a(n[o],i[o]))}return n}}function Zv(e,t,n){var r,o,i=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[i])return e[i];if(e!==t){if(r=e[a])return r;for(o=e.parent;o&&o!==t;o=o.parent)if(r=o[a])return r}}var ey=Qv(function(e,t){return l.isObject(e)&&l.isObject(t)?ey(e,t):t}),t=Qv(function(e,t){return t}),ty={deepMerge:ey,merge:t},ny={register:function(t,l,c){t.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,r=e.length;r--;)(n=e[r]).attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),t.addAttributeFilter("src,href,style",function(e,t){for(var n,r,o=e.length,i="data-mce-"+t,a=l.url_converter,s=l.url_converter_scope;o--;)void 0!==(r=(n=e[o]).attributes.map[i])?(n.attr(t,0<r.length?r:null),n.attr(i,null)):(r=n.attributes.map[t],"style"===t?r=c.serializeStyle(c.parseStyle(r),n.name):a&&(r=a.call(s,r,t,n.name)),n.attr(t,0<r.length?r:null))}),t.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)(t=e[r]).attr("class")&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",0<n.length?n:null))}),t.addAttributeFilter("data-mce-type",function(e,t,n){for(var r,o=e.length;o--;)"bookmark"!==(r=e[o]).attributes.map["data-mce-type"]||n.cleanup||r.remove()}),t.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=Qo.decode(t.value))}),t.addNodeFilter("script,style",function(e,t){for(var n,r,o,i=e.length,a=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};i--;)r=(n=e[i]).firstChild?n.firstChild.value:"","script"===t?((o=n.attr("type"))&&n.attr("type","mce-no/type"===o?null:o.replace(/^mce\-/,"")),"xhtml"===l.element_format&&0<r.length&&(n.firstChild.value="// <![CDATA[\n"+a(r)+"\n// ]]>")):"xhtml"===l.element_format&&0<r.length&&(n.firstChild.value="\x3c!--\n"+a(r)+"\n--\x3e")}),t.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)0===(t=e[n]).value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),t.addNodeFilter("xml:namespace,input",function(e,t){for(var n,r=e.length;r--;)7===(n=e[r]).type?n.remove():1!==n.type||"input"!==t||"type"in n.attributes.map||n.attr("type","text")}),t.addAttributeFilter("data-mce-type",function(e){b.each(e,function(e){"format-caret"===e.attr("data-mce-type")&&(e.isEmpty(t.schema.getNonEmptyElements())?e.remove():e.unwrap())})}),t.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})},trimTrailingBr:function(e){function t(e){return e&&"br"===e.name}var n,e=e.lastChild;t(e)&&t(n=e.prev)&&(e.remove(),n.remove())}},ry={process:function(e,t,n){return s=n,(a=e)&&a.hasEventListeners("PreProcess")&&!s.no_events?(a=t,s=n,e=(n=e).dom,a=a.cloneNode(!0),(r=document.implementation).createHTMLDocument&&(o=r.createHTMLDocument(""),X.each("BODY"===a.nodeName?a.childNodes:[a],function(e){o.body.appendChild(o.importNode(e,!0))}),a="BODY"!==a.nodeName?o.body.firstChild:o.body,i=e.doc,e.doc=o),ep.firePreProcess(n,ty.merge(s,{node:a})),i&&(e.doc=i),a):t;var r,o,i,a,s}},oy=function(e,a,s){e.addNodeFilter("font",function(e){b.each(e,function(e){var t,n=a.parse(e.attr("style")),r=e.attr("color"),o=e.attr("face"),i=e.attr("size");r&&(n.color=r),o&&(n["font-family"]=o),i&&(n["font-size"]=s[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",a.serialize(n)),t=e,r=["color","face","size"],b.each(r,function(e){t.attr(e,null)})})})},iy=function(e,n){e.addNodeFilter("strike",function(e){b.each(e,function(e){var t=n.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",n.serialize(t))})})},ay={register:function(e,t){var n;t.inline_styles&&(e=e,t=t,n=ui(),t.convert_fonts_to_spans&&oy(e,n,X.explode(t.font_size_legacy_values)),iy(e,n))}},sy=/^[ \t\r\n]*$/,ly={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},cy=(uy.create=function(e,t){var n,r=new uy(e,ly[e]||1);if(t)for(n in t)r.attr(n,t[n]);return r},uy.prototype.replace=function(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this},uy.prototype.attr=function(e,t){var n,r;if("string"!=typeof e){for(r in e)this.attr(r,e[r]);return this}if(n=this.attributes){if(void 0===t)return n.map[e];if(null===t){if(e in n.map)for(delete n.map[e],r=n.length;r--;)if(n[r].name===e)return n=n.splice(r,1),this}else{if(e in n.map){for(r=n.length;r--;)if(n[r].name===e){n[r].value=t;break}}else n.push({name:e,value:t});n.map[e]=t}return this}},uy.prototype.clone=function(){var e,t,n,r,o,i=new uy(this.name,this.type);if(n=this.attributes){for((o=[]).map={},e=0,t=n.length;e<t;e++)"id"!==(r=n[e]).name&&(o[o.length]={name:r.name,value:r.value},o.map[r.name]=r.value);i.attributes=o}return i.value=this.value,i.shortEnded=this.shortEnded,i},uy.prototype.wrap=function(e){return this.parent.insert(e,this),e.append(this),this},uy.prototype.unwrap=function(){for(var e,t=this.firstChild;t;)e=t.next,this.insert(t,this,!0),t=e;this.remove()},uy.prototype.remove=function(){var e=this.parent,t=this.next,n=this.prev;return e&&(e.firstChild===this?(e.firstChild=t)&&(t.prev=null):n.next=t,e.lastChild===this?(e.lastChild=n)&&(n.next=null):t.prev=n,this.parent=this.next=this.prev=null),this},uy.prototype.append=function(e){var t;return e.parent&&e.remove(),(t=this.lastChild)?((t.next=e).prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e},uy.prototype.insert=function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,(e.next=t).prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,(e.prev=t).next=e),e.parent=r,e},uy.prototype.getAll=function(e){for(var t=[],n=this.firstChild;n;n=Zv(n,this))n.name===e&&t.push(n);return t},uy.prototype.empty=function(){var e,t,n;if(this.firstChild){for(e=[],n=this.firstChild;n;n=Zv(n,this))e.push(n);for(t=e.length;t--;)(n=e[t]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}return this.firstChild=this.lastChild=null,this},uy.prototype.isEmpty=function(e,t,n){var r,o,i=this.firstChild;if(t=t||{},i)do{if(1===i.type){if(i.attributes.map["data-mce-bogus"])continue;if(e[i.name])return!1;for(r=i.attributes.length;r--;)if("name"===(o=i.attributes[r].name)||0===o.indexOf("data-mce-bookmark"))return!1}if(8===i.type)return!1;if(3===i.type&&!sy.test(i.value))return!1;if(3===i.type&&i.parent&&t[i.parent.name]&&sy.test(i.value))return!1;if(n&&n(i))return!1}while(i=Zv(i,this));return!0},uy.prototype.walk=function(e){return Zv(this,null,e)},uy);function uy(e,t){this.name=e,1===(this.type=t)&&(this.attributes=[],this.attributes.map={})}function dy(e){return hy(e,"#text")&&" "===e.firstChild.value}function fy(e,t){return e&&(t[e.name]||"br"===e.name)}function my(e,p){var h=e.schema;p.remove_trailing_brs&&e.addNodeFilter("br",function(e,t,n){var r,o,i,a,s,l,c,u=e.length,d=X.extend({},h.getBlockElements()),f=h.getNonEmptyElements(),m=h.getNonEmptyElements();for(d.body=1,r=0;r<u;r++)if(i=(o=e[r]).parent,d[o.parent.name]&&o===i.lastChild){for(s=o.prev;s;){if("span"!==(l=s.name)||"bookmark"!==s.attr("data-mce-type")){if("br"!==l)break;if("br"===l){o=null;break}}s=s.prev}o&&(o.remove(),vy(h,f,m,i))&&(c=h.getElementRule(i.name))&&(c.removeEmpty?i.remove():c.paddEmpty&&py(p,n,d,i))}else{for(a=o;i&&i.firstChild===a&&i.lastChild===a&&!d[(a=i).name];)i=i.parent;a===i&&!0!==p.padd_empty_with_br&&((c=new cy("#text",3)).value=" ",o.replace(c))}}),e.addAttributeFilter("href",function(e){var t,n=e.length,r=function(e){return e.split(" ").filter(function(e){return 0<e.length}).concat(["noopener"]).sort().join(" ")};if(!p.allow_unsafe_link_target)for(;n--;)"a"===(t=e[n]).name&&"_blank"===t.attr("target")&&t.attr("rel",function(e){e=e?X.trim(e):"";return/\b(noopener)\b/g.test(e)?e:r(e)}(t.attr("rel")))}),p.allow_html_in_named_anchor||e.addAttributeFilter("id,name",function(e){for(var t,n,r,o,i=e.length;i--;)if("a"===(o=e[i]).name&&o.firstChild&&!o.attr("href"))for(r=o.parent,t=o.lastChild;n=t.prev,r.insert(t,o),t=n;);}),p.fix_list_elements&&e.addNodeFilter("ul,ol",function(e){for(var t,n,r=e.length;r--;)"ul"!==(n=(t=e[r]).parent).name&&"ol"!==n.name||(t.prev&&"li"===t.prev.name?t.prev.append(t):((n=new cy("li",1)).attr("style","list-style-type: none"),t.wrap(n)))}),p.validate&&h.getValidClasses()&&e.addAttributeFilter("class",function(e){for(var t,n,r,o,i,a,s,l=e.length,c=h.getValidClasses();l--;){for(n=(t=e[l]).attr("class").split(" "),i="",r=0;r<n.length;r++)o=n[r],s=!1,(a=c["*"])&&a[o]&&(s=!0),a=c[t.name],(s=!s&&a&&a[o]?!0:s)&&(i&&(i+=" "),i+=o);i.length||(i=null),t.attr("class",i)}})}var py=function(e,t,n,r){(e.padd_empty_with_br||t.insert)&&n[r.name]?r.empty().append(new cy("br",1)).shortEnded=!0:r.empty().append(new cy("#text",3)).value=" "},hy=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},gy=function(e,t){e=e.getElementRule(t.name);return e&&e.paddEmpty},vy=function(t,e,n,r){return r.isEmpty(e,n,function(e){return gy(t,e)})},yy=X.makeMap,by=X.each,wy=X.explode,xy=X.extend;function Cy(j,q){void 0===q&&(q=li());var V={},K=[],Y={},G={},X=((j=j||{}).validate=!("validate"in j)||j.validate,j.root_name=j.root_name||"body",function(e){var t,n,r;n in V&&((r=Y[n])?r.push(e):Y[n]=[e]),t=K.length;for(;t--;)(n=K[t].name)in e.attributes.map&&((r=G[n])?r.push(e):G[n]=[e]);return e}),e={schema:q,addAttributeFilter:function(e,n){by(wy(e),function(e){for(var t=0;t<K.length;t++)if(K[t].name===e)return void K[t].callbacks.push(n);K.push({name:e,callbacks:[n]})})},getAttributeFilters:function(){return[].concat(K)},addNodeFilter:function(e,n){by(wy(e),function(e){var t=V[e];t||(V[e]=t=[]),t.push(n)})},getNodeFilters:function(){var e,t=[];for(e in V)V.hasOwnProperty(e)&&t.push({name:e,callbacks:V[e]});return t},filterNode:X,parse:function(M,i){function L(){function e(e){e&&((r=e.firstChild)&&3===r.type&&(r.value=r.value.replace(y,"")),r=e.lastChild)&&3===r.type&&(r.value=r.value.replace(b,""))}var t,n,r=C.firstChild;if(q.isValidChild(C.name,g.toLowerCase())){for(;r;)t=r.next,3===r.type||1===r.type&&"p"!==r.name&&!u[r.name]&&!r.attr("data-mce-type")?(n||((n=s(g,1)).attr(j.forced_root_block_attrs),C.insert(n,r)),n.append(r)):(e(n),n=null),r=t;e(n)}}function s(e,t){var n,t=new cy(e,t);return e in V&&((n=Y[e])?n.push(t):Y[e]=[t]),t}function l(e){for(var t,n=q.getBlockElements(),r=e.prev;r&&3===r.type;){if(0<(t=r.value.replace(b,"")).length)return r.value=t;if(t=r.next){if(3===t.type&&t.value.length){r=r.prev;continue}if(!n[t.name]&&"script"!==t.name&&"style"!==t.name){r=r.prev;continue}}t=r.prev,r.remove(),r=t}}var e,t,n,r,o,c,a,u,d,f=[],m=(i=i||{},Y={},G={},u=xy(yy("script,style,head,html,body,title,meta,param"),q.getBlockElements()),q.getNonEmptyElements()),p=q.children,h=j.validate,g=("forced_root_block"in i?i:j).forced_root_block,v=q.getWhiteSpaceElements(),y=/^[ \t\r\n]+/,b=/[ \t\r\n]+$/,F=/[ \t\r\n]+/g,w=/^[ \t\r\n]+$/,x=v.hasOwnProperty(i.context)||v.hasOwnProperty(j.root_name),H=sg({validate:h,allow_script_urls:j.allow_script_urls,allow_conditional_comments:j.allow_conditional_comments,self_closing_elements:function(e){var t,n={};for(t in e)"li"!==t&&"p"!==t&&(n[t]=e[t]);return n}(q.getSelfClosingElements()),cdata:function(e){d.append(s("#cdata",4)).value=e},text:function(e,t){var n;x||(e=e.replace(F," "),fy(d.lastChild,u)&&(e=e.replace(y,""))),0!==e.length&&((n=s("#text",3)).raw=!!t,d.append(n).value=e)},comment:function(e){d.append(s("#comment",8)).value=e},pi:function(e,t){d.append(s(e,7)).value=t,l(d)},doctype:function(e){d.append(s("#doctype",10)).value=e,l(d)},start:function(e,t,n){var r,o,i,a=h?q.getElementRule(e):{};if(a){for((r=s(a.outputName||e,1)).attributes=t,r.shortEnded=n,d.append(r),(a=p[d.name])&&p[r.name]&&!a[r.name]&&f.push(r),o=K.length;o--;)(i=K[o].name)in t.map&&((c=G[i])?c.push(r):G[i]=[r]);u[e]&&l(r),n||(d=r),!x&&v[e]&&(x=!0)}},end:function(e){var t,n,r,o=h?q.getElementRule(e):{};if(o){if(u[e]&&!x){if((t=d.firstChild)&&3===t.type)if(0<(n=t.value.replace(y,"")).length)t.value=n,t=t.next;else for(r=t.next,t.remove(),t=r;t&&3===t.type;)n=t.value,r=t.next,0!==n.length&&!w.test(n)||(t.remove(),t=r),t=r;if((t=d.lastChild)&&3===t.type)if(0<(n=t.value.replace(b,"")).length)t.value=n,t=t.prev;else for(r=t.prev,t.remove(),t=r;t&&3===t.type;)n=t.value,r=t.prev,0!==n.length&&!w.test(n)||(t.remove(),t=r),t=r}x&&v[e]&&(x=!1),o.removeEmpty&&vy(q,m,v,d)&&!d.attributes.map.name&&!d.attr("id")?(e=d.parent,u[d.name]?d.empty().remove():d.unwrap(),d=e):(o.paddEmpty&&(dy(d)||vy(q,m,v,d))&&py(j,i,u,d),d=d.parent)}}},q),C=d=new cy(i.context||j.root_name,11);if(H.parse(M),h&&f.length)if(i.context)i.invalid=!0;else for(var k,S,T,E,N,R,_,A,D,P,O=f,z=yy("tr,td,th,tbody,thead,tfoot,table"),I=q.getNonEmptyElements(),U=q.getWhiteSpaceElements(),W=q.getTextBlockElements(),$=q.getSpecialElements(),B=0;B<O.length;B++)if((k=O[B]).parent&&!k.fixed)if(W[k.name]&&"li"===k.parent.name){for(D=k.next;D&&W[D.name];)D.name="li",D.fixed=!0,k.parent.insert(D,k.parent),D=D.next;k.unwrap(k)}else{for(T=[k],S=k.parent;S&&!q.isValidChild(S.name,k.name)&&!z[S.name];S=S.parent)T.push(S);if(S&&1<T.length){for(T.reverse(),E=N=X(T[0].clone()),A=0;A<T.length-1;A++){for(q.isValidChild(N.name,T[A].name)?(R=X(T[A].clone()),N.append(R)):R=N,_=T[A].firstChild;_&&_!==T[A+1];)P=_.next,R.append(_),_=P;N=R}vy(q,I,U,E)?S.insert(k,T[0],!0):(S.insert(E,T[0],!0),S.insert(k,E)),(vy(q,I,U,S=T[0])||hy(S,"br"))&&S.empty().remove()}else k.parent&&("li"===k.name?!(D=k.prev)||"ul"!==D.name&&"ul"!==D.name?!(D=k.next)||"ul"!==D.name&&"ul"!==D.name?k.wrap(X(new cy("ul",1))):D.insert(k,D.firstChild,!0):D.append(k):q.isValidChild(k.parent.name,"div")&&q.isValidChild("div",k.name)?k.wrap(X(new cy("div",1))):$[k.name]?k.empty().remove():k.unwrap())}if(g&&("body"===C.name||i.isRootContent)&&L(),!i.invalid){for(a in Y){for(c=V[a],r=(e=Y[a]).length;r--;)e[r].parent||e.splice(r,1);for(t=0,n=c.length;t<n;t++)c[t](e,a,i)}for(t=0,n=K.length;t<n;t++)if((c=K[t]).name in G){for(r=(e=G[c.name]).length;r--;)e[r].parent||e.splice(r,1);for(r=0,o=c.callbacks.length;r<o;r++)c.callbacks[r](e,c.name,i)}}return C}};return my(e,j),ay.register(e,j),e}function ky(e,t,n){-1===X.inArray(t,n)&&(e.addAttributeFilter(n,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),t.push(n))}function Sy(e,t,n){return e=h.trim(n.getInner?t.innerHTML:e.getOuterHTML(t)),n.selection||zo(z.fromDom(t))?e:X.trim(e)}function Ty(e,t,n){return n=n.selection?ty.merge({forced_root_block:!1},n):n,e=e.parse(t,n),ny.trimTrailingBr(e),e}function Ey(e,t,n,r,o){return t=Ry(t,n,r),Ny(e,o,t)}var Ny=function(e,t,n){return!t.no_events&&e?ep.firePostProcess(e,ty.merge(t,{content:n})).content:n},Ry=function(e,t,n){return Mc(e,t).serialize(n)};function _y(e,t){n=e,i=["data-mce-selected"],a=(r=t)&&r.dom?r.dom:p.DOM,s=r&&r.schema?r.schema:li(n),n.entity_encoding=n.entity_encoding||"named",n.remove_trailing_brs=!("remove_trailing_brs"in n)||n.remove_trailing_brs,o=Cy(n,s),ny.register(o,n,a);var n,r,o,i,a,s,e={schema:s,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:function(e,t){t=ty.merge({format:"html"},t||{}),e=ry.process(r,e,t),e=Sy(a,e,t),e=Ty(o,e,t);return"tree"===t.format?e:Ey(r,n,s,e,t)},addRules:function(e){s.addValidElements(e)},setRules:function(e){s.setValidElements(e)},addTempAttr:v.curry(ky,o,i),getTempAttrs:function(){return i}};return{schema:e.schema,addNodeFilter:e.addNodeFilter,addAttributeFilter:e.addAttributeFilter,serialize:e.serialize,addRules:e.addRules,setRules:e.setRules,addTempAttr:e.addTempAttr,getTempAttrs:e.getTempAttrs}}function Ay(e){return{getBookmark:v.curry(xc.getBookmark,e),moveToBookmark:v.curry(xc.moveToBookmark,e)}}(Ay=Ay||{}).isBookmarkNode=xc.isBookmarkNode;function Dy(e,t){return z.fromDom(e.dom().cloneNode(t))}function Py(e){return Dy(e,!0)}function Oy(e,t){return t=z.fromTag(t),e=C.clone(e),C.setAll(t,e),t}function Iy(e,t){for(var n=e.rows(),r=0;r<n.length;r++)for(var o=n[r].cells(),i=0;i<o.length;i++)if(f.eq(o[i],t))return m.some(Cb(i,r));return m.none()}function By(t,n){return b.find(t,function(e){return"li"===c.name(e)&&sh(e,n)}).fold(v.constant([]),function(e){return b.find(t,function(e){return"ul"===c.name(e)||"ol"===c.name(e)}).map(function(e){return[z.fromTag("li"),z.fromTag(c.name(e))]}).getOr([])})}function My(e,t){var n,r=z.fromDom(t.commonAncestorContainer),e=Od.parentsAndSelf(r,e),o=b.filter(e,function(e){return xo(e)||Do(e)}),e=By(e,t),t=o.concat(e.length?e:Mo(n=r)?u.parent(n).filter(Bo).fold(v.constant([]),function(e){return[n,e]}):Bo(n)?[n]:[]);return b.map(t,yb.shallow)}function Ly(e,t,n,r,o){var i=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return m.from(i).map(z.fromDom).map(function(e){return r&&t.collapsed?e:u.child(e,o(e,a)).getOr(e)}).bind(function(e){return c.isElement(e)?m.some(e):u.parent(e)}).map(function(e){return e.dom()}).getOr(e)}function Fy(e,t){for(var n=e;e&&Q.isText(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}function Hy(e){return!(!e||!e.ownerDocument)&&f.contains(z.fromDom(e.ownerDocument),z.fromDom(e))}function zy(a,i,e,s){function t(e,t){return Ob.setContent(s,e,t)}function r(e){var t=n();t.collapse(!!e),o(t)}function n(){function e(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}}var t,n,r;if(!i)return null;if(null==(r=i.document))return null;if(void 0!==s.bookmark&&!1===Sp.hasFocus(s)){var o=Nm.getRng(s);if(o.isSome())return o.map(function(e){return vb.processRanges(s,[e])[0]}).getOr(r.createRange())}try{(t=f())&&(n=0<t.rangeCount?t.getRangeAt(0):(t.createRange?t:r).createRange())}catch(e){}return(n=(n=vb.processRanges(s,[n])[0])||(r.createRange?r.createRange():r.body.createTextRange())).setStart&&9===n.startContainer.nodeType&&n.collapsed&&(o=a.getRoot(),n.setStart(o,0),n.setEnd(o,0)),c&&u&&(0===e(n.START_TO_START,n,c)&&0===e(n.END_TO_END,n,c)?n=u:u=c=null),n}function o(e,t){var n;if(Ub(e)){var r=zb(e)?e:null;if(r){u=null;try{r.select()}catch(e){}}else{if(r=f(),e=s.fire("SetSelectionRange",{range:e,forward:t}).range,r){u=e;try{r.removeAllRanges(),r.addRange(e)}catch(e){}!1===t&&r.extend&&(r.collapse(e.endContainer,e.endOffset),r.extend(e.startContainer,e.startOffset)),c=0<r.rangeCount?r.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!r.setBaseAndExtent||K.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(n=e.startContainer.childNodes[e.startOffset])&&"IMG"===n.tagName&&(r.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),r.anchorNode===e.startContainer&&r.focusNode===e.endContainer||r.setBaseAndExtent(n,0,n,1)),s.fire("AfterSetSelectionRange",{range:e,forward:t})}}}function l(){var e,t,n=f();return!(n&&n.anchorNode&&n.focusNode)||((e=a.createRng()).setStart(n.anchorNode,n.anchorOffset),e.collapse(!0),(t=a.createRng()).setStart(n.focusNode,n.focusOffset),t.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,t)<=0)}var c,u,d,f=function(){return i.getSelection?i.getSelection():i.document.selection},m={bookmarkManager:null,controlSelection:null,dom:a,win:i,serializer:e,editor:s,collapse:r,setCursorLocation:function(e,t){var n=a.createRng();e?(n.setStart(e,t),n.setEnd(e,t),o(n),r(!1)):(fh(a,n,s.getBody(),!0),o(n))},getContent:function(e){return Pb.getContent(s,e)},setContent:t,getBookmark:function(e,t){return p.getBookmark(e,t)},moveToBookmark:function(e){return p.moveToBookmark(e)},select:function(e,t){return Fb(a,e,t).each(o),e},isCollapsed:function(){var e=n(),t=f();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isForward:l,setNode:function(e){return t(a.getOuterHTML(e)),e},getNode:function(){return Mb(s.getBody(),n())},getSel:f,setRng:o,getRng:n,getStart:function(e){return Ib(s.getBody(),n(),e)},getEnd:function(e){return Bb(s.getBody(),n(),e)},getSelectedBlocks:function(e,t){return Lb(a,n(),e,t)},normalize:function(){var e=n(),t=f();return!Hf.hasMultipleRanges(t)&&mh(s)?((t=lm.normalize(a,e)).each(function(e){o(e,l())}),t.getOr(e)):e},selectorChanged:function(e,t){var i;return d||(d={},i={},s.on("NodeChange",function(e){var n=e.element,r=a.getParents(n,null,a.getRoot()),o={};Hb(d,function(e,n){Hb(r,function(t){if(a.is(t,n))return i[n]||(Hb(e,function(e){e(!0,{node:t,selector:n,parents:r})}),i[n]=e),o[n]=e,!1})}),Hb(i,function(e,t){o[t]||(delete i[t],Hb(e,function(e){e(!1,{node:n,selector:t,parents:r})}))})})),d[e]||(d[e]=[]),d[e].push(t),m},getScrollContainer:function(){for(var e,t=a.getRoot();t&&"BODY"!==t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e,t){return il.scrollElementIntoView(s,e,t)},placeCaretAt:function(e,t){return o(gb.fromPoint(e,t,s.getDoc()))},getBoundingClientRect:function(){var e=n();return e.collapsed?S.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){i=c=u=null,h.destroy()}},p=ub(m),h=mb(m,s);return m.bookmarkManager=p,m.controlSelection=h,m}function Uy(e,t){for(;t=e(t);)if(t.isVisible())return t;return t}function Wy(e,t,n,r){var o,i,a=e===Ds.Forwards,s=a?qb:jb;return!r.collapsed&&(i=$b(r),Wb(i))?Fa(e,t,i,e===Ds.Backwards,!0):(i=$i(r.startContainer),s(o=ms(e,t.getBody(),r))?Vs(t,o.getNode(!a)):(o=n(o))?s(o)?Fa(e,t,o.getNode(!a),a,!0):s(s=n(o))&&function(e,t){t=Tl(e,t);return!(t||!Q.isBr(e.getNode()))||t}(o,s)?Fa(e,t,s.getNode(!a),a,!0):i?Ha(t,o.toRange(),!0):null:i?r:null)}function $y(e,t,n){var r,o=Vl(e.getBody()),i=ga.curry(Uy,o.next),o=ga.curry(Uy,o.prev);n.collapsed&&e.settings.forced_root_block&&(r=e.dom.getParent(n.startContainer,"PRE"))&&!(1===t?i:o)(S.fromRangeStart(n))&&(i=function(e){e=e.dom.create(e.settings.forced_root_block);return(!K.ie||11<=K.ie)&&(e.innerHTML='<br data-mce-bogus="1">'),e}(e),1===t?e.$(r).after(i):e.$(r).before(i),e.selection.select(i,!0),e.selection.collapse())}function jy(e,t){var n,r,o,i,a,s,l=t?1:-1,t=t?$h:Wh,c=e.selection.getRng();return n=l,r=e,t=t,a=$b(o=c),o=ms(n,r.getBody(),o),t=t(r.getBody(),bh(1),o),t=y.filter(t,wh(1)),s=y.last(o.getClientRects()),(qb(o)||Pl(o))&&(a=o.getNode()),(jb(o)||Ol(o))&&(a=o.getNode(!0)),(i=s?(o=s.left,(s=Sh(t,o))&&Wb(s.node)?(t=Math.abs(o-s.left),i=Math.abs(o-s.right),Fa(n,r,s.node,t<i,!0)):a&&(t=yh(n,r.getBody(),bh(1),a),s=(s=Sh(y.filter(t,wh(1)),o))||y.last(y.filter(t,wh(0))))?Ha(r,s.position.toRange(),!0):void 0):null)||(i=$y(e,l,c),null)}function qy(e,r){return b.bind(b.map(e,function(e){return ty.merge({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:v.noop},e)}),function(e){return t=e,(n=r).keyCode===t.keyCode&&n.shiftKey===t.shiftKey&&n.altKey===t.altKey&&n.ctrlKey===t.ctrlKey&&n.metaKey===t.metaKey?[e]:[];var t,n})}function Vy(e){return m.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))}function Ky(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t}function Yy(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e}function Gy(e,t,n){for(var r=e[n?"firstChild":"lastChild"];r&&!Q.isElement(r);)r=r[n?"nextSibling":"previousSibling"];return r===t}function Xy(e){e.innerHTML='<br data-mce-bogus="1">'}function Jy(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t}function Qy(e,t){return e0.getParentBlock(e).filter(function(e){return 0<t.length&&so.is(z.fromDom(e),t)}).isSome()}function Zy(e,t){return u0.shouldBlockNewLine(e)}function eb(n){return function(e,t){return""===T.getForcedRootBlock(e)===n}}function tb(n){return function(e,t){return e0.isListItemParentBlock(e)===n}}function nb(e){return f0("pre",e)}function rb(n){return function(e,t){return T.shouldPutBrInPre(e)===n}}function ob(e,t){return u0.shouldInsertBr(e)}function ib(e,t){return t}function ab(e){var t=T.getForcedRootBlock(e),n=e0.getEditableRoot(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")}function sb(e,t){return function(n,r){return b.foldl(e,function(e,t){return e&&t(n,r)},!0)?m.some(t):m.none()}}function lb(e,t){return e.fold(v.constant(!1),v.constant(!0),v.constant(!0),v.constant(!1))&&Q.isText(t.container())}function cb(e,t){var n=w0(e);n&&("compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),x0(e,n)):Vi(n)&&(x0(e,n),e.undoManager.add()))}var ub=Ay,db=Q.isContentEditableFalse,fb=Q.isContentEditableTrue,mb=function(n,i){function L(e){var t,n,r=e.target;t=e,n=i.selection.getRng(),!D(t.target)||Kh.isXYWithinRange(t.clientX,t.clientY,n)||e.isDefaultPrevented()||(e.preventDefault(),i.selection.select(r))}function r(e){var r,o,t;B(),M(),t=S.getPos(e,_),p=t.x,h=t.y,t=e.getBoundingClientRect(),r=t.width||t.right-t.left,o=t.height||t.bottom-t.top,l!==e&&(l=e,w=x=0),t=i.fire("ObjectSelected",{target:e}),H(e)&&!t.isDefaultPrevented()?T(A,function(t,e){var n=S.get("mceResizeHandle"+e);n&&S.remove(n),n=S.add(_,"div",{id:"mceResizeHandle"+e,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+e+"-resize; margin:0; padding:0"}),11===K.ie&&(n.contentEditable=!1),S.bind(n,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),f=e.screenX,m=e.screenY,g=P(l).clientWidth,v=P(l).clientHeight,y=v/g,(d=t).startPos={x:r*t[0]+p,y:o*t[1]+h},C=_.scrollWidth,k=_.scrollHeight,c=l.cloneNode(!0),S.addClass(c,"mce-clonedresizable"),S.setAttrib(c,"data-mce-bogus","all"),c.contentEditable=!1,c.unSelectabe=!0,S.setStyles(c,{left:p,top:h,margin:0}),c.removeAttribute("data-mce-selected"),_.appendChild(c),S.bind(E,"mousemove",O),S.bind(E,"mouseup",I),N!==E&&(S.bind(N,"mousemove",O),S.bind(N,"mouseup",I)),u=S.add(_,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},g+" &times; "+v)}),t.elm=n,S.setStyles(n,{left:r*t[0]+p-n.offsetWidth/2,top:o*t[1]+h-n.offsetHeight/2})}):B(),l.setAttribute("data-mce-selected","1")}function o(e){function t(e,t){if(e)do{if(e===t)return 1}while(e=e.parentNode)}b||i.removed||(T(S.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),e="mousedown"===e.type?e.target:n.getNode(),t(e=S.$(e).closest("table,img,figure.image,hr")[0],_)&&(s(),t(n.getStart(!0),e))&&t(n.getEnd(!0),e)?r(e):B())}function a(e){return db(function(e,t){for(;t&&t!==e;){if(fb(t)||db(t))return t;t=t.parentNode}return null}(i.getBody(),e))}function s(){try{i.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}}var l,c,u,d,f,m,p,h,g,v,y,b,w,x,C,k,S=i.dom,T=X.each,E=i.getDoc(),N=document,F=Math.abs,R=Math.round,_=i.getBody(),A={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},e=".mce-content-body",D=(i.contentStyles.push(e+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+e+" .mce-resizehandle:hover {background: #000}"+e+" img[data-mce-selected],"+e+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+e+" .mce-clonedresizable {position: absolute;"+(K.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+e+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}"),function(e){return e&&("IMG"===e.nodeName||i.dom.is(e,"figure.image"))}),P=function(e){return i.dom.is(e,"figure.image")?e.querySelector("img"):e},H=function(e){var t=i.settings.object_resizing;return!1!==t&&!K.iOS&&("string"!=typeof t&&(t="table,img,figure.image,div"),"false"!==e.getAttribute("data-mce-resize"))&&e!==i.getBody()&&so.is(z.fromDom(e),t)},O=function(e){var t,n=e.screenX-f,r=e.screenY-m;w=n*d[2]+g,x=r*d[3]+v,w=w<5?5:w,x=x<5?5:x,(D(l)&&!1!==i.settings.resize_img_proportional?!U.modifierPressed(e):U.modifierPressed(e)||D(l)&&d[2]*d[3]!=0)&&(F(n)>F(r)?(x=R(w*y),w=R(x/y)):(w=R(x/y),x=R(w*y))),S.setStyles(P(c),{width:w,height:x}),e=d.startPos.x+n,t=d.startPos.y+r,S.setStyles(u,{left:e=0<e?e:0,top:t=0<t?t:0,display:"block"}),u.innerHTML=w+" &times; "+x,d[2]<0&&c.clientWidth<=w&&S.setStyle(c,"left",p+(g-w)),d[3]<0&&c.clientHeight<=x&&S.setStyle(c,"top",h+(v-x)),(n=_.scrollWidth-C)+(r=_.scrollHeight-k)!=0&&S.setStyles(u,{left:e-n,top:t-r}),b||(ep.fireObjectResizeStart(i,l,g,v),b=!0)},I=function(){b=!1;function e(e,t){t&&(l.style[e]||!i.schema.isValid(l.nodeName.toLowerCase(),e)?S.setStyle(P(l),e,t):S.setAttrib(P(l),e,t))}e("width",w),e("height",x),S.unbind(E,"mousemove",O),S.unbind(E,"mouseup",I),N!==E&&(S.unbind(N,"mousemove",O),S.unbind(N,"mouseup",I)),S.remove(c),S.remove(u),r(l),ep.fireObjectResized(i,l,w,x),S.setAttrib(l,"style",S.getAttrib(l,"style")),i.nodeChanged()},B=function(){var e,t;for(e in M(),l&&l.removeAttribute("data-mce-selected"),A)(t=S.get("mceResizeHandle"+e))&&(S.unbind(t),S.remove(t))},M=function(){for(var e in A){e=A[e];e.elm&&(S.unbind(e.elm),delete e.elm)}};i.on("init",function(){s(),K.ie&&11<=K.ie&&(i.on("mousedown click",function(e){var t=e.target,n=t.nodeName;b||!/^(TABLE|IMG|HR)$/.test(n)||a(t)||(2!==e.button&&i.selection.select(t,"TABLE"===n),"mousedown"===e.type&&i.nodeChanged())}),i.dom.bind(_,"mscontrolselect",function(e){function t(e){tt.setEditorTimeout(i,function(){i.selection.select(e)})}a(e.target)?(e.preventDefault(),t(e.target)):/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName)&&t(e.target)}));var t=tt.throttle(function(e){i.composing||o(e)});i.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",t),i.on("keyup compositionend",function(e){l&&"TABLE"===l.nodeName&&t(e)}),i.on("hide blur",B),i.on("contextmenu",L)}),i.on("remove",M);return{isResizable:H,showResizeRect:r,hideResizeRect:B,updateResizeRect:o,destroy:function(){l=c=null}}},pb=function(e){return Q.isContentEditableTrue(e)||Q.isContentEditableFalse(e)},hb=function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},gb={fromPoint:function(t,n,r){var o,e,i=r;if(i.caretPositionFromPoint)(e=i.caretPositionFromPoint(t,n))&&((o=r.createRange()).setStart(e.offsetNode,e.offset),o.collapse(!0));else if(r.caretRangeFromPoint)o=r.caretRangeFromPoint(t,n);else if(i.body.createTextRange){o=i.body.createTextRange();try{o.moveToPoint(t,n),o.collapse(!0)}catch(e){o=function(e,n,t){var r=t.elementFromPoint(e,n),o=t.body.createTextRange();if(r&&"HTML"!==r.tagName||(r=t.body),o.moveToElementText(r),0<(t=(t=X.toArray(o.getClientRects())).sort(function(e,t){return(e=Math.abs(Math.max(e.top-n,e.bottom-n)))-(t=Math.abs(Math.max(t.top-n,t.bottom-n)))})).length){n=(t[0].bottom+t[0].top)/2;try{return o.moveToPoint(e,n),o.collapse(!0),o}catch(e){}}return null}(t,n,r)}return e=o,i=r.body,t=e&&e.parentElement?e.parentElement():null,Q.isContentEditableFalse(hb(t,i,pb))?null:e}return o}},vb={processRanges:function(n,e){return b.map(e,function(e){var t=n.fire("GetSelectionRange",{range:e});return t.range!==e?t.range:e})}},yb={shallow:function(e){return Dy(e,!1)},shallowAs:Oy,deep:Py,copy:function(e,t){t=Oy(e,t),e=u.children(Py(e));return Sc.append(t,e),t},mutate:function(e,t){var t=Oy(e,t),n=(N.before(e,t),u.children(e));return Sc.append(t,n),Tc.remove(e),t}},bb={fromElements:function(e,t){var n=(t||document).createDocumentFragment();return b.each(e,function(e){n.appendChild(e.dom())}),z.fromDom(n)}},wb=n.immutable("element","width","rows"),xb=n.immutable("element","cells"),Cb=n.immutable("x","y"),kb=function(e,t){e=parseInt(C.get(e,t),10);return isNaN(e)?1:e},Sb=function(e,t,n){e=e.rows();return!!(e[n]?e[n].cells():[])[t]},Tb=function(e){return b.foldl(e,function(e,t){return t.cells().length>e?t.cells().length:e},0)},Eb=function(e,t,n,r,o){for(var i=[],a=e.rows(),s=n;s<=o;s++){var l=a[s].cells(),l=t<r?l.slice(t,r+1):l.slice(r,t+1);i.push(xb(a[s].element(),l))}return i},Nb={fromDom:function(e){var p=wb(yb.shallow(e),0,[]);return b.each(tl.descendants(e,"tr"),function(f,m){b.each(tl.descendants(f,"td,th"),function(e,t){for(var n=p,r=function(e,t,n){for(;Sb(e,t,n);)t++;return t}(p,t,m),o=m,i=f,a=e,s=kb(a,"rowspan"),l=kb(a,"colspan"),c=n.rows(),u=o;u<o+s;u++){c[u]||(c[u]=xb(yb.deep(i),[]));for(var d=r;d<r+l;d++)c[u].cells()[d]=u===o&&d===r?a:yb.shallow(a)}})}),wb(p.element(),Tb(p.rows()),p.rows())},toDom:function(e){return t=e,e=b.map(e.rows(),function(e){var t=b.map(e.cells(),function(e){e=yb.deep(e);return C.remove(e,"colspan"),C.remove(e,"rowspan"),e}),e=yb.shallow(e.element());return Sc.append(e,t),e}),t=yb.shallow(t.element()),n=z.fromTag("tbody"),Sc.append(n,e),N.append(t,n),t;var t,n},subsection:function(a,e,t){return Iy(a,e).bind(function(i){return Iy(a,t).map(function(e){return t=a,e=e,r=(n=i).x(),n=n.y(),o=e.x(),e=e.y(),r=n<e?Eb(t,r,n,o,e):Eb(t,r,e,o,n),wb(t.element(),Tb(r),r);var t,n,r,o})})}},Rb=function(){return bb.fromElements([])},_b=function(e,t){var n=z.fromDom(t.cloneContents()),e=My(e,t);return n=b.foldl(e,function(e,t){return N.append(t,e),t},n),0<e.length?bb.fromElements([n]):n},Ab=function(e,t){return yd.ancestor(t,"table",v.curry(f.eq,e))},Db=function(e,t){var r,n=zf.getCellsFromElementOrRanges(t,e);return 0<n.length?Ab(e,(r=n)[0]).bind(function(e){var t=r[0],n=r[r.length-1],e=Nb.fromDom(e);return Nb.subsection(e,t,n).map(function(e){return bb.fromElements([Nb.toDom(e)])})}).getOrThunk(Rb):(n=e,0<(e=t).length&&e[0].collapsed?Rb():_b(n,e[0]))},Pb={getContent:function(e,t){var n=e.selection.getRng(),r=e.dom.create("body"),o=e.selection.getSel(),i=vb.processRanges(e,Hf.getRanges(o));if((t=t||{}).get=!0,t.format=t.format||"html",t.selection=!0,!(t=e.fire("BeforeGetContent",t)).isDefaultPrevented()){if("text"===t.format)return e.selection.isCollapsed()?"":h.trim(n.text||(o.toString?o.toString():""));if(n.cloneContents?(o=t.contextual?Db(z.fromDom(e.getBody()),i).dom():n.cloneContents())&&r.appendChild(o):void 0!==n.item||void 0!==n.htmlText?(r.innerHTML="<br>"+(n.item?n.item(0).outerHTML:n.htmlText),r.removeChild(r.firstChild)):r.innerHTML=n.toString(),t.getInner=!0,i=e.selection.serializer.serialize(r,t),"tree"===t.format)return i;t.content=e.selection.isCollapsed()?"":i}return e.fire("GetContent",t),t.content}},Ob={setContent:function(e,t,n){var r,o,i=e.selection.getRng(),a=e.getDoc();if((n=n||{format:"html"}).set=!0,n.selection=!0,n.content=t,!n.no_events&&(n=e.fire("BeforeSetContent",n)).isDefaultPrevented())e.fire("SetContent",n);else{if(t=n.content,i.insertNode){t+='<span id="__caret">_</span>',i.startContainer===a&&i.endContainer===a||(i.deleteContents(),0===a.body.childNodes.length)?a.body.innerHTML=t:i.createContextualFragment?i.insertNode(i.createContextualFragment(t)):(r=a.createDocumentFragment(),o=a.createElement("div"),r.appendChild(o),o.outerHTML=t,i.insertNode(r)),o=e.dom.get("__caret"),(i=a.createRange()).setStartBefore(o),i.setEndBefore(o),e.selection.setRng(i),e.dom.remove("__caret");try{e.selection.setRng(i)}catch(e){}}else i.item&&(a.execCommand("Delete",!1,null),i=e.getRng()),/^\s+/.test(t)?(i.pasteHTML('<span id="__mce_tmp">_</span>'+t),e.dom.remove("__mce_tmp")):i.pasteHTML(t);n.no_events||e.fire("SetContent",n)}}},Ib=function(e,t,n){return Ly(e,t,!0,n,function(e,t){return Math.min(u.childNodesCount(e),t)})},Bb=function(e,t,n){return Ly(e,t,!1,n,function(e,t){return 0<t?t-1:t})},Mb=function(e,t){var n,r,o,i,a;return t?(r=t.startContainer,o=t.endContainer,i=t.startOffset,a=t.endOffset,n=t.commonAncestorContainer,!t.collapsed&&(r===o&&a-i<2&&r.hasChildNodes()&&(n=r.childNodes[i]),3===r.nodeType)&&3===o.nodeType&&(r=r.length===i?Fy(r.nextSibling,!0):r.parentNode,o=0===a?Fy(o.previousSibling,!1):o.parentNode,r)&&r===o?r:n&&3===n.nodeType?n.parentNode:n):e},Lb=function(e,t,n,r){var o=[],i=e.getRoot();if(n=e.getParent(n||Ib(i,t,!1),e.isBlock),r=e.getParent(r||Bb(i,t,!1),e.isBlock),n&&n!==i&&o.push(n),n&&r&&n!==r)for(var a,s=new J(n,i);(a=s.next())&&a!==r;)e.isBlock(a)&&o.push(a);return r&&n!==r&&r!==i&&o.push(r),o},Fb=function(r,e,o){return m.from(e).map(function(e){var t=r.nodeIndex(e),n=r.createRng();return n.setStart(e.parentNode,t),n.setEnd(e.parentNode,t+1),o&&(fh(r,n,e,!0),fh(r,n,e,!1)),n})},Hb=X.each,zb=function(e){return!!e.select},Ub=function(e){return!!e&&(!!zb(e)||Hy(e.startContainer)&&Hy(e.endContainer))},Wb=Q.isContentEditableFalse,$b=Ii,jb=Dl,qb=Al,Vb=function(i,a){return function(){o=a,t=Vl((e=i).getBody()),n=ga.curry(Uy,t.next),t=ga.curry(Uy,t.prev),r=o?Ds.Forwards:Ds.Backwards,o=o?n:t,n=e.selection.getRng();var e,t,n,r,o=(t=Wy(r,e,o,n))||($y(e,r,n),null);return!!o&&(i.selection.setRng(o),!0)}},Kb=function(t,n){return function(){var e=jy(t,n);return!!e&&(t.selection.setRng(e),!0)}},a={match:qy,action:function(e){for(var t=1;t<arguments.length;t++)t-1,0;var n=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,n)}},execute:function(e,t){return b.find(qy(e,t),function(e){return e.action()})}},Yb=function(o,i){o.on("keydown",function(e){var t,n,r;!1===e.isDefaultPrevented()&&(t=o,n=i,r=e,e=kr.detect().os,a.execute([{keyCode:U.RIGHT,action:Vb(t,!0)},{keyCode:U.LEFT,action:Vb(t,!1)},{keyCode:U.UP,action:Kb(t,!1)},{keyCode:U.DOWN,action:Kb(t,!0)},{keyCode:U.RIGHT,action:cl(t,!0)},{keyCode:U.LEFT,action:cl(t,!1)},{keyCode:U.UP,action:ul(t,!1)},{keyCode:U.DOWN,action:ul(t,!0)},{keyCode:U.RIGHT,action:Sf.move(t,n,!0)},{keyCode:U.LEFT,action:Sf.move(t,n,!1)},{keyCode:U.RIGHT,ctrlKey:!e.isOSX(),altKey:e.isOSX(),action:Sf.moveNextWord(t,n)},{keyCode:U.LEFT,ctrlKey:!e.isOSX(),altKey:e.isOSX(),action:Sf.movePrevWord(t,n)}],r).each(function(e){r.preventDefault()}))})},Gb=function(e,t){var n=Od.parentsAndSelf(t,e);return b.findIndex(n,Po).fold(v.constant(n),function(e){return n.slice(0,e)})},Xb=function(e){return 1===u.children(e).length},Jb=function(e,t,n,r){var o=v.curry(Lg,t),r=b.map(b.filter(r,o),function(e){return e.dom()});0===r.length?Yd.deleteElement(t,e,n):(o=n.dom(),e=r,n=tv(!1),e=ov(e,n.dom()),N.before(z.fromDom(o),n),Tc.remove(z.fromDom(o)),r=S(e,0),t.selection.setRng(r.toRange()))},Qb={backspaceDelete:function(e,t){return!!e.selection.isCollapsed()&&(n=e,r=t,e=z.fromDom(n.getBody()),t=z.fromDom(n.selection.getStart()),o=b.filter(Gb(e,t),Xb),b.last(o).map(function(e){var t=S.fromRangeStart(n.selection.getRng());return!!vd.willDeleteLastPositionInElement(r,t,e.dom())&&(Jb(r,n,e,o),!0)}).getOr(!1));var n,r,o}},Zb=function(o,i){o.on("keydown",function(e){var t,n,r;!1===e.isDefaultPrevented()&&(t=o,n=i,r=e,a.execute([{keyCode:U.BACKSPACE,action:a.action(Zd.backspaceDelete,t,!1)},{keyCode:U.DELETE,action:a.action(Zd.backspaceDelete,t,!0)},{keyCode:U.BACKSPACE,action:a.action(_f.backspaceDelete,t,n,!1)},{keyCode:U.DELETE,action:a.action(_f.backspaceDelete,t,n,!0)},{keyCode:U.BACKSPACE,action:a.action($d.backspaceDelete,t,!1)},{keyCode:U.DELETE,action:a.action($d.backspaceDelete,t,!0)},{keyCode:U.BACKSPACE,action:a.action(Hd.backspaceDelete,t,!1)},{keyCode:U.DELETE,action:a.action(Hd.backspaceDelete,t,!0)},{keyCode:U.BACKSPACE,action:a.action(Yf.backspaceDelete,t,!1)},{keyCode:U.DELETE,action:a.action(Yf.backspaceDelete,t,!0)},{keyCode:U.BACKSPACE,action:a.action(Qb.backspaceDelete,t,!1)},{keyCode:U.DELETE,action:a.action(Qb.backspaceDelete,t,!0)}],r).each(function(e){r.preventDefault()}))}),o.on("keyup",function(e){var t;!1===e.isDefaultPrevented()&&(t=o,e=e,a.execute([{keyCode:U.BACKSPACE,action:a.action(Zd.paddEmptyElement,t)},{keyCode:U.DELETE,action:a.action(Zd.paddEmptyElement,t)}],e))})},e0={moveToCaretPosition:function(e,t){var n,r,o,i,a=t,s=e.dom,l=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)&&(i=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}(t.firstChild))&&/^(UL|OL|DL)$/.test(i.nodeName)&&t.insertBefore(s.doc.createTextNode(" "),t.firstChild),o=s.createRng(),t.normalize(),t.hasChildNodes()){for(n=new J(t,t);r=n.current();){if(Q.isText(r)){o.setStart(r,0),o.setEnd(r,0);break}if(l[r.nodeName.toLowerCase()]){o.setStartBefore(r),o.setEndBefore(r);break}a=r,r=n.next()}r||(o.setStart(a,0),o.setEnd(a,0))}else Q.isBr(t)?t.nextSibling&&s.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),s.remove(void 0),e.selection.scrollIntoView(t)}},getEditableRoot:function(e,t){for(var n,r=e.getRoot(),o=t;o!==r&&"false"!==e.getContentEditable(o);)"true"===e.getContentEditable(o)&&(n=o),o=o.parentNode;return o!==r?n:r},getParentBlock:Vy,getParentBlockName:function(e){return Vy(e).fold(v.constant(""),function(e){return e.nodeName.toUpperCase()})},isListItemParentBlock:function(e){return Vy(e).filter(function(e){return Mo(z.fromDom(e))}).isSome()}},t0=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},n0=function(e,t,n,r,o){var i,a=e.dom,s=e.selection.getRng();n!==e.getBody()&&(i=(o=t0(i=n)&&t0(i.parentNode)?"LI":o)?t(o):a.create("BR"),Gy(n,r,!0)&&Gy(n,r,!1)?Ky(n,"LI")?a.insertAfter(i,Yy(n)):a.replace(i,n):Gy(n,r,!0)?Ky(n,"LI")?(a.insertAfter(i,Yy(n)),i.appendChild(a.doc.createTextNode(" ")),i.appendChild(n)):n.parentNode.insertBefore(i,n):Gy(n,r,!1)?a.insertAfter(i,Yy(n)):(n=Yy(n),(t=s.cloneRange()).setStartAfter(r),t.setEndAfter(n),s=t.extractContents(),"LI"===o&&(t="LI",(o=s).firstChild)&&o.firstChild.nodeName===t?(i=s.firstChild,a.insertAfter(s,n)):(a.insertAfter(s,n),a.insertAfter(i,n))),a.remove(r),e0.moveToCaretPosition(e,i))},r0=function(e){return e&&"A"===e.nodeName&&0===X.trim(h.trim(e.innerText||e.textContent)).length},o0=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},i0=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},a0=function(e,t,n){return!1===Q.isText(t)?n:e?1===n&&t.data.charAt(n-1)===h.ZWSP?0:n:n===t.data.length-1&&t.data.charAt(n)===h.ZWSP?t.data.length:n},s0=function(e,t){for(var n,r=e.getRoot(),o=t;o!==r&&"false"!==e.getContentEditable(o);)"true"===e.getContentEditable(o)&&(n=o),o=o.parentNode;return o!==r?n:r},l0=function(e,t){var n=T.getForcedRootBlock(e);n&&n.toLowerCase()===t.tagName.toLowerCase()&&e.dom.setAttribs(t,T.getForcedRootBlockAttrs(e))},c0=function(a,e){function t(e){var t,n,r,o=l,i=y.getTextInlineElements();if(e||"TABLE"===d||"HR"===d?(t=v.create(e||m),l0(a,t)):t=c.cloneNode(!1),r=t,!1===T.shouldKeepStyles(a))v.setAttrib(t,"style",null),v.setAttrib(t,"class",null);else for(;i[o.nodeName]&&!pc(o)&&(n=o.cloneNode(!1),v.setAttrib(n,"id",""),t.hasChildNodes()?n.appendChild(t.firstChild):r=n,t.appendChild(n)),(o=o.parentNode)&&o!==s;);return Xy(r),t}function n(e){var t,n,r,o=a0(e,l,i);if(!Q.isText(l)||!(e?0<o:o<l.nodeValue.length)){if((l.parentNode!==c||!p||e)&&(!e||!Q.isElement(l)||l!==c.firstChild)){if(Jy(l,"TABLE")||Jy(l,"HR"))return p&&!e||!p&&e;for(t=new J(l,c),Q.isText(l)&&(e&&0===o?t.prev():e||o!==l.nodeValue.length||t.next());n=t.current();){if(Q.isElement(n)){if(!n.getAttribute("data-mce-bogus")&&(r=n.nodeName.toLowerCase(),b[r])&&"br"!==r)return}else if(Q.isText(n)&&!/^[ \t\r\n]*$/.test(n.nodeValue))return;e?t.prev():t.next()}}return 1}}function r(){o=/^(H[1-6]|PRE|FIGURE)$/.test(d)&&"HGROUP"!==f?t(m):t(),T.shouldEndContainerOnEmptyBlock(a)&&i0(v,u)&&v.isEmpty(c)?o=v.split(u,c):v.insertAfter(o,c),e0.moveToCaretPosition(a,o)}var s,l,i,c,o,u,d,f,m,p,h,g,v=a.dom,y=a.schema,b=y.getNonEmptyElements(),w=a.selection.getRng();if(lm.normalize(v,w).each(function(e){w.setStart(e.startContainer,e.startOffset),w.setEnd(e.endContainer,e.endOffset)}),l=w.startContainer,i=w.startOffset,m=T.getForcedRootBlock(a),g=e.shiftKey,Q.isElement(l)&&l.hasChildNodes()&&(p=i>l.childNodes.length-1,l=l.childNodes[Math.min(i,l.childNodes.length-1)]||l,i=p&&Q.isText(l)?l.nodeValue.length:0),s=s0(v,l))if((m&&!g||!m&&g)&&(l=function(e,t,n,r,o){var i,a,s,l,t=t||"P",c=e.dom,u=s0(c,r),d=c.getParent(r,c.isBlock);if(!d||!i0(c,d)){if(u=((d=d||u)===e.getBody()||o0(d)?d:d.parentNode).nodeName.toLowerCase(),!d.hasChildNodes())return i=c.create(t),l0(e,i),d.appendChild(i),n.setStart(i,0),n.setEnd(i,0),i;for(s=r;s.parentNode!==d;)s=s.parentNode;for(;s&&!c.isBlock(s);)s=(a=s).previousSibling;if(a&&e.schema.isValidChild(u,t.toLowerCase())){for(i=c.create(t),l0(e,i),a.parentNode.insertBefore(i,a),s=a;s&&!c.isBlock(s);)l=s.nextSibling,i.appendChild(s),s=l;n.setStart(r,o),n.setEnd(r,o)}}return r}(a,m,w,l,i)),c=v.getParent(l,v.isBlock),u=c?v.getParent(c.parentNode,v.isBlock):null,d=c?c.nodeName.toUpperCase():"","LI"!==(f=u?u.nodeName.toUpperCase():"")||e.ctrlKey||(u=(c=u).parentNode,d=f),/^(LI|DT|DD)$/.test(d)&&v.isEmpty(c))n0(a,t,u,c,m);else if(!m||c!==a.getBody()){if(m=m||"P",$i(c))o=Xi(c),v.isEmpty(c)&&Xy(c),e0.moveToCaretPosition(a,o);else if(n())r();else if(n(!0))o=c.parentNode.insertBefore(t(),c),e0.moveToCaretPosition(a,Jy(c,"HR")?o:c);else{(e=(g=w).cloneRange()).setStart(g.startContainer,a0(!0,g.startContainer,g.startOffset)),e.setEnd(g.endContainer,a0(!1,g.endContainer,g.endOffset)),(g=e.cloneRange()).setEndAfter(c);for(var x=e=g.extractContents();Q.isText(x)&&(x.nodeValue=x.nodeValue.replace(/^[\r\n]+/,"")),x=x.firstChild;);o=e.firstChild,v.insertAfter(e,c),!function(e,t,n){var r,o=n,i=[];if(o){for(;o=o.firstChild;){if(e.isBlock(o))return;Q.isElement(o)&&!t[o.nodeName.toLowerCase()]&&i.push(o)}for(r=i.length;r--;)(!(o=i[r]).hasChildNodes()||o.firstChild===o.lastChild&&""===o.firstChild.nodeValue||r0(o))&&e.remove(o)}}(v,b,o),g=v,(e=c).normalize(),(h=e.lastChild)&&!/^(left|right)$/gi.test(g.getStyle(h,"float",!0))||g.add(e,"br"),v.isEmpty(c)&&Xy(c),o.normalize(),v.isEmpty(o)?(v.remove(o),r()):e0.moveToCaretPosition(a,o)}v.setAttrib(o,"id",""),a.fire("NewBlock",{newBlock:o})}},u0={shouldInsertBr:function(e){return Qy(e,T.getBrNewLineSelector(e))},shouldBlockNewLine:function(e){return Qy(e,T.getNoNewLineSelector(e))}},d0=xe([{br:[]},{block:[]},{none:[]}]),f0=function(n,r){return function(e,t){return e0.getParentBlockName(e)===n.toUpperCase()===r}},m0=function(e,t){return cf([sb([Zy],d0.none()),sb([f0("summary",!0)],d0.br()),sb([nb(!0),rb(!1),ib],d0.br()),sb([nb(!0),rb(!1)],d0.block()),sb([nb(!0),rb(!0),ib],d0.block()),sb([nb(!0),rb(!0)],d0.br()),sb([tb(!0),ib],d0.br()),sb([tb(!0)],d0.block()),sb([eb(!0),ib,ab],d0.block()),sb([eb(!0)],d0.br()),sb([ob],d0.br()),sb([eb(!1),ib],d0.br()),sb([ab],d0.block())],[e,t.shiftKey]).getOr(d0.none())},p0={insert:function(e,t){m0(e,t).fold(function(){gm.insert(e,t)},function(){c0(e,t)},v.noop)}},h0=function(e){e.typing&&(e.typing=!1,e.add())},g0=function(r){r.on("keydown",function(e){var t,n;e.keyCode===U.ENTER&&(t=r,(n=e).isDefaultPrevented()||(n.preventDefault(),h0(t.undoManager),t.undoManager.transact(function(){!1===t.selection.isCollapsed()&&t.execCommand("Delete"),p0.insert(t,n)})))})},v0=function(e,t,n){return!!lb(n,t)&&(n=e,t=(e=t).container(),e=e.offset(),t.insertData(e," "),n.selection.setCursorLocation(t,e+1),!0)},y0={insertAtSelection:function(e){return!!e.selection.isCollapsed()&&(e=e,t=v.curry(R.isInlineTarget,e),n=S.fromRangeStart(e.selection.getRng()),bf.readLocation(t,e.getBody(),n).map(v.curry(v0,e,n)).getOr(!1));var t,n}},b0=function(n){n.on("keydown",function(e){var t;!1===e.isDefaultPrevented()&&(t=e,a.execute([{keyCode:U.SPACEBAR,action:a.action(y0.insertAtSelection,n)}],t).each(function(e){t.preventDefault()}))})},w0=function(e){return yd.descendant(z.fromDom(e.getBody()),"*[data-mce-caret]").fold(v.constant(null),function(e){return e.dom()})},x0=function(e,t){t.hasAttribute("data-mce-caret")&&(Xi(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},C0=function(e){e.on("keyup compositionstart",v.curry(cb,e))},k0=function(e){var t=Sf.setupSelectedState(e);C0(e),Yb(e,t),Zb(e,t),g0(e),b0(e)};function S0(i){function e(e,t){try{i.getDoc().execCommand(e,!1,t)}catch(e){}}function a(e){return e.isDefaultPrevented()}function t(){i.shortcuts.add("meta+a",null,"SelectAll")}function n(){function n(){var e=m.getAttribs(p.getStart().cloneNode(!1));return function(){var t=p.getStart();t!==i.getBody()&&(m.setAttrib(t,"style",null),u(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function r(){return!p.isCollapsed()&&m.getParent(p.getStart(),m.isBlock)!==m.getParent(p.getEnd(),m.isBlock)}i.on("keypress",function(e){var t;if(!a(e)&&(8===e.keyCode||46===e.keyCode)&&r())return t=n(),i.getDoc().execCommand("delete",!1,null),t(),e.preventDefault(),!1}),m.bind(i.getDoc(),"cut",function(e){var t;!a(e)&&r()&&(t=n(),tt.setEditorTimeout(i,function(){t()}))})}function r(){i.on("keydown",function(e){if(!a(e)&&e.keyCode===d&&p.isCollapsed()&&0===p.getRng().startOffset){var t=p.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})}function o(){h.readonly||i.on("BeforeExecCommand MouseDown",function(){e("StyleWithCSS",!1),e("enableInlineTableEditing",!1),h.object_resizing||e("enableObjectResizing",!1)})}function s(){i.on("SetContent ExecCommand",function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||u(m.select("a"),function(e){var t=e.parentNode,n=m.getRoot();if(t.lastChild===e){for(;t&&!m.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}m.add(t,"br",{"data-mce-bogus":1})}})})}function l(){i.inline||(i.contentStyles.push("body {min-height: 150px}"),i.on("click",function(e){"HTML"===e.target.nodeName&&(11<K.ie?i.getBody().focus():(e=i.selection.getRng(),i.getBody().focus(),i.selection.setRng(e),i.selection.normalize(),i.nodeChanged()))}))}function c(){i.on("dragstart",function(e){var t;(e=e).dataTransfer&&(i.selection.isCollapsed()&&"IMG"===e.target.tagName&&p.select(e.target),0<(t=i.selection.getContent()).length)&&(t=w+escape(i.id)+","+escape(t),e.dataTransfer.setData(x,t))}),i.on("drop",function(e){var t;a(e)||(t=(t=e).dataTransfer&&(t=t.dataTransfer.getData(x))&&0<=t.indexOf(w)?(t=t.substr(w.length).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null)&&t.id!==i.id&&(e.preventDefault(),e=gb.fromPoint(e.x,e.y,i.getDoc()),p.setRng(e),e=t.html,t=!0,i.queryCommandSupported("mceInsertClipboardContent")?i.execCommand("mceInsertClipboardContent",!1,{content:e,internal:t}):i.execCommand("mceInsertContent",!1,e))})}var u=X.each,d=U.BACKSPACE,f=U.DELETE,m=i.dom,p=i.selection,h=i.settings,g=i.parser,v=K.gecko,y=K.ie,b=K.webkit,w="data:text/mce-internal,",x=y?"Text":"URL";function C(e){var t=m.create("body"),e=e.cloneContents();return t.appendChild(e),p.serializer.serialize(t,{format:"html"})}return i.on("keydown",function(e){var t,n,r,o;if(!a(e)&&e.keyCode===U.BACKSPACE&&(t=(e=p.getRng()).startContainer,n=e.startOffset,r=m.getRoot(),o=t,e.collapsed)&&0===n){for(;o&&o.parentNode&&o.parentNode.firstChild===o&&o.parentNode!==r;)o=o.parentNode;"BLOCKQUOTE"===o.tagName&&(i.formatter.toggle("blockquote",null,o),(e=m.createRng()).setStart(t,0),e.setEnd(t,0),p.setRng(e))}}),i.on("keydown",function(e){var t,n,r=e.keyCode;a(e)||r!==f&&r!==d||(r=i.selection.isCollapsed(),t=i.getBody(),r&&!m.isEmpty(t))||!r&&(r=i.selection.getRng(),r=C(r),(n=m.createRng()).selectNode(i.getBody()),r!==C(n))||(e.preventDefault(),i.setContent(""),t.firstChild&&m.isBlock(t.firstChild)?i.selection.setCursorLocation(t.firstChild,0):i.selection.setCursorLocation(t,0),i.nodeChanged())}),K.windowsPhone||i.on("keyup focusin mouseup",function(e){U.modifierPressed(e)||p.normalize()},!0),b&&(i.settings.content_editable||m.bind(i.getDoc(),"mousedown mouseup",function(e){var t;e.target===i.getDoc().documentElement&&(t=p.getRng(),i.getBody().focus(),"mousedown"===e.type?qi(t.startContainer)||p.placeCaretAt(e.clientX,e.clientY):p.setRng(t))}),i.on("click",function(e){var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&"false"!==m.getContentEditableParent(t)&&(e.preventDefault(),i.selection.select(t),i.nodeChanged()),"A"===t.nodeName&&m.hasClass(t,"mce-item-anchor")&&(e.preventDefault(),p.select(t))}),h.forced_root_block&&i.on("init",function(){e("DefaultParagraphSeparator",h.forced_root_block)}),i.on("init",function(){i.dom.bind(i.getBody(),"submit",function(e){e.preventDefault()})}),r(),g.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}),K.iOS?(i.inline||i.on("keydown",function(){document.activeElement===document.body&&i.getWin().focus()}),l(),i.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),i.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):t()),11<=K.ie&&(l(),r()),K.ie&&(t(),e("AutoUrlDetect",!1),c()),v&&(i.on("keydown",function(e){var t,n;a(e)||e.keyCode!==d||i.getBody().getElementsByTagName("hr").length&&p.isCollapsed()&&0===p.getRng().startOffset&&(n=(t=p.getNode()).previousSibling,"HR"===t.nodeName?(m.remove(t),e.preventDefault()):n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(m.remove(n),e.preventDefault()))}),Range.prototype.getClientRects||i.on("mousedown",function(e){var t;a(e)||"HTML"!==e.target.nodeName||((t=i.getBody()).blur(),tt.setEditorTimeout(i,function(){t.focus()}))}),n(),o(),s(),i.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),K.mac&&i.on("keydown",function(e){!U.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),i.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))}),r()),{refreshContentEditable:function(){},isHidden:function(){var e;return!v||i.removed?0:!(e=i.selection.getSel())||!e.rangeCount||0===e.rangeCount}}}function T0(e){e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),G0(e)}function E0(e){return{editorContainer:e,iframeContainer:e}}function N0(e){return"-"===e.charAt(0)}function R0(n,e){var t,r,o,i=this;n=gw(n),t=(e=i.settings=e||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)?i.source=n:(o=0===n.indexOf("//"),0!==n.indexOf("/")||o||(n=(t&&t.protocol||"http")+"://mce_host"+n),/^[\w\-]*:?\/\//.test(n)||(r=e.base_uri?e.base_uri.path:new R0(document.location.href).directory,n=""==e.base_uri.protocol?"//mce_host"+i.toAbsPath(r,n):(n=/([^#?]*)([#?]?.*)/.exec(n),(t&&t.protocol||"http")+"://mce_host"+i.toAbsPath(r,n[1])+n[2])),n=n.replace(/@@/g,"(mce_at)"),n=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n),hw(vw,function(e,t){t=(t=n[t])&&t.replace(/\(mce_at\)/g,"@@");i[e]=t}),t&&(i.protocol||(i.protocol=t.protocol),i.userInfo||(i.userInfo=t.userInfo),i.port||"mce_host"!==i.host||(i.port=t.port),i.host&&"mce_host"!==i.host||(i.host=t.host),i.source=""),o&&(i.protocol=""))}function _0(o,i){return void 0===i&&(i={}),m.from(o.getBody()).fold(v.constant("tree"===i.format?new cy("body",11):""),function(e){var t,n=o,r=i;if(r.format=r.format||bw,r.get=!0,r.getInner=!0,r.no_events||n.fire("BeforeGetContent",r),"raw"===r.format)t=X.trim(lg.trimExternal(n.serializer,e.innerHTML));else if("text"===r.format)t=h.trim(e.innerText||e.textContent);else{if("tree"===r.format)return n.serializer.serialize(e,r);t=ww(n,n.serializer.serialize(e,r))}return"text"===r.format||zo(z.fromDom(e))?r.content=t:r.content=X.trim(t),r.no_events||n.fire("GetContent",r),r.content})}function A0(e,t){t(e),e.firstChild&&A0(e.firstChild,t),e.next&&A0(e.next,t)}function D0(e){return e instanceof cy}function P0(a,s,l){return(l=void 0===l?{}:l).format=l.format||"html",l.set=!0,l.content=D0(s)?"":s,D0(s)||l.no_events||(a.fire("BeforeSetContent",l),s=l.content),m.from(a.getBody()).fold(v.constant(s),function(e){return D0(s)?(n=e,r=s,o=l,xw((t=a).parser.getNodeFilters(),t.parser.getAttributeFilters(),r),i=Mc({validate:t.validate},t.schema).serialize(r),o.content=zo(z.fromDom(n))?i:X.trim(i),Cw(t,o.content),o.no_events||t.fire("SetContent",o),r):(n=a,i=e,t=l,0===(o=s).length||/^\s+$/.test(o)?(r='<br data-mce-bogus="1">',"TABLE"===i.nodeName?o="<tr><td>"+r+"</td></tr>":/^(UL|OL)$/.test(i.nodeName)&&(o="<li>"+r+"</li>"),o=(e=T.getForcedRootBlock(n))&&n.schema.isValidChild(i.nodeName.toLowerCase(),e.toLowerCase())?n.dom.createHTML(e,n.settings.forced_root_block_attrs,o=r):o||'<br data-mce-bogus="1">',Cw(n,o),n.fire("SetContent",t)):("raw"!==t.format&&(o=Mc({validate:n.validate},n.schema).serialize(n.parser.parse(o,{isRootContent:!0,insert:!0}))),t.content=zo(z.fromDom(i))?o:X.trim(o),Cw(n,t.content),t.no_events||n.fire("SetContent",t)),t.content);var t,n,r,o,i})}function O0(e){m.from(e).each(function(e){return e.destroy()})}function I0(e){var t,n,r,o;e.removed||(t=e._selectionOverrides,n=e.editorUpload,r=e.getBody(),o=e.getElement(),r&&e.save(),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&o&&kw.remove(o.nextSibling),!e.inline&&r&&kw.setStyle(e.id,"display",e.orgDisplay),ep.fireRemove(e),e.editorManager.remove(e),kw.remove(e.getContainer()),O0(t),O0(n),e.destroy())}function B0(e,t){var n=e.selection,r=e.dom;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),O0(n),O0(r)),(n=(t=e).formElement)&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,n._mceOldSubmit=null),kw.unbind(n,"submit reset",t.formEventDelegate)),(r=e).contentAreaContainer=r.formElement=r.container=r.editorContainer=null,r.bodyElement=r.contentDocument=r.contentWindow=null,r.iframeElement=r.targetElm=null,r.selection&&(r.selection=r.selection.win=r.selection.dom=r.selection.dom.doc=null),e.destroyed=!0):e.remove())}function M0(e,t,n){var r=this,o=r.documentBaseUrl=n.documentBaseURL,i=n.baseURI;t=function(e,t,n,r,o){t=md(t,n,e);return pd(ud,t,r,o)}(r,e,o,n.defaultSettings,t),r.settings=t,Ti.language=t.language||"en",Ti.languageLoad=t.language_load,Ti.baseURL=n.baseURL,r.id=e,r.setDirty(!1),r.plugins={},r.documentBaseURI=new R0(t.document_base_url,{base_uri:i}),r.baseURI=i,r.contentCSS=[],r.contentStyles=[],r.shortcuts=new up(r),r.loadedCSS={},r.editorCommands=new Om(r),r.suffix=n.suffix,r.editorManager=n,r.inline=t.inline,r.buttons={},r.menuItems={},t.cache_suffix&&(K.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"")),!1===t.override_viewport&&(K.overrideViewPort=!1),n.fire("SetupEditor",{editor:r}),r.execCallback("setup",r),r.$=G.overrideDefaults(function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}})}function L0(e){return _w.isEditorUIElement(e)}function F0(n,e){e=e.editor,Ow.register(e),e.on("focusin",function(){var e=n.focusedEditor;e!==this&&(e&&e.fire("blur",{focusedEditor:this}),n.setActive(this),(n.focusedEditor=this).fire("focus",{blurredEditor:e}),this.focus(!0))}),e.on("focusout",function(){var t=this;tt.setEditorTimeout(t,function(){var e=n.focusedEditor;Bw(t,Mw())||e!==t||(t.fire("blur",{focusedEditor:null}),n.focusedEditor=null)})}),W0||(W0=function(e){var t=n.activeEditor,e=e.target;t&&e.ownerDocument===document&&e!==document.body&&!Bw(t,e)&&n.focusedEditor===t&&(t.fire("blur",{focusedEditor:null}),n.focusedEditor=null)},Iw.bind(document,"focusin",W0))}function H0(e,t){e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(Iw.unbind(document,"focusin",W0),W0=null)}function z0(t){$w(Xw.get(),function(e){"scroll"===t.type?e.fire("ScrollWindow",t):e.fire("ResizeWindow",t)})}function U0(e){e!==Vw&&(e?G(window).on("resize scroll",z0):G(window).off("resize scroll",z0),Vw=e)}var W0,$0,j0=function(e){return Q.isElement(e)&&Io(z.fromDom(e))},q0=function(i){i.on("click",function(e){var t,n,r,o;3===e.detail&&(n=(e=i).selection.getRng(),r=g.fromRangeStart(n),o=g.fromRangeEnd(n),g.isElementPosition(r)&&(t=r.container(),j0(t))&&k.firstPositionIn(t).each(function(e){return n.setStart(e.container(),e.offset())}),g.isElementPosition(o)&&(t=r.container(),j0(t))&&k.lastPositionIn(t).each(function(e){return n.setEnd(e.container(),e.offset())}),e.selection.setRng(Hc.normalize(n)))})},V0=function(t){t.on("click",function(e){t.dom.getParent(e.target,"details")&&e.preventDefault()})},K0=function(e){e.parser.addNodeFilter("details",function(e){b.each(e,function(e){e.attr("data-mce-open",e.attr("open")),e.attr("open","open")})}),e.serializer.addNodeFilter("details",function(e){b.each(e,function(e){var t=e.attr("data-mce-open");e.attr("open",l.isString(t)?t:null),e.attr("data-mce-open",null)})})},Y0=p.DOM,G0=function(t){t.settings.auto_focus&&tt.setEditorTimeout(t,function(){var e=!0===t.settings.auto_focus?t:t.editorManager.get(t.settings.auto_focus);e.destroyed||e.focus()},100)},X0=function(t,e){var n,s,r=t.settings,o=t.getElement(),i=t.getDoc();r.inline||(t.getElement().style.visibility=t.orgVisibility),e||r.content_editable||(i.open(),i.write(t.iframeHTML),i.close()),r.content_editable&&(t.on("remove",function(){var e=this.getBody();Y0.removeClass(e,"mce-content-body"),Y0.removeClass(e,"mce-edit-focus"),Y0.setAttrib(e,"contentEditable",null)}),Y0.addClass(o,"mce-content-body"),t.contentDocument=i=r.content_document||document,t.contentWindow=r.content_window||window,t.bodyElement=o,r.content_document=r.content_window=null,r.root_name=o.nodeName.toLowerCase()),(e=t.getBody()).disabled=!0,t.readonly=r.readonly,t.readonly||(t.inline&&"static"===Y0.getStyle(e,"position",!0)&&(e.style.position="relative"),e.contentEditable=t.getParam("content_editable_state",!0)),e.disabled=!1,t.editorUpload=nh(t),t.schema=li(r),t.dom=p(i,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,hex_colors:r.force_hex_style_colors,class_filter:r.class_filter,update_styles:!0,root_element:t.inline?t.getBody():null,collect:r.content_editable,schema:t.schema,onSetAttrib:function(e){t.fire("SetAttrib",e)}}),t.parser=((o=Cy((s=t).settings,s.schema)).addAttributeFilter("src,href,style,tabindex",function(e,t){for(var n,r,o,i=e.length,a=s.dom;i--;)r=(n=e[i]).attr(t),n.attributes.map[o="data-mce-"+t]||0!==r.indexOf("data:")&&0!==r.indexOf("blob:")&&("style"===t?((r=a.serializeStyle(a.parseStyle(r),n.name)).length||(r=null),n.attr(o,r),n.attr(t,r)):"tabindex"===t?(n.attr(o,r),n.attr(t,null)):n.attr(o,s.convertURL(r,t,n.name)))}),o.addNodeFilter("script",function(e){for(var t,n,r=e.length;r--;)0!==(n=(t=e[r]).attr("type")||"no/type").indexOf("mce-")&&t.attr("type","mce-"+n)}),o.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)(t=e[n]).type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),o.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t,n=e.length,r=s.schema.getNonEmptyElements();n--;)(t=e[n]).isEmpty(r)&&0===t.getAll("br").length&&(t.append(new cy("br",1)).shortEnded=!0)}),o),t.serializer=_y(r,t),t.selection=zy(t.dom,t.getWin(),t.serializer,t),t.formatter=Jv(t),t.undoManager=xg(t),t._nodeChangeDispatcher=new ph(t),t._selectionOverrides=Nh(t),V0(o=t),K0(o),q0(t),k0(t),dh(t),t.fire("PreInit"),r.browser_spellcheck||r.gecko_spellcheck||(i.body.spellcheck=!1,Y0.setAttrib(e,"spellcheck","false")),t.quirks=S0(t),t.fire("PostRender"),r.directionality&&(e.dir=r.directionality),r.nowrap&&(e.style.whiteSpace="nowrap"),r.protect&&t.on("BeforeSetContent",function(t){X.each(r.protect,function(e){t.content=t.content.replace(e,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})}),t.on("SetContent",function(){t.addVisual(t.getBody())}),t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),t.on("compositionstart compositionend",function(e){t.composing="compositionstart"===e.type}),0<t.contentStyles.length&&(n="",X.each(t.contentStyles,function(e){n+=e+"\r\n"}),t.dom.addStyle(n)),((o=t).inline?Y0:o.dom).styleSheetLoader.loadAll(t.contentCSS,function(e){T0(t)},function(e){T0(t)}),r.content_style&&(i=t,e=r.content_style,i=z.fromDom(t.getDoc().head),o=z.fromTag("style"),C.set(o,"type","text/css"),N.append(o,z.fromText(e)),N.append(i,o))},J0=p.DOM,Q0=function(e,t){var n;return!!(document.domain!==window.location.hostname&&K.ie&&K.ie<12)&&(n=Zp.uuid("mce"),e[n]=function(){X0(e)},n='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()",J0.setAttrib(t,"src",n),!0)},Z0=function(e,t,n,r){var o=z.fromTag("iframe");return C.setAll(o,r),C.setAll(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),Mr.setAll(o,{width:"100%",height:function(e){e="number"==typeof e?e+"px":e;return e||""}(n),display:"block"}),o},ew=function(e){var t,n,r=T.getDocType(e)+"<html><head>";return T.getDocumentBaseUrl(e)!==e.documentBaseUrl&&(r+='<base href="'+e.documentBaseURI.getURI()+'" />'),r+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',t=T.getBodyId(e),n=T.getBodyClass(e),T.getContentSecurityPolicy(e)&&(r+='<meta http-equiv="Content-Security-Policy" content="'+T.getContentSecurityPolicy(e)+'" />'),r+='</head><body id="'+t+'" class="mce-content-body '+n+'" data-id="'+e.id+'"><br></body></html>'},tw=function(e,t){i=t,r=(n=e).editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),(o=Z0(n.id,r,i.height,T.getIframeAttrs(n)).dom()).onload=function(){o.onload=null,n.fire("load")},r=Q0(n,o),n.contentAreaContainer=i.iframeContainer,n.iframeElement=o,n.iframeHTML=ew(n),J0.add(i.iframeContainer,o);var n,r,o,i=r;t.editorContainer&&(J0.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=J0.isHidden(t.editorContainer)),e.getElement().style.display="none",J0.setAttrib(e.id,"aria-hidden","true"),i||X0(e)},nw=p.DOM,rw=function(t,n,e){var r=Fp.get(e),o=Fp.urls[e]||t.documentBaseUrl.replace(/\/$/,"");e=X.trim(e),r&&-1===X.inArray(n,e)&&(X.each(Fp.dependencies(e),function(e){rw(t,n,e)}),t.plugins[e]||(r=new r(t,o,t.$),(t.plugins[e]=r).init&&(r.init(t,o),n.push(e))))},ow=function(e){return e.replace(/^\-/,"")},iw=function(e){var t=e.settings,n=e.getElement(),r=t.width||nw.getStyle(n,"width")||"100%",o=t.height||nw.getStyle(n,"height")||n.offsetHeight,i=t.min_height||100,a=/^[0-9\.]+(|px)$/i;return a.test(""+r)&&(r=Math.max(parseInt(r,10),100)),a.test(""+o)&&(o=Math.max(parseInt(o,10),i)),a=e.theme.renderUI({targetNode:n,width:r,height:o,deltaWidth:t.delta_width,deltaHeight:t.delta_height}),t.content_editable||(o=(a.iframeHeight||o)+("number"==typeof o?a.deltaHeight||0:""))<i&&(o=i),a.height=o,a},aw=function(e){var t=e.getElement(),n=e.settings.theme(e,t);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||e.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||e.id+"_iframecontainer"),n.height=n.iframeHeight||t.offsetHeight,n},sw=function(e){var t=e.getElement();return e.inline?E0(null):(e=t,t=nw.create("div"),nw.insertAfter(t,e),E0(t))},lw={init:function(t){var n,r,e,o,i=t.settings,a=t.getElement();return t.rtl=i.rtl_ui||t.editorManager.i18n.rtl,t.editorManager.i18n.setCode(i.language),i.aria_label=i.aria_label||nw.getAttrib(a,"aria-label",t.getLang("aria.rich_text_area")),t.fire("ScriptsLoaded"),o=(a=t).settings.theme,l.isString(o)?(a.settings.theme=ow(o),e=Hp.get(o),a.theme=new e(a,Hp.urls[o]),a.theme.init&&a.theme.init(a,Hp.urls[o]||a.documentBaseUrl.replace(/\/$/,""),a.$)):a.theme={},n=t,r=[],X.each(n.settings.plugins.split(/[ ,]/),function(e){rw(n,r,ow(e))}),o=(e=t).settings,a=e.getElement(),e.orgDisplay=a.style.display,a=(l.isString(o.theme)?iw:l.isFunction(o.theme)?aw:sw)(e),t.editorContainer=a.editorContainer||null,i.content_css&&X.each(X.explode(i.content_css),function(e){t.contentCSS.push(t.documentBaseURI.toAbsolute(e))}),i.content_editable?X0(t):tw(t,a)}},cw=p.DOM,uw=function(e,t){var n=t.settings;n.language&&"en"!==n.language&&!n.language_url&&(n.language_url=t.editorManager.baseURL+"/langs/"+n.language+".js"),n.language_url&&!t.editorManager.i18n.data[n.language]&&e.add(n.language_url)},dw=function(e,t,n,r){var o=t.settings,i=o.theme;l.isString(i)?(N0(i)||Hp.urls.hasOwnProperty(i)||((o=o.theme_url)?Hp.load(i,t.documentBaseURI.toAbsolute(o)):Hp.load(i,"themes/"+i+"/theme"+n+".js")),e.loadQueue(function(){Hp.waitFor(i,r)})):r()},fw=function(n,r){X.isArray(n.plugins)&&(n.plugins=n.plugins.join(" ")),X.each(n.external_plugins,function(e,t){Fp.load(t,e),n.plugins+=" "+t}),X.each(n.plugins.split(/[ ,]/),function(e){var t;(e=X.trim(e))&&!Fp.urls[e]&&(N0(e)?(e=e.substr(1,e.length),t=Fp.dependencies(e),X.each(t,function(e){e=Fp.createUrl({prefix:"plugins/",resource:e,suffix:"/plugin"+r+".js"},e),Fp.load(e.resource,e)})):Fp.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+r+".js"}))})},mw=function(t){function e(){cw.unbind(window,"ready",e),t.render()}var n,r,o,i,a=t.settings,s=t.id;Le.Event.domLoaded?t.getElement()&&K.contentEditable&&(a.inline?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden"),(n=t.getElement().form||cw.getParent(s,"form"))&&(t.formElement=n,a.hidden_input&&!/TEXTAREA|INPUT/i.test(t.getElement().nodeName)&&(cw.insertAfter(cw.create("input",{type:"hidden",name:s}),s),t.hasHiddenInput=!0),t.formEventDelegate=function(e){t.fire(e.type,e)},cw.bind(n,"submit reset",t.formEventDelegate),t.on("reset",function(){t.setContent(t.startContent,{format:"raw"})}),!a.submit_patch||n.submit.nodeType||n.submit.length||n._mceOldSubmit||(n._mceOldSubmit=n.submit,n.submit=function(){return t.editorManager.triggerSave(),t.setDirty(!1),n._mceOldSubmit(n)})),t.windowManager=Pp(t),t.notificationManager=Dp(t),"xml"===a.encoding&&t.on("GetContent",function(e){e.save&&(e.content=cw.encode(e.content))}),a.add_form_submit_trigger&&t.on("submit",function(){t.initialized&&t.save()}),a.add_unload_trigger&&(t._beforeUnload=function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),o=(r=t).suffix,i=ki.ScriptLoader,dw(i,r,o,function(){uw(i,r),fw(r.settings,o),i.loadQueue(function(){r.removed||lw.init(r)},r,function(e){Lp.pluginLoadError(r,e[0]),r.removed||lw.init(r)})})):cw.bind(window,"ready",e)},pw=function(e,t,n){var r=e.sidebars||[];r.push({name:t,settings:n}),e.sidebars=r},hw=X.each,gw=X.trim,vw="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),yw={ftp:21,http:80,https:443,mailto:25},bw=(R0.prototype={setPath:function(e){e=/^(.*?)\/?(\w+)?$/.exec(e),this.path=e[0],this.directory=e[1],this.file=e[2],this.source="",this.getURI()},toRelative:function(e){var t,n;return"./"===e?e:"mce_host"!==(e=new R0(e,{base_uri:this})).host&&this.host!==e.host&&e.host||this.port!==e.port||this.protocol!==e.protocol&&""!==e.protocol?e.getURI():(t=this.getURI())===(n=e.getURI())||"/"===t.charAt(t.length-1)&&t.substr(0,t.length-1)===n?t:(n=this.toRelPath(this.path,e.path),e.query&&(n+="?"+e.query),e.anchor&&(n+="#"+e.anchor),n)},toAbsolute:function(e,t){return(e=new R0(e,{base_uri:this})).getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=yw[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,r,o,i=0,a="";if(e=(e=e.substring(0,e.lastIndexOf("/"))).split("/"),n=t.split("/"),e.length>=n.length)for(r=0,o=e.length;r<o;r++)if(r>=n.length||e[r]!==n[r]){i=r+1;break}if(e.length<n.length)for(r=0,o=n.length;r<o;r++)if(r>=e.length||e[r]!==n[r]){i=r+1;break}if(1===i)return t;for(r=0,o=e.length-(i-1);r<o;r++)a+="../";for(r=i-1,o=n.length;r<o;r++)a+=r!==i-1?"/"+n[r]:n[r];return a},toAbsPath:function(e,t){var n,r=0,o=[],i=/\/$/.test(t)?"/":"";for(e=e.split("/"),t=t.split("/"),hw(e,function(e){e&&o.push(e)}),e=o,n=t.length-1,o=[];0<=n;n--)0!==t[n].length&&"."!==t[n]&&(".."===t[n]?r++:0<r?r--:o.push(t[n]));return 0!==(e=(n=e.length-r)<=0?o.reverse().join("/"):e.slice(0,n).join("/")+"/"+o.reverse().join("/")).indexOf("/")&&(e="/"+e),i&&e.lastIndexOf("/")!==e.length-1&&(e+=i),e},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(n.protocol?t+=n.protocol+"://":t+="//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},R0.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),{type:t=(n=/data:([^;]+)/.exec(e[0]))?n[1]:t,data:e[1]}},R0.getDocumentBaseUrl=function(e){e=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname;return/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/")),e},"html"),ww=function(e,t){e=T.getForcedRootBlock(e),e=new RegExp("^(<"+e+"[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/"+e+">[\r\n]*|<br \\/>[\r\n]*)$");return t.replace(e,"")},xw=function(e,t,n){e=function(e,n,t){var r,o,i={},a={},s=[];for(r in t.firstChild&&A0(t.firstChild,function(t){b.each(e,function(e){e.name===t.name&&(i[e.name]?i[e.name].nodes.push(t):i[e.name]={filter:e,nodes:[t]})}),b.each(n,function(e){"string"==typeof t.attr(e.name)&&(a[e.name]?a[e.name].nodes.push(t):a[e.name]={filter:e,nodes:[t]})})}),i)i.hasOwnProperty(r)&&s.push(i[r]);for(o in a)a.hasOwnProperty(o)&&s.push(a[o]);return s}(e,t,n);b.each(e,function(t){b.each(t.filter.callbacks,function(e){e(t.nodes,t.filter.name,{})})})},Cw=function(e,t){var n;e.dom.setHTML(e.getBody(),t),n=e,Sp.hasFocus(n)&&k.firstPositionIn(n.getBody()).each(function(e){var t=e.getNode(),t=Q.isTable(t)?k.firstPositionIn(t).getOr(e):e;n.selection.setRng(t.toRange())})},kw=p.DOM,Sw=p.DOM,Tw=X.extend,Ew=X.each,Nw=X.resolve,Rw=K.ie,_w=(Tw(M0.prototype={render:function(){mw(this)},focus:function(e){Sp.focus(this,e)},hasFocus:function(){return Sp.hasFocus(this)},execCallback:function(e){for(var t=1;t<arguments.length;t++)t-1,0;var n,r=this.settings[e];if(r)return this.callbackLookup&&(n=this.callbackLookup[e])&&(r=n.func,n=n.scope),"string"==typeof r&&(n=(n=r.replace(/\.\w+$/,""))?Nw(n):0,r=Nw(r),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[e]={func:r,scope:n}),r.apply(n||this,Array.prototype.slice.call(arguments,1))},translate:function(e){var n,r;return e&&X.is(e,"string")&&(n=this.settings.language||"en",e=(r=this.editorManager.i18n).data[n+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,t){return r.data[n+"."+t]||"{#"+t+"}"})),this.editorManager.translate(e)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(void 0!==t?t:"{#"+e+"}")},getParam:function(e,t,n){return Qc(this,e,t,n)},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.stateSelector&&void 0===t.active&&(t.active=!1),t.text||t.icon||(t.icon=e),n.buttons=n.buttons,t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return pw(this,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems,n.menuItems[e]=t},addContextToolbar:function(e,t){var n,r=this;r.contextToolbars=r.contextToolbars||[],"string"==typeof e&&(n=e,e=function(e){return r.dom.is(e,n)}),r.contextToolbars.push({id:Zp.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable=!0:(Sw.show(this.getContainer()),Sw.hide(this.id)),this.load(),this.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(Rw&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(Sw.hide(e.getContainer()),Sw.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t,n=this.getElement();return this.removed?"":n?((e=e||{}).load=!0,t=this.setContent(void 0!==n.value?n.value:n.innerHTML,e),e.element=n,e.no_events||this.fire("LoadContent",e),e.element=null,t):void 0},save:function(e){var t,n,r=this,o=r.getElement();if(o&&r.initialized&&!r.removed)return(e=e||{}).save=!0,e.element=o,e.content=r.getContent(e),e.no_events||r.fire("SaveContent",e),"raw"===e.format&&r.fire("RawSaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(o.nodeName)?o.value=t:(r.inline||(o.innerHTML=t),(n=Sw.getParent(r.id,"form"))&&Ew(n.elements,function(e){if(e.name===r.id)return e.value=t,!1})),e.element=o=null,!1!==e.set_dirty&&r.setDirty(!1),t},setContent:function(e,t){return P0(this,e,t)},getContent:function(e){return _0(this,e)},insertContent:function(e,t){t&&(e=Tw({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},setMode:function(e){var t,n;(n=e)!==((t=this).readonly?"readonly":"design")&&(t.initialized?Wm(t,"readonly"===n):t.on("init",function(){Wm(t,"readonly"===n)}),ep.fireSwitchMode(t,n))},getContainer:function(){return this.container||(this.container=Sw.get(this.editorContainer||this.id+"_parent")),this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=Sw.get(this.id)),this.targetElm},getWin:function(){var e;return this.contentWindow||(e=this.iframeElement)&&(this.contentWindow=e.contentWindow),this.contentWindow},getDoc:function(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this.settings;if(r.urlconverter_callback)return this.execCallback("urlconverter_callback",e,n,!0,t);if(r.convert_urls&&(!n||"LINK"!==n.nodeName)&&0!==e.indexOf("file:")&&0!==e.length){if(r.relative_urls)return this.documentBaseURI.toRelative(e);e=this.documentBaseURI.toAbsolute(e,r.remove_script_host)}return e},addVisual:function(e){var n,r=this,o=r.settings,i=r.dom;e=e||r.getBody(),void 0===r.hasVisual&&(r.hasVisual=o.visual),Ew(i.select("table,a",e),function(e){var t;switch(e.nodeName){case"TABLE":return n=o.visual_table_class||"mce-item-table",void((t=i.getAttrib(e,"border"))&&"0"!==t||!r.hasVisual?i.removeClass(e,n):i.addClass(e,n));case"A":return void(i.getAttrib(e,"href")||(t=i.getAttrib(e,"name")||e.id,n=o.visual_anchor_class||"mce-item-anchor",t&&r.hasVisual?i.addClass(e,n):i.removeClass(e,n)))}}),r.fire("VisualAid",{element:e,hasVisual:r.hasVisual})},remove:function(){I0(this)},destroy:function(e){B0(this,e)},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},ye),{isEditorUIElement:function(e){return-1!==e.className.toString().indexOf("mce-")}}),Aw=function(e){return"nodechange"===e.type&&e.selectionChange},Dw=function(e){e.on("focusout",function(){Nm.store(e)})},Pw=function(e,t){e.on("mouseup touchend",function(e){t.throttle()})},Ow={register:function(n){var e,t,r=Yh(function(){Nm.store(n)},0);function o(){t.throttle()}n.inline&&(e=n,t=r,p.DOM.bind(document,"mouseup",o),e.on("remove",function(){p.DOM.unbind(document,"mouseup",o)})),n.on("init",function(){var t,e;t=n,e=r,kr.detect().browser.isIE()?Dw(t):Pw(t,e),t.on("keyup nodechange",function(e){Aw(e)||Nm.store(t)})}),n.on("remove",function(){r.cancel()})}},Iw=p.DOM,Bw=function(t,e){var n=t?t.settings.custom_ui_selector:"";return null!==Iw.getParent(e,function(e){return L0(e)||!!n&&t.dom.is(e,n)})},Mw=function(){try{return document.activeElement}catch(e){return document.body}},Lw=function(e){e.on("AddEditor",v.curry(F0,e)),e.on("RemoveEditor",v.curry(H0,e))},Fw={},Hw="en",zw={setCode:function(e){e&&(Hw=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return Hw},rtl:!1,add:function(e,t){var n,r=Fw[e];for(n in r||(Fw[e]=r={}),t)r[n]=t[n];this.setCode(e)},translate:function(e){function n(e){return X.is(e,"function")?Object.prototype.toString.call(e):t(e)?"":""+e}function t(e){return""===e||null===e||X.is(e,"undefined")}function r(e){return e=n(e),X.hasOwn(i,e)?n(i[e]):e}var o,i=Fw[Hw]||{};return t(e)?"":X.is(e,"object")&&X.hasOwn(e,"raw")?n(e.raw):(X.is(e,"array")&&(o=e.slice(1),e=r(e[0]).replace(/\{([0-9]+)\}/g,function(e,t){return X.hasOwn(o,t)?n(o[t]):e})),r(e).replace(/{context:\w+}$/,""))},data:Fw},Uw=p.DOM,Ww=X.explode,$w=X.each,jw=X.extend,qw=0,Vw=!1,Kw=[],Yw=[],Gw=function(t){var e=Yw;delete Kw[t.id];for(var n=0;n<Kw.length;n++)if(Kw[n]===t){Kw.splice(n,1);break}return Yw=b.filter(Yw,function(e){return t!==e}),Xw.activeEditor===t&&(Xw.activeEditor=0<Yw.length?Yw[0]:null),Xw.focusedEditor===t&&(Xw.focusedEditor=null),e.length!==Yw.length},Xw={defaultSettings:{},$:G,majorVersion:"4",minorVersion:"7.13",releaseDate:"2018-05-16",editors:Kw,i18n:zw,activeEditor:null,settings:{},setup:function(){var e,t,n="",r=R0.getDocumentBaseUrl(document.location);if(/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),t=window.tinymce||window.tinyMCEPreInit)e=t.base||t.baseURL,n=t.suffix;else{for(var o=document.getElementsByTagName("script"),i=0;i<o.length;i++){var a,s=(a=o[i].src).substring(a.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(a)){-1!==s.indexOf(".min")&&(n=".min"),e=a.substring(0,a.lastIndexOf("/"));break}}!e&&document.currentScript&&(-1!==(a=document.currentScript.src).indexOf(".min")&&(n=".min"),e=a.substring(0,a.lastIndexOf("/")))}this.baseURL=new R0(r).toAbsolute(e),this.documentBaseURL=r,this.baseURI=new R0(this.baseURL),this.suffix=n,Lw(this)},overrideDefaults:function(e){var t,n=e.base_url,r=(n&&(this.baseURL=new R0(this.documentBaseURL).toAbsolute(n.replace(/\/+$/,"")),this.baseURI=new R0(this.baseURL)),n=e.suffix,e.suffix&&(this.suffix=n),(this.defaultSettings=e).plugin_base_urls);for(t in r)Ti.PluginManager.urls[t]=r[t]},init:function(a){var n,s=this,r=X.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," "),t=function(e,t){return e.inline&&t.tagName.toLowerCase()in r},l=function(e){var t=e.id;return t||(t=(t=e.name)&&!Uw.get(t)?e.name:Uw.uniqueId(),e.setAttribute("id",t)),t},e=function(e){e=a[e];if(e)return e.apply(s,Array.prototype.slice.call(arguments,2))},o=function(e,t){return t.constructor===RegExp?t.test(e.className):Uw.hasClass(e,t)},c=function(t){var e,n=[];if(K.ie&&K.ie<11)return Lp.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(t.types)$w(t.types,function(e){n=n.concat(Uw.select(e.selector))});else{if(t.selector)return Uw.select(t.selector);if(t.target)return[t.target];switch(t.mode){case"exact":0<(e=t.elements||"").length&&$w(Ww(e),function(t){var e;(e=Uw.get(t))?n.push(e):$w(document.forms,function(e){$w(e.elements,function(e){e.name===t&&(t="mce_editor_"+qw++,Uw.setAttrib(e,"id",t),n.push(e))})})});break;case"textareas":case"specific_textareas":$w(Uw.select("textarea"),function(e){t.editor_deselector&&o(e,t.editor_deselector)||t.editor_selector&&!o(e,t.editor_selector)||n.push(e)})}}return n},u=function(e){n=e},d=function(){function n(e,t,n){e=new M0(e,t,s),i.push(e),e.on("init",function(){++o===r.length&&u(i)}),e.targetElm=e.targetElm||n,e.render()}var r,o=0,i=[];Uw.unbind(window,"ready",d),e("onpageload"),r=G.unique(c(a)),a.types?$w(a.types,function(t){X.each(r,function(e){return!Uw.is(e,t.selector)||(n(l(e),jw({},a,t),e),!1)})}):(X.each(r,function(e){(e=s.get(e.id))&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(Gw(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null)}),0===(r=X.grep(r,function(e){return!s.get(e.id)})).length?u([]):$w(r,function(e){t(a,e)?Lp.initError("Could not initialize inline editor on invalid inline target element",e):n(l(e),a,e)}))};return s.settings=a,Uw.bind(window,"ready",d),new ke(function(t){n?t(n):u=function(e){t(e)}})},get:function(t){return 0===arguments.length?Yw.slice(0):l.isString(t)?b.find(Yw,function(e){return e.id===t}).getOr(null):l.isNumber(t)&&Yw[t]||null},add:function(e){var t=this;return Kw[e.id]===e||(null===t.get(e.id)&&("length"!==e.id&&(Kw[e.id]=e),Kw.push(e),Yw.push(e)),U0(!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),$0)||($0=function(){t.fire("BeforeUnload")},Uw.bind(window,"beforeunload",$0)),e},createEditor:function(e,t){return this.add(new M0(e,t,this))},remove:function(e){var t,n,r=this;if(e){if(!l.isString(e))return n=e,l.isNull(r.get(n.id))?null:(Gw(n)&&r.fire("RemoveEditor",{editor:n}),0===Yw.length&&Uw.unbind(window,"beforeunload",$0),n.remove(),U0(0<Yw.length),n);e=e.selector||e,$w(Uw.select(e),function(e){(n=r.get(e.id))&&r.remove(n)})}else for(t=Yw.length-1;0<=t;t--)r.remove(Yw[t])},execCommand:function(e,t,n){var r=this.get(n);switch(e){case"mceAddEditor":return this.get(n)||new M0(n,this.settings,this).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?r.isHidden()?r.show():r.hide():this.execCommand("mceAddEditor",0,n),!0}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,n)},triggerSave:function(){$w(Yw,function(e){e.save()})},addI18n:function(e,t){zw.add(e,t)},translate:function(e){return zw.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},wr=(jw(Xw,ve),Xw.setup(),Xw);function Jw(n){return{walk:function(e,t){return yv(n,e,t)},split:Xg.split,normalize:function(t){return lm.normalize(n,t).fold(v.constant(!1),function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0})}}}(be=Jw=Jw||{}).compareRanges=tm.isEq,be.getCaretRangeFromPoint=gb.fromPoint,be.getSelectedNode=Ii,be.getNode=Bi;function Qw(e,t,n){var r=t.x,o=t.y,i=e.w,e=e.h,a=t.w,t=t.h;return"b"===(n=(n||"").split(""))[0]&&(o+=t),"r"===n[1]&&(r+=a),"c"===n[0]&&(o+=sx(t/2)),"c"===n[1]&&(r+=sx(a/2)),"b"===n[3]&&(o-=e),"r"===n[4]&&(r-=i),"c"===n[3]&&(o-=sx(e/2)),"c"===n[4]&&(r-=sx(i/2)),Zw(r,o,i,e)}function Zw(e,t,n,r){return{x:e,y:t,w:n,h:r}}function ex(){}function tx(e,n){var r,o,t,i;if(n=n||'"',null===e)return"null";if("string"==(t=typeof e))return o="\bb\tt\nn\ff\rr\"\"''\\\\",n+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(r=o.indexOf(t))+1?"\\"+o.charAt(r+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+n;if("object"!=t)return""+e;if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(r=0,o="[";r<e.length;r++)o+=(0<r?",":"")+tx(e[r],n);return o+"]"}for(i in o="{",e)e.hasOwnProperty(i)&&(o+="function"!=typeof e[i]?(1<o.length?","+n:n)+i+n+":"+tx(e[i],n):"");return o+"}"}function nx(e){this.settings=gx({},e),this.count=0}var rx,ox,Ce=Jw,ix=Math.min,ax=Math.max,sx=Math.round,e={inflate:function(e,t,n){return Zw(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},relativePosition:Qw,findBestRelativePosition:function(e,t,n,r){for(var o,i=0;i<r.length;i++)if((o=Qw(e,t,r[i])).x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return r[i];return null},intersect:function(e,t){var n=ax(e.x,t.x),r=ax(e.y,t.y),o=ix(e.x+e.w,t.x+t.w),e=ix(e.y+e.h,t.y+t.h);return o-n<0||e-r<0?null:Zw(n,r,o-n,e-r)},clamp:function(e,t,n){var r=e.x,o=e.y,i=e.x+e.w,e=e.y+e.h,a=t.x+t.w,s=t.y+t.h,l=ax(0,t.x-r),t=ax(0,t.y-o),a=ax(0,i-a),s=ax(0,e-s);return r+=l,o+=t,n&&(i+=l,e+=t,r-=a,o-=s),Zw(r,o,(i-=a)-r,(e-=s)-o)},create:Zw,fromClientRect:function(e){return Zw(e.left,e.top,e.width,e.height)}},lx={},ge={add:function(e,t){lx[e.toLowerCase()]=t},has:function(e){return!!lx[e.toLowerCase()]},get:function(e){var t=e.toLowerCase(),t=lx.hasOwnProperty(t)?lx[t]:null;if(null===t)throw new Error("Could not find module for type: "+e);return t},create:function(e,t){var n;if("string"==typeof e?(t=t||{}).type=e:e=(t=e).type,e=e.toLowerCase(),n=lx[e])return(n=new n(t)).type=e,n;throw new Error("Could not find control by type: "+e)}},cx=X.each,ux=X.extend,dx=(ex.extend=rx=function(n){function r(){var e,t,n;if(!ox&&(this.init&&this.init.apply(this,arguments),t=this.Mixins))for(e=t.length;e--;)(n=t[e]).init&&n.init.apply(this,arguments)}function t(){return this}var e,o,i,a=this.prototype;for(o in ox=!0,e=new this,ox=!1,n.Mixins&&(cx(n.Mixins,function(e){for(var t in e)"init"!==t&&(n[t]=e[t])}),a.Mixins)&&(n.Mixins=a.Mixins.concat(n.Mixins)),n.Methods&&cx(n.Methods.split(","),function(e){n[e]=t}),n.Properties&&cx(n.Properties.split(","),function(e){var t="_"+e;n[e]=function(e){return void 0!==e?(this[t]=e,this):this[t]}}),n.Statics&&cx(n.Statics,function(e,t){r[t]=e}),n.Defaults&&a.Defaults&&(n.Defaults=ux({},a.Defaults,n.Defaults)),n)"function"==typeof(i=n[o])&&a[o]?e[o]=function(n,r){return function(){var e,t=this._super;return this._super=a[n],e=r.apply(this,arguments),this._super=t,e}}(o,i):e[o]=i;return r.prototype=e,(r.constructor=r).extend=rx,r},Math.min),fx=Math.max,mx=Math.round,px={serialize:tx,parse:function(e){try{return JSON.parse(e)}catch(e){}}},r={callbacks:{},count:0,send:function(t){var n=this,r=p.DOM,o=(void 0!==t.count?t:n).count,i="tinymce_jsonp_"+o;n.callbacks[o]=function(e){r.remove(i),delete n.callbacks[o],t.callback(e)},r.add(r.doc.body,"script",{id:i,src:t.url,type:"text/javascript"}),n.count++}},hx={send:function(e){var t,n=0,r=function(){!e.async||4===t.readyState||1e4<n++?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,1e4<n?"TIMED_OUT":"GENERAL",t,e),t=null):setTimeout(r,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",hx.fire("beforeInitialize",{settings:e}),t=new zp){if(t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&X.each(e.requestheaders,function(e){t.setRequestHeader(e.key,e.value)}),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=hx.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data),!e.async)return r();setTimeout(r,10)}}},gx=(X.extend(hx,ve),X.extend),we=(nx.sendRPC=function(e){return(new nx).send(e)},nx.prototype={send:function(n){var r=n.error,o=n.success;(n=gx(this.settings,n)).success=function(e,t){(e=void 0===(e=px.parse(e))?{error:"JSON Parse error."}:e).error?r.call(n.error_scope||n.scope,e.error,t):o.call(n.success_scope||n.scope,e.result)},n.error=function(e,t){r&&r.call(n.error_scope||n.scope,e,t)},n.data=px.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",hx.send(n)}},window.localStorage),t={geom:{Rect:e},util:{Promise:ke,Delay:tt,Tools:X,VK:U,URI:R0,Class:ex,EventDispatcher:Im,Observable:ve,I18n:zw,XHR:hx,JSON:px,JSONRequest:nx,JSONP:r,LocalStorage:we,Color:function(e){function t(e){if("object"==typeof e){if("r"in e)s=e.r,l=e.g,c=e.b;else if("v"in e){var t,n,r=e.h,o=e.s,i=e.v;if(r=(parseInt(r,10)||0)%360,o=parseInt(o,10)/100,i=parseInt(i,10)/100,o=fx(0,dx(o,1)),i=fx(0,dx(i,1)),0===o)s=l=c=mx(255*i);else{switch(r=r/60,n=(t=i*o)*(1-Math.abs(r%2-1)),o=i-t,Math.floor(r)){case 0:s=t,l=n,c=0;break;case 1:s=n,l=t,c=0;break;case 2:s=0,l=t,c=n;break;case 3:s=0,l=n,c=t;break;case 4:s=n,l=0,c=t;break;case 5:s=t,l=0,c=n;break;default:s=l=c=0}s=mx(255*(s+o)),l=mx(255*(l+o)),c=mx(255*(c+o))}}}else(i=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(s=parseInt(i[1],10),l=parseInt(i[2],10),c=parseInt(i[3],10)):(i=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(s=parseInt(i[1],16),l=parseInt(i[2],16),c=parseInt(i[3],16)):(i=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(s=parseInt(i[1]+i[1],16),l=parseInt(i[2]+i[2],16),c=parseInt(i[3]+i[3],16));return s=s<0?0:255<s?255:s,l=l<0?0:255<l?255:l,c=c<0?0:255<c?255:c,a}var a={},s=0,l=0,c=0;return e&&t(e),a.toRgb=function(){return{r:s,g:l,b:c}},a.toHsv=function(){return e=s,t=l,n=c,a=0,(r=dx(e/=255,dx(t/=255,n/=255)))===(o=fx(e,fx(t,n)))?{h:0,s:0,v:100*(a=r)}:(i=(o-r)/o,{h:mx(60*((e===r?3:n===r?1:5)-(e===r?t-n:n===r?e-t:n-e)/((a=o)-r))),s:mx(100*i),v:mx(100*a)});var e,t,n,r,o,i,a},a.toHex=function(){function e(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e}return"#"+e(s)+e(l)+e(c)},a.parse=t,a}},dom:{EventUtils:Le,Sizzle:Y,DomQuery:G,TreeWalker:J,DOMUtils:p,ScriptLoader:ki,RangeUtils:Ce,Serializer:_y,ControlSelection:mb,BookmarkManager:ub,Selection:zy,Event:Le.Event},html:{Styles:ui,Entities:Qo,Node:cy,Schema:li,SaxParser:sg,DomParser:Cy,Writer:Bc,Serializer:Mc},ui:{Factory:ge},Env:K,AddOnManager:Ti,Formatter:Jv,UndoManager:xg,EditorCommands:Om,WindowManager:Pp,NotificationManager:Dp,EditorObservable:ye,Shortcuts:up,Editor:M0,FocusManager:_w,EditorManager:wr,DOM:p.DOM,ScriptLoader:ki.ScriptLoader,PluginManager:Ti.PluginManager,ThemeManager:Ti.ThemeManager,trim:X.trim,isArray:X.isArray,is:X.is,toArray:X.toArray,makeMap:X.makeMap,each:X.each,map:X.map,grep:X.grep,inArray:X.inArray,extend:X.extend,create:X.create,walk:X.walk,createNS:X.createNS,resolve:X.resolve,explode:X.explode,_addCacheSuffix:X._addCacheSuffix,isOpera:K.opera,isWebKit:K.webkit,isIE:K.ie,isGecko:K.gecko,isMac:K.mac},n=X.extend(wr,t),be=(xe=n,window.tinymce=xe,window.tinyMCE=xe,n);if("object"==typeof module)try{module.exports=be}catch(e){}}(),function(){return this.tinyMCE.DOM.events.domLoaded=!0,this.tinyMCE}.apply(this,arguments)||window.tinyMCE}.apply(e,arguments)})}(this),define("text",["module"],function(e){"use strict";var l,o,i,a,s,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,u="undefined"!=typeof location&&location.href,d=u&&location.protocol&&location.protocol.replace(/\:/,""),f=u&&location.hostname,m=u&&(location.port||void 0),p={},h=e.config&&e.config()||{};function g(e,t){return void 0===e||""===e?t:e}return l={version:"2.0.15",strip:function(e){var t;return e?(t=(e=e.replace(n,"")).match(c))&&(e=t[1]):e="",e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:h.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(e){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,r=!1,o=e.lastIndexOf("."),i=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!i||1<o)?(t=e.substring(0,o),n=e.substring(o+1)):t=e,-1!==(o=(i=n||t).indexOf("!"))&&(r="strip"===i.substring(o+1),i=i.substring(0,o),n?n=i:t=i),{moduleName:t,ext:n,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,r){var o,i,e=l.xdRegExp.exec(e);return!e||(o=e[2],i=(e=(e=e[3]).split(":"))[1],e=e[0],(!o||o===t)&&(!e||e.toLowerCase()===n.toLowerCase())&&(!i&&!e||function(e,t,n,r){if(t===r)return!0;if(e===n){if("http"===e)return g(t,"80")===g(r,"80");if("https"===e)return g(t,"443")===g(r,"443")}return!1}(o,i,t,r)))},finishLoad:function(e,t,n,r){n=t?l.strip(n):n,h.isBuild&&(p[e]=n),r(n)},load:function(t,e,n,r){var o,i,a;r&&r.isBuild&&!r.inlineText||(h.isBuild=r&&r.isBuild,r=(o=l.parseName(t)).moduleName+(o.ext?"."+o.ext:""),i=e.toUrl(r),a=h.useXhr||l.useXhr,0===i.indexOf("empty:"))?n():!u||a(i,d,f,m)?l.get(i,function(e){l.finishLoad(t,o.strip,e,n)},function(e){n.error&&n.error(e)}):e([r],function(e){l.finishLoad(o.moduleName+"."+o.ext,o.strip,e,n)})},write:function(e,t,n,r){var o;p.hasOwnProperty(t)&&(o=l.jsEscape(p[t]),n.asModule(e+"!"+t,"define(function () { return '"+o+"';});\n"))},writeFile:function(n,e,t,r,o){var e=l.parseName(e),i=e.ext?"."+e.ext:"",a=e.moduleName+i,s=t.toUrl(e.moduleName+i)+".js";l.load(a,t,function(e){function t(e){return r(s,e)}t.asModule=function(e,t){return r.asModule(e,s,t)},l.write(n,a,t,o)},o)}},"node"===h.env||!h.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(o=require.nodeRequire("fs"),l.get=function(e,t,n){try{var r=o.readFileSync(e,"utf8");t(r="\ufeff"===r[0]?r.substring(1):r)}catch(e){n&&n(e)}}):"xhr"===h.env||!h.env&&l.createXhr()?l.get=function(n,r,o,e){var t,i=l.createXhr();if(i.open("GET",n,!0),e)for(t in e)e.hasOwnProperty(t)&&i.setRequestHeader(t.toLowerCase(),e[t]);h.onXhr&&h.onXhr(i,n),i.onreadystatechange=function(e){var t;4===i.readyState&&(399<(t=i.status||0)&&t<600?((t=new Error(n+" HTTP status: "+t)).xhr=i,o&&o(t)):r(i.responseText),h.onXhrComplete)&&h.onXhrComplete(i,n)},i.send(null)}:"rhino"===h.env||!h.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?l.get=function(e,t){var n,r,e=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),i=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(e),"utf-8")),e="";try{for(n=new java.lang.StringBuffer,null!==(r=(r=i.readLine())&&r.length()&&65279===r.charAt(0)?r.substring(1):r)&&n.append(r);null!==(r=i.readLine());)n.append(o),n.append(r);e=String(n.toString())}finally{i.close()}t(e)}:("xpconnect"===h.env||!h.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,a=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in i,l.get=function(t,e){var n,r,o={};s&&(t=t.replace(/\//g,"\\")),t=new FileUtils.File(t);try{(n=i["@mozilla.org/network/file-input-stream;1"].createInstance(a.nsIFileInputStream)).init(t,1,0,!1),(r=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(a.nsIConverterInputStream)).init(n,"utf-8",n.available(),a.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(n.available(),o),r.close(),n.close(),e(o.value)}catch(e){throw new Error((t&&t.path||"")+": "+e)}}),l}),define("text!mockup-patterns-tinymce-url/templates/link.xml",[],function(){return'<div>\n  <div class="linkModal">\n    <h1><%- insertHeading %></h1>\n    <% if(_.contains(linkTypes, \'upload\')){ %>\n    <p class="info"><%- insertLinkHelp %></p>\n    <% } %>\n\n    <div class="linkTypes pat-autotoc autotabs"\n         data-pat-autotoc="section:fieldset;levels:legend;IDPrefix:tinymce-autotoc-">\n\n      <% if(_.contains(linkTypes, \'internal\')){ %>\n      <fieldset class="linkType internal" data-linkType="internal">\n        <legend id="tinylink-internal"><%- internal %></legend>\n        <div>\n          <div class="form-group main">\n            \x3c!-- this gives the name to the "linkType" --\x3e\n            <input type="text" name="internal" />\n          </div>\n        </div>\n      </fieldset>\n      <% } %>\n\n      <% if(_.contains(linkTypes, \'upload\')){ %>\n      <fieldset class="linkType upload" data-linkType="upload">\n        <legend id="tinylink-upload"><%- uploadText %></legend>\n        <div class="uploadify-me"></div>\n      </fieldset>\n      <% } %>\n\n      <% if(_.contains(linkTypes, \'external\')){ %>\n      <fieldset class="linkType external" data-linkType="external">\n        <legend id="tinylink-external"><%- external %></legend>\n        <div class="form-group main">\n          <label for="external"><%- externalText %></label>\n          <input type="text" name="external" />\n        </div>\n      </fieldset>\n      <% } %>\n\n      <% if(_.contains(linkTypes, \'email\')){ %>\n      <fieldset class="linkType email" data-linkType="email">\n        <legend id="tinylink-email"><%- emailText %></legend>\n        <div class="form-inline">\n          <div class="form-group main">\n            <label><%- emailText %></label>\n            <input type="text" name="email" />\n          </div>\n          <div class="form-group">\n            <label><%- subjectText %></label>\n            <input type="text" name="subject" />\n          </div>\n        </div>\n      </fieldset>\n      <% } %>\n\n      <% if(_.contains(linkTypes, \'anchor\')){ %>\n      <fieldset class="linkType anchor" data-linkType="anchor">\n        <legend id="tinylink-anchor"><%- anchor %></legend>\n        <div>\n          <div class="form-group main">\n            <label><%- anchorLabel %></label>\n            <div class="input-wrapper">\n              <select name="anchor" class="pat-select2" data-pat-select2="width:500px" />\n            </div>\n          </div>\n        </div>\n      </fieldset>\n      <% } %>\n\n    </div>\x3c!-- / tabs --\x3e\n\n    <div class="common-controls">\n      <div class="form-group">\n        <label><%- target %></label>\n        <select name="target">\n          <% _.each(targetList, function(target){ %>\n            <option value="<%- target.value %>"><%- target.text %></option>\n          <% }); %>\n        </select>\n      </div>\n      <div class="form-group">\n        <label><%- titleText %></label>\n        <input type="text" name="title" />\n      </div>\n    </div>\n\n    <input type="submit" class="plone-btn" name="cancel" value="<%- cancelBtn %>" />\n    <input type="submit" class="plone-btn plone-btn-primary context" name="insert" value="<%- insertBtn %>" />\n  </div>\n</div>\n'}),define("text!mockup-patterns-tinymce-url/templates/image.xml",[],function(){return'<div>\n  <div class="linkModal">\n    <h1><%- insertHeading %></h1>\n    <% if(_.contains(linkTypes, \'uploadImage\')){ %>\n    <p class="info"><%- insertImageHelp %></p>\n    <% } %>\n\n    <div class="linkTypes pat-autotoc autotabs"\n         data-pat-autotoc="section:fieldset;levels:legend;IDPrefix:tinymce-autotoc-">\n\n        <% if(_.contains(linkTypes, \'image\')){ %>\n      <fieldset class="linkType image" data-linkType="image">\n        <legend id="tinylink-image"><%- internalImageText %></legend>\n        <div class="form-inline">\n          <div class="form-group main">\n            <input type="text" name="image" />\n          </div>\n          <div class="form-group scale">\n            <label><%- scaleText %></label>\n            <select name="scale">\n              <option value="">Original</option>\n                <% _.each(imageScales, function(scale) { %>\n                  <option value="<%- scale.value %>" <% if (scale.value === options.defaultScale) { %>selected<% } %> >\n                    <%- scale.title %>\n                  </option>\n                <% }); %>\n            </select>\n          </div>\n        </div>\n      </fieldset>\n        <% } %>\n\n      <% if(_.contains(linkTypes, \'uploadImage\')){ %>\n      <fieldset class="linkType uploadImage" data-linkType="uploadImage">\n        <legend id="tinylink-uploadImage"><%- uploadText %></legend>\n        <div class="uploadify-me"></div>\n      </fieldset>\n      <% } %>\n\n      <% if(_.contains(linkTypes, \'externalImage\')){ %>\n      <fieldset class="linkType externalImage" data-linkType="externalImage">\n        <legend id="tinylink-externalImage"><%- externalImage %></legend>\n        <div>\n          <div class="form-group main">\n            <label><%- externalImageText %></label>\n            <input type="text" name="externalImage" />\n          </div>\n        </div>\n      </fieldset>\n      <% } %>\n\n    </div>\x3c!-- / tabs --\x3e\n\n    <div class="common-controls">\n      <div class="form-group title">\n        <label><%- titleText %></label>\n        <input type="text" name="title" />\n      </div>\n      <div class="form-group text">\n        <label><%- altText %></label>\n        <input type="text" name="alt" />\n      </div>\n      <div class="form-group captionFromDescription">\n        <label>\n          <input type="checkbox" name="captionFromDescription" />\n          <%- captionFromDescriptionText %>\n        </label>\n      </div>\n      <div class="form-group caption">\n        <label><%- captionText %></label>\n        <textarea name="caption" />\n      </div>\n      <div class="form-group align">\n        <label><%- imageAlignText %></label>\n        <select name="align">\n          <% _.each(Object.keys(options.imageClasses), function(align){ %>\n              <option value="<%- align %>">\n              <%- options.imageClasses[align] %>\n              </option>\n          <% }); %>\n        <select>\n      </div>\n    </div>\n\n    <input type="submit" class="plone-btn" name="cancel" value="<%- cancelBtn %>" />\n    <input type="submit" class="plone-btn plone-btn-primary context" name="insert" value="<%- insertBtn %>" />\n\n  </div>\n</div>\n'}),function(e){define("select2",[],function(){return function(){var o;void 0===(o=jQuery).fn.each2&&o.extend(o.fn,{each2:function(e){for(var t=o([0]),n=-1,r=this.length;++n<r&&(t.context=t[0]=this[n])&&!1!==e.call(t[0],n,t););return this}}),function(v,y){"use strict";var e,t,n,b,o,s,g,c,r,i,a;function l(e){var t=v(document.createTextNode(""));e.before(t),t.before(e),t.remove()}function u(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return r[e]||e})}function d(e,t){for(var n=0,r=t.length;n<r;n+=1)if(f(e,t[n]))return n;return-1}function f(e,t){return e===t||e!==y&&t!==y&&null!==e&&null!==t&&(e.constructor===String?e+""==t+"":t.constructor===String&&t+""==e+"")}function m(e,t,n){var r,o,i;if(null===e||e.length<1)return[];for(o=0,i=(r=e.split(t)).length;o<i;o+=1)r[o]=n(r[o]);return r}function p(e){return e.outerWidth(!1)-e.width()}function h(t){var n="keyup-change-value";t.on("keydown",function(){v.data(t,n)===y&&v.data(t,n,t.val())}),t.on("keyup",function(){var e=v.data(t,n);e!==y&&t.val()!==e&&(v.removeData(t,n),t.trigger("keyup-change"))})}function w(t,n,r){var o;return r=r||y,function(){var e=arguments;window.clearTimeout(o),o=window.setTimeout(function(){n.apply(r,e)},t)}}function x(e){e.preventDefault(),e.stopPropagation()}function C(e,t,n){var r,o=[],i=v.trim(e.attr("class"));i&&v((i=""+i).split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&o.push(this)}),(i=v.trim(t.attr("class")))&&v((i=""+i).split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(r=n(this))&&o.push(r)}),e.attr("class",o.join(" "))}function k(e,t,n,r){var o=u(e.toUpperCase()).indexOf(u(t.toUpperCase())),t=t.length;o<0?n.push(r(e)):(n.push(r(e.substring(0,o))),n.push("<span class='select2-match'>"),n.push(r(e.substring(o,o+t))),n.push("</span>"),n.push(r(e.substring(o+t,e.length))))}function S(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function T(i){var e,a=null,t=i.quietMillis||100,s=i.url,l=this;return function(o){window.clearTimeout(e),e=window.setTimeout(function(){var e=i.data,t=s,n=i.transport||v.fn.select2.ajaxDefaults.transport,r={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||y,dataType:i.dataType||"json"},r=v.extend({},v.fn.select2.ajaxDefaults.params,r),e=e?e.call(l,o.term,o.page,o.context):null,t="function"==typeof t?t.call(l,o.term,o.page,o.context):t;a&&"function"==typeof a.abort&&a.abort(),i.params&&(v.isFunction(i.params)?v.extend(r,i.params.call(l)):v.extend(r,i.params)),v.extend(r,{url:t,dataType:i.dataType,data:e,success:function(e){e=i.results(e,o.page,o);o.callback(e)},error:function(e,t,n){o.callback({hasError:!0,jqXHR:e,textStatus:t,errorThrown:n})}}),a=n.call(l,r)},t)}}function E(e){var t,n,r=e,s=function(e){return""+e.text},e=(v.isArray(r)&&(r={results:n=r}),!1===v.isFunction(r)&&(n=r,r=function(){return n}),r());return e.text&&(s=e.text,v.isFunction(s)||(t=e.text,s=function(e){return e[t]})),function(o){var i,a=o.term,n={results:[]};""===a?o.callback(r()):(i=function(e,t){var n,r;if((e=e[0]).children){for(r in n={},e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.children=[],v(e.children).each2(function(e,t){i(t,n.children)}),(n.children.length||o.matcher(a,s(n),e))&&t.push(n)}else o.matcher(a,s(e),e)&&t.push(e)},v(r().results).each2(function(e,t){i(t,n.results)}),o.callback(n))}}function N(t){var i=v.isFunction(t);return function(n){var r=n.term,o={results:[]},e=i?t(n):t;v.isArray(e)&&(v(e).each(function(){var e=this.text!==y,t=e?this.text:this;""!==r&&!n.matcher(r,t)||o.results.push(e?this:{id:this,text:this})}),n.callback(o))}}function R(e,t){if(v.isFunction(e))return 1;if(e){if("string"==typeof e)return 1;throw new Error(t+" must be a string, function, or falsy value")}}function _(e,t){var n;return v.isFunction(e)?(n=Array.prototype.slice.call(arguments,2),e.apply(t,n)):e}function A(){var n=this;v.each(arguments,function(e,t){n[t].remove(),n[t]=null})}function D(e,t){function n(){}return((n.prototype=new e).constructor=n).prototype.parent=e.prototype,n.prototype=v.extend(n.prototype,t),n}window.Select2===y&&(s={x:0,y:0},c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which||e){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case c.SHIFT:case c.CTRL:case c.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return 112<=(e=e.which||e)&&e<=123}},r={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"},a=v(document),i=1,b=function(){return i++},e=D(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(e){var i,t,n,r,o=".select2-results",a=(this.opts=e=this.prepareOpts(e),this.id=e.id,e.element.data("select2")!==y&&null!==e.element.data("select2")&&e.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=v(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=v("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(e.element.attr("id")||"autogen"+b()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",e.element.attr("title")),this.body=v(document.body),C(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",e.element.attr("style")),this.container.css(_(e.containerCss,this.opts.element)),this.container.addClass(_(e.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",x),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),C(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(_(e.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",x),this.results=i=this.container.find(o),this.search=t=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",x),this.results.on("mousemove",function(e){var t=s;t!==y&&t.x===e.pageX&&t.y===e.pageY||v(e.target).trigger("mousemove-filtered",e)}),this.dropdown.on("mousemove-filtered",o,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",o,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",o,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",o,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(e){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),a=80,n=this.results,r=w(a,function(e){n.trigger("scroll-debounced",e)}),n.on("scroll",function(e){0<=d(e.target,n.get())&&r(e)}),this.dropdown.on("scroll-debounced",o,this.bind(this.loadMoreIfNeeded)),v(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),v(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),v.fn.mousewheel&&i.mousewheel(function(e,t,n,r){var o=i.scrollTop();0<r&&o-r<=0?(i.scrollTop(0),x(e)):r<0&&i.get(0).scrollHeight-i.scrollTop()+r<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),x(e))}),h(t),t.on("keyup-change input paste",this.bind(this.updateResults)),t.on("focus",function(){t.addClass("select2-focused")}),t.on("blur",function(){t.removeClass("select2-focused")}),this.dropdown.on("mouseup",o,this.bind(function(e){0<v(e.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.lastSearchTerm=y,v.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==e.maximumInputLength&&this.search.attr("maxlength",e.maximumInputLength),e.element.prop("disabled")),o=(this.enable(!(a=a===y?!1:a)),e.element.prop("readonly"));this.readonly(o=o===y?!1:o),g=g||((a=v("<div class='select2-measure-scrollbar'></div>")).appendTo(document.body),o={width:a.width()-a[0].clientWidth,height:a.height()-a[0].clientHeight},a.remove(),o),this.autofocus=e.element.prop("autofocus"),e.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",e.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,t=e.data("select2"),n=this;this.close(),e.length&&e[0].detachEvent&&n._sync&&e.each(function(){n._sync&&this.detachEvent("onpropertychange",n._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,t!==y&&(t.container.remove(),t.liveRegion.remove(),t.dropdown.remove(),e.removeData("select2").off(".select2"),e.is("input[type='hidden']")?e.css("display",""):(e.show().prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())),A.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:f(e.attr("locked"),"locked")||f(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(h){var e,t,n,g=this,a=h.element;if("select"===a.get(0).tagName.toLowerCase()&&(this.select=e=h.element),e&&v.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in h)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),h.debug=h.debug||v.fn.select2.defaults.debug,h.debug&&console&&console.warn&&(null!=h.id&&console.warn("Select2: The `id` option has been removed in Select2 4.0.0, consider renaming your `id` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=h.text&&console.warn("Select2: The `text` option has been removed in Select2 4.0.0, consider renaming your `text` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=h.sortResults&&console.warn("Select2: the `sortResults` option has been renamed to `sorter` in Select2 4.0.0. "),null!=h.selectOnBlur&&console.warn("Select2: The `selectOnBlur` option has been renamed to `selectOnClose` in Select2 4.0.0."),null!=h.ajax&&null!=h.ajax.results&&console.warn("Select2: The `ajax.results` option has been renamed to `ajax.processResults` in Select2 4.0.0."),null!=h.formatNoResults&&console.warn("Select2: The `formatNoResults` option has been renamed to `language.noResults` in Select2 4.0.0."),null!=h.formatSearching&&console.warn("Select2: The `formatSearching` option has been renamed to `language.searching` in Select2 4.0.0."),null!=h.formatInputTooShort&&console.warn("Select2: The `formatInputTooShort` option has been renamed to `language.inputTooShort` in Select2 4.0.0."),null!=h.formatInputTooLong&&console.warn("Select2: The `formatInputTooLong` option has been renamed to `language.inputTooLong` in Select2 4.0.0."),null!=h.formatLoading&&console.warn("Select2: The `formatLoading` option has been renamed to `language.loadingMore` in Select2 4.0.0."),null!=h.formatSelectionTooBig&&console.warn("Select2: The `formatSelectionTooBig` option has been renamed to `language.maximumSelected` in Select2 4.0.0."),h.element.data("select2Tags"))&&console.warn("Select2: The `data-select2-tags` attribute has been renamed to `data-tags` in Select2 4.0.0."),null!=h.element.data("tags")&&(n=h.element.data("tags"),v.isArray(n)||(n=[]),h.element.data("select2Tags",n)),null!=h.sorter&&(h.sortResults=h.sorter),null!=h.selectOnClose&&(h.selectOnBlur=h.selectOnClose),null!=h.ajax&&v.isFunction(h.ajax.processResults)&&(h.ajax.results=h.ajax.processResults),null!=h.language&&(n=h.language,v.isFunction(n.noMatches)&&(h.formatNoMatches=n.noMatches),v.isFunction(n.searching)&&(h.formatSearching=n.searching),v.isFunction(n.inputTooShort)&&(h.formatInputTooShort=n.inputTooShort),v.isFunction(n.inputTooLong)&&(h.formatInputTooLong=n.inputTooLong),v.isFunction(n.loadingMore)&&(h.formatLoading=n.loadingMore),v.isFunction(n.maximumSelected))&&(h.formatSelectionTooBig=n.maximumSelected),"function"!=typeof(h=v.extend({},{populateResults:function(e,t,d){var f=this.opts.id,m=this.liveRegion,p=function(e,t,n){for(var r,o,i,a,s,l=[],c=0,u=(e=h.sortResults(e,t,d)).length;c<u;c+=1)a=!(s=!0===(r=e[c]).disabled)&&f(r)!==y,o=r.children&&0<r.children.length,(i=v("<li></li>")).addClass("select2-results-dept-"+n),i.addClass("select2-result"),i.addClass(a?"select2-result-selectable":"select2-result-unselectable"),s&&i.addClass("select2-disabled"),o&&i.addClass("select2-result-with-children"),i.addClass(g.opts.formatResultCssClass(r)),i.attr("role","presentation"),(a=v(document.createElement("div"))).addClass("select2-result-label"),a.attr("id","select2-result-label-"+b()),a.attr("role","option"),(s=h.formatResult(r,a,d,g.opts.escapeMarkup))!==y&&(a.html(s),i.append(a)),o&&((s=v("<ul></ul>")).addClass("select2-result-sub"),p(r.children,s,n+1),i.append(s)),i.data("select2-data",r),l.push(i[0]);t.append(l),m.text(h.formatMatches(e.length))};p(t,e,0)}},v.fn.select2.defaults,h)).id&&(t=h.id,h.id=function(e){return e[t]}),v.isArray(h.element.data("select2Tags"))){if("tags"in h)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+h.element.attr("id");h.tags=h.element.data("select2Tags")}if(e?(h.query=this.bind(function(r){var e,n={results:[],more:!1},o=r.term,i=function(e,t){var n;e.is("option")?r.matcher(o,e.text(),e)&&t.push(g.optionToData(e)):e.is("optgroup")&&(n=g.optionToData(e),e.children().each2(function(e,t){i(t,n.children)}),0<n.children.length)&&t.push(n)},t=a.children();(t=this.getPlaceholder()!==y&&0<t.length&&(e=this.getPlaceholderOption())?t.not(e):t).each2(function(e,t){i(t,n.results)}),r.callback(n)}),h.id=function(e){return e.id}):"query"in h||("ajax"in h?((n=h.element.data("ajax-url"))&&0<n.length&&(h.ajax.url=n),h.query=T.call(h.element,h.ajax)):"data"in h?h.query=E(h.data):"tags"in h&&(h.query=N(h.tags),h.createSearchChoice===y&&(h.createSearchChoice=function(e){return{id:v.trim(e),text:v.trim(e)}}),h.initSelection===y)&&(h.initSelection=function(e,t){var n=[];v(m(e.val(),h.separator,h.transformVal)).each(function(){var e={id:this,text:this},t=h.tags;v.isFunction(t)&&(t=t()),v(t).each(function(){if(f(this.id,e.id))return e=this,!1}),n.push(e)}),t(n)})),"function"!=typeof h.query)throw"query function not defined for Select2 "+h.element.attr("id");if("top"===h.createSearchChoicePosition)h.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===h.createSearchChoicePosition)h.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof h.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return h},monitorSource:function(){var e,t=this.opts.element,n=this;t.on("change.select2",this.bind(function(e){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),this._sync=this.bind(function(){var e=t.prop("disabled"),e=(this.enable(!(e=e===y?!1:e)),t.prop("readonly"));this.readonly(e=e===y?!1:e),this.container&&(C(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(_(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(C(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(_(this.opts.dropdownCssClass,this.opts.element)))}),t.length&&t[0].attachEvent&&t.each(function(){this.attachEvent("onpropertychange",n._sync)}),(e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==y&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new e(function(e){v.each(e,n._sync)}),this.propertyObserver.observe(t.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){e=v.Event("select2-selecting",{val:this.id(e),object:e,choice:e});return this.opts.element.trigger(e),!e.isDefaultPrevented()},triggerChange:function(e){e=v.extend({},e=e||{},{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",!e),this.close(),this.enabledInterface=e,!0)},enable:function(e){this._enabled!==(e=e===y||e)&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){this._readonly!==(e=e!==y&&e)&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,t,n=this.dropdown,r=this.container,o=r.offset(),i=r.outerHeight(!1),a=r.outerWidth(!1),s=n.outerHeight(!1),l=v(window),c=l.width(),u=l.height(),d=l.scrollLeft()+c,u=l.scrollTop()+u,f=o.top+i,m=o.left,u=f+s<=u,p=o.top-s>=l.scrollTop(),h=n.outerWidth(!1);n.hasClass("select2-drop-above")?(e=!0,!p&&u&&(e=!(t=!0))):(e=!1,!u&&p&&(e=t=!0)),t&&(n.hide(),o=this.container.offset(),i=this.container.outerHeight(!1),a=this.container.outerWidth(!1),s=n.outerHeight(!1),d=l.scrollLeft()+c,l.scrollTop(),f=o.top+i,m=o.left,h=n.outerWidth(!1),n.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(u=v(".select2-results",n)[0],n.addClass("select2-drop-auto-width"),n.css("width",""),a<(h=n.outerWidth(!1)+(u.scrollHeight===u.clientHeight?0:g.width))?a=h:h=a,s=n.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(f-=(p=this.body.offset()).top,m-=p.left),t={left:m=!(m+h<=d)&&o.left+d+r.outerWidth(!1)>h?o.left+this.container.outerWidth(!1)-h:m,width:a},e?(this.container.addClass("select2-drop-above"),n.addClass("select2-drop-above"),s=n.outerHeight(!1),t.top=o.top-s,t.bottom="auto"):(t.top=f,t.bottom="auto",this.container.removeClass("select2-drop-above"),n.removeClass("select2-drop-above")),t=v.extend(t,_(this.opts.dropdownCss,this.opts.element)),n.css(t)},shouldOpen:function(){var e;return!this.opened()&&!1!==this._enabled&&!0!==this._readonly&&(e=v.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),a.on("mousemove.select2Event",function(e){s.x=e.pageX,s.y=e.pageY}),!0)},opening:function(){var n,e=this.containerEventName,t="scroll."+e,r="resize."+e,o="orientationchange."+e,i=(this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0===(n=v("#select2-drop-mask")).length&&((n=v(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),n.hide(),n.appendTo(this.body),n.on("mousedown touchstart click",function(e){l(n);var t=v("#select2-drop");0<t.length&&((t=t.data("select2")).opts.selectOnBlur&&t.selectHighlighted({noFocus:!0}),t.close(),e.preventDefault(),e.stopPropagation())})),this.dropdown.prev()[0]!==n[0]&&this.dropdown.before(n),v("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),n.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this);this.container.parents().add(window).each(function(){v(this).on(r+" "+t+" "+o,function(e){i.opened()&&i.positionDropdown()})})},close:function(){var e,t,n,r;this.opened()&&(e=this.containerEventName,t="scroll."+e,n="resize."+e,r="orientationchange."+e,this.container.parents().add(window).each(function(){v(this).off(t).off(n).off(r)}),this.clearDropdownAlignmentPreference(),v("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),a.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.search.removeAttr("aria-activedescendant"),this.opts.element.trigger(v.Event("select2-close")))},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},prefillNextSearchTerm:function(){var e;return""===this.search.val()&&(e=this.opts.nextSearchTerm(this.data(),this.lastSearchTerm))!==y&&(this.search.val(e),this.search.select(),!0)},getMaximumSelectionSize:function(){return _(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var e,t,n,r,o=this.results,i=this.highlight();i<0||(0==i?o.scrollTop(0):(n=this.findHighlightableChoices().find(".select2-result-label"),t=(r=((e=v(n[i])).offset()||{}).top||0)+e.outerHeight(!0),i===n.length-1&&0<(i=o.find("li.select2-more-results")).length&&(t=i.offset().top+i.outerHeight(!0)),(n=o.offset().top+o.outerHeight(!1))<t&&o.scrollTop(o.scrollTop()+(t-n)),(i=r-o.offset().top)<0&&"none"!=e.css("display")&&o.scrollTop(o.scrollTop()+i)))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(e){for(var t=this.findHighlightableChoices(),n=this.highlight();-1<n&&n<t.length;){var r=v(t[n+=e]);if(r.hasClass("select2-result-selectable")&&!r.hasClass("select2-disabled")&&!r.hasClass("select2-selected")){this.highlight(n);break}}},highlight:function(e){var t=this.findHighlightableChoices();if(0===arguments.length)return d(t.filter(".select2-highlighted")[0],t.get());(e=e>=t.length?t.length-1:e)<0&&(e=0),this.removeHighlight(),(t=v(t[e])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",t.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(t.text()),(e=t.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(e),choice:e})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var t,e=v(e.target).closest(".select2-result-selectable");0<e.length&&!e.is(".select2-highlighted")?(t=this.findHighlightableChoices(),this.highlight(t.index(e))):0==e.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t=this.results,n=t.find("li.select2-more-results"),r=this.resultsPage+1,o=this,i=this.search.val(),a=this.context;0!==n.length&&n.offset().top-t.offset().top-t.height()<=this.opts.loadMorePadding&&(n.addClass("select2-active"),this.opts.query({element:this.opts.element,term:i,page:r,context:a,matcher:this.opts.matcher,callback:this.bind(function(e){o.opened()&&(o.opts.populateResults.call(this,t,e.results,{term:i,page:r,context:a}),o.postprocessResults(e,!1,!1),!0===e.more?(n.detach().appendTo(t).html(o.opts.escapeMarkup(_(o.opts.formatLoadMore,o.opts.element,r+1))),window.setTimeout(function(){o.loadMoreIfNeeded()},10)):n.remove(),o.positionDropdown(),o.resultsPage=r,o.context=e.context,this.opts.element.trigger({type:"select2-loaded",items:e}))})}))},tokenize:function(){},updateResults:function(n){var r,o=this.search,i=this.results,a=this.opts,s=this,e=o.val(),t=v.data(this.container,"select2-last-term");function l(){o.removeClass("select2-active"),s.positionDropdown(),i.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?s.liveRegion.text(i.text()):s.liveRegion.text(s.opts.formatMatches(i.find('.select2-result-selectable:not(".select2-selected")').length))}function c(e){i.html(e),l()}!0!==n&&t&&f(e,t)||(v.data(this.container,"select2-last-term",e),(!0===n||!1!==this.showSearchInput&&this.opened())&&(r=++this.queryCount,1<=(t=this.getMaximumSelectionSize())&&(e=this.data(),v.isArray(e))&&e.length>=t&&R(a.formatSelectionTooBig,"formatSelectionTooBig")?c("<li class='select2-selection-limit'>"+_(a.formatSelectionTooBig,a.element,t)+"</li>"):o.val().length<a.minimumInputLength?(R(a.formatInputTooShort,"formatInputTooShort")?c("<li class='select2-no-results'>"+_(a.formatInputTooShort,a.element,o.val(),a.minimumInputLength)+"</li>"):c(""),n&&this.showSearch&&this.showSearch(!0)):a.maximumInputLength&&o.val().length>a.maximumInputLength?R(a.formatInputTooLong,"formatInputTooLong")?c("<li class='select2-no-results'>"+_(a.formatInputTooLong,a.element,o.val(),a.maximumInputLength)+"</li>"):c(""):(a.formatSearching&&0===this.findHighlightableChoices().length&&c("<li class='select2-searching'>"+_(a.formatSearching,a.element)+"</li>"),o.addClass("select2-active"),this.removeHighlight(),(e=this.tokenize())!=y&&null!=e&&o.val(e),this.resultsPage=1,a.query({element:a.element,term:o.val(),page:this.resultsPage,context:null,matcher:a.matcher,callback:this.bind(function(e){var t;r==this.queryCount&&(this.opened()?e.hasError!==y&&R(a.formatAjaxError,"formatAjaxError")?c("<li class='select2-ajax-error'>"+_(a.formatAjaxError,a.element,e.jqXHR,e.textStatus,e.errorThrown)+"</li>"):(this.context=e.context===y?null:e.context,this.opts.createSearchChoice&&""!==o.val()&&(t=this.opts.createSearchChoice.call(s,o.val(),e.results))!==y&&null!==t&&s.id(t)!==y&&null!==s.id(t)&&0===v(e.results).filter(function(){return f(s.id(this),s.id(t))}).length&&this.opts.createSearchChoicePosition(e.results,t),0===e.results.length&&R(a.formatNoMatches,"formatNoMatches")?(c("<li class='select2-no-results'>"+_(a.formatNoMatches,a.element,o.val())+"</li>"),this.showSearch&&this.showSearch(o.val())):(i.empty(),s.opts.populateResults.call(this,i,e.results,{term:o.val(),page:this.resultsPage,context:null}),!0===e.more&&R(a.formatLoadMore,"formatLoadMore")&&(i.append("<li class='select2-more-results'>"+a.escapeMarkup(_(a.formatLoadMore,a.element,this.resultsPage))+"</li>"),window.setTimeout(function(){s.loadMoreIfNeeded()},10)),this.postprocessResults(e,n),l(),this.opts.element.trigger({type:"select2-loaded",items:e}))):this.search.removeClass("select2-active"))})}))))},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var n;(n=this.search)[0]!==document.activeElement&&window.setTimeout(function(){var e=n[0],t=n.val().length;n.focus(),(0<e.offsetWidth||0<e.offsetHeight)&&e===document.activeElement&&(e.setSelectionRange?e.setSelectionRange(t,t):e.createTextRange&&((t=e.createTextRange()).collapse(!1),t.select()))},0)},selectHighlighted:function(e){var t,n;this._touchMoved?this.clearTouchMoved():(t=this.highlight(),(n=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data"))?(this.highlight(t),this.onSelect(n,e)):e&&e.noFocus&&this.close())},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==y?e.text():y)},getPlaceholderOption:function(){var e;if(this.select)return e=this.select.children("option").first(),this.opts.placeholderOption!==y?"first"===this.opts.placeholderOption&&e||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select):""===v.trim(e.text())&&""===e.val()?e:void 0},initContainerWidth:function(){var e=function(){var e,t,n,r,o;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"!==this.opts.width&&"resolve"!==this.opts.width)return v.isFunction(this.opts.width)?this.opts.width():this.opts.width;if("string"==typeof(e=this.opts.element.attr("style")))for(r=0,o=(t=e.split(";")).length;r<o;r+=1)if(null!==(n=t[r].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&1<=n.length)return n[1];return"resolve"===this.opts.width?0<(e=this.opts.element.css("width")).indexOf("%")?e:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}.call(this);null!==e&&this.container.css("width",e)}}),t=D(e,{createContainer:function(){return v(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var e,t;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(e=this.search.get(0)).createTextRange?((t=e.createTextRange()).collapse(!1),t.select()):e.setSelectionRange&&(t=this.search.val().length,e.setSelectionRange(t,t))),this.prefillNextSearchTerm(),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(v.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this))&&this.focusser.focus()},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){v("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),A.call(this,"selection","focusser")},initContainer:function(){var t,e=this.container,n=this.dropdown,r=b(),r=(this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=e.find(".select2-choice"),this.focusser=e.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+r),this.focusser.attr("aria-labelledby","select2-chosen-"+r),this.results.attr("id","select2-results-"+r),this.search.attr("aria-owns","select2-results-"+r),this.focusser.attr("id","s2id_autogen"+r),e=v("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.focusser.prev().text(e.text()).attr("for",this.focusser.attr("id")),this.opts.element.attr("title"));this.opts.element.attr("title",r||e.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(v("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode)if(e.which===c.PAGE_UP||e.which===c.PAGE_DOWN)x(e);else switch(e.which){case c.UP:case c.DOWN:return this.moveHighlight(e.which===c.UP?-1:1),void x(e);case c.ENTER:return this.selectHighlighted(),void x(e);case c.TAB:return void this.selectHighlighted({noFocus:!0});case c.ESC:return this.cancel(e),void x(e)}})),this.search.on("blur",this.bind(function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.results&&1<this.results.length&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==c.TAB&&!c.isControl(e)&&!c.isFunctionKey(e)&&e.which!==c.ESC){if(!1!==this.opts.openOnEnter||e.which!==c.ENTER)return e.which==c.DOWN||e.which==c.UP||e.which==c.ENTER&&this.opts.openOnEnter?e.altKey||e.ctrlKey||e.shiftKey||e.metaKey?void 0:(this.open(),void x(e)):void(e.which!=c.DELETE&&e.which!=c.BACKSPACE||(this.opts.allowClear&&this.clear(),x(e)));x(e)}})),h(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){0<=this.opts.minimumResultsForSearch&&(e.stopPropagation(),this.opened()||this.open())})),t.on("mousedown touchstart","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),(e=e).preventDefault(),e.stopImmediatePropagation(),this.close(),this.selection)&&this.selection.focus()})),t.on("mousedown touchstart",this.bind(function(e){l(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(v.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),x(e)})),n.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),t.on("focus",this.bind(function(e){x(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(v.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(v.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(v.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(e){var t,n=this.selection.data("select2-data");n&&(t=v.Event("select2-clearing"),this.opts.element.trigger(t),t.isDefaultPrevented()||(t=this.getPlaceholderOption(),this.opts.element.val(t?t.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==e&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))))},initSelection:function(){var t;this.isPlaceholderOptionSelected()?(this.updateSelection(null),this.close(),this.setPlaceholder()):(t=this).opts.initSelection.call(null,this.opts.element,function(e){e!==y&&null!==e&&(t.updateSelection(e),t.close(),t.setPlaceholder(),t.lastSearchTerm=t.search.val())})},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()!==y&&((e=this.getPlaceholderOption())!==y&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===y||null===this.opts.element.val())},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(e,t){e=e.find("option").filter(function(){return this.selected&&!this.disabled});t(n.optionToData(e))}:"data"in a&&(a.initSelection=a.initSelection||function(e,t){var o=e.val(),i=null;a.query({matcher:function(e,t,n){var r=f(o,a.id(n));return r&&(i=n),r},callback:v.isFunction(t)?function(){t(i)}:v.noop})}),a},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===y?y:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();!this.isPlaceholderOptionSelected()||e===y||this.select&&this.getPlaceholderOption()===y||(this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear"))},postprocessResults:function(e,t,n){var r=0,o=this;this.findHighlightableChoices().each2(function(e,t){if(f(o.id(t.data("select2-data")),o.opts.element.val()))return r=e,!1}),!1!==n&&(!0===t&&0<=r?this.highlight(r):this.highlight(0)),!0===t&&0<=(n=this.opts.minimumResultsForSearch)&&this.showSearch(function n(e){var r=0;return v.each(e,function(e,t){t.children?r+=n(t.children):r++}),r}(e.results)>=n)},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),v(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(e,t){var n,r;this.triggerSelect(e)&&(n=this.opts.element.val(),r=this.data(),this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.lastSearchTerm=this.search.val(),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),f(n,this.id(e))||this.triggerChange({added:e,removed:r}))},updateSelection:function(e){var t,n=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),n.empty(),(t=null!==e?this.opts.formatSelection(e,n,this.opts.escapeMarkup):t)!==y&&n.append(t),(t=this.opts.formatSelectionCssClass(e,n))!==y&&n.addClass(t),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==y&&this.container.addClass("select2-allowclear")},val:function(){var e,t=!1,n=null,r=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],1<arguments.length&&(t=arguments[1],this.opts.debug)&&console&&console.warn&&console.warn('Select2: The second option to `select2("val")` is not supported in Select2 4.0.0. The `change` event will always be triggered in 4.0.0.'),this.select)this.opts.debug&&console&&console.warn&&console.warn('Select2: Setting the value on a <select> using `select2("val")` is no longer supported in 4.0.0. You can use the `.val(newValue).trigger("change")` method provided by jQuery instead.'),this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return n=r.optionToData(t),!1}),this.updateSelection(n),this.setPlaceholder(),t&&this.triggerChange({added:n,removed:o});else if(e||0===e){if(this.opts.initSelection===y)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){r.opts.element.val(e?r.id(e):""),r.updateSelection(e),r.setPlaceholder(),t&&r.triggerChange({added:e,removed:o})})}else this.clear(t)},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var t,n=!1;if(0===arguments.length)return t=(t=this.selection.data("select2-data"))==y?null:t;this.opts.debug&&console&&console.warn&&console.warn('Select2: The `select2("data")` method can no longer set selected values in 4.0.0, consider using the `.val()` method instead.'),1<arguments.length&&(n=arguments[1]),e?(t=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),n&&this.triggerChange({added:e,removed:t})):this.clear(n)}}),n=D(e,{createContainer:function(){return v(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var l=this.parent.prepareOpts.apply(this,arguments),r=this;return"select"===l.element.get(0).tagName.toLowerCase()?l.initSelection=function(e,t){var n=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){n.push(r.optionToData(t))}),t(n)}:"data"in l&&(l.initSelection=l.initSelection||function(e,i){var a=m(e.val(),l.separator,l.transformVal),s=[];l.query({matcher:function(e,t,n){var r=v.grep(a,function(e){return f(e,l.id(n))}).length;return r&&s.push(n),r},callback:v.isFunction(i)?function(){for(var e=[],t=0;t<a.length;t++)for(var n=a[t],r=0;r<s.length;r++){var o=s[r];if(f(n,l.id(o))){e.push(o),s.splice(r,1);break}}i(e)}:v.noop})}),l},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){v("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),A.call(this,"searchContainer","selection")},initContainer:function(){var l,e=".select2-choices",t=(this.searchContainer=this.container.find(".select2-search-field"),this.selection=l=this.container.find(e),this);this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(e){t.search[0].focus(),t.selectChoice(v(this))}),this.search.attr("id","s2id_autogen"+b()),this.search.prev().text(v("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||!this.isInterfaceEnabled()||this.opened()||this.open()})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var t,n,r,o=l.find(".select2-search-choice-focus"),i=o.prev(".select2-search-choice:not(.select2-locked)"),a=o.next(".select2-search-choice:not(.select2-locked)"),s=(s=this.search,n=t=0,"selectionStart"in(s=v(s)[0])?(t=s.selectionStart,n=s.selectionEnd-t):"selection"in document&&(s.focus(),r=document.selection.createRange(),n=document.selection.createRange().text.length,r.moveStart("character",-s.value.length),t=r.text.length-n),{offset:t,length:n});if(!o.length||e.which!=c.LEFT&&e.which!=c.RIGHT&&e.which!=c.BACKSPACE&&e.which!=c.DELETE&&e.which!=c.ENTER)if((e.which!==c.BACKSPACE||1!=this.keydowns)&&e.which!=c.LEFT||0!=s.offset||s.length){if(this.selectChoice(null),this.opened())switch(e.which){case c.UP:case c.DOWN:return this.moveHighlight(e.which===c.UP?-1:1),void x(e);case c.ENTER:return this.selectHighlighted(),void x(e);case c.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case c.ESC:return this.cancel(e),void x(e)}if(e.which!==c.TAB&&!c.isControl(e)&&!c.isFunctionKey(e)&&e.which!==c.BACKSPACE&&e.which!==c.ESC){if(e.which===c.ENTER){if(!1===this.opts.openOnEnter)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),e.which!==c.PAGE_UP&&e.which!==c.PAGE_DOWN||x(e),e.which===c.ENTER&&x(e)}}else this.selectChoice(l.find(".select2-search-choice:not(.select2-locked)").last()),x(e);else r=o,e.which==c.LEFT&&i.length?r=i:e.which==c.RIGHT?r=a.length?a:null:e.which===c.BACKSPACE?this.unselect(o.first())&&(this.search.width(10),r=i.length?i:a):e.which==c.DELETE?this.unselect(o.first())&&(this.search.width(10),r=a.length?a:null):e.which==c.ENTER&&(r=null),this.selectChoice(r),x(e),r&&r.length||this.open()}})),this.search.on("keyup",this.bind(function(e){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(v.Event("select2-blur"))})),this.container.on("click",e,this.bind(function(e){!this.isInterfaceEnabled()||0<v(e.target).closest(".select2-search-choice").length||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(v.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault())})),this.container.on("focus",e,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(v.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){var t;""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),!this.select&&""===this.opts.element.val()||(t=this).opts.initSelection.call(null,this.opts.element,function(e){e!==y&&null!==e&&(t.updateSelection(e),t.close(),t.clearSearch())})},clearSearch:function(){var e=this.getPlaceholder(),t=this.getMaxSearchWidth();e!==y&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(0<t?t:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.prefillNextSearchTerm(),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(v.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var t={},n=[],r=this;v(e).each(function(){r.id(this)in t||(t[r.id(this)]=0,n.push(this))}),this.selection.find(".select2-search-choice").remove(),this.addSelectedChoice(n),r.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=y&&(this.search.val(e),0<e.length)&&this.open()},onSelect:function(e,t){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.lastSearchTerm=this.search.val(),this.clearSearch(),this.updateResults(),!this.select&&this.opts.closeOnSelect||this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),!this.opts.closeOnSelect&&0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.prefillNextSearchTerm()&&this.updateResults(),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(e){var t=this.getVal(),n=this;v(e).each(function(){t.push(n.createChoice(this))}),this.setVal(t)},createChoice:function(e){var t=!e.locked,n=v("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),r=v("<li class='select2-search-choice select2-locked'><div></div></li>"),n=t?n:r,r=this.id(e),o=this.opts.formatSelection(e,n.find("div"),this.opts.escapeMarkup);return o!=y&&n.find("div").replaceWith(v("<div></div>").html(o)),(o=this.opts.formatSelectionCssClass(e,n.find("div")))!=y&&n.addClass(o),t&&n.find(".select2-search-choice-close").on("mousedown",x).on("click dblclick",this.bind(function(e){this.isInterfaceEnabled()&&(this.unselect(v(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),x(e),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),n.data("select2-data",e),n.insertBefore(this.searchContainer),r},unselect:function(e){var t,n,r=this.getVal();if(0===(e=e.closest(".select2-search-choice")).length)throw"Invalid argument: "+e+". Must be .select2-search-choice";if(t=e.data("select2-data")){var o=v.Event("select2-removing");if(o.val=this.id(t),o.choice=t,this.opts.element.trigger(o),o.isDefaultPrevented())return!1;for(;0<=(n=d(this.id(t),r));)r.splice(n,1),this.setVal(r),this.select&&this.postprocessResults();return e.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}),!0}},postprocessResults:function(e,t,n){var r=this.getVal(),o=this.results.find(".select2-result"),i=this.results.find(".select2-result-with-children"),a=this;o.each2(function(e,t){0<=d(a.id(t.data("select2-data")),r)&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),i.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&!1!==n&&!0===this.opts.closeOnSelect&&a.highlight(0),!this.opts.createSearchChoice&&0<!o.filter(".select2-result:not(.select2-selected)").length&&(e&&(e.more||0!==this.results.find(".select2-no-results").length)||R(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+_(a.opts.formatNoMatches,a.opts.element,a.search.val())+"</li>"))},getMaxSearchWidth:function(){return this.selection.width()-p(this.search)},resizeSearch:function(){var e,t,n,r=p(this.search);t=this.search,o||(n=t[0].currentStyle||window.getComputedStyle(t[0],null),(o=v(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),v(document.body).append(o)),o.text(t.val()),n=o.width()+10,t=this.search.offset().left,(t=(t=(t=(e=this.selection.width())-(t-this.selection.offset().left)-r)<n?e-r:t)<40?e-r:t)<=0&&(t=n),this.search.width(Math.floor(t))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:m(e=this.opts.element.val(),this.opts.separator,this.opts.transformVal)},setVal:function(e){var t,n;this.select?this.select.val(e):(t=[],n={},v(e).each(function(){this in n||(t.push(this),n[this]=0)}),this.opts.element.val(0===t.length?"":t.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),n=0;n<t.length;n++)for(var r=0;r<e.length;r++)if(f(this.opts.id(t[n]),this.opts.id(e[r]))){t.splice(n,1),n--,e.splice(r,1);break}return{added:t,removed:e}},val:function(e,n){var r,o=this;if(0===arguments.length)return this.getVal();if((r=this.data()).length||(r=[]),e||0===e){if(this.setVal(e),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),n&&this.triggerChange(this.buildChangeDetails(r,this.data()));else{if(this.opts.initSelection===y)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var t=v.map(e,o.id);o.setVal(t),o.updateSelection(e),o.clearSearch(),n&&o.triggerChange(o.buildChangeDetails(r,o.data()))})}this.clearSearch()}else this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),n&&this.triggerChange({added:this.data(),removed:r})},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],t=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(t.opts.id(v(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e,t){var n,r,o=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map(function(){return v(this).data("select2-data")}).get();r=this.data(),n=v.map(e=e||[],function(e){return o.opts.id(e)}),this.setVal(n),this.updateSelection(e),this.clearSearch(),t&&this.triggerChange(this.buildChangeDetails(r,this.data()))}}),v.fn.select2=function(){var e,t,n,r,o=Array.prototype.slice.call(arguments,0),i=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],a=["opened","isFocused","container","dropdown"],s=["val","data"],l={search:"externalSearch"};return this.each(function(){if(0===o.length||"object"==typeof o[0])(t=0===o.length?{}:v.extend({},o[0])).element=v(this),"select"===t.element.get(0).tagName.toLowerCase()?r=t.element.prop("multiple"):(r=t.multiple||!1,"tags"in t&&(t.multiple=r=!0)),(e=new(r?window.Select2.class.multi:window.Select2.class.single)).init(t);else{if("string"!=typeof o[0])throw"Invalid arguments to select2 plugin: "+o;if(d(o[0],i)<0)throw"Unknown method: "+o[0];if(n=y,(e=v(this).data("select2"))!==y)return t=o[0],n="container"===t?e.container:"dropdown"===t?e.dropdown:e[t=l[t]?l[t]:t].apply(e,o.slice(1)),!(0<=d(o[0],a)||0<=d(o[0],s)&&1==o.length)&&void 0}}),n===y?this:n},v.fn.select2.defaults={debug:!1,width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,r){var o=[];return k(this.text(e),n.term,o,r),o.join("")},transformVal:function(e){return v.trim(e)},formatSelection:function(e,t,n){return e?n(this.text(e)):y},sortResults:function(e,t,n){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,t){return y},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==y?null:e.id},text:function(e){return e&&this.data&&this.data.text?v.isFunction(this.data.text)?this.data.text(e):e[this.data.text]:e.text},matcher:function(e,t){return 0<=u(""+t).toUpperCase().indexOf(u(""+e).toUpperCase())},separator:",",tokenSeparators:[],tokenizer:function(e,t,n,r){var o,i,a,s,l,c=e,u=!1;if(!r.createSearchChoice||!r.tokenSeparators||r.tokenSeparators.length<1)return y;for(;;){for(i=-1,a=0,s=r.tokenSeparators.length;a<s&&(l=r.tokenSeparators[a],!(0<=(i=e.indexOf(l))));a++);if(i<0)break;if(o=e.substring(0,i),e=e.substring(i+l.length),0<o.length&&(o=r.createSearchChoice.call(this,o,t))!==y&&null!==o&&r.id(o)!==y&&null!==r.id(o)){for(u=!1,a=0,s=t.length;a<s;a++)if(f(r.id(o),r.id(t[a]))){u=!0;break}u||n(o)}}return c!==e?e:void 0},escapeMarkup:S,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,t){return y},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){return!(("ontouchstart"in window||0<navigator.msMaxTouchPoints)&&e.opts.minimumResultsForSearch<0)}},v.fn.select2.locales=[],v.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(e,t,n){return"Loading failed"},formatInputTooShort:function(e,t){t-=e.length;return"Please enter "+t+" or more character"+(1==t?"":"s")},formatInputTooLong:function(e,t){e=e.length-t;return"Please delete "+e+" character"+(1==e?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results…"},formatSearching:function(){return"Searching…"}},v.extend(v.fn.select2.defaults,v.fn.select2.locales.en),v.fn.select2.ajaxDefaults={transport:v.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:T,local:E,tags:N},util:{debounce:w,markMatch:k,escapeMarkup:S,stripDiacritics:u},class:{abstract:e,single:t,multi:n}})}(jQuery)}.apply(e,arguments)})}(this),define("mockup-patterns-select2",["jquery","pat-base","mockup-utils","select2","jquery.event.drag","jquery.event.drop"],function(s,e,l){"use strict";return e.extend({name:"select2",trigger:".pat-select2",parser:"mockup",defaults:{separator:","},initializeValues:function(){var o=this;o.options.initialValues&&(o.options.id=function(e){return e.id},o.options.initSelection=function(e,t){var n=[],e=e.val(),r=o.options.initialValues;"string"==typeof o.options.initialValues&&""!==o.options.initialValues&&("{"===o.options.initialValues[0]?r=JSON.parse(o.options.initialValues):(r={},s(o.options.initialValues.split(o.options.separator)).each(function(){var e=this.split(":"),t=s.trim(e[0]),e=s.trim(e[1]);r[t]=e}))),s(e.split(o.options.separator)).each(function(){var e=this;r[this]&&(e=r[this]),n.push({id:l.removeHTML(this),text:l.removeHTML(e)})}),t(n)})},initializeTags:function(){var e=this;e.options.tags&&"string"==typeof e.options.tags&&("["===e.options.tags.substr(0,1)?e.options.tags=JSON.parse(e.options.tags):e.options.tags=e.options.tags.split(e.options.separator)),e.options.tags&&!e.options.allowNewItems&&(e.options.data=s.map(e.options.tags,function(e,t){return{id:e,text:e}}),e.options.multiple=!0,delete e.options.tags)},initializeOrdering:function(){var n,r=this;r.options.orderable&&(n=function(e,t){return e?e.text:void 0},r.options.formatSelection&&(n=r.options.formatSelection),r.options.formatSelection=function(e,t){return t.parents("li").drag("start",function(e,t){return s(this).addClass("select2-choice-dragging"),r.$el.select2("onSortStart"),s.drop({tolerance:function(e,t,n){var r=e.pageY>n.top+n.height/2;return s.data(n.elem,"drop+reorder",r?"insertAfter":"insertBefore"),this.contains(n,[e.pageX,e.pageY])}}),s(this).clone().addClass("dragging").css({opacity:.75,position:"absolute"}).appendTo(document.body)}).drag(function(e,t){s(t.proxy).css({top:t.offsetY,left:t.offsetX});var n=t.drop[0],r=s.data(n||{},"drop+reorder");!n||n==t.current&&r==t.method||(s(this)[r](n),t.current=n,t.method=r,t.update())}).drag("end",function(e,t){s(this).removeClass("select2-choice-dragging"),r.$el.select2("onSortEnd"),s(t.proxy).remove()}).drop("init",function(e,t){return this!=t.drag}),n(e,t)})},initializeSelect2:function(){var n=this;function t(e,t){e&&(n.options.debug&&console.debug("callback",e,t),(e="string"==typeof e?window[e]:e)(t))}n.options.formatResultCssClass=function(e){if(e.id)return"select2-option-"+e.id.toLowerCase().replace(/[ \:\)\(\[\]\{\}\_\+\=\&\*\%\#]/g,"-")},n.$el.select2(n.options),n.$el.on("select2-selected",function(e){t(n.options.onSelected,e)}),n.$el.on("select2-selecting",function(e){t(n.options.onSelecting,e)}),n.$el.on("select2-deselecting",function(e){t(n.options.onDeselecting,e)}),n.$el.on("select2-deselected",function(e){t(n.options.onDeselected,e)}),n.$select2=n.$el.parent().find(".select2-container"),n.$el.parent().off("close.plone-modal.patterns"),n.options.orderable&&n.$select2.addClass("select2-orderable")},opened:function(){return 1===s(".select2-dropdown-open",this.$el.parent()).length},init:function(){var i,e,t,n,a=this;a.options.allowNewItems=!a.options.hasOwnProperty("allowNewItems")||JSON.parse(a.options.allowNewItems),a.options.ajax||a.options.vocabularyUrl?(a.options.vocabularyUrl&&(a.options.multiple=void 0===a.options.multiple||a.options.multiple,a.options.ajax=a.options.ajax||{},a.options.ajax.url=a.options.vocabularyUrl,a.options.initSelection=function(e,t){var n=[],e=e.val();s(e.split(a.options.separator)).each(function(){var e=l.removeHTML(this);n.push({id:e,text:e})}),t(n)}),i="",a.options.ajax=s.extend({quietMillis:300,data:function(e,t){return{query:i=e,page_limit:10,page:t}},results:function(e,t){var n,r,o=e.results;return a.options.vocabularyUrl&&(n=[],s.each(e.results,function(e,t){n.push(t.id)}),o=[],r=""===i||0<=s.inArray(i,n),a.options.allowNewItems&&!r&&(i=l.removeHTML(i),o.push({id:i,text:i})),s.each(e.results,function(e,t){o.push(t)})),{results:o}}},a.options.ajax)):a.options.multiple&&a.$el.is("select")&&(e=a.$el.val()||[],t=s.map(a.$el.find("option"),function(e){return{text:s(e).html(),id:e.value}}),(n=s('<input type="hidden" />')).val(e.join(a.options.separator)),n.attr("class",a.$el.attr("class")),n.attr("name",a.$el.attr("name")),n.attr("id",a.$el.attr("id")),a.$orig=a.$el,a.$el.replaceWith(n),a.$el=n,a.options.data=t),a.initializeValues(),a.initializeTags(),a.initializeOrdering(),a.initializeSelect2()}})}),define("mockup-ui-url/views/base",["jquery","underscore","backbone","translate"],function(n,r,o,i){"use strict";return o.View.extend({isUIView:!0,eventPrefix:"ui",template:null,idPrefix:"base-",appendInContainer:!0,initialize:function(e){for(var t in this.options=e,this.options)this[t]=this.options[t];this.options._t=i},render:function(){return this.applyTemplate(),this.trigger("render",this),this.afterRender(),this.options.id&&this.$el.attr("id",this.idPrefix+this.options.id),this},afterRender:function(){},serializedModel:function(){return this.options},applyTemplate:function(){var e,t;null!==this.template&&(e=n.extend({_t:i},this.options,this.serializedModel()),"string"==typeof(t=this.template)&&(t=r.template(t)),this.$el.html(t(e)))},propagateEvent:function(e){if(0<e.indexOf(":")){e=e.split(":")[0];if(""!==this.eventPrefix&&(e===this.eventPrefix||e===this.eventPrefix+"."+this.id))return!0}return!1},uiEventTrigger:function(e){var t=[].slice.call(arguments,0);""!==this.eventPrefix&&(t[0]=this.eventPrefix+":"+e,o.View.prototype.trigger.apply(this,t),this.id)&&(t[0]=this.eventPrefix+"."+this.id+":"+e,o.View.prototype.trigger.apply(this,t))}})}),define("mockup-patterns-tooltip",["jquery","pat-base"],function(u,e,t){"use strict";function n(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)}return n.VERSION="3.2.0",n.DEFAULTS={animation:!0,placement:"auto",selector:!1,template:'<div class="tooltip mockup-tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!0,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,t,n){this.enabled=!0,this.type=e,this.$element=u(t),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&u(this.options.viewport.selector||this.options.viewport);for(var r=this.options.trigger.split(" "),o=r.length;o--;){var i,a=r[o];"click"==a?this.$element.on("click."+this.type,this.options.selector,u.proxy(this.toggle,this)):"manual"!=a&&(i="hover"==a?"mouseleave":"focusout",this.$element.on(("hover"==a?"mouseenter":"focusin")+"."+this.type,this.options.selector,u.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,u.proxy(this.leave,this)))}this.options.selector?this._options=u.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return(e=u.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var n={},r=this.getDefaults();return this._options&&u.each(this._options,function(e,t){r[e]!=t&&(n[e]=t)}),n},n.prototype.enter=function(e){var t=e instanceof this.constructor?e:u(e.currentTarget).data("bs."+this.type);if(t||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),u(e.currentTarget).data("bs."+this.type,t)),t.leaving=!1,clearTimeout(t.timeout),t.hoverState="in",!t.options.delay||!t.options.delay.show)return t.show();t.timeout=setTimeout(function(){"in"==t.hoverState&&t.show()},t.options.delay.show)},n.prototype.leave=function(e){var t=e instanceof this.constructor?e:u(e.currentTarget).data("bs."+this.type);if(t.leaving=!0,t||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),u(e.currentTarget).data("bs."+this.type,t)),clearTimeout(t.timeout),t.hoverState="out",!t.options.delay||!t.options.delay.hide)return t.hide();t.timeout=setTimeout(function(){"out"==t.hoverState&&t.hide()},t.options.delay.hide)},n.prototype.show=function(){var e,s,l,c,t=u.Event("show.bs."+this.type);this.hasContent()&&this.enabled&&(this.$element.trigger(t),e=u.contains(document.documentElement,this.$element[0]),!t.isDefaultPrevented())&&e&&(s=this.tip(),l=this.getUID(this.type),(c=this).setContent().then(function(){s.attr("id",l),c.$element.attr("aria-describedby",l),c.options.animation&&s.addClass("fade");function e(){c.$element.trigger("shown.bs."+c.type),c.hoverState=null,c.leaving&&c.leave(c)}var t="function"==typeof c.options.placement?c.options.placement.call(c,s[0],c.$element[0]):c.options.placement,n=/\s?auto?\s?/i,r=n.test(t),n=(r&&(t=t.replace(n,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(t).data("bs."+c.type,c),c.options.container?s.appendTo(c.options.container):s.insertAfter(c.$element),c.getPosition()),o=s[0].offsetWidth,i=s[0].offsetHeight,a=(r&&(r=t,a=c.$element.parent(),a=c.getPosition(a),t="bottom"==t&&n.top+n.height+i-a.scroll>a.height?"top":"top"==t&&n.top-a.scroll-i<0?"bottom":"right"==t&&n.right+o>a.width?"left":"left"==t&&n.left-o<a.left?"right":t,s.removeClass(r).addClass(t)),c.getCalculatedOffset(t,n,o,i));c.applyPlacement(a,t);u.support.transition&&c.$tip.hasClass("fade")?s.one("bsTransitionEnd",e).emulateTransitionEnd(150):e()}))},n.prototype.applyPlacement=function(e,t){var n=this.tip(),r=n[0].offsetWidth,o=n[0].offsetHeight,i=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10),i=(isNaN(i)&&(i=0),isNaN(a)&&(a=0),e.top=e.top+i,e.left=e.left+a,u.offset.setOffset(n[0],u.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},e),0),n.addClass("in"),n[0].offsetWidth),a=n[0].offsetHeight,t=("top"==t&&a!=o&&(e.top=e.top+o-a),this.getViewportAdjustedDelta(t,e,i,a)),r=(t.left?e.left+=t.left:e.top+=t.top,t.left?2*t.left-r+i:2*t.top-o+a),i=t.left?"left":"top",o=t.left?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(r,n[0][o],i)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},n.prototype.setContent=function(){var t=this.tip(),n=this.options.html?"html":"text",r=this.options.patTooltip?this.options.patTooltip.contentSelector:null;function o(e){"html"===n&&r&&(e=u(e).find(r).html()),t.find(".tooltip-inner")[n](e)}function e(){t.removeClass("fade in top bottom left right")}var i=this.getTitle(),a=this.getUrl();return a?(e(),u.get(a).then(function(e){o(e)})):(e(),o(i),new Promise(function(e,t){e(i)}))},n.prototype.getUrl=function(){return this.options.patTooltip?this.options.patTooltip.ajaxUrl:null},n.prototype.hide=function(){var e=this,t=this.tip(),n=u.Event("hide.bs."+this.type);function r(){"in"!=e.hoverState&&t.detach(),e.$element.trigger("hidden.bs."+e.type)}if(this.$element.removeAttr("aria-describedby"),this.$element.trigger(n),!n.isDefaultPrevented())return t.removeClass("in"),u.support.transition&&this.$tip.hasClass("fade")?t.one("bsTransitionEnd",r).emulateTransitionEnd(150):r(),this.hoverState=null,this},n.prototype.fixTitle=function(){var e=this.$element;!e.attr("title")&&"string"==typeof e.attr("data-original-title")||e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()||this.getUrl()},n.prototype.getPosition=function(e){var t=(e=e||this.$element)[0],n="BODY"==t.tagName;return u.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():null,{scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop(),width:n?u(window).width():e.outerWidth(),height:n?u(window).height():e.outerHeight()},n?{top:0,left:0}:e.offset())},n.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,r){var o,i,a={top:0,left:0};return this.$viewport&&(o=this.options.viewport&&this.options.viewport.padding||0,i=this.getPosition(this.$viewport),/right|left/.test(e)?(e=t.top-o-i.scroll,r=t.top+o-i.scroll+r,e<i.top?a.top=i.top-e:r>i.top+i.height&&(a.top=i.top+i.height-r)):(e=t.left-o,r=t.left+o+n,e<i.left?a.left=i.left-e:r>i.width&&(a.left=i.left+i.width-r))),a},n.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},n.prototype.getUID=function(e){for(;e+=~~(1e6*Math.random()),document.getElementById(e););return e},n.prototype.tip=function(){var e;return this.$tip||(e=this.$tip||u(this.options.template),this.options.patTooltip&&(this.options.patTooltip.style&&e.css(this.options.patTooltip.style),this.options.patTooltip.class&&e.addClass(this.options.patTooltip.class),this.options.patTooltip.innerStyle)&&e.find(".tooltip-inner").css(this.options.patTooltip.innerStyle),this.$tip=e)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var t=this;e&&!(t=u(e.currentTarget).data("bs."+this.type))&&(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),u(e.currentTarget).data("bs."+this.type,t)),t.tip().hasClass("in")?t.leave(t):t.enter(t)},e.extend({name:"tooltip",trigger:".pat-tooltip",parser:"mockup",defaults:{html:!(n.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)}),placement:"top"},init:function(){"true"===this.options.html||!0===this.options.html?this.options.html=!0:this.options.html=!1,this.data=new n(this.$el[0],this.options)}})}),define("mockup-ui-url/views/button",["underscore","mockup-ui-url/views/base","mockup-patterns-tooltip"],function(n,r,o){"use strict";return r.extend({tagName:"a",className:"btn",eventPrefix:"button",context:"default",idPrefix:"btn-",attributes:{href:"#"},extraClasses:[],tooltip:null,template:'<% if (icon) { %><span class="glyphicon glyphicon-<%= icon %>"></span><% } %> <%= title %>',events:{click:"handleClick"},initialize:function(e){var t;e.id||(t=e.title||"",e.id=""!==t?t.toLowerCase().replace(" ","-"):this.cid),r.prototype.initialize.apply(this,[e]),this.on("render",function(){this.$el.attr("title",this.options.title||""),this.$el.attr("aria-label",this.options.title||this.options.tooltip||""),null!==this.context&&this.$el.addClass("btn-"+this.context),n.each(this.extraClasses,function(e){this.$el.addClass(e)}.bind(this)),null!==this.tooltip&&(this.$el.attr("title",this.tooltip),new o(this.$el),this.$el.on("hidden",function(e){"hidden"===e.type&&e.stopPropagation()}))},this)},handleClick:function(e){e.preventDefault(),this.$el.is(".disabled")||this.uiEventTrigger("click",this,e)},serializedModel:function(){return n.extend({icon:"",title:""},this.options)},disable:function(){this.$el.addClass("disabled")},enable:function(){this.$el.removeClass("disabled")}})}),define("text!mockup-patterns-relateditems-url/templates/breadcrumb.xml",[],function(){return'<span class="separator">/<span>\n<a href="<%- path %>" class="crumb"><%- text %></a>\n'}),define("text!mockup-patterns-relateditems-url/templates/favorite.xml",[],function(){return'<li><a href="<%- path %>" class="fav" aria-labelledby="blip"><%- title %></a></li>\n'}),define("text!mockup-patterns-relateditems-url/templates/recentlyused.xml",[],function(){return'<li class="pattern-relateditems-recentlyused">\n  <a class="pattern-relateditems-recentlyused-select" data-uid="<%- UID %>">\n    <div class="pattern-relateditems-recentlyused-info">\n      <span\n        class="pattern-relateditems-recentlyused-title <%- portal_type ? \'contenttype-\' + portal_type.toLowerCase() : \'\' %> <%- review_state ? \'state-\' + review_state : \'\' %>"\n        title="<%- portal_type %>">\n        <%- Title %>\n      </span>\n      <span class="pattern-relateditems-recentlyused-path"><%- path %></span>\n    </div>\n    <% if (getURL && (getIcon || portal_type === "Image")) { %>\n      <div class="pattern-relateditems-recentlyused-image">\n        <img src="<%- getURL %>/@@images/image/tile" />\n      </div>\n    <% } %>\n  </a>\n</li>\n'}),define("text!mockup-patterns-relateditems-url/templates/result.xml",[],function(){return'<div class="pattern-relateditems-result <%- oneLevelUp ? \'one-level-up\' : \'\' %>">\n  <div class="pattern-relateditems-result-browse-wrapper">\n  <% if (!oneLevelUp) { %>\n    <a\n      class="pattern-relateditems-result-select<%- selectable ? \' selectable\' : \'\' %><%- oneLevelUp ? \' one-level-up\' : \'\' %>"\n      data-path="<%- path %>">\n  <% } %>\n      <div class="pattern-relateditems-result-info">\n        <span\n          class="pattern-relateditems-result-title <%- portal_type ? \'contenttype-\' + portal_type.toLowerCase() : \'\' %> <%- review_state ? \'state-\' + review_state : \'\' %>"\n          title="<%- portal_type %>">\n          <%- Title %>\n        </span>\n        <span class="pattern-relateditems-result-path"><%- oneLevelUp ? currentPath : path %></span>\n      </div>\n      <% if (is_folderish) { %>\n        <a\n          class="pattern-relateditems-result-browse"\n          data-path="<%- path %>"\n          title="<%- oneLevelUp ? one_level_up : open_folder %>">\n          <span class="<%- oneLevelUp ? \'icon-left-circle\' : \'icon-right-circle\' %>"></span>\n        </a>\n      <% } %>\n  <% if (!oneLevelUp) { %>\n    </a>\n  <% } %>\n  </div>\n  <% if (getURL && (getIcon || portal_type === "Image")) { %>\n    <% if (!oneLevelUp) { %>\n    <a\n      class="pattern-relateditems-result-select<%- selectable ? \' selectable\' : \'\' %><%- oneLevelUp ? \' one-level-up\' : \'\' %>"\n      data-path="<%- path %>">\n    <% } %>\n    <div class="pattern-relateditems-result-image">\n      <img src="<%- getURL %>/@@images/image/thumb" />\n    </div>\n    <% if (!oneLevelUp) { %>\n    </a>\n    <% } %>\n  <% } %>\n</div>\n'}),define("text!mockup-patterns-relateditems-url/templates/selection.xml",[],function(){return'<div class="pattern-relateditems-item">\n  <div class="pattern-relateditems-result-info">\n    <span\n      class="pattern-relateditems-item-title <%- portal_type ? \'contenttype-\' + portal_type.toLowerCase() : \'\' %> <%- review_state ? \'state-\' + review_state : \'\' %>"\n      title="<%- portal_type %>">\n      <%- Title %>\n    </span>\n    <span class="pattern-relateditems-item-path"><%- path %></span>\n  </div>\n  <% if (getURL && (getIcon || portal_type === "Image")) { %>\n    <div class="pattern-relateditems-item-image">\n      <img src="<%- getURL %>/@@images/image/thumb" />\n    </div>\n  <% } %>\n</div>\n'}),define("text!mockup-patterns-relateditems-url/templates/toolbar.xml",[],function(){return'<% if (mode!==\'auto\') { %>\n<div class="btn-group mode-selector" role="group">\n  <button type="button" class="mode search btn <% if (mode==\'search\') { %>btn-primary<% } else {%>btn-default<% } %>"><%- searchModeText %></button>\n  <button type="button" class="mode browse btn <% if (mode==\'browse\') { %>btn-primary<% } else {%>btn-default<% } %>"><%- browseModeText %></button>\n</div>\n<% } %>\n<div class="path-wrapper">\n  <span class="pattern-relateditems-path-label"><%- searchText %></span>\n  <a class="crumb" href="/"><span class="glyphicon glyphicon-home"/></a>\n  <%= items %>\n</div>\n<div class="controls pull-right">\n\n  <% if (recentlyUsedItems) { %>\n  <div class="recentlyUsed dropdown pull-right">\n    <button type="button" class="recentlyUsed dropdown-toggle btn btn-primary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n      <span class="glyphicon glyphicon-time"/>\n      <%- recentlyUsedText %>\n      <span class="caret"/>\n    </button>\n    <ul class="dropdown-menu">\n      <%= recentlyUsedItems %>\n    </ul>\n  </div>\n  <% } %>\n\n  <% if (favorites.length > 0) { %>\n  <div class="favorites dropdown pull-right">\n    <button type="button" class="favorites dropdown-toggle btn btn-primary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n      <span class="glyphicon glyphicon-star"/>\n      <%- favText %>\n      <span class="caret"/>\n    </button>\n    <ul class="dropdown-menu">\n      <%= favItems %>\n    </ul>\n  </div>\n  <% } %>\n</div>\n'}),define("mockup-patterns-relateditems",["jquery","underscore","pat-base","mockup-patterns-select2","mockup-ui-url/views/button","mockup-utils","pat-registry","translate","text!mockup-patterns-relateditems-url/templates/breadcrumb.xml","text!mockup-patterns-relateditems-url/templates/favorite.xml","text!mockup-patterns-relateditems-url/templates/recentlyused.xml","text!mockup-patterns-relateditems-url/templates/result.xml","text!mockup-patterns-relateditems-url/templates/selection.xml","text!mockup-patterns-relateditems-url/templates/toolbar.xml","bootstrap-dropdown"],function(s,l,e,t,c,u,n,d,r,o,i,a,f,m){"use strict";var p=37,h=39;return e.extend({name:"relateditems",trigger:".pat-relateditems",parser:"mockup",currentPath:void 0,selectedUIDs:[],openAfterInit:void 0,defaults:{vocabularyUrl:null,attributes:["UID","Title","portal_type","path","getURL","getIcon","is_folderish","review_state"],basePath:"",pageSize:10,browsing:void 0,closeOnSelect:!0,contextPath:void 0,dropdownCssClass:"pattern-relateditems-dropdown",favorites:[],recentlyUsed:!1,recentlyUsedMaxItems:20,recentlyUsedKey:"relateditems_recentlyused",maximumSelectionSize:-1,minimumInputLength:0,mode:"auto",orderable:!0,pathOperator:"plone.app.querystring.operation.string.path",rootPath:"/",rootUrl:"",scanSelection:!1,selectableTypes:null,separator:",",sortOn:null,sortOrder:"ascending",tokenSeparators:[","," "],upload:!1,uploadAllowView:void 0,width:"100%",breadcrumbTemplate:r,breadcrumbTemplateSelector:null,favoriteTemplate:o,favoriteTemplateSelector:null,recentlyusedTemplate:i,recentlyusedTemplateSelector:null,resultTemplate:a,resultTemplateSelector:null,selectionTemplate:f,selectionTemplateSelector:null,toolbarTemplate:m,toolbarTemplateSelector:null,multiple:!0},recentlyUsed:function(e){var t=(t=u.storage.get(this.options.recentlyUsedKey)||[]).slice(t.length-1e3,t.length),e=(e&&t.filter(this.isSelectable.bind(this)),parseInt(this.options.recentlyUsedMaxItems,10));return t=e?t.slice(t.length-e,t.length):t},applyTemplate:function(e,t){var n=this.options[e+"TemplateSelector"]&&(n=s(this.options[e+"TemplateSelector"]).html())||this.options[e+"Template"],e=s.extend(!0,{},this.options,t,{browsing:this.browsing,open_folder:d("Open folder"),current_directory:d("current directory:"),one_level_up:d("Go one level up")});return e._item=t,l.template(n)(e)},setAjax:function(){var e={url:this.options.vocabularyUrl,dataType:"JSON",quietMillis:500,data:function(e,t){var n=[],e=(e&&n.push({i:"SearchableText",o:"plone.app.querystring.operation.string.contains",v:e="*"+e+"*"}),!this.browsing&&this.options.selectableTypes&&n.push({i:"portal_type",o:"plone.app.querystring.operation.selection.any",v:this.options.selectableTypes}),n.push({i:"path",o:this.options.pathOperator,v:this.options.rootPath+this.currentPath+(this.browsing?"::1":"")}),this.options.sortOn),r=e?this.options.sortOrder:null;return this.browsing&&null===e&&(e="getObjPositionInParent",r="ascending"),{query:JSON.stringify({criteria:n,sort_on:e,sort_order:r}),attributes:JSON.stringify(this.options.attributes),batch:JSON.stringify({page:t||1,size:this.options.pageSize})}}.bind(this),results:function(e,t){var n=t*this.options.pageSize<e.total,e=e.results,r=(this.selectedUIDs=(this.$el.select2("data")||[]).map(function(e){return e.UID}),e=e.filter(function(e){return!!(this.browsing&&e.is_folderish||this.isSelectable(e)&&-1===this.selectedUIDs.indexOf(e.UID))}.bind(this)),this.currentPath.split("/"));return{results:e=1===t&&this.browsing&&1<r.length&&"/"!==this.currentPath?[{oneLevelUp:!0,Title:d("One level up"),path:r.slice(0,r.length-1).join("/")||"/",currentPath:this.currentPath,is_folderish:!0,selectable:!1}].concat(e):e,more:n}}.bind(this)};this.options.ajax=e},renderToolbar:function(){var o=this,e=o.currentPath.split("/"),n="",r="",t=(l.each(e,function(e){var t;""!==e&&((t={}).path=n=n+"/"+e,t.text=e,r+=o.applyTemplate("breadcrumb",t))}),""),i=(l.each(o.options.favorites,function(e){e=l.clone(e);e.path=e.path.substr(o.options.rootPath.length)||"/",t+=o.applyTemplate("favorite",e)}),"");function a(e,t){var n="upload-"+u.generateId(),r=new c({id:n,title:d("Upload"),tooltip:d("Upload files"),icon:"upload"});t&&r.disable(),s(".controls",o.$toolbar).prepend(r.render().el),o.uploadView=new e({triggerView:r,app:o}),s("#btn-"+n,o.$toolbar).append(o.uploadView.render().el)}o.options.recentlyUsed&&(e=o.recentlyUsed(!0),l.each(e.reverse(),function(e){i+=o.applyTemplate("recentlyused",e)})),e=o.applyTemplate("toolbar",{items:r,favItems:t,favText:d("Favorites"),searchText:d("Current path:"),searchModeText:d("Search"),browseModeText:d("Browse"),recentlyUsedItems:i,recentlyUsedText:d("Recently Used")}),o.$toolbar.html(e),s(".dropdown-toggle",o.$toolbar).dropdown(),s(".pattern-relateditems-dropdown").unbind("mouseup"),s(".pattern-relateditems-dropdown").bind("mouseup",function(e){e.stopPropagation()}),s("button.mode.search",o.$toolbar).on("click",function(e){e.preventDefault(),o.browsing&&(s("button.mode.search",o.$toolbar).toggleClass("btn-primary btn-default"),s("button.mode.browse",o.$toolbar).toggleClass("btn-primary btn-default"),o.browsing=!1,0<o.$el.select2("data").length&&(o.openAfterInit=!0),o.openAfterInit)||(o.$el.select2("close"),o.$el.select2("open"))}),s("button.mode.browse",o.$toolbar).on("click",function(e){e.preventDefault(),!o.browsing&&(s("button.mode.search",o.$toolbar).toggleClass("btn-primary btn-default"),s("button.mode.browse",o.$toolbar).toggleClass("btn-primary btn-default"),o.browsing=!0,0<o.$el.select2("data").length&&(o.openAfterInit=!0),o.openAfterInit)||(o.$el.select2("close"),o.$el.select2("open"))}),s("a.crumb",o.$toolbar).on("click",function(e){e.preventDefault(),o.browseTo(s(this).attr("href"))}),s("a.fav",o.$toolbar).on("click",function(e){e.preventDefault(),o.browseTo(s(this).attr("href"))}),o.options.recentlyUsed&&s(".pattern-relateditems-recentlyused-select",o.$toolbar).on("click",function(e){e.preventDefault();var t=s(this).data("uid"),e=o.recentlyUsed().filter(function(e){return e.UID===t});0<e.length&&(e=e[0],o.selectItem(e),0<o.options.maximumSelectionSize)&&(o.$el.select2("data").length,o.options.maximumSelectionSize)}),o.options.upload&&u.featureSupport.dragAndDrop()&&u.featureSupport.fileApi()&&require(["mockup-patterns-relateditems-upload"],function(t){o.options.uploadAllowView?s.ajax({url:o.options.uploadAllowView,dataType:"JSON",data:{path:o.options.rootPath+o.currentPath},type:"GET",success:function(e){a(t,!e.allowUpload)}}):a(t)})},browseTo:function(e){this.emit("before-browse"),this.currentPath=e,this.$el.select2("close"),this.renderToolbar(),this.$el.select2("open"),this.emit("after-browse")},selectItem:function(t){this.emit("selecting");var e,n=this.$el.select2("data");n.push(t),this.$el.select2("data",n,!0),this.options.recentlyUsed&&(0<(e=(n=this.recentlyUsed()).filter(function(e){return e.UID===t.UID})).length&&n.splice(n.indexOf(e[0]),1),n.push(t),u.storage.set(this.options.recentlyUsedKey,n)),this.emit("selected")},deselectItem:function(n){this.emit("deselecting");var r=this.$el.select2("data");l.each(r,function(e,t){e.UID===n.UID&&r.splice(t,1)}),this.$el.select2("data",r,!0),this.emit("deselected")},isSelectable:function(e){return!1!==e.selectable&&(null===this.options.selectableTypes||-1!==this.options.selectableTypes.indexOf(e.portal_type))},init:function(){var o=this;o.browsing="search"!==o.options.mode,o.options.rootPath=o.options.rootPath.replace(/\/$/,""),o.currentPath=o.options.basePath.substr(o.options.rootPath.length)||"/",o.setAjax(),o.$el.wrap('<div class="pattern-relateditems-container" />'),o.$container=o.$el.parents(".pattern-relateditems-container"),o.$container.width(o.options.width),t.prototype.initializeValues.call(o),t.prototype.initializeTags.call(o),o.options.formatSelection=function(e){e=s.extend(!0,{Title:"",getIcon:"",getURL:"",path:"",portal_type:"",review_state:""},e);var t=s(o.applyTemplate("selection",e));return o.options.scanSelection&&n.scan(t),1==o.options.maximumSelectionSize&&(e=(e=e.path).split("/").slice(0,-1).join("/"),o.currentPath=e,o.renderToolbar()),t},t.prototype.initializeOrdering.call(o),o.options.formatResult=function(t){t.selectable=o.isSelectable(t),t=s.extend(!0,{Title:"",getIcon:"",getURL:"",is_folderish:!1,oneLevelUp:!1,path:"",portal_type:"",review_state:"",selectable:!1},t),-1!==o.selectedUIDs.indexOf(t.UID)&&(t.selectable=!1);var e=s(o.applyTemplate("result",t));return s(".pattern-relateditems-result-select",e).on("click",function(e){e.preventDefault(),s(this).is(".selectable")&&((e=s(this).parents(".pattern-relateditems-result")).is(".pattern-relateditems-active")?(e.removeClass("pattern-relateditems-active"),o.deselectItem(t)):(0<o.options.maximumSelectionSize&&o.$el.select2("data").length>=o.options.maximumSelectionSize&&o.$el.select2("close"),o.selectItem(t),e.addClass("pattern-relateditems-active"),o.options.closeOnSelect&&o.$el.select2("close")))}),s(".pattern-relateditems-result-browse",e).on("click",function(e){e.preventDefault(),e.stopPropagation();e=s(this).data("path");o.browseTo(e)}),s(e)},o.options.initSelection=function(e,n){var r,e=s(e).val();""!==e&&(r=e.split(o.options.separator),new u.QueryHelper(s.extend(!0,{},o.options,{pattern:o})).search("UID","plone.app.querystring.operation.list.contains",r,function(e){var t=e.results.reduce(function(e,t){return e[t.UID]=t,e},{});try{n(r.map(function(e){return t[e]}).filter(function(e){return void 0!==e}))}catch(e){}o.openAfterInit&&(o.$el.select2("open"),o.openAfterInit=void 0)},!1))},o.options.tokenizer=function(e){"auto"===this.options.mode&&(this.browsing=!e)}.bind(this),o.options.id=function(e){return e.UID},t.prototype.initializeSelect2.call(o),o.$toolbar=s('<div class="toolbar ui-offset-parent" />'),o.$container.prepend(o.$toolbar),o.$el.on("select2-selecting",function(e){o.isSelectable(e.choice)||e.preventDefault()}),o.renderToolbar(),s(document).on("keyup",o.$el,function(e){!t.prototype.opened.call(o)||e.which!==p&&e.which!==h||(e.stopPropagation(),e=e.which===p?".pattern-relateditems-result.one-level-up":".select2-highlighted",1===(e=s(".pattern-relateditems-result-browse",e)).length&&(e=e.data("path"),o.browseTo(e)))})}})}),function(e){"function"==typeof define&&define.amd?define("dropzone",["jquery"],e):e(jQuery)}(function(r){var f={exports:{}};return function(){var a,o,t,e,d,s,i,l,c=[].slice,u={}.hasOwnProperty;function n(){}i=function(){},n.prototype.addEventListener=n.prototype.on,n.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this},n.prototype.emit=function(){var e,t,n,r=arguments[0],o=2<=arguments.length?c.call(arguments,1):[];if(this._callbacks=this._callbacks||{},e=this._callbacks[r])for(t=0,n=e.length;t<n;t++)e[t].apply(this,o);return this},n.prototype.removeListener=n.prototype.off,n.prototype.removeAllListeners=n.prototype.off,n.prototype.removeEventListener=n.prototype.off,n.prototype.off=function(e,t){var n,r,o,i;if(this._callbacks&&0!==arguments.length){if(n=this._callbacks[e])if(1===arguments.length)delete this._callbacks[e];else for(r=o=0,i=n.length;o<i;r=++o)if(n[r]===t){n.splice(r,1);break}}else this._callbacks={};return this},o=n,(a=function(){var B,M,e,t=L,n=o;for(e in n)u.call(n,e)&&(t[e]=n[e]);function r(){this.constructor=t}function L(e,t){if(this.element=e,this.version=L.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(L.instances.push(this),this.element.dropzone=this,e=null!=(e=L.optionsForElement(this.element))?e:{},this.options=B({},this.defaultOptions,e,null!=t?t:{}),this.options.forceFallback||!L.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(e=this.getExistingFallback())&&e.parentNode&&e.parentNode.removeChild(e),!1!==this.options.previewsContainer&&(this.options.previewsContainer?this.previewsContainer=L.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(!0===this.options.clickable?this.clickableElements=[this.element]:this.clickableElements=L.getElements(this.options.clickable,"clickable")),this.init()}return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,L.prototype.Emitter=o,L.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],L.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(e,t){return t()},init:function(){return i},forceFallback:!1,fallback:function(){var e,t,n,r,o,i;for(this.element.className=this.element.className+" dz-browser-not-supported",r=0,o=(i=this.element.getElementsByTagName("div")).length;r<o;r++)e=i[r],/(^| )dz-message($| )/.test(e.className)&&((t=e).className="dz-message");return t||(t=L.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(t)),(n=t.getElementsByTagName("span")[0])&&(null!=n.textContent?n.textContent=this.options.dictFallbackMessage:null!=n.innerText&&(n.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e){var t,n={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},r=e.width/e.height;return n.optWidth=this.options.thumbnailWidth,n.optHeight=this.options.thumbnailHeight,null==n.optWidth&&null==n.optHeight?(n.optWidth=n.srcWidth,n.optHeight=n.srcHeight):null==n.optWidth?n.optWidth=r*n.optHeight:null==n.optHeight&&(n.optHeight=1/r*n.optWidth),t=n.optWidth/n.optHeight,e.height<n.optHeight||e.width<n.optWidth?(n.trgHeight=n.srcHeight,n.trgWidth=n.srcWidth):t<r?(n.srcHeight=e.height,n.srcWidth=n.srcHeight*t):(n.srcWidth=e.width,n.srcHeight=n.srcWidth/t),n.srcX=(e.width-n.srcWidth)/2,n.srcY=(e.height-n.srcHeight)/2,n},drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:i,dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:i,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(t){var e,n,r,o,i,a,s,l,c,u,d,f,m;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(t.previewElement=L.createElement(this.options.previewTemplate.trim()),t.previewTemplate=t.previewElement,this.previewsContainer.appendChild(t.previewElement),r=0,a=(c=t.previewElement.querySelectorAll("[data-dz-name]")).length;r<a;r++)c[r].textContent=this._renameFilename(t.name);for(o=0,s=(u=t.previewElement.querySelectorAll("[data-dz-size]")).length;o<s;o++)u[o].innerHTML=this.filesize(t.size);for(this.options.addRemoveLinks&&(t._removeLink=L.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),t.previewElement.appendChild(t._removeLink)),m=this,e=function(e){return e.preventDefault(),e.stopPropagation(),t.status===L.UPLOADING?L.confirm(m.options.dictCancelUploadConfirmation,function(){return m.removeFile(t)}):m.options.dictRemoveFileConfirmation?L.confirm(m.options.dictRemoveFileConfirmation,function(){return m.removeFile(t)}):m.removeFile(t)},f=[],i=0,l=(d=t.previewElement.querySelectorAll("[data-dz-remove]")).length;i<l;i++)n=d[i],f.push(n.addEventListener("click",e));return f}},removedfile:function(e){var t;return e.previewElement&&null!=(t=e.previewElement)&&t.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var n,r,o,i;if(e.previewElement){for(e.previewElement.classList.remove("dz-file-preview"),r=0,o=(i=e.previewElement.querySelectorAll("[data-dz-thumbnail]")).length;r<o;r++)(n=i[r]).alt=e.name,n.src=t;return setTimeout(function(){return e.previewElement.classList.add("dz-image-preview")},1)}},error:function(e,t){var n,r,o,i,a;if(e.previewElement){for(e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error),a=[],r=0,o=(i=e.previewElement.querySelectorAll("[data-dz-errormessage]")).length;r<o;r++)n=i[r],a.push(n.textContent=t);return a}},errormultiple:i,processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:i,uploadprogress:function(e,t,n){var r,o,i,a,s;if(e.previewElement){for(s=[],o=0,i=(a=e.previewElement.querySelectorAll("[data-dz-uploadprogress]")).length;o<i;o++)"PROGRESS"===(r=a[o]).nodeName?s.push(r.value=t):s.push(r.style.width=t+"%");return s}},totaluploadprogress:i,sending:i,sendingmultiple:i,success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:i,canceled:function(e){return this.emit("error",e,"Upload canceled.")},canceledmultiple:i,complete:function(e){if(e._removeLink&&(e._removeLink.textContent=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:i,maxfilesexceeded:i,maxfilesreached:i,queuecomplete:i,addedfiles:i,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},B=function(){for(var e,t,n,r=arguments[0],o=2<=arguments.length?c.call(arguments,1):[],i=0,a=o.length;i<a;i++)for(e in t=o[i])n=t[e],r[e]=n;return r},L.prototype.getAcceptedFiles=function(){for(var e,t=this.files,n=[],r=0,o=t.length;r<o;r++)(e=t[r]).accepted&&n.push(e);return n},L.prototype.getRejectedFiles=function(){for(var e,t=this.files,n=[],r=0,o=t.length;r<o;r++)(e=t[r]).accepted||n.push(e);return n},L.prototype.getFilesWithStatus=function(e){for(var t,n=this.files,r=[],o=0,i=n.length;o<i;o++)(t=n[o]).status===e&&r.push(t);return r},L.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(L.QUEUED)},L.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(L.UPLOADING)},L.prototype.getAddedFiles=function(){return this.getFilesWithStatus(L.ADDED)},L.prototype.getActiveFiles=function(){for(var e,t=this.files,n=[],r=0,o=t.length;r<o;r++)(e=t[r]).status!==L.UPLOADING&&e.status!==L.QUEUED||n.push(e);return n},L.prototype.init=function(){var e,n,o,t,r,i,a,s,l,c,u,d,f,m,p,h,g,v,y;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(L.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(s=this,(o=function(){return s.hiddenFileInput&&s.hiddenFileInput.parentNode.removeChild(s.hiddenFileInput),s.hiddenFileInput=document.createElement("input"),s.hiddenFileInput.setAttribute("type","file"),(null==s.options.maxFiles||1<s.options.maxFiles)&&s.hiddenFileInput.setAttribute("multiple","multiple"),s.hiddenFileInput.className="dz-hidden-input",null!=s.options.acceptedFiles&&s.hiddenFileInput.setAttribute("accept",s.options.acceptedFiles),null!=s.options.capture&&s.hiddenFileInput.setAttribute("capture",s.options.capture),s.hiddenFileInput.style.visibility="hidden",s.hiddenFileInput.style.position="absolute",s.hiddenFileInput.style.top="0",s.hiddenFileInput.style.left="0",s.hiddenFileInput.style.height="0",s.hiddenFileInput.style.width="0",document.querySelector(s.options.hiddenInputContainer).appendChild(s.hiddenFileInput),s.hiddenFileInput.addEventListener("change",function(){var e,t,n,r=s.hiddenFileInput.files;if(r.length)for(t=0,n=r.length;t<n;t++)e=r[t],s.addFile(e);return s.emit("addedfiles",r),o()})})()),this.URL=null!=(i=window.URL)?i:window.webkitURL,t=0,r=(a=this.events).length;t<r;t++)e=a[t],this.on(e,this.options[e]);return this.on("uploadprogress",(l=this,function(){return l.updateTotalUploadProgress()})),this.on("removedfile",(c=this,function(){return c.updateTotalUploadProgress()})),this.on("canceled",(u=this,function(e){return u.emit("complete",e)})),this.on("complete",(d=this,function(e){if(0===d.getAddedFiles().length&&0===d.getUploadingFiles().length&&0===d.getQueuedFiles().length)return setTimeout(function(){return d.emit("queuecomplete")},0)})),n=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(e){return v.emit("dragstart",e)},dragenter:function(e){return n(e),g.emit("dragenter",e)},dragover:function(e){var t;try{t=e.dataTransfer.effectAllowed}catch(e){}return e.dataTransfer.dropEffect="move"===t||"linkMove"===t?"move":"copy",n(e),h.emit("dragover",e)},dragleave:function(e){return p.emit("dragleave",e)},drop:function(e){return n(e),m.drop(e)},dragend:(f=m=p=h=g=v=this,function(e){return f.emit("dragend",e)})}}],this.clickableElements.forEach((y=this,function(t){return y.listeners.push({element:t,events:{click:function(e){return t===y.element&&e.target!==y.element&&!L.elementInside(e.target,y.element.querySelector(".dz-message"))||y.hiddenFileInput.click(),!0}}})})),this.enable(),this.options.init.call(this)},L.prototype.destroy=function(){var e;return this.disable(),this.removeAllFiles(!0),null!=(e=this.hiddenFileInput)&&e.parentNode&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,L.instances.splice(L.instances.indexOf(this),1)},L.prototype.updateTotalUploadProgress=function(){var e,t,n,r,o,i=0,a=0;if(this.getActiveFiles().length){for(n=0,r=(o=this.getActiveFiles()).length;n<r;n++)i+=(e=o[n]).upload.bytesSent,a+=e.upload.total;t=100*i/a}else t=100;return this.emit("totaluploadprogress",t,a,i)},L.prototype._getParamName=function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):""+this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")},L.prototype._renameFilename=function(e){return"function"!=typeof this.options.renameFilename?e:this.options.renameFilename(e)},L.prototype.getFallbackForm=function(){var e,t;return(e=this.getExistingFallback())||(e='<div class="dz-fallback">',this.options.dictFallbackText&&(e+="<p>"+this.options.dictFallbackText+"</p>"),e+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',e=L.createElement(e),"FORM"!==this.element.tagName?(t=L.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>')).appendChild(e):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=t?t:e)},L.prototype.getExistingFallback=function(){for(var e,t=function(e){for(var t,n=0,r=e.length;n<r;n++)if(t=e[n],/(^| )fallback($| )/.test(t.className))return t},n=["div","form"],r=0,o=n.length;r<o;r++)if(e=t(this.element.getElementsByTagName(n[r])))return e},L.prototype.setupEventListeners=function(){for(var n,r,o,e=this.listeners,t=[],i=0,a=e.length;i<a;i++)n=e[i],t.push(function(){var e=n.events,t=[];for(r in e)o=e[r],t.push(n.element.addEventListener(r,o,!1));return t}());return t},L.prototype.removeEventListeners=function(){for(var n,r,o,e=this.listeners,t=[],i=0,a=e.length;i<a;i++)n=e[i],t.push(function(){var e=n.events,t=[];for(r in e)o=e[r],t.push(n.element.removeEventListener(r,o,!1));return t}());return t},L.prototype.disable=function(){var e,t,n,r,o;for(this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),o=[],t=0,n=(r=this.files).length;t<n;t++)e=r[t],o.push(this.cancelUpload(e));return o},L.prototype.enable=function(){return this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()},L.prototype.filesize=function(e){var t,n,r,o,i,a=0,s="b";if(0<e){for(t=o=0,i=(r=["TB","GB","MB","KB","b"]).length;o<i;t=++o)if(n=r[t],Math.pow(this.options.filesizeBase,4-t)/10<=e){a=e/Math.pow(this.options.filesizeBase,4-t),s=n;break}a=Math.round(10*a)/10}return"<strong>"+a+"</strong> "+s},L.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},L.prototype.drop=function(e){var t;e.dataTransfer&&(this.emit("drop",e),t=e.dataTransfer.files,this.emit("addedfiles",t),t.length)&&((e=e.dataTransfer.items)&&e.length&&null!=e[0].webkitGetAsEntry?this._addFilesFromItems(e):this.handleFiles(t))},L.prototype.paste=function(e){var t;if(null!=(null!=e&&null!=(t=e.clipboardData)?t.items:void 0))return this.emit("paste",e),(t=e.clipboardData.items).length?this._addFilesFromItems(t):void 0},L.prototype.handleFiles=function(e){for(var t,n=[],r=0,o=e.length;r<o;r++)t=e[r],n.push(this.addFile(t));return n},L.prototype._addFilesFromItems=function(e){for(var t,n,r=[],o=0,i=e.length;o<i;o++)null!=(n=e[o]).webkitGetAsEntry&&(t=n.webkitGetAsEntry())?t.isFile?r.push(this.addFile(n.getAsFile())):t.isDirectory?r.push(this._addFilesFromDirectory(t,t.name)):r.push(void 0):null!=n.getAsFile&&(null==n.kind||"file"===n.kind)?r.push(this.addFile(n.getAsFile())):r.push(void 0);return r},L.prototype._addFilesFromDirectory=function(e,o){var i,a,t=e.createReader(),n=function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(e):void 0};return a=this,(i=function(){return t.readEntries(function(e){var t,n,r;if(0<e.length){for(n=0,r=e.length;n<r;n++)(t=e[n]).isFile?t.file(function(e){if(!a.options.ignoreHiddenFiles||"."!==e.name.substring(0,1))return e.fullPath=o+"/"+e.name,a.addFile(e)}):t.isDirectory&&a._addFilesFromDirectory(t,o+"/"+t.name);i()}return null},n)})()},L.prototype.accept=function(e,t){return e.size>1024*this.options.maxFilesize*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):L.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)},L.prototype.addFile=function(t){return t.upload={progress:0,total:t.size,bytesSent:0},this.files.push(t),t.status=L.ADDED,this.emit("addedfile",t),this._enqueueThumbnail(t),this.accept(t,(n=this,function(e){return e?(t.accepted=!1,n._errorProcessing([t],e)):(t.accepted=!0,n.options.autoQueue&&n.enqueueFile(t)),n._updateMaxFilesReachedClass()}));var n},L.prototype.enqueueFiles=function(e){for(var t,n=0,r=e.length;n<r;n++)t=e[n],this.enqueueFile(t);return null},L.prototype.enqueueFile=function(e){if(e.status!==L.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=L.QUEUED,this.options.autoProcessQueue)return setTimeout((t=this,function(){return t.processQueue()}),0);var t},L.prototype._thumbnailQueue=[],L.prototype._processingThumbnail=!1,L.prototype._enqueueThumbnail=function(e){if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(e),setTimeout((t=this,function(){return t._processThumbnailQueue()}),0);var t},L.prototype._processThumbnailQueue=function(){var e;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length)return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),(e=this,function(){return e._processingThumbnail=!1,e._processThumbnailQueue()}))},L.prototype.removeFile=function(e){if(e.status===L.UPLOADING&&this.cancelUpload(e),this.files=l(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")},L.prototype.removeAllFiles=function(e){var t,n,r,o;for(null==e&&(e=!1),n=0,r=(o=this.files.slice()).length;n<r;n++)(t=o[n]).status===L.UPLOADING&&!e||this.removeFile(t);return null},L.prototype.createThumbnail=function(e,t){var n,r=new FileReader;return r.onload=(n=this,function(){if("image/svg+xml"!==e.type)return n.createThumbnailFromUrl(e,r.result,t);n.emit("thumbnail",e,r.result),null!=t&&t()}),r.readAsDataURL(e)},L.prototype.createThumbnailFromUrl=function(r,e,o,t){var i,a=document.createElement("img");return t&&(a.crossOrigin=t),a.onload=(i=this,function(){var e,t,n;if(r.width=a.width,r.height=a.height,null==(t=i.options.resize.call(i,r)).trgWidth&&(t.trgWidth=t.optWidth),null==t.trgHeight&&(t.trgHeight=t.optHeight),n=(e=document.createElement("canvas")).getContext("2d"),e.width=t.trgWidth,e.height=t.trgHeight,s(n,a,null!=(n=t.srcX)?n:0,null!=(n=t.srcY)?n:0,t.srcWidth,t.srcHeight,null!=(n=t.trgX)?n:0,null!=(n=t.trgY)?n:0,t.trgWidth,t.trgHeight),n=e.toDataURL("image/png"),i.emit("thumbnail",r,n),null!=o)return o()}),null!=o&&(a.onerror=o),a.src=e},L.prototype.processQueue=function(){var e,t=this.options.parallelUploads,n=this.getUploadingFiles().length,r=n;if(!(t<=n)&&0<(e=this.getQueuedFiles()).length){if(this.options.uploadMultiple)return this.processFiles(e.slice(0,t-n));for(;r<t;){if(!e.length)return;this.processFile(e.shift()),r++}}},L.prototype.processFile=function(e){return this.processFiles([e])},L.prototype.processFiles=function(e){for(var t,n=0,r=e.length;n<r;n++)(t=e[n]).processing=!0,t.status=L.UPLOADING,this.emit("processing",t);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},L.prototype._getFilesWithXhr=function(o){var i;return function(){for(var e=this.files,t=[],n=0,r=e.length;n<r;n++)(i=e[n]).xhr===o&&t.push(i);return t}.call(this)},L.prototype.cancelUpload=function(e){var t,n,r,o,i,a,s;if(e.status===L.UPLOADING){for(r=0,i=(n=this._getFilesWithXhr(e.xhr)).length;r<i;r++)(t=n[r]).status=L.CANCELED;for(e.xhr.abort(),o=0,a=n.length;o<a;o++)t=n[o],this.emit("canceled",t);this.options.uploadMultiple&&this.emit("canceledmultiple",n)}else(s=e.status)!==L.ADDED&&s!==L.QUEUED||(e.status=L.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()},M=function(){var e=arguments[0],t=2<=arguments.length?c.call(arguments,1):[];return"function"==typeof e?e.apply(this,t):e},L.prototype.uploadFile=function(e){return this.uploadFiles([e])},L.prototype.uploadFiles=function(u){for(var d,e,n,t,r,o,i,a,s,l,c,f,m,p,h,g,v,y,b,w,x,C,k,S,T,E,N,R,_,A,D,P=new XMLHttpRequest,O=0,I=u.length;O<I;O++)(d=u[O]).xhr=P;for(t in k=M(this.options.method,u),p=M(this.options.url,u),P.open(k,p,!0),P.withCredentials=!!this.options.withCredentials,f=null,n=function(){for(var e=[],t=0,n=u.length;t<n;t++)d=u[t],e.push(_._errorProcessing(u,f||_.options.dictResponseError.replace("{{statusCode}}",P.status),P));return e},A=_=this,m=function(e){var t,n,r,o,i,a,s,l,c;if(null!=e)for(n=100*e.loaded/e.total,r=0,a=u.length;r<a;r++)(d=u[r]).upload={progress:n,total:e.total,bytesSent:e.loaded};else{for(t=!0,n=100,o=0,s=u.length;o<s;o++)100===(d=u[o]).upload.progress&&d.upload.bytesSent===d.upload.total||(t=!1),d.upload.progress=n,d.upload.bytesSent=d.upload.total;if(t)return}for(c=[],i=0,l=u.length;i<l;i++)d=u[i],c.push(A.emit("uploadprogress",d,n,d.upload.bytesSent));return c},P.onload=(D=this,function(t){var e;if(u[0].status!==L.CANCELED&&4===P.readyState){if(f=P.responseText,P.getResponseHeader("content-type")&&~P.getResponseHeader("content-type").indexOf("application/json"))try{f=JSON.parse(f)}catch(e){t=e,f="Invalid JSON response from server."}return m(),200<=(e=P.status)&&e<300?D._finished(u,f,t):n()}}),P.onerror=function(){if(u[0].status!==L.CANCELED)return n()},(null!=(k=P.upload)?k:P).onprogress=m,o={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&B(o,this.options.headers),o)(r=o[t])&&P.setRequestHeader(t,r);if(e=new FormData,this.options.params)for(l in S=this.options.params)h=S[l],e.append(l,h);for(g=0,b=u.length;g<b;g++)d=u[g],this.emit("sending",d,P,e);if(this.options.uploadMultiple&&this.emit("sendingmultiple",u,P,e),"FORM"===this.element.tagName)for(v=0,w=(T=this.element.querySelectorAll("input, textarea, select, button")).length;v<w;v++)if(s=(a=T[v]).getAttribute("name"),N=a.getAttribute("type"),"SELECT"===a.tagName&&a.hasAttribute("multiple"))for(y=0,x=(E=a.options).length;y<x;y++)(c=E[y]).selected&&e.append(s,c.value);else(!N||"checkbox"!==(N=N.toLowerCase())&&"radio"!==N||a.checked)&&e.append(s,a.value);for(i=C=0,R=u.length-1;0<=R?C<=R:R<=C;i=0<=R?++C:--C)e.append(this._getParamName(i),u[i],this._renameFilename(u[i].name));return this.submitRequest(P,e,u)},L.prototype.submitRequest=function(e,t,n){return e.send(t)},L.prototype._finished=function(e,t,n){for(var r,o=0,i=e.length;o<i;o++)(r=e[o]).status=L.SUCCESS,this.emit("success",r,t,n),this.emit("complete",r);if(this.options.uploadMultiple&&(this.emit("successmultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()},L.prototype._errorProcessing=function(e,t,n){for(var r,o=0,i=e.length;o<i;o++)(r=e[o]).status=L.ERROR,this.emit("error",r,t,n),this.emit("complete",r);if(this.options.uploadMultiple&&(this.emit("errormultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()},L}()).version="4.3.0",a.options={},a.optionsForElement=function(e){if(e.getAttribute("id"))return a.options[t(e.getAttribute("id"))]},a.instances=[],a.forElement=function(e){if(null==(null!=(e="string"==typeof e?document.querySelector(e):e)?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},a.autoDiscover=!0,a.discover=function(){var e,t,i,n,r,o;for(document.querySelectorAll?i=document.querySelectorAll(".dropzone"):(i=[],(e=function(e){for(var t,n=[],r=0,o=e.length;r<o;r++)t=e[r],/(^| )dropzone($| )/.test(t.className)?n.push(i.push(t)):n.push(void 0);return n})(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))),o=[],n=0,r=i.length;n<r;n++)t=i[n],!1!==a.optionsForElement(t)?o.push(new a(t)):o.push(void 0);return o},a.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],a.isBrowserSupported=function(){var e,t,n,r=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(e=0,t=(n=a.blacklistedBrowsers).length;e<t;e++)n[e].test(navigator.userAgent)&&(r=!1);else r=!1;else r=!1;return r},l=function(e,t){for(var n,r=[],o=0,i=e.length;o<i;o++)(n=e[o])!==t&&r.push(n);return r},t=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})},a.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},a.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},a.getElement=function(e,t){var n;if("string"==typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},a.getElements=function(e,t){var n,r,o,i,a,s,l;if(e instanceof Array){r=[];try{for(o=0,a=e.length;o<a;o++)n=e[o],r.push(this.getElement(n,t))}catch(e){r=null}}else if("string"==typeof e)for(r=[],i=0,s=(l=document.querySelectorAll(e)).length;i<s;i++)n=l[i],r.push(n);else null!=e.nodeType&&(r=[e]);if(null!=r&&r.length)return r;throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.")},a.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},a.isValidFile=function(e,t){var n,r,o,i,a;if(!t)return!0;for(t=t.split(","),n=(r=e.type).replace(/\/.*$/,""),i=0,a=t.length;i<a;i++)if("."===(o=(o=t[i]).trim()).charAt(0)){if(-1!==e.name.toLowerCase().indexOf(o.toLowerCase(),e.name.length-o.length))return!0}else if(/\/\*$/.test(o)){if(n===o.replace(/\/.*$/,""))return!0}else if(r===o)return!0;return!1},null!=r&&(r.fn.dropzone=function(e){return this.each(function(){return new a(this,e)})}),null!=f?f.exports=a:window.Dropzone=a,a.ADDED="added",a.QUEUED="queued",a.ACCEPTED=a.QUEUED,a.UPLOADING="uploading",a.PROCESSING=a.UPLOADING,a.CANCELED="canceled",a.ERROR="error",a.SUCCESS="success",d=function(e){e.naturalWidth;var t,n,r,o,i=e.naturalHeight,a=document.createElement("canvas");for(a.width=1,a.height=i,(a=a.getContext("2d")).drawImage(e,0,0),t=a.getImageData(0,0,1,i).data,o=0,r=n=i;o<r;)0===t[4*(r-1)+3]?n=r:o=r,r=n+o>>1;return 0==(e=r/i)?1:e},s=function(e,t,n,r,o,i,a,s,l,c){var u=d(t);return e.drawImage(t,n,r,o,i,a,s,l,c/u)},e=function(t,n){var r=!1,e=!0,o=t.document,i=o.documentElement,a=o.addEventListener?"addEventListener":"attachEvent",s=o.addEventListener?"removeEventListener":"detachEvent",l=o.addEventListener?"":"on",c=function(e){if("readystatechange"!==e.type||"complete"===o.readyState)return("load"===e.type?t:o)[s](l+e.type,c,!1),!r&&(r=!0)?n.call(t,e.type||e):void 0},u=function(){try{i.doScroll("left")}catch(e){return void setTimeout(u,50)}return c("poll")};if("complete"!==o.readyState){if(o.createEventObject&&i.doScroll){try{e=!t.frameElement}catch(e){}e&&u()}return o[a](l+"DOMContentLoaded",c,!1),o[a](l+"readystatechange",c,!1),t[a](l+"load",c,!1)}},a._autoDiscoverFunction=function(){if(a.autoDiscover)return a.discover()},e(window,a._autoDiscoverFunction)}.call(this),f.exports}),define("text!mockup-patterns-upload-url/templates/upload.xml",[],function(){return'<div class="upload-container upload-multiple">\n    <h2 class="title"><%- _t("Upload here") %></h2>\n    <p class="help">\n        <%- _t(\'Drag and drop files from your computer onto the area below or click the Browse button.\') %>\n    </p>\n    <div class="upload-area">\n        <div class="fallback">\n            <input name="file" type="file" multiple />\n        </div>\n        <div class="dz-message"><p><%-_t("Drop files here...")%></p></div>\n        <div class="row browse-select">\n            <div class="col-md-9">\n                <input\n                    id="fakeUploadFile"\n                    placeholder="<%- _t("Choose File") %>"\n                    disabled\n                    />\n            </div>\n            <div class="col-md-3">\n                <button\n                    type="button"\n                    class="btn btn-primary browse">\n                    <%- _t("Browse") %>\n                </button>\n            </div>\n        </div>\n        <div class="upload-queue">\n            <div class="previews">\n            </div>\n            <div class="controls">\n                <% if (allowPathSelection) { %>\n                <div class="path">\n                    <label><%- _t("Upload to...") %></label>\n                    <p class="form-help">\n                        <%- _t("Select another destination folder or leave blank to add files to the current location.") %>\n                    </p>\n                    <input\n                        type="text"\n                        name="location"\n                        />\n                </div>\n                <% } %>\n                <div class="actions row">\n                    <div class="col-md-9">\n                        <div class="progress progress-striped active">\n                            <div class="progress-bar progress-bar-success"\n                                 role="progressbar"\n                                 aria-valuenow="0"\n                                 aria-valuemin="0"\n                                 aria-valuemax="100"\n                                 style="width: 0%">\n                                <span class="sr-only">40% Complete (success)</span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-md-3 align-right">\n                        <button\n                            type="button"\n                            class="btn btn-primary upload-all">\n                            <%- _t("Upload") %>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("text!mockup-patterns-upload-url/templates/preview.xml",[],function(){return'<div class="row item form-inline">\n    <div class="col-xs-2 action">\n        <button\n            type="button"\n            class="btn btn-danger btn-xs remove-item"\n            data-dz-remove=""\n            href="javascript:undefined;">\n            <span class="glyphicon glyphicon-remove"></span>\n        </button>\n    </div>\n    <div class="col-xs-7 title">\n        <div class="dz-preview">\n          <div class="dz-details">\n            <div class="dz-filename"><span data-dz-name></span></div>\n          </div>\n          <div class="dz-error-message"><span data-dz-errormessage></span></div>\n        </div>\n        <div class="dz-progress">\n            <span class="dz-upload" data-dz-uploadprogress></span>\n        </div>\n    </div>\n    <div class="col-xs-3 info">\n        <div class="dz-size" data-dz-size></div>\n        <img data-dz-thumbnail />\n    </div>\n</div>\n'}),define("mockup-patterns-upload",["jquery","underscore","pat-base","mockup-patterns-relateditems","dropzone","text!mockup-patterns-upload-url/templates/upload.xml","text!mockup-patterns-upload-url/templates/preview.xml","mockup-utils","translate"],function(r,n,e,o,s,t,i,a,l){"use strict";return s.autoDiscover=!1,e.extend({name:"upload",trigger:".pat-upload",parser:"mockup",defaults:{showTitle:!0,url:null,className:"upload",wrap:!1,wrapperTemplate:'<div class="upload-wrapper"/>',fileaddedClassName:"dropping",useTus:!1,container:"",ajaxUpload:!0,paramName:"file",addRemoveLinks:!1,autoCleanResults:!0,previewsContainer:".previews",previewTemplate:null,maxFiles:null,maxFilesize:99999999,allowPathSelection:void 0,relatedItems:{attributes:["UID","Title","Description","getURL","portal_type","path","ModificationDate"],batchSize:20,basePath:"/",vocabularyUrl:null,width:500,maximumSelectionSize:1,selectableTypes:["Folder"]}},init:function(){var o=this,e=t,e=(void 0===o.options.allowPathSelection&&(o.options.allowPathSelection=o.options.baseUrl&&o.options.relativePath),r(document).bind("paste",function(e){var t=e.originalEvent.clipboardData.items;if(t)for(var n,r=0;r<t.length;r++)-1!==t[r].type.indexOf("image")&&(n=t[r].getAsFile(),o.dropzone.addFile(n))}),o.currentPath=o.options.currentPath,o.currentFile=0,e=n.template(e)({_t:l,allowPathSelection:o.options.allowPathSelection}),o.$el.addClass(o.options.className),o.$el.append(e),o.$progress=r(".progress-bar-success",o.$el),o.options.showTitle||o.$el.find("h2.title").hide(),o.options.ajaxUpload||(r(".fallback",this.$el).remove(),(this.$el.hasClass(".upload-container")?this.$el:this.$el.closest(".upload-container")).addClass("no-ajax-upload")),o.options.wrap&&(o.$el.wrap(o.options.wrapperTemplate),o.$el=o.$el.parent()),o.options.allowPathSelection?(o.$pathInput=r('input[name="location"]',o.$el),o.relatedItems=o.setupRelatedItems(o.$pathInput)):(r('input[name="location"]',o.$el).parent().remove(),o.relatedItems=null),o.$dropzone=r(".upload-area",o.$el),r("div.browse-select button.browse",o.$el).click(function(e){e.preventDefault(),e.stopPropagation(),(!o.options.maxFiles||o.dropzone.files.length<o.options.maxFiles)&&o.dropzone.hiddenFileInput.click()}),this.getDzoneOptions());try{o.dropzone=new s(o.$dropzone[0],e)}catch(e){throw window.DEBUG&&console.log(e),e}o.dropzone.on("maxfilesreached",function(){o.showHideControls()}),o.dropzone.on("addedfile",function(){o.showHideControls()}),o.dropzone.on("removedfile",function(){o.showHideControls()}),o.dropzone.on("success",function(e,t){var n;try{n=r.parseJSON(t)}catch(e){n=t}o.$el.trigger("uploadAllCompleted",{data:n,path_uid:o.$pathInput?o.$pathInput.val():null})}),o.options.autoCleanResults&&o.dropzone.on("complete",function(e){e.status===s.SUCCESS&&setTimeout(function(){r(e.previewElement).fadeOut()},3e3)}),o.dropzone.on("complete",function(e){e.status===s.SUCCESS&&1===o.dropzone.files.length&&o.showHideControls()}),o.dropzone.on("error",function(e,t,n){void 0!==n&&403!==n.status&&r(".dz-error-message span",e.previewElement).html(l("The file transfer failed"))}),o.dropzone.on("totaluploadprogress",function(e){e=(100*(o.currentFile-1)+e)/(100*o.dropzone.files.length)*100,o.$progress.attr("aria-valuenow",e).css("width",e+"%")}),r(".upload-all",o.$el).click(function(e){e.preventDefault(),e.stopPropagation(),o.processUpload({finished:function(){o.$progress.attr("aria-valuenow",0).css("width","0%")}})}),o.options.clipboardfile&&o.dropzone.addFile(o.options.clipboardfile)},showHideControls:function(){var e=this;e._showHideTimeout&&clearTimeout(e._showHideTimeout),e._showHideTimeout=setTimeout(function(){e._showHideControls()},50)},_showHideControls:function(){var e=r(".controls",this.$el),t=r(".browse-select",this.$el),n=r(".dz-hidden-input");this.options.maxFiles&&(this.dropzone.files.length<this.options.maxFiles?(t.show(),n.prop("disabled",!1)):(t.hide(),n.prop("disabled",!0))),0<this.dropzone.files.length?(e.fadeIn("slow"),t=this.dropzone.files[0],r(".dz-error-message span",t.previewElement).html("")):e.fadeOut("slow")},pathJoin:function(){var t=[];return n.each(arguments,function(e){e&&("/"===(e="/"===e[0]?e.substring(1):e)[e.length-1]&&(e=e.substring(0,e.length-1)),t.push(e))}),t.join("/")},getUrl:function(){var e,t=this.options.url;return t||(this.options.baseUrl&&this.options.relativePath?("/"!==(t=this.options.baseUrl)[t.length-1]&&(t+="/"),t+=this.pathJoin(this.currentPath,this.options.relativePath)):t=0<(e=this.$el.parents("form")).length?e.attr("action"):window.location.href),t},getDzoneOptions:function(){this.options.clickable=!0;var e,t=r.extend({},this.options);return t.url=this.getUrl(),t.headers={"X-CSRF-TOKEN":a.getAuthenticator()},t.uploadMultiple=!1,delete t.wrap,delete t.wrapperTemplate,delete t.resultTemplate,delete t.autoCleanResults,delete t.fileaddedClassName,delete t.useTus,this.options.previewsContainer&&0<(e=this.$el.find(this.options.previewsContainer)).length&&(t.previewsContainer=e[0]),t.autoProcessQueue=!1,t.previewTemplate=i,t},processUpload:function(e){var n=this,r=!1,o=n.options.useTus,i=n.options.fileaddedClassName,a=(e=e||{}).finished;n.currentFile=0,function e(){r=!0,0===n.dropzone.files.length&&(r=!1);var t=n.dropzone.files[0];r&&t.status===s.ERROR&&(t.status=s.QUEUED,r=!1),r?-1!==[s.SUCCESS,s.CANCELED].indexOf(t.status)?(n.dropzone.removeFile(t),e()):(t.status!==s.UPLOADING&&(o&&window.tus?n.handleTusUpload(t):(n.currentFile+=1,n.dropzone.processFile(t))),setTimeout(e,100)):(n.$el.removeClass(i),void 0!==a&&"function"==typeof a&&a())}()},handleTusUpload:function(e){var o=this;r(e.previewElement);e.status=s.UPLOADING,window.tus.upload(e,{endpoint:o.dropzone.options.url,headers:{FILENAME:e.name,"X-CSRF-TOKEN":a.getAuthenticator()},chunkSize:5242880}).fail(function(){window.DEBUG&&console.alert(l("Error uploading with TUS resumable uploads")),e.status=s.ERROR}).progress(function(e,t,n){var r=t/n*100;o.$progress.attr("aria-valuenow",r).css("width",r+"%"),o.$progress.html(l("uploading...")+"<br />"+o.formatBytes(t)+" / "+o.formatBytes(n))}).done(function(e,t){t.status=s.SUCCESS,o.dropzone.emit("success",t),o.dropzone.emit("complete",t)})},formatBytes:function(e){var e=Math.round(e/1024);return e<1024?e+" KiB":(e=Math.round(e/1024))<1024?e+" MB":Math.round(e/1024)+" GB"},setPath:function(e){this.currentPath=e,this.options.url=null,this.options.url=this.dropzone.options.url=this.getUrl()},setupRelatedItems:function(e){var n=this,t=n.options.relatedItems,e=(t.upload=!1,n.options.initialFolder&&e.attr("value",n.options.initialFolder),new o(e,t));return e.$el.on("change",function(){var e=r(this).select2("data"),t=null;0<e.length&&(t=e[0].path),n.setPath(t)}),e}})}),define("mockup-patterns-tinymce-url/js/links",["jquery","underscore","pat-registry","pat-base","tinymce","text!mockup-patterns-tinymce-url/templates/link.xml","text!mockup-patterns-tinymce-url/templates/image.xml","mockup-patterns-relateditems","mockup-patterns-autotoc","mockup-patterns-modal","mockup-patterns-upload"],function(u,t,e,n,r,o,i,a){"use strict";var s=n.extend({name:"linktype",trigger:".pat-linktype-dummy",defaults:{linkModal:null},init:function(){this.linkModal=this.options.linkModal,this.tinypattern=this.options.tinypattern,this.tiny=this.tinypattern.tiny,this.dom=this.tiny.dom},getEl:function(){return this.$el.find("input")},value:function(){return u.trim(this.getEl().val())},toUrl:function(){return this.value()},load:function(e){this.getEl().attr("value",this.tiny.dom.getAttrib(e,"data-val"))},set:function(e){var t=this.getEl();t.attr("value",e),t.val(e)},attributes:function(){return{"data-val":this.value()}}}),l=s.extend({name:"externallinktype",trigger:".pat-externallinktype-dummy",init:function(){s.prototype.init.call(this),this.getEl().on("change",function(){var e,t=u(this).val();new RegExp("https?://").test(t)||(-1!==u(this).val().split("/")[0].indexOf(".")&&u(this).val("http://"+t),e=window.PORTAL_URL||u("body").data("portal-url"),u.get(e+"/@@make-resolveuid-url",{url:t},function(e){u(this).val(e)}.bind(this)))})}}),c=s.extend({name:"internallinktype",trigger:".pat-internallinktype-dummy",init:function(){s.prototype.init.call(this),this.getEl().addClass("pat-relateditems"),this.createRelatedItems()},getEl:function(){return this.$el.find("input:not(.select2-input)")},createRelatedItems:function(){var e=this.linkModal.options.relatedItems;e.upload=!1,this.relatedItems=new a(this.getEl(),e)},value:function(){var e=this.getEl().select2("data");return e=e&&"object"==typeof e?e[0]:e},toUrl:function(){var e=this.value();return e?this.tinypattern.generateUrl(e):null},load:function(e){e=this.tiny.dom.getAttrib(e,"data-val");e&&this.set(e)},set:function(e){var t=this.getEl();t.select2("destroy"),t.removeData("pattern-relateditems"),t.parent().replaceWith(t),t.attr("value",e),t.val(e),this.createRelatedItems()},attributes:function(){var e=this.value();return e?{"data-val":e.UID}:{}}}),d=s.extend({name:"uploadlinktype",trigger:".pat-uploadlinktype-dummy",getDelegatedLinkType:function(){return"uploadImage"===this.linkModal.linkType?this.linkModal.linkTypes.image:this.linkModal.linkTypes.internal},toUrl:function(){return this.getDelegatedLinkType().toUrl()},attributes:function(){return this.getDelegatedLinkType().attributes()},set:function(e){return this.getDelegatedLinkType().set(e)},load:function(e){return this.getDelegatedLinkType().load(e)},value:function(){return this.getDelegatedLinkType().value()}}),f=c.extend({name:"imagelinktype",trigger:".pat-imagelinktype-dummy",toUrl:function(){var e=this.value();return this.tinypattern.generateImageUrl(e,this.linkModal.$scale.val())}}),m=s.extend({name:"emaillinktype",trigger:".pat-emaillinktype-dummy",toUrl:function(){var e,t=this.value();return t?(t="mailto:"+t,(e=this.getSubject())&&(t+="?subject="+e),t):null},load:function(e){s.prototype.load.apply(this,[e]),this.linkModal.$subject.val(this.tiny.dom.getAttrib(e,"data-subject"))},getSubject:function(){return this.linkModal.$subject.val()},attributes:function(){var e=s.prototype.attributes.call(this);return e["data-subject"]=this.getSubject(),e}}),p=s.extend({name:"anchorlinktype",trigger:".pat-anchorlinktype-dummy",init:function(){s.prototype.init.call(this),this.$select=this.$el.find("select"),this.anchorNodes=[],this.anchorData=[],this.populate()},value:function(){var e=this.$select.select2("data");return e=e&&"object"==typeof e?e.id:e},populate:function(){for(var e,t,n=this,r=(n.$select.find("option").remove(),n.anchorNodes=[],n.anchorData=[],n.tiny.dom.select(".mceItemAnchor,.mce-item-anchor")),o=0;o<r.length;o+=1)e=r[o],""!==(i=(i=n.tiny.dom.getAttrib(e,"name"))||n.tiny.dom.getAttrib(e,"id"))&&(n.anchorNodes.push(e),n.anchorData.push({name:i,title:i}));if(0<(r=n.tiny.dom.select(n.linkModal.options.anchorSelector)).length)for(o=0;o<r.length;o+=1)if(e=r[o],""!==(t=u(e).text().replace(/^\s+|\s+$/g,""))){for(var i=(i=t.toLowerCase().substring(0,1024)).replace(/[^a-z0-9]/g,"-"),a=!1,s=0;s<n.anchorNodes.length;s+=1){var l=n.anchorData[s];if(l.name===i){a=!0,l.title=t;break}}a||(n.anchorData.push({name:i,title:t,newAnchor:!0}),n.anchorNodes.push(e))}if(0<n.anchorNodes.length)for(o=0;o<n.anchorData.length;o+=1){var c=n.anchorData[o];n.$select.append('<option value="'+o+'">'+c.title+"</option>")}else n.$select.append("<option>No anchors found..</option>")},getIndex:function(e){for(var t=0;t<this.anchorData.length;t+=1)if(this.anchorData[t].name===e)return t;return 0},toUrl:function(){var e,t=this.value();return t?(t=parseInt(t,10),e=this.anchorNodes[t],(t=this.anchorData[t]).newAnchor&&(e.innerHTML='<a name="'+t.name+'" class="mce-item-anchor"></a>'+e.innerHTML),"#"+t.name):null},set:function(e){e=this.getIndex(e);this.$select.select2("data",""+e)}});return r.PluginManager.add("ploneimage",function(e){e.addButton("ploneimage",{icon:"image",tooltip:"Insert/edit image",onclick:e.settings.addImageClicked,stateSelector:"img:not([data-mce-object])"}),e.addMenuItem("ploneimage",{icon:"image",text:"Insert image",onclick:e.settings.addImageClicked,context:"insert",prependToContext:!0})}),r.PluginManager.add("plonelink",function(e){e.addButton("plonelink",{icon:"link",tooltip:"Insert/edit link",shortcut:"Ctrl+K",onclick:e.settings.addLinkClicked,stateSelector:"a[href]"}),e.addButton("unlink",{icon:"unlink",tooltip:"Remove link",cmd:"unlink",stateSelector:"a[href]"}),e.addShortcut("Ctrl+K","",e.settings.addLinkClicked),e.addMenuItem("plonelink",{icon:"link",text:"Insert link",shortcut:"Ctrl+K",onclick:e.settings.addLinkClicked,stateSelector:"a[href]",context:"insert",prependToContext:!0})}),n.extend({name:"linkmodal",trigger:".pat-linkmodal",defaults:{anchorSelector:"h1,h2,h3",linkTypes:[],initialLinkType:"internal",text:{insertHeading:"Insert Link"},linkTypeClassMapping:{internal:c,upload:d,external:l,email:m,anchor:p,image:f,uploadImage:d,externalImage:s}},linkTypeTemplateMapping:{internal:o,upload:o,external:o,email:o,anchor:o,image:i,uploadImage:i,externalImage:i},template:function(e){return t.template(this.linkTypeTemplateMapping[this.linkType])(e)},init:function(){var t=this;t.tinypattern=t.options.tinypattern,t.tinypattern.options.anchorSelector&&(t.options.anchorSelector=t.tinypattern.options.anchorSelector),t.tiny=t.tinypattern.tiny,t.dom=t.tiny.dom,t.linkType=t.options.initialLinkType,t.linkTypes={},t.modal=e.patterns["plone-modal"].init(t.$el,{html:t.generateModalHtml(),content:null,buttons:".plone-btn"}),t.modal.on("shown",function(e){t.modalShown.apply(t,[e])})},isOnlyTextSelected:function(){var e=this.tiny.selection.getContent();if(/</.test(e)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(e)||-1===e.indexOf("href=")))return!1;if(this.anchorElm){var t=this.anchorElm.childNodes;if(0===t.length)return!1;for(var n=t.length-1;0<=n;n--)if(3!==t[n].nodeType)return!1}return!0},generateModalHtml:function(){return this.template({options:this.options,upload:this.options.upload,text:this.options.text,insertHeading:this.options.text.insertHeading,insertImageHelp:this.options.text.insertImageHelp,uploadText:this.options.text.upload,insertLinkHelp:this.options.text.insertLinkHelp,internal:this.options.text.internal,external:this.options.text.external,anchor:this.options.text.anchor,anchorLabel:this.options.text.anchorLabel,target:this.options.text.target,linkTypes:this.options.linkTypes,externalText:this.options.text.externalText,emailText:this.options.text.email,subjectText:this.options.text.subject,targetList:this.options.targetList,titleText:this.options.text.title,internalImageText:this.options.text.internalImage,externalImage:this.options.text.externalImage,externalImageText:this.options.text.externalImageText,altText:this.options.text.alt,imageAlignText:this.options.text.imageAlign,captionFromDescriptionText:this.options.text.captionFromDescription,captionText:this.options.text.caption,scaleText:this.options.text.scale,imageScales:this.options.imageScales,cancelBtn:this.options.text.cancelBtn,insertBtn:this.options.text.insertBtn})},isImageMode:function(){return-1!==["image","uploadImage","externalImage"].indexOf(this.linkType)},initElements:function(){var n=this;n.$target=u('select[name="target"]',n.modal.$modal),n.$button=u('.plone-modal-footer input[name="insert"]',n.modal.$modal),n.$title=u('input[name="title"]',n.modal.$modal),n.$subject=u('input[name="subject"]',n.modal.$modal),n.$alt=u('input[name="alt"]',n.modal.$modal),n.$align=u('select[name="align"]',n.modal.$modal),n.$scale=u('select[name="scale"]',n.modal.$modal),n.$captionFromDescription=u('input[name="captionFromDescription"]',n.modal.$modal),n.$caption=u('textarea[name="caption"]',n.modal.$modal),t.each(n.options.linkTypes,function(e){var t=u(".linkType."+e+" .main",n.modal.$modal);n.linkTypes[e]=new n.options.linkTypeClassMapping[e](t,{linkModal:n,tinypattern:n.tinypattern})}),u(".autotoc-nav a",n.modal.$modal).click(function(){var e=u("fieldset.linkType",n.modal.$modal).eq(u(this).index())[0].className.split(/\s+/);t.each(e,function(e){-1!==t.indexOf(n.options.linkTypes,e)&&(n.linkType=e)})}),n.$captionFromDescription.change(function(){this.checked?n.$caption.prop("disabled",!0):n.$caption.prop("disabled",!1)})},getLinkUrl:function(){return this.linkTypes[this.linkType].toUrl()},getValue:function(){return this.linkTypes[this.linkType].value()},updateAnchor:function(e){var t=this,n=(t.tiny.focus(),t.tiny.selection.setRng(t.rng),t.$target.val()),r=t.$title.val(),r=u.extend(!0,t.data,{title:r||null,target:n||null,"data-linkType":t.linkType,href:e},t.linkTypes[t.linkType].attributes());t.anchorElm?(t.onlyText&&r.text!==t.initialText&&("innerText"in t.anchorElm?t.anchorElm.innerText=t.data.text:t.anchorElm.textContent=t.data.text),t.tiny.dom.setAttribs(t.anchorElm,r),t.tiny.selection.select(t.anchorElm),t.tiny.undoManager.add()):t.onlyText?t.tiny.insertContent(t.tiny.dom.createHTML("a",r,t.tiny.dom.encode(t.data.text))):t.tiny.execCommand("mceInsertLink",!1,r)},focusElement:function(e){this.tiny.focus(),this.tiny.selection.select(e),this.tiny.nodeChanged()},updateImage:function(e){var t=this,n=t.$title.val(),r=t.$captionFromDescription.prop("checked"),o=(t.tiny.focus(),t.tiny.selection.setRng(t.rng),["image-richtext",t.$align.val()]),e=(r&&o.push("captioned"),u.extend(!0,{},{src:e,title:n||null,alt:t.$alt.val(),class:o.join(" "),"data-linkType":t.linkType,"data-scale":t.$scale.val()},t.linkTypes[t.linkType].attributes()));t.imgElm&&!t.imgElm.getAttribute("data-mce-object")?(e.width=t.dom.getAttrib(t.imgElm,"width"),e.height=t.dom.getAttrib(t.imgElm,"height")):t.imgElm=null,t.imgElm&&t.dom.remove(t.imgElm),t.captionElm&&t.dom.remove(t.captionElm),t.figureElm&&t.dom.remove(t.figureElm),e.id="__mcenew";var i,n=t.dom.createHTML("img",e),o=t.$caption.val(),e=o&&!r?(n+="\n"+t.dom.createHTML("figcaption",{},o),t.dom.createHTML("figure",{},n)):n;t.tiny.insertContent(e),t.imgElm=t.dom.get("__mcenew"),t.dom.setAttrib(t.imgElm,"id",null),(i=t.imgElm).onload=i.onerror=function(){i.onload=i.onerror=null,t.focusElement(i)},t.imgElm.complete&&t.focusElement(t.imgElm)},modalShown:function(e){var o=this;o.initElements(),o.initData(),o.options.upload&&(o.$upload=u(".uploadify-me",o.modal.$modal),o.options.upload.relatedItems=u.extend(!0,{},o.options.relatedItems),o.options.upload.relatedItems.selectableTypes=o.options.folderTypes,o.$upload.addClass("pat-upload").patternUpload(o.options.upload),o.$upload.on("uploadAllCompleted",function(e,t){(o.linkTypes.image?(o.linkTypes.image.set(t.data.UID),u("#"+u("#tinylink-image",o.modal.$modal).data("navref"))):(o.linkTypes.internal.set(t.data.UID),u("#"+u("#tinylink-internal",o.modal.$modal).data("navref")))).trigger("click")})),o.$button.off("click").on("click",function(e){var t;if(e.preventDefault(),e.stopPropagation(),o.linkType=o.modal.$modal.find("fieldset.active").data("linktype"),"external"===o.linkType)e=window.PORTAL_URL||u("body").data("portal-url"),u.get(e+"/@@make-resolveuid-url",{url:o.getLinkUrl()},function(e){o.updateAnchor(e),o.hide()});else{"uploadImage"!==o.linkType&&"upload"!==o.linkType||0<(e=o.$upload.data().patternUpload).dropzone.files.length&&(e.processUpload(),o.$upload.on("uploadAllCompleted",function(e,t){function n(){var e;r<5&&!o.linkTypes[o.linkType].value()?(r+=1,setTimeout(n,100)):(e=o.getLinkUrl(),o.updateImage(e),o.hide())}var r=0;n()}));try{t=o.getLinkUrl()}catch(e){return}t&&(o.isImageMode()?o.updateImage(t):o.updateAnchor(t),o.hide())}}),u('.plone-modal-footer input[name="cancel"]',o.modal.$modal).click(function(e){e.preventDefault(),o.hide()})},show:function(){this.modal.show()},hide:function(){this.modal.hide()},initData:function(){var e,t,n,r=this;if(r.data={},r.initialText=null,r.rng=r.tiny.selection.getRng(),r.selectedElm=r.tiny.selection.getNode(),r.anchorElm=r.tiny.dom.getParent(r.selectedElm,"a[href]"),r.onlyText=r.isOnlyTextSelected(),r.data.text=r.initialText=r.anchorElm?r.anchorElm.innerText||r.anchorElm.textContent:r.tiny.selection.getContent({format:"text"}),r.data.href=r.anchorElm?r.tiny.dom.getAttrib(r.anchorElm,"href"):"",r.anchorElm?r.data.target=r.tiny.dom.getAttrib(r.anchorElm,"target"):r.tiny.settings.default_link_target&&(r.data.target=r.tiny.settings.default_link_target),(i=r.tiny.dom.getAttrib(r.anchorElm,"rel"))&&(r.data.rel=i),(i=r.tiny.dom.getAttrib(r.anchorElm,"class"))&&(r.data.class=i),(i=r.tiny.dom.getAttrib(r.anchorElm,"title"))&&(r.data.title=i),r.tiny.focus(),r.anchorElm=r.dom.getParent(r.selectedElm,"a[href]"),r.isImageMode()){if("FIGURE"===r.selectedElm.nodeName?(o=(n=r.selectedElm).querySelector("img"),t=n.querySelector("figcaption")):"IMG"===r.selectedElm.nodeName?(n=(n=u(r.selectedElm).closest("figure")).length?n[0]:void 0,o=r.selectedElm,t=n?n.querySelector("figcaption"):void 0):"FIGCAPTION"===r.selectedElm.nodeName&&(o=(n=(n=u(r.selectedElm).closest("figure")).length?n[0]:void 0)?n.querySelector("img"):void 0,t=r.selectedElm),r.imgElm=o,r.figureElm=n,r.captionElm=t,r.imgElm){var o,i=r.dom.getAttrib(r.imgElm,"src");r.$title.val(r.dom.getAttrib(r.imgElm,"title")),r.$alt.val(r.dom.getAttrib(r.imgElm,"alt")),u(r.imgElm).hasClass("captioned")&&(r.$captionFromDescription.prop("checked",!0),r.$caption.prop("disabled",!0)),r.captionElm&&r.$caption.val(r.captionElm.innerHTML),(e=r.dom.getAttrib(r.imgElm,"data-linktype"))?(r.linkType=e,r.linkTypes[r.linkType].load(r.imgElm),o=r.dom.getAttrib(r.imgElm,"data-scale"),r.$scale.val(o),u("#tinylink-"+r.linkType,r.modal.$modal).trigger("click")):i&&r.guessImageLink(i),"externalImage"!==r.linkType&&(u(".autotoc-level-1:last",r.modal.$modal).hide(),u("fieldset.externalImage",r.modal.$modal).hide());for(var a=r.dom.getAttrib(r.imgElm,"class").split(" "),s=0;s<a.length;s+=1){var l,c=a[s];for(l in r.options.imageClasses)-1!==l.indexOf(c)&&r.$align.val(c)}}}else r.anchorElm&&(r.focusElement(r.anchorElm),n="",n=r.dom.getAttrib(r.anchorElm,"href"),r.$target.val(r.dom.getAttrib(r.anchorElm,"target")),r.$title.val(r.dom.getAttrib(r.anchorElm,"title")),(e=r.dom.getAttrib(r.anchorElm,"data-linktype"))?(r.linkType=e,r.linkTypes[r.linkType].load(r.anchorElm),1===(t=u("#tinylink-"+r.linkType,r.modal.$modal)).length&&u("#"+t.data("autotoc-trigger-id")).trigger("click")):n&&r.guessAnchorLink(n))},guessImageLink:function(e){-1!==e.indexOf(this.options.prependToScalePart)?(this.linkType="image",this.$scale.val(this.tinypattern.getScaleFromUrl(e)),this.linkTypes.image.set(this.tinypattern.stripGeneratedUrl(e))):(this.linkType="externalImage",this.linkTypes.externalImage.set(e))},guessAnchorLink:function(e){var t;this.options.prependToUrl&&-1!==e.indexOf(this.options.prependToUrl)?(this.linkType="internal",this.linkTypes.internal.set(this.tinypattern.stripGeneratedUrl(e))):-1!==e.indexOf("mailto:")?(this.linkType="email",t=e.substring("mailto:".length,e.length).split("?subject="),this.linkTypes.email.set(t[0]),1<t.length&&this.$subject.val(decodeURIComponent(t[1]))):"#"===e[0]?(this.linkType="anchor",this.linkTypes.anchor.set(e.substring(1))):(this.linkType="external",this.linkTypes.external.set(e))},setSelectElement:function(e,t){e.find("option:selected").prop("selected",!1),t&&e.find('option[value="'+t+'"]').prop("selected",!0)},reinitialize:function(){this.modal.options.html=this.generateModalHtml()}})}),function(e){define("tinymce-modern-theme",["tinymce"],function(){return function(){!function(){"use strict";function M(e){return!1!==j(e)}function L(e){return e.getParam("toolbar_items_size")}function F(e){return!1===e.settings.skin}function H(e){return!1===(e=e.getParam("resize","vertical"))?"none":"both"===e?"both":"vertical"}function z(t,n){return function(){var e=t.find(n)[0];e&&e.focus(!0)}}function U(e){return function(){return e}}function i(){return J}var W=tinymce.util.Tools.resolve("tinymce.ThemeManager"),$=tinymce.util.Tools.resolve("tinymce.EditorManager"),p=tinymce.util.Tools.resolve("tinymce.util.Tools"),j=function(e){return e.getParam("menubar")},q=function(e){return e.getParam("menu")},V=function(e,t){for(var n=[],r=1;r<10;r++){var o=e["toolbar"+r];if(!o)break;n.push(o)}t=e.toolbar?[e.toolbar]:[t];return 0<n.length?n:t},d=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),h=tinymce.util.Tools.resolve("tinymce.ui.Factory"),K=tinymce.util.Tools.resolve("tinymce.util.I18n"),f={fireSkinLoaded:function(e){return e.fire("SkinLoaded")},fireResizeEditor:function(e){return e.fire("ResizeEditor")},fireBeforeRenderUI:function(e){return e.fire("BeforeRenderUI")}},Y=function(e,t){e.shortcuts.add("Alt+F9","",z(t,"menubar")),e.shortcuts.add("Alt+F10,F10","",z(t,"toolbar")),e.shortcuts.add("Alt+F11","",z(t,"elementpath")),t.on("cancel",function(){e.focus()})},g=tinymce.util.Tools.resolve("tinymce.geom.Rect"),c=tinymce.util.Tools.resolve("tinymce.util.Delay"),u={noop:function(){for(var e=0;e<arguments.length;e++)e,0},noarg:function(t){return function(){for(var e=0;e<arguments.length;e++)e,0;return t()}},compose:function(t,n){return function(){for(var e=0;e<arguments.length;e++)e,0;return t(n.apply(null,arguments))}},constant:U,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(o){for(var e=1;e<arguments.length;e++)e-1,0;for(var i=new Array(arguments.length-1),t=1;t<arguments.length;t++)i[t-1]=arguments[t];return function(){for(var e=0;e<arguments.length;e++)e,0;for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var r=i.concat(t);return o.apply(null,r)}},not:function(t){return function(){for(var e=0;e<arguments.length;e++)e,0;return!t.apply(null,arguments)}},die:function(e){return function(){throw new Error(e)}},apply:function(e){return e()},call:function(e){e()},never:U(!1),always:U(!0)},G=u.never,X=u.always,J=(t={fold:function(e,t){return e()},is:G,isSome:G,isNone:X,getOr:ee,getOrThunk:Z,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:ee,orThunk:Z,map:i,ap:i,each:function(){},bind:i,flatten:i,exists:G,forall:X,filter:i,equals:Q,equals_:Q,toArray:function(){return[]},toString:u.constant("none()")},Object.freeze&&Object.freeze(t),t);function Q(e){return e.isNone()}function Z(e){return e()}function ee(e){return e}function te(n){function e(){return n}function t(){return o}function r(e){return e(n)}var o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:X,isNone:G,getOr:e,getOrThunk:e,getOrDie:e,or:t,orThunk:t,map:function(e){return te(e(n))},ap:function(e){return e.fold(i,function(e){return te(e(n))})},each:function(e){e(n)},bind:r,flatten:e,exists:r,forall:r,filter:function(e){return e(n)?o:J},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(G,function(e){return t(n,e)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}function ne(e){return e?e.getRoot().uiContainer:null}function re(r,e,o){var i,a=[];if(e)return p.each(e.split(/[ ,]/),function(t){function e(){var e=r.selection;t.settings.stateSelector&&e.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&e.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})}var n;"|"===t?i=null:(i||(i={type:"buttongroup",items:[]},a.push(i)),r.buttons[t]&&(n=t,(t="function"==typeof(t=r.buttons[n])?t():t).type=t.type||"button",t.size=o,t=h.create(t),i.items.push(t),r.initialized?e():r.on("init",e)))}),{type:"toolbar",layout:"flow",items:a}}function oe(e,t){e.moveTo(t.left,t.top)}function ie(e,t,n,r,o,i){return i=Ee({x:t,y:n,w:i.w,h:i.h}),i=e?e({elementRect:Ee(r),contentAreaRect:Ee(o),panelRect:i}):i}function e(n){return function(e){return(null===(e=e)?"null":"object"==(t=typeof e)&&Array.prototype.isPrototypeOf(e)?"array":"object"==t&&String.prototype.isPrototypeOf(e)?"string":t)===n;var t}}function ae(e,t){return-1<Re(e,t)}function se(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o,e)}return r}function le(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n,e)}function ce(e,t){for(var n=e.length-1;0<=n;n--)t(e[n],n,e)}function ue(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n}function de(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n,e))return s.some(n);return s.none()}function fe(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Ae.apply(t,e[n])}return t}function me(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n,e))return!1;return!0}function pe(e){return e&&"|"===e.item.text}function he(e){return{width:e.clientWidth,height:e.clientHeight}}function ge(e,t,n){var r=e.getContainer(),o=e.getContentAreaContainer().firstChild,i=he(r),a=he(o);null!==t&&(t=Math.max(e.getParam("min_width",100,"number"),t),t=Math.min(e.getParam("max_width",65535,"number"),t),Fe.setStyle(r,"width",t+(i.width-a.width)),Fe.setStyle(o,"width",t)),n=Math.max(e.getParam("min_height",100,"number"),n),n=Math.min(e.getParam("max_height",65535,"number"),n),Fe.setStyle(o,"height",n),f.fireResizeEditor(e)}function ve(e){return"static"===w.getRuntimeStyle(e,"position")}function ye(e){return e.state.get("fixed")}var be,s={some:te,none:i,from:function(e){return null==e?J:te(e)}},we=function(e){var t,n,e=ne(e);return e&&"static"!==d.DOM.getStyle(e,"position",!0)?(t=d.DOM.getPos(e),n=e.scrollLeft-t.x,e=e.scrollTop-t.y,s.some({x:n,y:e})):s.none()},xe=function(e,t){e=d.DOM.select(e.settings.ui_container)[0];t.getRoot().uiContainer=e},Ce=ne,ke=function(e,t){return t.uiContainer=ne(e)},Se=re,Te=function(t,n){var e,r,o=[];if(p.each(!1===(r=(e=t).getParam("toolbar"))?[]:p.isArray(r)?p.grep(r,function(e){return 0<e.length}):V(e.settings,"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"),function(e){(e=e)&&o.push(re(t,e,n))}),o.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:o}},v=d.DOM,Ee=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},Ne=function(f){function i(){return f.contextToolbars||[]}function a(e,t){var n,r,o,i,a,s,l,c,u,d=f.getParam("inline_toolbar_position_handler");f.removed||(e&&e.toolbar.panel?(r=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],o=e.toolbar.panel,t&&o.show(),t=m(e.element),i=v.getRect(o.getEl()),a=v.getRect(f.getContentAreaContainer()||f.getBody()),s=we(o).getOr({x:0,y:0}),t.x+=s.x,t.y+=s.y,i.x+=s.x,i.y+=s.y,a.x+=s.x,a.y+=s.y,"inline"!==v.getStyle(e.element,"display",!0)&&(s=e.element.getBoundingClientRect(),t.w=s.width,t.h=s.height),f.inline||(a.w=f.getDoc().documentElement.offsetWidth),f.selection.controlSelection.isResizable(e.element)&&t.w<25&&(t=g.inflate(t,0,8)),s=g.findBestRelativePosition(i,t,a,r),t=g.clamp(t,a),s?(n=g.relativePosition(i,t,s),oe(o,ie(d,n.x,n.y,t,a,i))):(a.h+=i.h,(t=g.intersect(a,t))?(s=g.findBestRelativePosition(i,t,a,["bc-tc","bl-tl","br-tr"]))?(n=g.relativePosition(i,t,s),oe(o,ie(d,n.x,n.y,t,a,i))):oe(o,ie(d,t.x,t.y,t,a,i)):o.hide()),l=o,u=function(e,t){return e===t},c=(c=s)?c.substr(0,2):"",p.each({t:"down",b:"up"},function(e,t){l.classes.toggle("arrow-"+e,u(t,c.substr(0,1)))}),p.each({l:"left",r:"right"},function(e,t){l.classes.toggle("arrow-"+e,u(t,c.substr(1,1)))})):p.each(f.contextToolbars,function(e){e.panel&&e.panel.hide()}))}function t(e){var t,n,r,o;e.toolbar.panel?e.toolbar.panel.show():(o=h.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:Se(f,e.toolbar.items),oncancel:function(){f.focus()}}),xe(f,o),t=o,s||(n=l(!0),r=Ce(t),s=f.selection.getScrollContainer()||f.getWin(),v.bind(s,"scroll",n),v.bind(r,"scroll",n),f.on("remove",function(){v.unbind(s,"scroll",n),v.unbind(r,"scroll",n)})),(e.toolbar.panel=o).renderTo().reflow()),a(e)}function n(){p.each(i(),function(e){e.panel&&e.panel.hide()})}function r(e){for(var t,n=i(),r=f.$(e).parents().add(e),o=r.length-1;0<=o;o--)for(t=n.length-1;0<=t;t--)if(n[t].predicate(r[o]))return{toolbar:n[t],element:r[o]};return null}var s,m=function(e){var t=v.getPos(f.getContentAreaContainer()),e=f.dom.getRect(e),n=f.dom.getRoot();return"BODY"===n.nodeName&&(e.x-=n.ownerDocument.documentElement.scrollLeft||n.scrollLeft,e.y-=n.ownerDocument.documentElement.scrollTop||n.scrollTop),e.x+=t.x,e.y+=t.y,e},l=function(e){return function(){c.requestAnimationFrame(function(){f.selection&&a(r(f.selection.getNode()),e)})}};f.on("click keyup setContent ObjectResized",function(e){"setcontent"===e.type&&!e.selection||c.setEditorTimeout(f,function(){var e=r(f.selection.getNode());e?(n(),t(e)):n()})}),f.on("blur hide contextmenu",n),f.on("ObjectResizeStart",function(){var e=r(f.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.hide()}),f.on("ResizeEditor ResizeWindow",l(!0)),f.on("nodeChange",l(!1)),f.on("remove",function(){p.each(i(),function(e){e.panel&&e.panel.remove()}),f.contextToolbars={}}),f.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var e=r(f.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.items()[0].focus()})},a={isString:e("string"),isObject:e("object"),isArray:e("array"),isNull:e("null"),isBoolean:e("boolean"),isUndefined:e("undefined"),isFunction:e("function"),isNumber:e("number")},Re=void 0===(be=Array.prototype.indexOf)?function(e,t){return _e(e,t)}:function(e,t){return be.call(e,t)},_e=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},Ae=Array.prototype.push,De=Array.prototype.slice,t=a.isFunction(Array.from)?Array.from:function(e){return De.call(e)},m={map:se,each:le,eachr:ce,partition:function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{pass:n,fail:r}},filter:ue,groupBy:function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var s=e[i],l=t(s);l!==n&&(r.push(o),o=[]),n=l,o.push(s)}return 0!==o.length&&r.push(o),r},indexOf:function(e,t){e=Re(e,t);return-1===e?s.none():s.some(e)},foldr:function(e,t,n){return ce(e,function(e){n=t(n,e)}),n},foldl:function(e,t,n){return le(e,function(e){n=t(n,e)}),n},find:function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n,e))return s.some(o)}return s.none()},findIndex:de,flatten:fe,bind:function(e,t){e=se(e,t);return fe(e)},forall:me,exists:function(e,t){return de(e,t).isSome()},contains:ae,equal:function(e,n){return e.length===n.length&&me(e,function(e,t){return e===n[t]})},reverse:function(e){e=De.call(e,0);return e.reverse(),e},chunk:function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},difference:function(e,t){return ue(e,function(e){return!ae(t,e)})},mapToObject:function(e,t){for(var n={},r=0,o=e.length;r<o;r++){var i=e[r];n[String(i)]=t(i,r)}return n},pure:function(e){return[e]},sort:function(e,t){e=De.call(e,0);return e.sort(t),e},range:function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},head:function(e){return 0===e.length?s.none():s.some(e[0])},last:function(e){return 0===e.length?s.none():s.some(e[e.length-1])},from:t},Pe={file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}},Oe=function(){return{name:"|",item:{text:"|"}}},Ie=function(e,t){t=t?{name:e,item:t}:null;return"|"===e?Oe():t},Be=function(e,t){return m.findIndex(e,function(e){return e.name===t}).isSome()},Me=function(e,t){e=m.filter(e,function(e){return!1===t.hasOwnProperty(e.name)}),e=m.filter(e,function(e,t,n){return!pe(e)||!pe(n[t-1])});return m.filter(e,function(e,t,n){return!pe(e)||0<t&&t<n.length-1})},Le=function(e){for(var t=[],n=function(e){var t,n=[],e=q(e);if(e)for(t in e)n.push(t);else for(t in Pe)n.push(t);return n}(e),r=p.makeMap(e.getParam("removed_menuitems","").split(/[ ,]/)),o=j(e),i="string"==typeof o?o.split(/[ ,]/):n,a=0;a<i.length;a++){var s=i[a],s=function(t,e,n,r){var o,i,a,s;return e?(i=e[r],s=!0):i=Pe[r],i&&(o={text:i.title},a=[],p.each((i.items||"").split(/[ ,]/),function(e){e=Ie(e,t[e]);e&&a.push(e)}),s||p.each(t,function(e,t){e.context!==r||Be(a,t)||("before"===e.separator&&a.push(Oe()),e.prependToContext?a.unshift(Ie(t,e)):a.push(Ie(t,e)),"after"===e.separator&&a.push(Oe()))}),o.menu=m.map(Me(a,n),function(e){return e.item}),!o.menu.length)?null:o}(e.menuItems,q(e),r,s);s&&t.push(s)}return t},Fe=d.DOM,He=ge,ze=function(e,t,n){var r=e.getContentAreaContainer();ge(e,r.clientWidth+t,r.clientHeight+n)},y=tinymce.util.Tools.resolve("tinymce.Env"),Ue=function(e,t,n){var r,e=e.settings[n];e&&e((r=t.getEl("body"),{element:function(){return r}}))},We=function(n,r,e){p.each(e,function(e){var t=r.items().filter("#"+e.name)[0];t&&t.visible()&&e.name!==n&&(Ue(e,t,"onhide"),t.visible(!1))})},$e=function(e){e.items().each(function(e){e.active(!1)})},je=function(e,t){return p.grep(e,function(e){return e.name===t})[0]},qe={hasSidebar:function(e){return!(y.ie&&!(11<=y.ie)||!e.sidebars)&&0<e.sidebars.length},createSidebar:function(n){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:p.map(n.sidebars,function(e){var o,i,a,t=e.settings;return{type:"button",icon:t.icon,image:t.image,tooltip:t.tooltip,onclick:(o=n,i=e.name,a=n.sidebars,function(e){var e=e.control,t=e.parents().filter("panel")[0],n=t.find("#"+i)[0],r=je(a,i);We(i,t,a),$e(e.parent()),n&&n.visible()?(Ue(r,n,"onhide"),n.hide(),e.active(!1)):(n?n.show():(n=h.create({type:"container",name:i,layout:"stack",classes:"sidebar-panel",html:""}),t.prepend(n),Ue(r,n,"onrender")),Ue(r,n,"onshow"),e.active(!0)),f.fireResizeEditor(o)})}})}]}}},Ve=function(e){function t(){e._skinLoaded=!0,f.fireSkinLoaded(e)}return function(){e.initialized?t():e.on("init",t)}},Ke=d.DOM,Ye=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}},Ge=function(t,e,n){var r,o,i,a;return!1===F(t)&&n.skinUiCss?Ke.styleSheetLoader.load(n.skinUiCss,Ve(t)):Ve(t)(),r=e.panel=h.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===M(t)?null:{type:"menubar",border:"0 0 1 0",items:Le(t)},Te(t,L(t))]},qe.hasSidebar(t)?(e=t,{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[Ye("0"),qe.createSidebar(e)]}):Ye("1 0 0 0")]}),xe(t,r),"none"!==H(t)&&(o={type:"resizehandle",direction:H(t),onResizeStart:function(){var e=t.getContentAreaContainer().firstChild;i={width:e.clientWidth,height:e.clientHeight}},onResize:function(e){"both"===H(t)?He(t,i.width+e.deltaX,i.height+e.deltaY):He(t,null,i.height+e.deltaY)}}),t.getParam("statusbar",!0,"boolean")&&(e=K.translate(["Powered by {0}",'<a href="https://www.tinymce.com/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">tinymce</a>']),e=t.getParam("branding",!0,"boolean")?{type:"label",classes:"branding",html:" "+e}:null,r.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:t},o,e]})),f.fireBeforeRenderUI(t),t.on("SwitchMode",(a=r,function(e){a.find("*").disabled("readonly"===e.mode)})),r.renderBefore(n.targetNode).reflow(),t.getParam("readonly",!1,"boolean")&&t.setMode("readonly"),n.width&&Ke.setStyle(r.getEl(),"width",n.width),t.on("remove",function(){r.remove(),r=null}),Y(t,r),Ne(t),{iframeContainer:r.find("#iframe")[0].getEl(),editorContainer:r.getEl()}},b=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),Xe=0,w={id:function(){return"mceu_"+Xe++},create:function(e,t,n){var r=document.createElement(e);return d.DOM.setAttribs(r,t),"string"==typeof n?r.innerHTML=n:p.each(n,function(e){e.nodeType&&r.appendChild(e)}),r},createFragment:function(e){return d.DOM.createFragment(e)},getWindowSize:function(){return d.DOM.getViewPort()},getSize:function(e){var t,n;return n=e.getBoundingClientRect?(n=e.getBoundingClientRect(),t=Math.max(n.width||n.right-n.left,e.offsetWidth),Math.max(n.height||n.bottom-n.bottom,e.offsetHeight)):(t=e.offsetWidth,e.offsetHeight),{width:t,height:n}},getPos:function(e,t){return d.DOM.getPos(e,t||w.getContainer())},getContainer:function(){return y.container||document.body},getViewPort:function(e){return d.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,t){return d.DOM.addClass(e,t)},removeClass:function(e,t){return d.DOM.removeClass(e,t)},hasClass:function(e,t){return d.DOM.hasClass(e,t)},toggleClass:function(e,t,n){return d.DOM.toggleClass(e,t,n)},css:function(e,t,n){return d.DOM.setStyle(e,t,n)},getRuntimeStyle:function(e,t){return d.DOM.getStyle(e,t,!0)},on:function(e,t,n,r){return d.DOM.bind(e,t,n,r)},off:function(e,t,n){return d.DOM.unbind(e,t,n)},fire:function(e,t,n){return d.DOM.fire(e,t,n)},innerHtml:function(e,t){d.DOM.setHTML(e,t)}};function Je(e,t,n){var r,o=Qe(),i=w.getPos(t,Ce(e)),a=i.x,i=i.y;return ye(e)&&ve(document.body)&&(a-=o.x,i-=o.y),o=e.getEl(),o=(e=w.getSize(o)).width,r=e.height,t=(e=w.getSize(t)).width,e=e.height,"b"===(n=(n||"").split(""))[0]&&(i+=e),"r"===n[1]&&(a+=t),"c"===n[0]&&(i+=Math.round(e/2)),"c"===n[1]&&(a+=Math.round(t/2)),"b"===n[3]&&(i-=r),"r"===n[4]&&(a-=o),"c"===n[3]&&(i-=Math.round(r/2)),"c"===n[4]&&(a-=Math.round(o/2)),{x:a,y:i,w:o,h:r}}function Qe(){var e=window,t=Math.max(e.pageXOffset,document.body.scrollLeft,document.documentElement.scrollLeft),n=Math.max(e.pageYOffset,document.body.scrollTop,document.documentElement.scrollTop);return{x:t,y:n,w:t+(e.innerWidth||document.documentElement.clientWidth),h:n+(e.innerHeight||document.documentElement.clientHeight)}}function Ze(e){var t=Ce(e);return t&&!ye(e)?{x:0,y:0,w:t.scrollWidth-1,h:t.scrollHeight-1}:Qe()}var et={testMoveRel:function(e,t){for(var n=Ze(this),r=0;r<t.length;r++){var o=Je(this,e,t[r]);if(ye(this)){if(0<o.x&&o.x+o.w<n.w&&0<o.y&&o.y+o.h<n.h)return t[r]}else if(o.x>n.x&&o.x+o.w<n.w&&o.y>n.y&&o.y+o.h<n.h)return t[r]}return t[0]},moveRel:function(e,t){"string"!=typeof t&&(t=this.testMoveRel(e,t));e=Je(this,e,t);return this.moveTo(e.x,e.y)},moveBy:function(e,t){var n=this.layoutRect();return this.moveTo(n.x+e,n.y+t),this},moveTo:function(e,t){var n,r=this;function o(e,t,n){return e<0||t<e+n&&(e=t-n)<0?0:e}r.settings.constrainToViewport&&(i=Ze(this),n=r.layoutRect(),e=o(e,i.w,n.w),t=o(t,i.h,n.h));var i=Ce(r);return i&&ve(i)&&!ye(r)&&(e-=i.scrollLeft,t-=i.scrollTop),i&&(e+=1,t+=1),r.state.get("rendered")?r.layoutRect({x:e,y:t}).repaint():(r.settings.x=e,r.settings.y=t),r.fire("move",{x:e,y:t}),r}},t=tinymce.util.Tools.resolve("tinymce.util.Class"),tt=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),nt=function(e){var t;if(e)return"number"==typeof e?{top:e=e||0,left:e,bottom:e,right:e}:(1===(t=(e=e.split(" ")).length)?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],10)||0,right:parseInt(e[1],10)||0,bottom:parseInt(e[2],10)||0,left:parseInt(e[3],10)||0})},rt=function(n,e){function t(e){var t=parseFloat((e=e,(t=n.ownerDocument.defaultView)?(t=t.getComputedStyle(n,null))?(e=e.replace(/[A-Z]/g,function(e){return"-"+e}),t.getPropertyValue(e)):null:n.currentStyle[e]));return isNaN(t)?0:t}return{top:t(e+"TopWidth"),right:t(e+"RightWidth"),bottom:t(e+"BottomWidth"),left:t(e+"LeftWidth")}};function ot(){}function it(e){this.cls=[],this.cls._map={},this.onchange=e||ot,this.prefix=""}p.extend(it.prototype,{add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){for(var t=void 0,t=0;t<this.cls.length&&this.cls[t]!==e;t++);this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),it.prototype.toString=function(){if(this.clsValue)return this.clsValue;for(var e="",t=0;t<this.cls.length;t++)0<t&&(e+=" "),e+=this.prefix+this.cls[t];return e};function at(e){this.create=e.create}var st,l,lt=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,ct=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,ut=/^\s*|\s*$/g,dt=t.extend({init:function(e){var o=this.match;function a(e,t,n){function r(e){e&&t.push(e)}return r(function(t){if(t)return t=t.toLowerCase(),function(e){return"*"===t||e.type===t}}((e=lt.exec(e.replace(ut,"")))[1])),r(function(t){if(t)return function(e){return e._name===t}}(e[2])),r(function(n){if(n)return n=n.split("."),function(e){for(var t=n.length;t--;)if(!e.classes.contains(n[t]))return!1;return!0}}(e[3])),r(function(t,n,r){if(t)return function(e){e=e[t]?e[t]():"";return n?"="===n?e===r:"*="===n?0<=e.indexOf(r):"~="===n?0<=(" "+e+" ").indexOf(" "+r+" "):"!="===n?e!==r:"^="===n?0===e.indexOf(r):"$="===n&&e.substr(e.length-r.length)===r:!!r}}(e[4],e[5],e[6])),r(function(r){var t;if(r)return(r=/(?:not\((.+)\))|(.+)/i.exec(r))[1]?(t=s(r[1],[]),function(e){return!o(e,t)}):(r=r[2],function(e,t,n){return"first"===r?0===t:"last"===r?t===n-1:"even"===r?t%2==0:"odd"===r?t%2==1:!!e[r]&&e[r]()})}(e[7])),t.pseudo=!!e[7],t.direct=n,t}function s(e,t){var n,r,o,i=[];do{if(ct.exec(""),(r=ct.exec(e))&&(e=r[3],i.push(r[1]),r[2])){n=r[3];break}}while(r);for(n&&s(n,t),e=[],o=0;o<i.length;o++)">"!==i[o]&&e.push(a(i[o],[],">"===i[o-1]));return t.push(e),t}this._selectors=s(e,[])},match:function(e,t){for(var n,r,o,i,a,s,l,c,u,d,f,m=0,p=(t=t||this._selectors).length;m<p;m++){for(f=e,d=0,n=(r=(o=t[m]).length)-1;0<=n;n--)for(s=o[n];f;){if(s.pseudo)for(l=c=(u=f.parent().items()).length;l--&&u[l]!==f;);for(i=0,a=s.length;i<a;i++)if(!s[i](f,l,c)){i=a+1;break}if(i===a){d++;break}if(n===r-1)break;f=f.parent()}if(d===r)return!0}return!1},find:function(e){var t,n,u=[],r=this._selectors;if(e.items){for(t=0,n=r.length;t<n;t++)!function e(t,n,r){for(var o,i,a,s=n[r],l=0,c=t.length;l<c;l++){for(a=t[l],o=0,i=s.length;o<i;o++)if(!s[o](a,l,c)){o=i+1;break}if(o===i)r===n.length-1?u.push(a):a.items&&e(a.items(),n,r+1);else if(s.direct)return;a.items&&e(a.items(),n,r)}}(e.items(),r[t],0);1<n&&(u=function(e){for(var t,n=[],r=e.length;r--;)(t=e[r]).__checked||(n.push(t),t.__checked=1);for(r=n.length;r--;)delete n[r].__checked;return n}(u))}return new(st=st||dt.Collection)(u)}}),ft=Array.prototype.push,mt=Array.prototype.slice,pt={length:0,init:function(e){e&&this.add(e)},add:function(e){return p.isArray(e)?ft.apply(this,e):e instanceof l?this.add(e.toArray()):ft.call(this,e),this},set:function(e){var t,n=this.length;for(this.length=0,this.add(e),t=this.length;t<n;t++)delete this[t];return this},filter:function(t){for(var e,n=[],r="string"==typeof t?(t=new dt(t),function(e){return t.match(e)}):t,o=0,i=this.length;o<i;o++)r(e=this[o])&&n.push(e);return new l(n)},slice:function(){return new l(mt.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(e){return p.each(this,e),this},toArray:function(){return p.toArray(this)},indexOf:function(e){for(var t=this.length;t--&&this[t]!==e;);return t},reverse:function(){return new l(p.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].classes.contains(e)},prop:function(t,n){var e;return void 0!==n?(this.each(function(e){e[t]&&e[t](n)}),this):(e=this[0])&&e[t]?e[t]():void 0},exec:function(t){var n=p.toArray(arguments).slice(1);return this.each(function(e){e[t]&&e[t].apply(e,n)}),this},remove:function(){for(var e=this.length;e--;)this[e].remove();return this},addClass:function(t){return this.each(function(e){e.classes.add(t)})},removeClass:function(t){return this.each(function(e){e.classes.remove(t)})}},ht=(p.each("fire on off show hide append prepend before after reflow".split(" "),function(n){pt[n]=function(){var t=p.toArray(arguments);return this.each(function(e){n in e&&e[n].apply(e,t)}),this}}),p.each("text name disabled active selected checked visible parent value data".split(" "),function(t){pt[t]=function(e){return this.prop(t,e)}}),l=t.extend(pt),dt.Collection=l),gt=(at.create=function(o,i){return new at({create:function(t,n){function e(e){t.set(n,e.value)}var r;return t.on("change:"+n,function(e){o.set(i,e.value)}),o.on("change:"+i,e),(r=t._bindings)||(r=t._bindings=[],t.on("destroy",function(){for(var e=r.length;e--;)r[e]()})),r.push(function(){o.off("change:"+i,e)}),o.get(i)}})},tinymce.util.Tools.resolve("tinymce.util.Observable"));function vt(e){return 0<e.nodeType}var yt,bt=t.extend({Mixins:[gt],init:function(e){var t,n;for(t in e=e||{})(n=e[t])instanceof at&&(e[t]=n.create(this,t));this.data=e},set:function(e,t){var n,r=this.data[e];if(t instanceof at&&(t=t.create(this,e)),"object"==typeof e)for(n in e)this.set(n,e[n]);else!function e(t,n){var r,o;if(t!==n){if(null===t||null===n)return t===n;if("object"!=typeof t||"object"!=typeof n)return t===n;if(p.isArray(n)){if(t.length!==n.length)return;for(r=t.length;r--;)if(!e(t[r],n[r]))return}if(vt(t)||vt(n))return t===n;for(r in o={},n){if(!e(t[r],n[r]))return;o[r]=!0}for(r in t)if(!o[r]&&!e(t[r],n[r]))return}return 1}(r,t)&&(this.data[e]=t,this.fire("change:"+e,t={target:this,name:e,value:t,oldValue:r}),this.fire("change",t));return this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(e){return at.create(this,e)},destroy:function(){this.fire("destroy")}}),n={},wt={add:function(e){e=e.parent();e&&e._layout&&!e._layout.isNative()&&(n[e._id]||(n[e._id]=e),!yt)&&(yt=!0,c.requestAnimationFrame(function(){var e,t;for(e in yt=!1,n)(t=n[e]).state.get("rendered")&&t.reflow();n={}},document.body))},remove:function(e){n[e._id]&&delete n[e._id]}},xt="onmousewheel"in document,Ct=!1,kt=0,St={Statics:{classPrefix:"mce-"},isRtl:function(){return Rt.rtl},classPrefix:"mce-",init:function(t){var e,n,r=this;function o(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)r.classes.add(e[t])}r.settings=t=p.extend({},r.Defaults,t),r._id=t.id||"mceu_"+kt++,r._aria={role:t.role},r._elmCache={},r.$=b,r.state=new bt({visible:!0,active:!1,disabled:!1,value:""}),r.data=new bt(t.data),r.classes=new it(function(){r.state.get("rendered")&&(r.getEl().className=this.toString())}),r.classes.prefix=r.classPrefix,(e=t.classes)&&(r.Defaults&&(n=r.Defaults.classes)&&e!==n&&o(n),o(e)),p.each("title text name visible disabled active value".split(" "),function(e){e in t&&r[e](t[e])}),r.on("click",function(){if(r.disabled())return!1}),r.settings=t,r.borderBox=nt(t.border),r.paddingBox=nt(t.padding),r.marginBox=nt(t.margin),t.hidden&&r.hide()},Properties:"parent,name",getContainerElm:function(){var e=Ce(this);return e||w.getContainer()},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e,t,n,r,o,i=this,a=i.settings,s=i.getEl(),l=i.borderBox=i.borderBox||rt(s,"border"),c=(i.paddingBox=i.paddingBox||rt(s,"padding"),i.marginBox=i.marginBox||rt(s,"margin"),s=w.getSize(s),t=a.minWidth,n=a.minHeight,e=t||s.width,s=n||s.height,r=a.width,o=a.height,void 0!==(c=a.autoResize)?c:!r&&!o),u=l.left+l.right,l=l.top+l.bottom,d=a.maxWidth||65535,f=a.maxHeight||65535;return i._layoutRect=a={x:a.x||0,y:a.y||0,w:r=r||e,h:o=o||s,deltaW:u,deltaH:l,contentW:r-u,contentH:o-l,innerW:r-u,innerH:o-l,startMinWidth:t||0,startMinHeight:n||0,minW:Math.min(e,d),minH:Math.min(s,f),maxW:d,maxH:f,autoResize:c,scrollW:0},i._lastLayoutRect={},a},layoutRect:function(e){var t,n,r,o=(o=this._layoutRect)||this.initLayoutRect();return e?(t=o.deltaW,n=o.deltaH,void 0!==e.x&&(o.x=e.x),void 0!==e.y&&(o.y=e.y),void 0!==e.minW&&(o.minW=e.minW),void 0!==e.minH&&(o.minH=e.minH),void 0!==(r=e.w)&&(r=(r=r<o.minW?o.minW:r)>o.maxW?o.maxW:r,o.w=r,o.innerW=r-t),void 0!==(r=e.h)&&(r=(r=r<o.minH?o.minH:r)>o.maxH?o.maxH:r,o.h=r,o.innerH=r-n),void 0!==(r=e.innerW)&&(r=(r=r<o.minW-t?o.minW-t:r)>o.maxW-t?o.maxW-t:r,o.innerW=r,o.w=r+t),void 0!==(r=e.innerH)&&(r=(r=r<o.minH-n?o.minH-n:r)>o.maxH-n?o.maxH-n:r,o.innerH=r,o.h=r+n),void 0!==e.contentW&&(o.contentW=e.contentW),void 0!==e.contentH&&(o.contentH=e.contentH),(t=this._lastLayoutRect).x===o.x&&t.y===o.y&&t.w===o.w&&t.h===o.h||((r=Rt.repaintControls)&&r.map&&!r.map[this._id]&&(r.push(this),r.map[this._id]=!0),t.x=o.x,t.y=o.y,t.w=o.w,t.h=o.h),this):o},repaint:function(){var e,t,n,r=this,o=document.createRange?function(e){return e}:Math.round,i=r.getEl().style,a=r._layoutRect,s=r._lastRepaintRect||{},l=r.borderBox,c=l.left+l.right,l=l.top+l.bottom;a.x!==s.x&&(i.left=o(a.x)+"px",s.x=a.x),a.y!==s.y&&(i.top=o(a.y)+"px",s.y=a.y),a.w!==s.w&&(n=o(a.w-c),i.width=(0<=n?n:0)+"px",s.w=a.w),a.h!==s.h&&(n=o(a.h-l),i.height=(0<=n?n:0)+"px",s.h=a.h),r._hasBody&&a.innerW!==s.innerW&&(n=o(a.innerW),(t=r.getEl("body"))&&((e=t.style).width=(0<=n?n:0)+"px"),s.innerW=a.innerW),r._hasBody&&a.innerH!==s.innerH&&(n=o(a.innerH),(t=t||r.getEl("body"))&&((e=e||t.style).height=(0<=n?n:0)+"px"),s.innerH=a.innerH),r._lastRepaintRect=s,r.fire("repaint",{},!1)},updateLayoutRect:function(){this.parent()._lastRect=null,w.css(this.getEl(),{width:"",height:""}),this._layoutRect=this._lastRepaintRect=this._lastLayoutRect=null,this.initLayoutRect()},on:function(e,t){var n,r,o,i=this;return Tt(i).on(e,"string"!=typeof(n=t)?n:function(e){if(r||i.parentsAndSelf().each(function(e){var t=e.settings.callbacks;if(t&&(r=t[n]))return o=e,!1}),r)return r.call(o,e);e.action=n,this.fire("execute",e)}),i},off:function(e,t){return Tt(this).off(e,t),this},fire:function(e,t,n){if((t=t||{}).control||(t.control=this),t=Tt(this).fire(e,t),!1!==n&&this.parent)for(var r=this.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},hasEventListeners:function(e){return Tt(this).has(e)},parents:function(e){for(var t=new ht,n=this.parent();n;n=n.parent())t.add(n);return t=e?t.filter(e):t},parentsAndSelf:function(e){return new ht(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){e=e?this._id+"-"+e:this._id;return this._elmCache[e]||(this._elmCache[e]=b("#"+e)[0]),this._elmCache[e]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this.getEl(this.ariaTarget);return void 0===t?this._aria[e]:(this._aria[e]=t,this.state.get("rendered")&&n.setAttribute("role"===e?e:"aria-"+e,t),this)},encode:function(e,t){return((e=!1!==t?this.translate(e):e)||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return Rt.translate?Rt.translate(e):e},before:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this),!0),this},after:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this)),this},remove:function(){var t,n=this,e=n.getEl(),r=n.parent();if(n.items)for(var o=n.items().toArray(),i=o.length;i--;)o[i].remove();r&&r.items&&(t=[],r.items().each(function(e){e!==n&&t.push(e)}),r.items().set(t),r._lastRect=null),n._eventsRoot&&n._eventsRoot===n&&b(e).off();r=n.getRoot().controlIdLookup;return r&&delete r[n._id],e&&e.parentNode&&e.parentNode.removeChild(e),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(e){return b(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return b(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e,t,n,r=this,o=r.settings;for(t in r.$el=b(r.getEl()),r.state.set("rendered",!0),o)0===t.indexOf("on")&&r.on(t.substr(2),o[t]);if(r._eventsRoot){for(e=r.parent();!n&&e;e=e.parent())n=e._eventsRoot;if(n)for(t in n._nativeEvents)r._nativeEvents[t]=!0}Et(r),o.style&&(a=r.getEl())&&(a.setAttribute("style",o.style),a.style.cssText=o.style),r.settings.border&&(a=r.borderBox,r.$el.css({"border-top-width":a.top,"border-right-width":a.right,"border-bottom-width":a.bottom,"border-left-width":a.left}));var i,a=r.getRoot();for(i in a.controlIdLookup||(a.controlIdLookup={}),(a.controlIdLookup[r._id]=r)._aria)r.aria(i,r._aria[i]);!1===r.state.get("visible")&&(r.getEl().style.display="none"),r.bindStates(),r.state.on("change:visible",function(e){var t,e=e.value;r.state.get("rendered")&&(r.getEl().style.display=!1===e?"none":"",r.getEl().getBoundingClientRect()),(t=r.parent())&&(t._lastRect=null),r.fire(e?"show":"hide"),wt.add(r)}),r.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){var t=this.getEl(),n=t.parentNode,r=function(e,t){for(var n,r=e,o=n=0;r&&r!==t&&r.nodeType;)o+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:o,y:n}}(t,n),o=r.x,r=r.y,i=t.offsetWidth,t=t.offsetHeight,a=n.clientWidth,s=n.clientHeight;return"end"===e?(o-=a-i,r-=s-t):"center"===e&&(o-=a/2-i/2,r-=s/2-t/2),n.scrollLeft=o,n.scrollTop=r,this},getRoot:function(){for(var e=this,t=[];e;){if(e.rootControl){n=e.rootControl;break}t.push(e),e=(n=e).parent()}for(var n=n||this,r=t.length;r--;)t[r].rootControl=n;return n},reflow:function(){wt.remove(this);var e=this.parent();return e&&e._layout&&!e._layout.isNative()&&e.reflow(),this}};function Tt(n){return n._eventDispatcher||(n._eventDispatcher=new tt({scope:n,toggleEvent:function(e,t){t&&tt.isNative(e)&&(n._nativeEvents||(n._nativeEvents={}),n._nativeEvents[e]=!0,n.state.get("rendered"))&&Et(n)}})),n._eventDispatcher}function Et(s){var e,t,n,l,r,o;function i(e){var t=s.getParentCtrl(e.target);t&&t.fire(e.type,e)}function a(){var e=l._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),l._lastHoverCtrl=null)}function c(e){var t,n,r,o=s.getParentCtrl(e.target),i=l._lastHoverCtrl,a=0;if(o!==i){if((n=(l._lastHoverCtrl=o).parents().toArray().reverse()).push(o),i){for((r=i.parents().toArray().reverse()).push(i),a=0;a<r.length&&n[a]===r[a];a++);for(t=r.length-1;a<=t;t--)(i=r[t]).fire("mouseleave",{target:i.getEl()})}for(t=a;t<n.length;t++)(o=n[t]).fire("mouseenter",{target:o.getEl()})}}function u(e){e.preventDefault(),"mousewheel"===e.type?(e.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-.025*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),s.fire("wheel",e)}if(r=s._nativeEvents){for((n=s.parents().toArray()).unshift(s),e=0,t=n.length;!l&&e<t;e++)l=n[e]._eventsRoot;for(l=l||n[n.length-1]||s,s._eventsRoot=l,t=e,e=0;e<t;e++)n[e]._eventsRoot=l;var d=(d=l._delegates)||(l._delegates={});for(o in r){if(!r)return;"wheel"!==o||Ct?("mouseenter"===o||"mouseleave"===o?l._hasMouseEnter||(b(l.getEl()).on("mouseleave",a).on("mouseover",c),l._hasMouseEnter=1):d[o]||(b(l.getEl()).on(o,i),d[o]=!0),r[o]=!1):xt?b(s.getEl()).on("mousewheel",u):b(s.getEl()).on("DOMMouseScroll",u)}}}p.each("text title visible disabled active value".split(" "),function(t){St[t]=function(e){return 0===arguments.length?this.state.get(t):(void 0!==e&&this.state.set(t,e),this)}});function Nt(e){return!!e.getAttribute("data-mce-tabstop")}var Rt,x=Rt=t.extend(St);function _t(e){var i,o,t=e.root;function n(e){return e&&1===e.nodeType}try{i=document.activeElement}catch(e){i=document.body}function a(e){return n(e=e||i)?e.getAttribute("role"):null}function s(e){for(var t,n=e||i;n=n.parentNode;)if(t=a(n))return t}function r(e){var t=i;return n(t)&&t.getAttribute("aria-"+e)}function l(e){e=e.tagName.toUpperCase();return"INPUT"===e||"TEXTAREA"===e||"SELECT"===e}function c(e){var o=[];return function e(t){if(1===t.nodeType&&"none"!==t.style.display&&!t.disabled){var n;(l(n=t)&&!n.hidden||Nt(n)||/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(a(n)))&&o.push(t);for(var r=0;r<t.childNodes.length;r++)e(t.childNodes[r])}}(e||t.getEl()),o}function u(e){var t,n;(n=(e=e||o).parents().toArray()).unshift(e);for(var r=0;r<n.length&&!(t=n[r]).settings.ariaRoot;r++);return t}function d(e,t){return e<0?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function f(e,t){var n=-1,r=u();t=t||c(r.getEl());for(var o=0;o<t.length;o++)t[o]===i&&(n=o);r.lastAriaIndex=d(n+=e,t)}function m(){"tablist"===s()?f(-1,c(i.parentNode)):o.parent().submenu?v():f(-1)}function p(){var e=a(),t=s();"tablist"===t?f(1,c(i.parentNode)):"menuitem"===e&&"menu"===t&&r("haspopup")?y():f(1)}function h(){f(-1)}function g(){var e=a(),t=s();"menuitem"===e&&"menubar"===t?y():"button"===e&&r("haspopup")?y({key:"down"}):f(1)}function v(){o.fire("cancel")}function y(e){o.fire("click",{target:i,aria:e=e||{}})}return o=t.getParentCtrl(i),t.on("keydown",function(e){function t(e,t){l(i)||Nt(i)||"slider"!==a(i)&&!1!==t(e)&&e.preventDefault()}var n,r;if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,m);break;case 39:t(e,p);break;case 38:t(e,h);break;case 40:t(e,g);break;case 27:v();break;case 14:case 13:case 32:t(e,y);break;case 9:n=e,"tablist"===s()?(r=c(o.getEl("body"))[0])&&r.focus():f(n.shiftKey?-1:1),e.preventDefault()}}),t.on("focusin",function(e){i=e.target,o=e.control}),{focusFirst:function(e){var t=c((e=u(e)).getEl());e.settings.ariaRemember&&"lastAriaIndex"in e?d(e.lastAriaIndex,t):d(0,t)}}}var At={},r=x.extend({init:function(e){var t=this;t._super(e),(e=t.settings).fixed&&t.state.set("fixed",!0),t._items=new ht,t.isRtl()&&t.classes.add("rtl"),t.bodyClasses=new it(function(){t.state.get("rendered")&&(t.getEl("body").className=this.toString())}),t.bodyClasses.prefix=t.classPrefix,t.classes.add("container"),t.bodyClasses.add("container-body"),e.containerCls&&t.classes.add(e.containerCls),t._layout=h.create((e.layout||"")+"layout"),t.settings.items?t.add(t.settings.items):t.add(t.render()),t._hasBody=!0},items:function(){return this._items},find:function(e){return(e=At[e]=At[e]||new dt(e)).find(this)},add:function(e){return this.items().add(this.create(e)).parent(this),this},focus:function(e){var t,n;if(!e||!(n=this.keyboardNav||this.parents().eq(-1)[0].keyboardNav))return e=this.find("*"),this.statusbar&&e.add(this.statusbar.items()),e.each(function(e){if(e.settings.autofocus)return t=null,!1;e.canFocus&&(t=t||e)}),t&&t.focus(),this;n.focusFirst(this)},replace:function(e,t){for(var n,r=this.items(),o=r.length;o--;)if(r[o]===e){r[o]=t;break}0<=o&&((n=t.getEl())&&n.parentNode.removeChild(n),n=e.getEl())&&n.parentNode.removeChild(n),t.parent(this)},create:function(e){var t,n=this,r=[];return p.isArray(e)||(e=[e]),p.each(e,function(e){e&&(e instanceof x||(t=p.extend({},n.settings.defaults,e="string"==typeof e?{type:e}:e),e.type=t.type=t.type||e.type||n.settings.defaultType||(t.defaults?t.defaults.type:null),e=h.create(t)),r.push(e))}),r},renderNew:function(){var r=this;return r.items().each(function(e,t){var n;e.parent(r),e.state.get("rendered")||((n=r.getEl("body")).hasChildNodes()&&t<=n.childNodes.length-1?b(n.childNodes[t]).before(e.renderHtml()):b(n).append(e.renderHtml()),e.postRender(),wt.add(e))}),r._layout.applyClasses(r.items().filter(":visible")),r._lastRect=null,r},append:function(e){return this.add(e).renderNew()},prepend:function(e){return this.items().set(this.create(e).concat(this.items().toArray())),this.renderNew()},insert:function(e,t,n){var r;return e=this.create(e),r=this.items(),!n&&t<r.length-1&&(t+=1),0<=t&&t<r.length&&(n=r.slice(0,t).toArray(),t=r.slice(t).toArray(),r.set(n.concat(e,t))),this.renderNew()},fromJSON:function(e){for(var t in e)this.find("#"+t).value(e[t]);return this},toJSON:function(){var n={};return this.find("*").each(function(e){var t=e.name(),e=e.value();t&&void 0!==e&&(n[t]=e)}),n},renderHtml:function(){var e=this._layout,t=this.settings.role;return this.preRender(),e.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"'+(t?' role="'+this.settings.role+'"':"")+'><div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+e.renderHtml(this)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t.state.set("rendered",!0),t.settings.style&&t.$el.css(t.settings.style),t.settings.border&&(e=t.borderBox,t.$el.css({"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),t.parent()||(t.keyboardNav=_t({root:t})),t},initLayoutRect:function(){var e=this._super();return this._layout.recalc(this),e},recalc:function(){var e=this._layoutRect,t=this._lastRect;if(!t||t.w!==e.w||t.h!==e.h)return this._layout.recalc(this),e=this.layoutRect(),this._lastRect={x:e.x,y:e.y,w:e.w,h:e.h},!0},reflow:function(){var e;if(wt.remove(this),this.visible()){for(x.repaintControls=[],x.repaintControls.map={},this.recalc(),e=x.repaintControls.length;e--;)x.repaintControls[e].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),x.repaintControls=[]}return this}});function Dt(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}function C(e,c){var u,d,f,m,p=c.document||document,h=(c=c||{},p.getElementById(c.handle||e)),e=function(e){t=p,n=Math.max,r=t.documentElement,t=t.body,s=n(r.scrollWidth,t.scrollWidth),a=n(r.clientWidth,t.clientWidth),l=n(r.offsetWidth,t.offsetWidth),o=n(r.scrollHeight,t.scrollHeight),i=n(r.clientHeight,t.clientHeight);var t,n,r,o,i,a,s,l={width:s<l?a:s,height:o<n(r.offsetHeight,t.offsetHeight)?i:o};Dt(e),e.preventDefault(),d=e.button,a=h,f=e.screenX,m=e.screenY,s=window.getComputedStyle?window.getComputedStyle(a,null).getPropertyValue("cursor"):a.runtimeStyle.cursor,u=b("<div></div>").css({position:"absolute",top:0,left:0,width:l.width,height:l.height,zIndex:2147483647,opacity:1e-4,cursor:s}).appendTo(p.body),b(p).on("mousemove touchmove",g).on("mouseup touchend",v),c.start(e)},g=function(e){if(Dt(e),e.button!==d)return v(e);e.deltaX=e.screenX-f,e.deltaY=e.screenY-m,e.preventDefault(),c.drag(e)},v=function(e){Dt(e),b(p).off("mousemove touchmove",g).off("mouseup touchend",v),u.remove(),c.stop&&c.stop(e)};this.destroy=function(){b(h).off()},b(h).on("mousedown touchstart",e)}var Pt,Ot,It,Bt,Mt={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){var d=this;function n(){var c,u,e;function t(e,t,n,r,o,i){var a,s,l=d.getEl("scroll"+e);l&&(a=t.toLowerCase(),s=n.toLowerCase(),b(d.getEl("absend")).css(a,d.layoutRect()[r]-1),o?(b(l).css("display","block"),r=d.getEl("body"),o=d.getEl("scroll"+e+"t"),e=r["client"+n]-4,i=(e-=c&&u?l["client"+i]:0)/r["scroll"+n],(n={})[a]=r["offset"+t]+2,n[s]=e,b(l).css(n),(n={})[a]=r["scroll"+t]*i,n[s]=e*i,b(o).css(n)):b(l).css("display","none"))}e=d.getEl("body"),c=e.scrollWidth>e.clientWidth,u=e.scrollHeight>e.clientHeight,t("h","Left","Width","contentW",c,"Height"),t("v","Top","Height","contentH",u,"Width")}function e(o,i,a,s,l){var c,e=d._id+"-scroll"+o,t=d.classPrefix;b(d.getEl()).append('<div id="'+e+'" class="'+t+"scrollbar "+t+"scrollbar-"+o+'"><div id="'+e+'t" class="'+t+'scrollbar-thumb"></div></div>'),d.draghelper=new C(e+"t",{start:function(){c=d.getEl("body")["scroll"+i],b("#"+e).addClass(t+"active")},drag:function(e){var t=d.layoutRect(),n=t.contentW>t.innerW,t=t.contentH>t.innerH,r=d.getEl("body")["client"+a]-4,n=(r-=n&&t?d.getEl("scroll"+o)["client"+l]:0)/d.getEl("body")["scroll"+a];d.getEl("body")["scroll"+i]=c+e["delta"+s]/n},stop:function(){b("#"+e).removeClass(t+"active")}})}d.settings.autoScroll&&(d._hasScroll||(d._hasScroll=!0,d.classes.add("scroll"),e("v","Top","Height","Y","Width"),e("h","Left","Width","X","Height"),d.on("wheel",function(e){var t=d.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,n()}),b(d.getEl("body")).on("scroll",n)),n())}},Lt=r.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[Mt],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),void 0===n?n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}}),Ft={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(e,t){var n;return(e<=1||t<=1)&&(n=w.getWindowSize(),e=e<=1?e*n.w:e,t=t<=1?t*n.h:t),this._layoutRect.autoResize=!1,this.layoutRect({minW:e,minH:t,w:e,h:t}).reflow()},resizeBy:function(e,t){var n=this.layoutRect();return this.resizeTo(n.w+e,n.h+t)}},k=[],S=[];function Ht(e){for(var t=k.length;t--;){var n=k[t],r=n.getParentCtrl(e.target);!n.settings.autohide||r&&(function(e,t){for(;e;){if(e===t)return 1;e=e.parent()}}(r,n)||n.parent()===r)||(e=n.fire("autohide",{target:e.target})).isDefaultPrevented()||n.hide()}}function zt(o){var e=w.getViewPort().y;function t(e,t){for(var n,r=0;r<k.length;r++)if(k[r]!==o)for(n=k[r].parent();n=n&&n.parent();)n===o&&k[r].fixed(e).moveBy(0,t).repaint()}o.settings.autofix&&(o.state.get("fixed")?o._autoFixY>e&&(o.fixed(!1).layoutRect({y:o._autoFixY}).repaint(),t(!1,o._autoFixY-e)):(o._autoFixY=o.layoutRect().y,o._autoFixY<e&&(o.fixed(!0).layoutRect({y:0}).repaint(),t(!0,e-o._autoFixY))))}function Ut(e,t){var n,r,o=T.zIndex||65535;if(e)S.push(t);else for(n=S.length;n--;)S[n]===t&&S.splice(n,1);if(S.length)for(n=0;n<S.length;n++)S[n].modal&&(o++,r=S[n]),S[n].getEl().style.zIndex=o,S[n].zIndex=o,o++;e=b("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];r?b(e).css("z-index",r.zIndex-1):e&&(e.parentNode.removeChild(e),Bt=!1),T.currentZIndex=o}var T=Lt.extend({Mixins:[et,Ft],init:function(e){var t,n,r,o=this;o._super(e),(o._eventsRoot=o).classes.add("floatpanel"),e.autohide&&(Pt||(Pt=function(e){2!==e.button&&Ht(e)},b(document).on("click touchstart",Pt)),It||(t=document.documentElement,n=t.clientWidth,r=t.clientHeight,It=function(){document.all&&n===t.clientWidth&&r===t.clientHeight||(n=t.clientWidth,r=t.clientHeight,T.hideAll())},b(window).on("resize",It)),k.push(o)),e.autofix&&(Ot||(Ot=function(){for(var e=k.length;e--;)zt(k[e])},b(window).on("scroll",Ot)),o.on("move",function(){zt(this)})),o.on("postrender show",function(e){var t,n;e.control===o&&(n=o.classPrefix,o.modal&&!Bt&&((t=b("#"+n+"modal-block",o.getContainerElm()))[0]||(t=b('<div id="'+n+'modal-block" class="'+n+"reset "+n+'fade"></div>').appendTo(o.getContainerElm())),c.setTimeout(function(){t.addClass(n+"in"),b(o.getEl()).addClass(n+"in")}),Bt=!0),Ut(!0,o))}),o.on("show",function(){o.parents().each(function(e){if(e.state.get("fixed"))return o.fixed(!0),!1})}),e.popover&&(o._preBodyHtml='<div class="'+o.classPrefix+'arrow"></div>',o.classes.add("popover").add("bottom").add(o.isRtl()?"end":"start")),o.aria("label",e.ariaLabel),o.aria("labelledby",o._id),o.aria("describedby",o.describedBy||o._id+"-none")},fixed:function(e){var t;return this.state.get("fixed")!==e&&(this.state.get("rendered")&&(t=w.getViewPort(),e?this.layoutRect().y-=t.y:this.layoutRect().y+=t.y),this.classes.toggle("fixed",e),this.state.set("fixed",e)),this},show:function(){for(var e=this._super(),t=k.length;t--&&k[t]!==this;);return-1===t&&k.push(this),e},hide:function(){return Wt(this),Ut(!1,this),this._super()},hideAll:function(){T.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),Ut(!1,this)),this},remove:function(){Wt(this),this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}});function Wt(e){for(var t=k.length;t--;)k[t]===e&&k.splice(t,1);for(t=S.length;t--;)S[t]===e&&S.splice(t,1)}T.hideAll=function(){for(var e=k.length;e--;){var t=k[e];t&&t.settings.autohide&&(t.hide(),k.splice(e,1))}};function $t(e,t){return!(!e||t.settings.ui_container)}var jt=function(i,e,t){function n(){a&&(a.show(),u(),l.addClass(i.getBody(),"mce-edit-focus"))}function r(){a&&(a.hide(),T.hideAll(),l.removeClass(i.getBody(),"mce-edit-focus"))}function o(){a?a.visible()||n():(a=e.panel=h.create({type:s?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:$t(s,i),fixed:$t(s,i),border:1,items:[!1===M(i)?null:{type:"menubar",border:"0 0 1 0",items:Le(i)},Te(i,L(i))]}),xe(i,a),f.fireBeforeRenderUI(i),(s?a.renderTo(s):a.renderTo()).reflow(),Y(i,a),n(),Ne(i),i.on("nodeChange",u),i.on("ResizeWindow",u),i.on("activate",n),i.on("deactivate",r),i.nodeChanged())}var a,s,l=d.DOM,c=i.getParam("fixed_toolbar_container"),u=(c&&(s=l.select(c)[0]),function(){var e,t,n,r,o;a&&a.moveRel&&a.visible()&&!a._fixed&&(n=i.selection.getScrollContainer(),e=i.getBody(),o=r=0,n&&(t=l.getPos(e),n=l.getPos(n),r=Math.max(0,n.x-t.x),o=Math.max(0,n.y-t.y)),a.fixed(!1).moveRel(e,i.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(r,o))});return i.settings.content_editable=!0,i.on("focus",function(){!1===F(i)&&t.skinUiCss?l.styleSheetLoader.load(t.skinUiCss,o,o):o()}),i.on("blur hide",r),i.on("remove",function(){a&&(a.remove(),a=null)}),!1===F(i)&&t.skinUiCss?l.styleSheetLoader.load(t.skinUiCss,Ve(i)):Ve(i)(),{}};function qt(r,o){var i,a,s=this,l=x.classPrefix;s.show=function(e,t){function n(){i&&(b(r).append('<div class="'+l+"throbber"+(o?" "+l+"throbber-inline":"")+'"></div>'),t)&&t()}return s.hide(),i=!0,e?a=c.setTimeout(n,e):n(),s},s.hide=function(){var e=r.lastChild;return c.clearTimeout(a),e&&-1!==e.className.indexOf("throbber")&&e.parentNode.removeChild(e),i=!1,s}}function Vt(e,t){e.getEl().lastChild.textContent=t+(e.progressBar?" "+e.progressBar.value()+"%":"")}var Kt=function(e,t){var n;e.on("ProgressState",function(e){n=n||new qt(t.panel.getEl("body")),e.state?n.show(e.time):n.hide()})},Yt=function(e,t,n){r=(i=e).settings,o=r.skin,r=r.skin_url,!1!==o&&(o=o||"lightgray",r=r?i.documentBaseURI.toAbsolute(r):$.baseURL+"/skins/"+o);var r,o,i=r;return i&&(n.skinUiCss=i+"/skin.min.css",e.contentCSS.push(i+"/content"+(e.inline?".inline":"")+".min.css")),Kt(e,t),(e.getParam("inline",!1,"boolean")?jt:Ge)(e,t,n)},Gt=x.extend({Mixins:[et],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'" role="presentation"><div class="'+e+'tooltip-arrow"></div><div class="'+e+'tooltip-inner">'+this.encode(this.state.get("text"))+"</div></div>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl().lastChild.innerHTML=t.encode(e.value)}),t._super()},repaint:function(){var e=this.getEl().style,t=this._layoutRect;e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}}),o=x.extend({init:function(n){var r=this;r._super(n),n=r.settings,r.canFocus=!0,n.tooltip&&!1!==o.tooltips&&(r.on("mouseenter",function(e){var t=r.tooltip().moveTo(-65535);e.control===r?(e=t.text(n.tooltip).show().testMoveRel(r.getEl(),["bc-tc","bc-tl","bc-tr"]),t.classes.toggle("tooltip-n","bc-tc"===e),t.classes.toggle("tooltip-nw","bc-tl"===e),t.classes.toggle("tooltip-ne","bc-tr"===e),t.moveRel(r.getEl(),e)):t.hide()}),r.on("mouseleave mousedown click",function(){r.tooltip().remove(),r._tooltip=null})),r.aria("label",n.ariaLabel||n.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new Gt({type:"tooltip"}),ke(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var e=this.settings;this._super(),this.parent()||!e.width&&!e.height||(this.initLayoutRect(),this.repaint()),e.autofocus&&this.focus()},bindStates:function(){var t=this;function n(e){t.aria("disabled",e),t.classes.toggle("disabled",e)}function r(e){t.aria("pressed",e),t.classes.toggle("active",e)}return t.state.on("change:disabled",function(e){n(e.value)}),t.state.on("change:active",function(e){r(e.value)}),t.state.get("disabled")&&n(!0),t.state.get("active")&&r(!0),t._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),Xt=o.extend({Defaults:{value:0},init:function(e){this._super(e),this.classes.add("progress"),this.settings.filter||(this.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'"><div class="'+t+'bar-container"><div class="'+t+'bar"></div></div><div class="'+t+'text">0%</div></div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){var t=this;function n(e){e=t.settings.filter(e),t.getEl().lastChild.innerHTML=e+"%",t.getEl().firstChild.firstChild.style.width=e+"%"}return t.state.on("change:value",function(e){n(e.value)}),n(t.state.get("value")),t._super()}}),Jt=x.extend({Mixins:[et],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),t.maxWidth=e.maxWidth,e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||0<e.timeout)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new Xt),t.on("click",function(e){-1!==e.target.className.indexOf(t.classPrefix+"close")&&t.close()})},renderHtml:function(){var e,t=this,n=t.classPrefix,r="",o="",i="";return t.icon&&(r='<i class="'+n+"ico "+n+"i-"+t.icon+'"></i>'),e=' style="max-width: '+t.maxWidth+"px;"+(t.color?"background-color: "+t.color+';"':'"'),t.closeButton&&(o='<button type="button" class="'+n+'close" aria-hidden="true">×</button>'),t.progressBar&&(i=t.progressBar.renderHtml()),'<div id="'+t._id+'" class="'+t.classes+'"'+e+' role="presentation">'+r+'<div class="'+n+'notification-inner">'+t.state.get("text")+"</div>"+i+o+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var e=this;return c.setTimeout(function(){e.$el.addClass(e.classPrefix+"in"),Vt(e,e.state.get("text"))},100),e._super()},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl().firstChild.innerHTML=e.value,Vt(t,e.value)}),t.progressBar&&(t.progressBar.bindStates(),t.progressBar.state.on("change:value",function(e){Vt(t,t.state.get("text"))})),t._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var e=this.getEl().style,t=this._layoutRect;e.left=t.x+"px",e.top=t.y+"px",e.zIndex=65534}});function Qt(r){var o=function(e){return e.inline?e.getElement():e.getContentAreaContainer()};return{open:function(e,t){var e=p.extend(e,{maxWidth:(e=o(r),w.getSize(e).width)}),n=new Jt(e);return 0<(n.args=e).timeout&&(n.timer=setTimeout(function(){n.close(),t()},e.timeout)),n.on("close",function(){t()}),n.renderTo(),n},close:function(e){e.close()},reposition:function(e){var n,t;m.each(e,function(e){e.moveTo(0,0)}),0<(n=e).length&&(e=n.slice(0,1)[0],t=o(r),e.moveRel(t,"tc-tc"),m.each(n,function(e,t){0<t&&e.moveRel(n[t-1].getEl(),"bc-tc")}))},getArgs:function(e){return e.args}}}var E=[],Zt="";function en(e){var t,n=b("meta[name=viewport]")[0];!1!==y.overrideViewPort&&(n||((n=document.createElement("meta")).setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(n)),(t=n.getAttribute("content"))&&void 0!==Zt&&(Zt=t),n.setAttribute("content",e?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":Zt))}function tn(e,t){!function(){for(var e=0;e<E.length;e++)if(E[e]._fullscreen)return 1;return}()||!1!==t||b([document.documentElement,document.body]).removeClass(e+"fullscreen")}var nn,rn=T.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var n=this;n._super(e),n.isRtl()&&n.classes.add("rtl"),n.classes.add("window"),n.bodyClasses.add("window-body"),n.state.set("fixed",!0),e.buttons&&(n.statusbar=new Lt({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:n.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),n.statusbar.classes.add("foot"),n.statusbar.parent(n)),n.on("click",function(e){var t=n.classPrefix+"close";(w.hasClass(e.target,t)||w.hasClass(e.target.parentNode,t))&&n.close()}),n.on("cancel",function(){n.close()}),n.on("move",function(e){e.control===n&&T.hideAll()}),n.aria("describedby",n.describedBy||n._id+"-none"),n.aria("label",e.title),n._fullscreen=!1},recalc:function(){var e,t,n,r,o=this,i=o.statusbar;o._fullscreen&&(o.layoutRect(w.getWindowSize()),o.layoutRect().contentH=o.layoutRect().innerH),o._super(),e=o.layoutRect(),o.settings.title&&!o._fullscreen&&(t=e.headerW)>e.w&&(n=e.x-Math.max(0,t/2),o.layoutRect({w:t,x:n}),r=!0),i&&(i.layoutRect({w:o.layoutRect().innerW}).recalc(),(t=i.layoutRect().minW+e.deltaW)>e.w)&&(n=e.x-Math.max(0,t-e.w),o.layoutRect({w:t,x:n}),r=!0),r&&o.recalc()},initLayoutRect:function(){var e=this._super(),t=0,n=(this.settings.title&&!this._fullscreen&&(n=this.getEl("head"),n=w.getSize(n),e.headerW=n.width,e.headerH=n.height,t+=e.headerH),this.statusbar&&(t+=this.statusbar.layoutRect().h),e.deltaH+=t,e.minH+=t,e.h+=t,w.getWindowSize());return e.x=this.settings.x||Math.max(0,n.w/2-e.w/2),e.y=this.settings.y||Math.max(0,n.h/2-e.h/2),e},renderHtml:function(){var e=this,t=e._layout,n=e._id,r=e.classPrefix,o=e.settings,i="",a="",s=o.html;return e.preRender(),t.preRender(e),o.title&&(i='<div id="'+n+'-head" class="'+r+'window-head"><div id="'+n+'-title" class="'+r+'title">'+e.encode(o.title)+'</div><div id="'+n+'-dragh" class="'+r+'dragh"></div><button type="button" class="'+r+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),void 0===(s=o.url?'<iframe src="'+o.url+'" tabindex="-1"></iframe>':s)&&(s=t.renderHtml(e)),e.statusbar&&(a=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+i+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+s+"</div>"+a+"</div></div>"},fullscreen:function(e){var n,t,r=this,o=document.documentElement,i=r.classPrefix;return e!==r._fullscreen&&(b(window).on("resize",function(){var e,t;r._fullscreen&&(n?r._timer||(r._timer=c.setTimeout(function(){var e=w.getWindowSize();r.moveTo(0,0).resizeTo(e.w,e.h),r._timer=0},50)):(e=(new Date).getTime(),t=w.getWindowSize(),r.moveTo(0,0).resizeTo(t.w,t.h),50<(new Date).getTime()-e&&(n=!0)))}),t=r.layoutRect(),(r._fullscreen=e)?(r._initial={x:t.x,y:t.y,w:t.w,h:t.h},r.borderBox=nt("0"),r.getEl("head").style.display="none",t.deltaH-=t.headerH+2,b([o,document.body]).addClass(i+"fullscreen"),r.classes.add("fullscreen"),e=w.getWindowSize(),r.moveTo(0,0).resizeTo(e.w,e.h)):(r.borderBox=nt(r.settings.border),r.getEl("head").style.display="",t.deltaH+=t.headerH,b([o,document.body]).removeClass(i+"fullscreen"),r.classes.remove("fullscreen"),r.moveTo(r._initial.x,r._initial.y).resizeTo(r._initial.w,r._initial.h))),r.reflow()},postRender:function(){var t,n=this;setTimeout(function(){n.classes.add("in"),n.fire("open")},0),n._super(),n.statusbar&&n.statusbar.postRender(),n.focus(),this.dragHelper=new C(n._id+"-dragh",{start:function(){t={x:n.layoutRect().x,y:n.layoutRect().y}},drag:function(e){n.moveTo(t.x+e.deltaX,t.y+e.deltaY)}}),n.on("submit",function(e){e.isDefaultPrevented()||n.close()}),E.push(n),en(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e;for(this.dragHelper.destroy(),this._super(),this.statusbar&&this.statusbar.remove(),tn(this.classPrefix,!1),e=E.length;e--;)E[e]===this&&E.splice(e,1);en(0<E.length)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}}),N=(y.desktop||(nn={w:window.innerWidth,h:window.innerHeight},c.setInterval(function(){var e=window.innerWidth,t=window.innerHeight;nn.w===e&&nn.h===t||(nn={w:e,h:t},b(window).trigger("resize"))},100)),b(window).on("resize",function(){for(var e,t=w.getWindowSize(),n=0;n<E.length;n++)e=E[n].layoutRect(),E[n].moveTo(E[n].settings.x||Math.max(0,t.w/2-e.w/2),E[n].settings.y||Math.max(0,t.h/2-e.h/2))}),rn.extend({init:function(e){this._super({border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}})},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(e){var t,r=e.callback||function(){};function n(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),r(t)}}}switch(e.buttons){case N.OK_CANCEL:t=[n("Ok",!0,!0),n("Cancel",!1)];break;case N.YES_NO:case N.YES_NO_CANCEL:t=[n("Yes",1,!0),n("No",0)],e.buttons===N.YES_NO_CANCEL&&t.push(n("Cancel",-1));break;default:t=[n("Ok",!0,!0)]}return new rn({padding:20,x:e.x,y:e.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:t,title:e.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:e.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:e.onClose,onCancel:function(){r(!1)}}).renderTo(document.body).reflow()},alert:function(e,t){return(e="string"==typeof e?{text:e}:e).callback=t,N.msgBox(e)},confirm:function(e,t){return(e="string"==typeof e?{text:e}:e).callback=t,e.buttons=N.OK_CANCEL,N.msgBox(e)}}}));function on(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:u.constant(e)}}function an(e){return e.dom().nodeType}function sn(t){return function(e){return an(e)===t}}var ln=function(n){return{renderUI:function(e){return Yt(n,this,e)},resizeTo:function(e,t){return He(n,e,t)},resizeBy:function(e,t){return ze(n,e,t)},getNotificationManagerImpl:function(){return Qt(n)},getWindowManagerImpl:function(){return{open:function(n,e,t){var r;return n.title=n.title||" ",n.url=n.url||n.file,n.url&&(n.width=parseInt(n.width||320,10),n.height=parseInt(n.height||240,10)),n.body&&(n.items={defaults:n.defaults,type:n.bodyType||"form",items:n.body,data:n.data,callbacks:n.commands}),n.url||n.buttons||(n.buttons=[{text:"Ok",subtype:"primary",onclick:function(){r.find("form")[0].submit()}},{text:"Cancel",onclick:function(){r.close()}}]),(r=new rn(n)).on("close",function(){t(r)}),n.data&&r.on("postRender",function(){this.find("*").each(function(e){var t=e.name();t in n.data&&e.value(n.data[t])})}),r.features=n||{},r.params=e||{},r=r.renderTo(document.body).reflow()},alert:function(e,t,n){var r=N.alert(e,function(){t()});return r.on("close",function(){n(r)}),r},confirm:function(e,t,n){var r=N.confirm(e,function(e){t(e)});return r.on("close",function(){n(r)}),r},close:function(e){e.close()},getParams:function(e){return e.params},setParams:function(e,t){e.params=t}}}}},cn=t.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=p.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t,n,r=this.settings,o=r.firstControlClass,i=r.lastControlClass;e.each(function(e){e.classes.remove(o).remove(i).add(r.controlClass),e.visible()&&(t=t||e,n=e)}),t&&t.classes.add(o),n&&n.classes.add(i)},renderHtml:function(e){var t="";return this.applyClasses(e.items()),e.items().each(function(e){t+=e.renderHtml()}),t},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),un=cn.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}}),dn=o.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n._super(e),e=n.settings,t=n.settings.size,n.on("click mousedown",function(e){e.preventDefault()}),n.on("touchstart",function(e){n.fire("click",e),e.preventDefault()}),e.subtype&&n.classes.add(e.subtype),t&&n.classes.add("btn-"+t),e.icon&&n.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e=this.getEl().firstChild;e&&((e=e.style).width=e.height="100%"),this._super()},renderHtml:function(){var e=this._id,t=this.classPrefix,n=this.state.get("icon"),r=this.state.get("text"),o="",i=this.settings,a=i.image;return a=a?(n="none"," style=\"background-image: url('"+(a="string"!=typeof a?window.getSelection?a[0]:a[1]:a)+"')\""):"",r&&(this.classes.add("btn-has-text"),o='<span class="'+t+'txt">'+this.encode(r)+"</span>"),r="boolean"==typeof i.active?' aria-pressed="'+i.active+'"':"",'<div id="'+e+'" class="'+this.classes+'" tabindex="-1"'+r+'><button id="'+e+'-button" role="presentation" type="button" tabindex="-1">'+((n=n?t+"ico "+t+"i-"+n:"")?'<i class="'+n+'"'+a+"></i>":"")+o+"</button></div>"},bindStates:function(){var r=this,n=r.$,o=r.classPrefix+"txt";function i(e){var t=n("span."+o,r.getEl());e?(t[0]||(n("button:first",r.getEl()).append('<span class="'+o+'"></span>'),t=n("span."+o,r.getEl())),t.html(r.encode(e))):t.remove(),r.classes.toggle("btn-has-text",!!e)}return r.state.on("change:text",function(e){i(e.value)}),r.state.on("change:icon",function(e){var e=e.value,t=r.classPrefix,t=(e=(r.settings.icon=e)?t+"ico "+t+"i-"+r.settings.icon:"",r.getEl().firstChild),n=t.getElementsByTagName("i")[0];e?(n&&n===t.firstChild||(n=document.createElement("i"),t.insertBefore(n,t.firstChild)),n.className=e):n&&t.removeChild(n),i(r.state.get("text"))}),r._super()}}),fn=dn.extend({init:function(e){e=p.extend({text:"Browse...",multiple:!1,accept:null},e),this._super(e),this.classes.add("browsebutton"),e.multiple&&this.classes.add("multiple")},postRender:function(){var n=this,t=w.create("input",{type:"file",id:n._id+"-browse",accept:n.settings.accept});n._super(),b(t).on("change",function(e){var t=e.target.files;n.value=function(){return t.length?n.settings.multiple?t:t[0]:null},e.preventDefault(),t.length&&n.fire("change",e)}),b(t).on("click",function(e){e.stopPropagation()}),b(n.getEl("button")).on("click",function(e){e.stopPropagation(),t.click()}),n.getEl().appendChild(t)},remove:function(){b(this.getEl("button")).off(),b(this.getEl("input")).off(),this._super()}}),mn=r.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this._layout;return this.classes.add("btn-group"),this.preRender(),e.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+(this.settings.html||"")+e.renderHtml(this)+"</div></div>"}}),pn=o.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'" unselectable="on" aria-labelledby="'+e+'-al" tabindex="-1"><i class="'+t+"ico "+t+'i-checkbox"></i><span id="'+e+'-al" class="'+t+'label">'+this.encode(this.state.get("text"))+"</span></div>"},bindStates:function(){var r=this;function t(e){r.classes.toggle("checked",e),r.aria("checked",e)}return r.state.on("change:text",function(e){r.getEl("al").firstChild.data=r.translate(e.value)}),r.state.on("change:checked change:value",function(e){r.fire("change"),t(e.value)}),r.state.on("change:icon",function(e){var e=e.value,t=r.classPrefix;if(void 0===e)return r.settings.icon;var e=(r.settings.icon=e)?t+"ico "+t+"i-"+r.settings.icon:"",t=r.getEl().firstChild,n=t.getElementsByTagName("i")[0];e?(n&&n===t.firstChild||(n=document.createElement("i"),t.insertBefore(n,t.firstChild)),n.className=e):n&&t.removeChild(n)}),r.state.get("checked")&&t(!0),r._super()}}),hn=tinymce.util.Tools.resolve("tinymce.util.VK"),gn=o.extend({init:function(r){var o=this;o._super(r),r=o.settings,o.classes.add("combobox"),o.subinput=!0,o.ariaTarget="inp",r.menu=r.menu||r.values,r.menu&&(r.icon="caret"),o.on("click",function(e){var t=e.target,n=o.getEl();if(b.contains(n,t)||t===n)for(;t&&t!==n;)t.id&&-1!==t.id.indexOf("-open")&&(o.fire("action"),r.menu)&&(o.showMenu(),e.aria)&&o.menu.items()[0].focus(),t=t.parentNode}),o.on("keydown",function(e){var t;13===e.keyCode&&"INPUT"===e.target.nodeName&&(e.preventDefault(),o.parents().reverse().each(function(e){if(e.toJSON)return t=e,!1}),o.fire("submit",{data:t.toJSON()}))}),o.on("keyup",function(e){var t,n;"INPUT"===e.target.nodeName&&(t=o.state.get("value"),(n=e.target.value)!==t)&&(o.state.set("value",n),o.fire("autocomplete",e))}),o.on("mouseover",function(e){var t,n=o.tooltip().moveTo(-65535);o.statusLevel()&&-1!==e.target.className.indexOf(o.classPrefix+"status")&&(t=o.statusMessage()||"Ok",t=n.text(t).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]),n.classes.toggle("tooltip-n","bc-tc"===t),n.classes.toggle("tooltip-nw","bc-tl"===t),n.classes.toggle("tooltip-ne","bc-tr"===t),n.moveRel(e.target,t))})},statusLevel:function(e){return 0<arguments.length&&this.state.set("statusLevel",e),this.state.get("statusLevel")},statusMessage:function(e){return 0<arguments.length&&this.state.set("statusMessage",e),this.state.get("statusMessage")},showMenu:function(){var t=this,e=t.settings;t.menu||((e=e.menu||[]).length?e={type:"menu",items:e}:e.type=e.type||"menu",t.menu=h.create(e).parent(t).renderTo(t.getContainerElm()),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",function(e){e.control===t.menu&&t.focus()}),t.menu.on("show hide",function(e){e.control.items().each(function(e){e.active(e.value()===t.value())})}).fire("show"),t.menu.on("select",function(e){t.value(e.control.value())}),t.on("focusin",function(e){"INPUT"===e.target.tagName.toUpperCase()&&t.menu.hide()}),t.aria("expanded",!0)),t.menu.show(),t.menu.layoutRect({w:t.layoutRect().w}),t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var e,t=this.getEl(),n=this.getEl("open"),r=this.layoutRect(),o=0,t=t.firstChild,r=(this.statusLevel()&&"none"!==this.statusLevel()&&(o=parseInt(w.getRuntimeStyle(t,"padding-right"),10)-parseInt(w.getRuntimeStyle(t,"padding-left"),10)),n=n?r.w-w.getSize(n).width-10:r.w-10,document);return r.all&&(!r.documentMode||r.documentMode<=8)&&(e=this.layoutRect().h-2+"px"),b(t).css({width:n-o,lineHeight:e}),this._super(),this},postRender:function(){var t=this;return b(this.getEl("inp")).on("change",function(e){t.state.set("value",e.target.value),t.fire("change",e)}),t._super()},renderHtml:function(){var e,t,n,r=this,o=r._id,i=r.settings,a=r.classPrefix,s=r.state.get("value")||"",l="",c="";return"spellcheck"in i&&(c+=' spellcheck="'+i.spellcheck+'"'),i.maxLength&&(c+=' maxlength="'+i.maxLength+'"'),i.size&&(c+=' size="'+i.size+'"'),i.subtype&&(c+=' type="'+i.subtype+'"'),n='<i id="'+o+'-status" class="mce-status mce-ico" style="display: none"></i>',r.disabled()&&(c+=' disabled="disabled"'),(e=i.icon)&&"caret"!==e&&(e=a+"ico "+a+"i-"+i.icon),t=r.state.get("text"),(e||t)&&(l='<div id="'+o+'-open" class="'+a+"btn "+a+'open" tabIndex="-1" role="button"><button id="'+o+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==e?'<i class="'+e+'"></i>':'<i class="'+a+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",r.classes.add("has-open")),'<div id="'+o+'" class="'+r.classes+'"><input id="'+o+'-inp" class="'+a+'textbox" value="'+r.encode(s,!1)+'" hidefocus="1"'+c+' placeholder="'+r.encode(i.placeholder)+'" />'+n+l+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(e,r){var o=this;0===e.length?o.hideMenu():(o.menu?o.menu.items().remove():o.menu=h.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(o).renderTo(),p.each(e,function(e){var t,n;o.menu.add({text:e.title,url:e.previewUrl,match:r,classes:"menu-item-ellipsis",onclick:(t=e.value,n=e.title,function(){o.fire("selectitem",{title:n,value:t})})})}),o.menu.renderNew(),o.hideMenu(),o.menu.on("cancel",function(e){e.control.parent()===o.menu&&(e.stopPropagation(),o.focus(),o.hideMenu())}),o.menu.on("select",function(){o.focus()}),e=o.layoutRect().w,o.menu.layoutRect({w:e,minW:0,maxW:e}),o.menu.repaint(),o.menu.reflow(),o.menu.show(),o.menu.moveRel(o.getEl(),o.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]))},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){function n(e,t){t&&0<t.items().length&&t.items().eq(e)[0].focus()}var r=this;r.state.on("change:value",function(e){r.getEl("inp").value!==e.value&&(r.getEl("inp").value=e.value)}),r.state.on("change:disabled",function(e){r.getEl("inp").disabled=e.value}),r.state.on("change:statusLevel",function(e){var t=r.getEl("status"),n=r.classPrefix,e=e.value;w.css(t,"display","none"===e?"none":""),w.toggleClass(t,n+"i-checkmark","ok"===e),w.toggleClass(t,n+"i-warning","warn"===e),w.toggleClass(t,n+"i-error","error"===e),r.classes.toggle("has-status","none"!==e),r.repaint()}),w.on(r.getEl("status"),"mouseleave",function(){r.tooltip().hide()}),r.on("cancel",function(e){r.menu&&r.menu.visible()&&(e.stopPropagation(),r.hideMenu())});return r.on("keydown",function(e){var t=e.keyCode;"INPUT"===e.target.nodeName&&(t===hn.DOWN?(e.preventDefault(),r.fire("autocomplete"),n(0,r.menu)):t===hn.UP&&(e.preventDefault(),n(-1,r.menu)))}),r._super()},remove:function(){b(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),vn=gn.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl("open"),t=t?t.getElementsByTagName("i")[0]:null;if(t)try{t.style.background=e}catch(e){}},bindStates:function(){var t=this;return t.state.on("change:value",function(e){t.state.get("rendered")&&t.repaintColor(e.value)}),t._super()}}),yn=dn.extend({showPanel:function(){var t=this,e=t.settings,n=(t.classes.add("opened"),t.panel?t.panel.show():((n=(n=e.panel).type?{layout:"grid",items:n}:n).role=n.role||"dialog",n.popover=!0,n.autohide=!0,n.ariaRoot=!0,t.panel=new T(n).on("hide",function(){t.classes.remove("opened")}).on("cancel",function(e){e.stopPropagation(),t.focus(),t.hidePanel()}).parent(t).renderTo(t.getContainerElm()),t.panel.fire("show"),t.panel.reflow()),t.panel.testMoveRel(t.getEl(),e.popoverAlign||(t.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"]))),e=(t.panel.classes.toggle("start","l"===n.substr(-1)),t.panel.classes.toggle("end","r"===n.substr(-1)),"t"===n.substr(0,1));t.panel.classes.toggle("bottom",!e),t.panel.classes.toggle("top",e),t.panel.moveRel(t.getEl(),n)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var t=this;return t.aria("haspopup",!0),t.on("click",function(e){e.control===t&&(t.panel&&t.panel.visible()?t.hidePanel():(t.showPanel(),t.panel.focus(!!e.aria)))}),t._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),bn=d.DOM,wn=yn.extend({init:function(e){this._super(e),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.state.get("text"),o=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",i=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"",a="";return r&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(r)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+i+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+a+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var t=this,n=t.settings.onclick;return t.on("click",function(e){e.aria&&"down"===e.aria.key||e.control!==t||bn.getParent(e.target,"."+t.classPrefix+"open")||(e.stopImmediatePropagation(),n.call(t,e))}),delete t.settings.onclick,t._super()}}),xn=tinymce.util.Tools.resolve("tinymce.util.Color"),Cn=o.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){var t,n,r,o,i,a=this,s=a.color();function l(e,t){var n=w.getPos(e),r=t.pageX-n.x,t=t.pageY-n.y;return{x:Math.max(0,Math.min(r/e.clientWidth,1)),y:Math.max(0,Math.min(t/e.clientHeight,1))}}function c(e,t){var n=(360-e.h)/360;w.css(r,{top:100*n+"%"}),t||w.css(i,{left:e.s+"%",top:100-e.v+"%"}),o.style.background=xn({s:100,v:100,h:e.h}).toHex(),a.color().parse({s:e.s,v:e.v,h:e.h})}function e(e){e=l(o,e);t.s=100*e.x,t.v=100*(1-e.y),c(t),a.fire("change")}function u(e){e=l(n,e);(t=s.toHsv()).h=360*(1-e.y),c(t,!0),a.fire("change")}n=a.getEl("h"),r=a.getEl("hp"),o=a.getEl("sv"),i=a.getEl("svp"),a._repaint=function(){c(t=s.toHsv())},a._super(),a._svdraghelper=new C(a._id+"-sv",{start:e,drag:e}),a._hdraghelper=new C(a._id+"-h",{start:u,drag:u}),a._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){if(!arguments.length)return this.color().toHex();this.color().parse(e),this._rendered&&this._repaint()},color:function(){return this._color||(this._color=xn()),this._color},renderHtml:function(){var e=this._id,i=this.classPrefix,a="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";var t='<div id="'+e+'-h" class="'+i+'colorpicker-h" style="background: -ms-linear-gradient(top,#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000);background: linear-gradient(to bottom,#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000);">'+function(){for(var e="",t="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",n=a.split(","),r=0,o=n.length-1;r<o;r++)e+='<div class="'+i+'colorpicker-h-chunk" style="height:'+100/o+"%;"+t+n[r]+",endColorstr="+n[r+1]+");-ms-"+t+n[r]+",endColorstr="+n[r+1]+')"></div>';return e}()+'<div id="'+e+'-hp" class="'+i+'colorpicker-h-marker"></div></div>';return'<div id="'+e+'" class="'+this.classes+'"><div id="'+e+'-sv" class="'+i+'colorpicker-sv"><div class="'+i+'colorpicker-overlay1"><div class="'+i+'colorpicker-overlay2"><div id="'+e+'-svp" class="'+i+'colorpicker-selector1"><div class="'+i+'colorpicker-selector2"></div></div></div></div></div>'+t+"</div>"}}),kn=o.extend({init:function(e){e=p.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},e),this._super(e),this.classes.add("dropzone"),e.multiple&&this.classes.add("multiple")},renderHtml:function(){var e=this.settings,t={id:this._id,hidefocus:"1"},t=w.create("div",t,"<span>"+this.translate(e.text)+"</span>");return e.height&&w.css(t,"height",e.height+"px"),e.width&&w.css(t,"width",e.width+"px"),t.className=this.classes,t.outerHTML},postRender:function(){function e(e){e.preventDefault(),i.classes.toggle("dragenter"),i.getEl().className=i.classes}var i=this;i._super(),i.$el.on("dragover",function(e){e.preventDefault()}),i.$el.on("dragenter",e),i.$el.on("dragleave",e),i.$el.on("drop",function(e){var t,n,r,o;e.preventDefault(),i.state.get("disabled")||(n=e.dataTransfer.files,t="string"!=typeof(o=i.settings.accept)?n:(r=new RegExp("("+o.split(/\s*,\s*/).join("|")+")$","i"),p.grep(n,function(e){return r.test(e.name)})),i.value=function(){return t.length?i.settings.multiple?t:t[0]:null},t.length&&i.fire("change",e))})},remove:function(){this.$el.off(),this._super()}}),Sn=o.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="»"),t._super(e),t.classes.add("path"),t.canFocus=!0,t.on("click",function(e){(e=e.target.getAttribute("data-index"))&&t.fire("select",{value:t.row()[e],index:e})}),t.row(t.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"</div>"},bindStates:function(){var t=this;return t.state.on("change:row",function(e){t.innerHtml(t._getDataPathHtml(e.value))}),t._super()},_getDataPathHtml:function(e){for(var t=e||[],n="",r=this.classPrefix,o=0,i=t.length;o<i;o++)n+=(0<o?'<div class="'+r+'divider" aria-hidden="true"> '+this.settings.delimiter+" </div>":"")+'<div role="button" class="'+r+"path-item"+(o===i-1?" "+r+"last":"")+'" data-index="'+o+'" tabindex="-1" id="'+this._id+"-"+o+'" aria-level="'+(o+1)+'">'+t[o].name+"</div>";return n=n||'<div class="'+r+'path-item"> </div>'}}),Tn=Sn.extend({postRender:function(){var i=this,a=i.settings.editor;return!1!==a.settings.elementpath&&(i.on("select",function(e){a.focus(),a.selection.select(this.row()[e.index].element),a.nodeChanged()}),a.on("nodeChange",function(e){for(var t=[],n=e.parents,r=n.length;r--;)if(1===n[r].nodeType&&!function(e){if(1===e.nodeType){if("BR"===e.nodeName||e.getAttribute("data-mce-bogus"))return 1;if("bookmark"===e.getAttribute("data-mce-type"))return 1}}(n[r])){var o=a.fire("ResolveName",{name:n[r].nodeName.toLowerCase(),target:n[r]});if(o.isDefaultPrevented()||t.push({name:o.name,element:n[r]}),o.isPropagationStopped())break}i.row(t)})),i._super()}}),En=r.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.classes.add("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}}),Nn=r.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var n=this,e=n.items();n.settings.formItemDefaults||(n.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),e.each(function(e){var t=e.settings.label;t&&((t=new En(p.extend({items:{type:"label",id:e._id+"-l",text:t,flex:0,forId:e._id,disabled:e.disabled()}},n.settings.formItemDefaults))).type="formitem",e.aria("labelledby",e._id+"-l"),void 0===e.settings.flex&&(e.settings.flex=1),n.replace(e,t),t.add(e))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super(),this.fromJSON(this.settings.data)},bindStates:function(){var o=this;function e(){var e,t,n=0,r=[];if(!1!==o.settings.labelGapCalc)for(("children"===o.settings.labelGapCalc?o.find("formitem"):o.items()).filter("formitem").each(function(e){var e=e.items()[0],t=e.getEl().clientWidth;n=n<t?t:n,r.push(e)}),t=o.settings.labelGap||0,e=r.length;e--;)r[e].settings.minWidth=n+t}o._super(),o.on("show",e),e()}}),Rn=Nn.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}}),_n=0,An=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++_n+String(t)},R={fromHtml:function(e,t){t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",e),"HTML must have a single root node";return on(t.childNodes[0])},fromTag:function(e,t){t=(t||document).createElement(e);return on(t)},fromText:function(e,t){t=(t||document).createTextNode(e);return on(t)},fromDom:on,fromPoint:function(e,t,n){return s.from(e.dom().elementFromPoint(t,n)).map(on)}},gt=function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(null,arguments)),t}},t=9,Dn=1,Pn=(sn(Dn),sn(3),sn(t),gt(function(){return Pn(R.fromDom(document))}),function(e){e=e.dom().body;if(null==e)throw"Body is not available yet";return R.fromDom(e)});function On(n,r){var o={};return Fn(n,function(e,t){e=r(e,t,n);o[e.k]=e.v}),o}function In(e,n){var r=[];return Fn(e,function(e,t){r.push(n(e,t))}),r}function Bn(e){return In(e,function(e){return e})}function Mn(e){return e.slice(0).sort()}var Ln=void 0===(Kn=Object.keys)?function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n}:Kn,Fn=function(e,t){for(var n=Ln(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i,e)}},Hn={bifilter:function(e,n){var r={},o={};return Fn(e,function(e,t){(n(e,t)?r:o)[t]=e}),{t:r,f:o}},each:Fn,map:function(e,r){return On(e,function(e,t,n){return{k:t,v:r(e,t,n)}})},mapToArray:In,tupleMap:On,find:function(e,t){for(var n=Ln(e),r=0,o=n.length;r<o;r++){var i=n[r],a=e[i];if(t(a,i,e))return s.some(a)}return s.none()},keys:Ln,values:Bn,size:function(e){return Bn(e).length}},zn=function(e,t){throw new Error("All required keys ("+Mn(e).join(", ")+") were not specified. Specified keys were: "+Mn(t).join(", ")+".")},Un=function(e){throw new Error("Unsupported keys for object: "+Mn(e).join(", "))},Wn=function(t,e){if(!a.isArray(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");m.each(e,function(e){if(!a.isString(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")})},$n=function(e){var n=Mn(e);m.find(n,function(e,t){return t<n.length-1&&e===n[t+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+n.join(", ")+"].")})};function jn(){return Gn(0,0)}function qn(e){var t=e.current;return{current:t,version:e.version,isEdge:_(Qn,t),isChrome:_(Zn,t),isIE:_(er,t),isOpera:_(tr,t),isFirefox:_(nr,t),isSafari:_(rr,t)}}function Vn(e){var t=e.current;return{current:t,version:e.version,isWindows:A(ar,t),isiOS:A(sr,t),isAndroid:A(lr,t),isOSX:A(ur,t),isLinux:A(cr,t),isSolaris:A(dr,t),isFreeBSD:A(fr,t)}}var Kn={immutable:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(t.length!==n.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+n.length+" arguments");var r={};return m.each(t,function(e,t){r[e]=u.constant(n[t])}),r}},immutableBag:function(o,i){var a=o.concat(i);if(0===a.length)throw new Error("You must specify at least one required or optional field.");return Wn("required",o),Wn("optional",i),$n(a),function(t){var n=Hn.keys(t),e=(m.forall(o,function(e){return m.contains(n,e)})||zn(o,n),m.filter(n,function(e){return!m.contains(a,e)})),r=(0<e.length&&Un(e),{});return m.each(o,function(e){r[e]=u.constant(t[e])}),m.each(i,function(e){r[e]=u.constant(Object.prototype.hasOwnProperty.call(t,e)?s.some(t[e]):s.none())}),r}}},Yn=("undefined"!=typeof window||Function("return this;")(),function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}),Gn=function(e,t){return{major:e,minor:t}},Xn=function(e,t){var n,r,t=String(t).toLowerCase();return 0===e.length?jn():(r=Yn(e=e,n=t))?Gn((e=function(e){return Number(n.replace(r,"$"+e))})(1),e(2)):{major:0,minor:0}},Jn=jn,Qn="Edge",Zn="Chrome",er="IE",tr="Opera",nr="Firefox",rr="Safari",_=function(e,t){return function(){return t===e}},or=function(){return qn({current:void 0,version:Jn()})},ir=qn,ar=(u.constant(Qn),u.constant(Zn),u.constant(er),u.constant(tr),u.constant(nr),u.constant(rr),"Windows"),sr="iOS",lr="Android",cr="Linux",ur="OSX",dr="Solaris",fr="FreeBSD",A=function(e,t){return function(){return t===e}},mr=function(){return Vn({current:void 0,version:Jn()})},pr=Vn;u.constant(ar),u.constant(sr),u.constant(lr),u.constant(cr),u.constant(ur),u.constant(dr),u.constant(fr);function hr(e,t){var n=String(t).toLowerCase();return m.find(e,function(e){return e.search(n)})}function D(t){return function(e){return P(e,t)}}function gr(e){return e.nodeType!==Ir&&e.nodeType!==Br||0===e.childElementCount}function vr(e,t){return e.dom()===t.dom()}function yr(t){return function(e){if(e&&1===e.nodeType){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}}function br(e,t,n,r,o){return{type:e,title:t,url:n,level:r,attach:o}}function wr(e){return e.innerText||e.textContent}function xr(e){return e&&/^(H[1-6])$/.test(e.nodeName)}function Cr(e){return Ur(e)&&!zr(e)}function kr(e){return 0<Fr(e.title).length}function Sr(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}}function Tr(e,n,t,r){function o(e){return e=e.hasOwnProperty(t)?e[t]:[],e=m.filter(e,function(e){return Jr(e,n)}),p.map(e,function(e){return{title:e,value:{title:e,url:e,attach:u.noop}}})}function i(t){var e=m.filter(n,function(e){return e.type===t});return Gr(e)}var a,s,l={title:"-"};return!1===r.typeahead_urls?[]:"file"===t?(s=[Zr(e,o(I)),Zr(e,i("header")),Zr(e,(a=i("anchor"),s=Qr(r,"anchor_top","#top"),r=Qr(r,"anchor_bottom","#bottom"),null!==s&&a.unshift(Xr("<top>",s)),null!==r&&a.push(Xr("<bottom>",r)),a))],m.foldl(s,function(e,t){return 0===e.length||0===t.length?e.concat(t):e.concat(l,t)},[])):Zr(e,o(I))}function Er(r,n,o,i){function t(e){var t=Kr(o),t=Tr(e,t,i,n);r.showAutoComplete(t,e)}r.on("autocomplete",function(){t(r.value())}),r.on("selectitem",function(e){var e=e.value,t=(r.value(e.url),function(e){e=e.title;return e.raw||e}(e));"image"===i?r.fire("change",{meta:{alt:t,attach:e.attach}}):r.fire("change",{meta:{text:t,attach:e.attach}}),r.focus()}),r.on("click",function(e){0===r.value().length&&"INPUT"===e.target.nodeName&&t("")}),r.on("PostRender",function(){r.getRoot().on("submit",function(e){var t,n;e.isDefaultPrevented()||(e=r.value(),n=I[t=i],/^https?/.test(e)&&(n?m.indexOf(n,e).isNone()&&(I[t]=n.slice(0,Yr).concat(e)):I[t]=[e]))})})}function Nr(n,e,t){var r,o=e.filepicker_validator_handler;o&&(r=function(e){0===e.length?n.statusLevel("none"):o({url:e,type:t},function(e){t=(e=e).status,e=e.message;var t="valid"===t?{status:"ok",message:e}:"unknown"===t||"invalid"===t?{status:"warn",message:e}:{status:"none",message:""};n.statusMessage(t.message),n.statusLevel(t.status)})},n.state.on("change:value",function(e){r(e.value)}))}var Rr=function(e,n){return hr(e,n).map(function(e){var t=Xn(e.versionRegexes,n);return{current:e.name,version:t}})},_r=function(e,n){return hr(e,n).map(function(e){var t=Xn(e.versionRegexes,n);return{current:e.name,version:t}})},P=function(e,t){return-1!==e.indexOf(t)},Ar=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ar=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return P(e,"edge/")&&P(e,"chrome")&&P(e,"safari")&&P(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ar],search:function(e){return P(e,"chrome")&&!P(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return P(e,"msie")||P(e,"trident")}},{name:"Opera",versionRegexes:[Ar,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:D("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:D("firefox")},{name:"Safari",versionRegexes:[Ar,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(P(e,"safari")||P(e,"mobile/"))&&P(e,"applewebkit")}}],Dr=[{name:"Windows",search:D("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return P(e,"iphone")||P(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:D("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:D("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:D("linux"),versionRegexes:[]},{name:"Solaris",search:D("sunos"),versionRegexes:[]},{name:"FreeBSD",search:D("freebsd"),versionRegexes:[]}],Pr={browsers:u.constant(Ar),oses:u.constant(Dr)},Or=function(e){var t,n,r,o,i,a,s,l=Pr.browsers(),c=Pr.oses(),l=Rr(l,e).fold(or,ir),c=_r(c,e).fold(mr,pr),e=(n=l,e=e,r=(t=c).isiOS()&&!0===/ipad/i.test(e),o=t.isiOS()&&!r,i=t.isAndroid()&&3===t.version.major,a=t.isAndroid()&&4===t.version.major,i=r||i||a&&!0===/mobile/i.test(e),s=(a=t.isiOS()||t.isAndroid())&&!i,n=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(e),{isiPad:u.constant(r),isiPhone:u.constant(o),isTablet:u.constant(i),isPhone:u.constant(s),isTouch:u.constant(a),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:u.constant(n)});return{browser:l,os:c,deviceType:e}},Ar=gt(function(){var e=navigator.userAgent;return Or(e)}),Ir=Dn,Br=t,O={all:function(e,t){t=void 0===t?document:t.dom();return gr(t)?[]:m.map(t.querySelectorAll(e),R.fromDom)},is:function(e,t){e=e.dom();if(e.nodeType!==Ir)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},one:function(e,t){t=void 0===t?document:t.dom();return gr(t)?s.none():s.from(t.querySelector(e)).map(R.fromDom)}},Mr=({detect:Ar}.detect().browser.isIE(),vr),Lr=(Kn.immutable("element","offset"),function(e,t){return O.all(t,e)}),Fr=p.trim,Hr=yr("true"),zr=yr("false"),Ur=function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return Hr(e)}return!1},Wr=function(e,t){return m.map(Lr(R.fromDom(t),e),function(e){return e.dom()})},$r=function(e){return(t=e)&&"A"===t.nodeName&&(t.id||t.name)&&Cr(e);var t},jr=function(e){return xr(e)&&Cr(e)},qr=function(e){var t,n=e.id||An("h");return br("header",wr(e),"#"+n,xr(t=e)?parseInt(t.nodeName.substr(1),10):0,function(){e.id=n})},Vr=function(e){var t=e.id||e.name,e=wr(e);return br("anchor",e||"#"+t,"#"+t,0,u.noop)},Kr=function(e){e=Wr("h1,h2,h3,h4,h5,h6,a:not([href])",e);return m.filter(m.map(m.filter(e,jr),qr).concat(m.map(m.filter(e,$r),Vr)),kr)},I={},Yr=5,Gr=function(e){return p.map(e,Sr)},Xr=function(e,t){return{title:e,value:{title:e,url:t,attach:u.noop}}},Jr=function(t,e){return!m.exists(e,function(e){return e.url===t})},Qr=function(e,t,n){e=t in e?e[t]:n;return!1===e?null:e},Zr=function(e,t){var n=e.toLowerCase(),t=p.grep(t,function(e){return-1!==e.title.toLowerCase().indexOf(n)});return 1===t.length&&t[0].title===e?[]:t},eo=gn.extend({Statics:{clearHistory:function(){I={}}},init:function(e){var t,n,r,o=this,i=(window.tinymce||$).activeEditor,a=i.settings,s=e.filetype;e.spellcheck=!1,(r=(r=a.file_picker_types||a.file_browser_callback_types)&&p.makeMap(r,/[, ]/))&&!r[s]||(!(n=a.file_picker_callback)||r&&!r[s]?!(n=a.file_browser_callback)||r&&!r[s]||(t=function(){n(o.getEl("inp").id,o.value(),s,window)}):t=function(){var e=o.fire("beforecall").meta,e=p.extend({filetype:s},e);n.call(i,function(e,t){o.value(e).fire("change",{meta:t})},o.value(),e)}),t&&(e.icon="browse",e.onaction=t),o._super(e),o.classes.add("filepicker"),Er(o,a,i.getBody(),s),Nr(o,a,s)}}),to=un.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}}),no=un.extend({recalc:function(e){var t,n,r,o,i,a,s,l,M,c,u,d,f,m,p,h,g,v,y,b,w,x,C,k,S,T,E,N,R=[],_=Math.max,L=Math.min,A=e.items().filter(":visible"),D=e.layoutRect(),P=e.paddingBox,O=e.settings,I=e.isRtl()?O.direction||"row-reversed":O.direction,B=O.align,F=e.isRtl()?O.pack||"end":O.pack,H=O.spacing||0;for("row-reversed"!==I&&"column-reverse"!==I||(A=A.set(A.toArray().reverse()),I=I.split("-")[0]),O="column"===I?(h="y",m="h",p="minH",g="maxH",y="innerH",v="top",b="deltaH",w="contentH",T="left",k="w",x="x",C="innerW",S="minW",E="right",N="deltaW","contentW"):(h="x",m="w",p="minW",g="maxW",y="innerW",v="left",b="deltaW",w="contentW",T="top",k="h",x="y",C="innerH",S="minH",E="bottom",N="deltaH","contentH"),o=D[y]-P[v]-P[v],t=f=r=0,n=A.length;t<n;t++)a=(i=A[t]).layoutRect(),o-=t<n-1?H:0,0<(s=i.settings.flex)&&(r+=s,a[g]&&R.push(i),a.flex=s),o-=a[p],f<(l=P[T]+a[S]+P[E])&&(f=l);if((u={})[p]=o<0?D[p]-o+D[b]:D[y]-o+D[b],u[S]=f+D[N],u[w]=D[y]-o,u[O]=f,u.minW=L(u.minW,D.maxW),u.minH=L(u.minH,D.maxH),u.minW=_(u.minW,D.startMinWidth),u.minH=_(u.minH,D.startMinHeight),!D.autoResize||u.minW===D.minW&&u.minH===D.minH){for(c=o/r,t=0,n=R.length;t<n;t++)(M=(a=(i=R[t]).layoutRect())[g])<(l=a[p]+a.flex*c)?(o-=a[g]-a[p],r-=a.flex,a.flex=0,a.maxFlexSize=M):a.maxFlexSize=0;for(c=o/r,d=P[v],u={},0===r&&("end"===F?d=o+P[v]:"center"===F?(d=Math.round(D[y]/2-(D[y]-o)/2)+P[v])<0&&(d=P[v]):"justify"===F&&(d=P[v],H=Math.floor(o/(A.length-1)))),u[x]=P[T],t=0,n=A.length;t<n;t++)l=(a=(i=A[t]).layoutRect()).maxFlexSize||a[p],"center"===B?u[x]=Math.round(D[C]/2-a[k]/2):"stretch"===B?(u[k]=_(a[S]||0,D[C]-P[T]-P[E]),u[x]=P[T]):"end"===B&&(u[x]=D[C]-a[k]-P.top),0<a.flex&&(l+=a.flex*c),u[m]=l,u[h]=d,i.layoutRect(u),i.recalc&&i.recalc(),d+=l+H}else u.w=u.minW,u.h=u.minH,e.layoutRect(u),this.recalc(e),null===e._lastRect&&(I=e.parent())&&(I._lastRect=null,I.recalc())}}),ro=cn.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})},isNative:function(){return!0}});function oo(e,t,n,r,o){return e(n,r)?s.some(n):a.isFunction(o)&&o(n)?s.none():t(n,r,o)}function io(e,t,n){for(var r=e.dom(),o=a.isFunction(n)?n:u.constant(!1);r.parentNode;){var r=r.parentNode,i=R.fromDom(r);if(t(i))return s.some(i);if(o(i))break}return s.none()}function ao(e,t){return m.find(e.dom().childNodes,u.compose(t,R.fromDom)).map(R.fromDom)}function so(e,t,n){return go(e,function(e){return O.is(e,t)},n)}function lo(e,n){return function(t){wo(e,n,function(e){t.control.active(e)})}}function co(e){return e?e.split(",")[0]:""}function uo(e,t){return/[0-9.]+px$/.test(e)?function(e,t){t=Math.pow(10,t);return Math.round(e*t)/t}(72*parseInt(e,10)/96,t||0)+"pt":e}function fo(n,e){var r=e.length;return p.each(e,function(e){e.menu&&(e.hidden=0===fo(n,e.menu));var t=e.format;t&&(e.hidden=!n.formatter.canApply(t)),e.hidden&&r--}),r}function mo(t,e){var n;if("string"==typeof e)n=e.split(" ");else if(p.isArray(e))return m.flatten(p.map(e,function(e){return mo(t,e)}));return e=p.grep(n,function(e){return"|"===e||e in t.menuItems}),p.map(e,function(e){return"|"===e?{text:"-"}:t.menuItems[e]})}function po(e){return e&&"-"===e.text}function ho(e){return e=m.filter(e,function(e,t,n){return!po(e)||!po(n[t-1])}),m.filter(e,function(e,t,n){return!po(e)||0<t&&t<n.length-1})}var go=io,vo=function(t,n){var e=t.dom();return e.parentNode?ao(R.fromDom(e.parentNode),function(e){return!Mr(t,e)&&n(e)}):s.none()},yo=ao,bo={first:function(e){return O.one(e)},ancestor:so,sibling:function(e,t){return vo(e,function(e){return O.is(e,t)})},child:function(e,t){return yo(e,function(e){return O.is(e,t)})},descendant:function(e,t){return O.one(t,e)},closest:function(e,t,n){return oo(O.is,so,e,t,n)}},B=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},wo=function(e,t,n){function r(e){n(e,t)}e.formatter?e.formatter.formatChanged(t,r):e.on("init",function(){e.formatter.formatChanged(t,r)})},xo=function(r){var t=["alignleft","aligncenter","alignright","alignjustify"],e=[{text:"Left",icon:"alignleft",onclick:B(r,"alignleft")},{text:"Center",icon:"aligncenter",onclick:B(r,"aligncenter")},{text:"Right",icon:"alignright",onclick:B(r,"alignright")},{text:"Justify",icon:"alignjustify",onclick:B(r,"alignjustify")}];r.addMenuItem("align",{text:"Align",menu:e}),r.addButton("align",{type:"menubutton",icon:"alignleft",menu:e,onShowMenu:function(e){var n=e.control.menu;p.each(t,function(t,e){n.items().eq(e).each(function(e){return e.active(r.formatter.match(t))})})},onPostRender:function(e){var n=e.control;p.each(t,function(t,e){wo(r,t,function(e){n.icon("alignleft"),e&&n.icon(t)})})}}),p.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(e,t){r.addButton(t,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:lo(r,t)})})},Co=function(s,l){return function(){var a=this;s.on("init nodeChange",function(e){var t,n,r,o=s.queryCommandValue("FontName"),i=(t=l,r=(i=o)?i.toLowerCase():"",p.each(t,function(e){e.value.toLowerCase()===r&&(n=e.value)}),p.each(t,function(e){n||co(e.value).toLowerCase()!==co(r).toLowerCase()||(n=e.value)}),n);a.value(i||null),!i&&o&&a.text(co(o))})}},ko=function(e){e=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}(e.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return p.map(e,function(e){return{text:{raw:e[0]},value:e[1],textStyle:-1===e[1].indexOf("dings")?"font-family:"+e[1]:""}})},So=function(e){var t;(t=e).addButton("fontselect",function(){var e=ko(t);return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:e,fixedWidth:!0,onPostRender:Co(t,e),onselect:function(e){e.control.settings.value&&t.execCommand("FontName",!1,e.control.settings.value)}}})},To=function(a,s){return function(){var i=this;a.on("init nodeChange",function(e){var t,n,r,o=a.queryCommandValue("FontSize");if(o)for(n=3;!r&&0<=n;n--)t=uo(o,n),r=function(e,t,n){var r;return p.each(e,function(e){e.value===n?r=n:e.value===t&&(r=t)}),r}(s,t,o);i.value(r||null),r||i.text(t)})}},Eo=function(e){e=e.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt";return p.map(e.split(" "),function(e){var t=e,n=e,e=e.split("=");return 1<e.length&&(t=e[0],n=e[1]),{text:t,value:n}})},No=function(e){var t;(t=e).addButton("fontsizeselect",function(){var e=Eo(t);return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:e,fixedWidth:!0,onPostRender:To(t,e),onclick:function(e){e.control.settings.value&&t.execCommand("FontSize",!1,e.control.settings.value)}}})},Ro=function(n,e){var r=e.items().length;return e.items().each(function(e){e.menu&&e.visible(0<Ro(n,e.menu)),!e.menu&&e.settings.menu&&e.visible(0<fo(n,e.settings.menu));var t=e.settings.format;t&&e.visible(n.formatter.canApply(t)),e.visible()||r--}),r},_o=function(e){o=0,i=[],r=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],a=function(e){var r=[];if(e)return p.each(e,function(e){var t,n={text:e.title,icon:e.icon};e.items?n.menu=a(e.items):(t=e.format||"custom"+o++,e.format||(e.name=t,i.push(e)),n.format=t,n.cmd=e.cmd),r.push(n)}),r},(n=e).on("init",function(){p.each(i,function(e){n.formatter.register(e.name,e)})});var n,o,i,a,t,r={type:"menu",items:n.settings.style_formats_merge?n.settings.style_formats?a(r.concat(n.settings.style_formats)):a(r):a(n.settings.style_formats||r),onPostRender:function(e){n.fire("renderFormatsMenu",{control:e.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return n.formatter.getCssText(this.settings.format)},onPostRender:function(){var t=this;t.parent().on("show",function(){var e=t.settings.format;e&&(t.disabled(!n.formatter.canApply(e)),t.active(n.formatter.match(e))),(e=t.settings.cmd)&&t.active(n.queryCommandState(e))})},onclick:function(){this.settings.format&&B(n,this.settings.format)(),this.settings.cmd&&n.execCommand(this.settings.cmd)}}};e.addMenuItem("formats",{text:"Formats",menu:r}),(t=e).addButton("styleselect",{type:"menubutton",text:"Formats",menu:r,onShowMenu:function(){t.settings.style_formats_autohide&&Ro(t,this.menu)}})},Ao=function(o,i,a){return function(){var t=this;o.on("nodeChange",function(e){var n=o.formatter,r=null;p.each(e.parents,function(t){if(p.each(i,function(e){if(a?n.matchNode(t,a,{value:e.value})&&(r=e.value):n.matchNode(t,e.value)&&(r=e.value),r)return!1}),r)return!1}),t.value(r)})}},Do=function(e){var t,n,r,o=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}(e.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");e.addMenuItem("blockformats",{text:"Blocks",menu:(t=e,p.map(o,function(e){return{text:e[0],onclick:B(t,e[1]),textStyle:function(){return t.formatter.getCssText(e[1])}}}))}),e.addButton("formatselect",(n=e,r=o,function(){var t=[];return p.each(r,function(e){t.push({text:e[0],value:e[1],textStyle:function(){return n.formatter.getCssText(e[1])}})}),{type:"listbox",text:r[0][0],values:t,fixedWidth:!0,onselect:function(e){e.control&&(e=e.control.value(),B(n,e)())},onPostRender:Ao(n,t)}}))},Po=function(e){var t,n,r=e.settings.insert_button_items;return ho(r?mo(e,r):(r=e,t="insert",n=[{text:"-"}],r=p.grep(e.menuItems,function(e){return e.context===t}),p.each(r,function(e){"before"===e.separator&&n.push({text:"|"}),e.prependToContext?n.unshift(e):n.push(e),"after"===e.separator&&n.push({text:"|"})}),n))},Oo=function(e){var t;(t=e).addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(Po(t)),this.menu.renderNew()}})},Io=function(n){p.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(e,t){n.addButton(t,{active:!1,tooltip:e,onPostRender:lo(n,t),onclick:B(n,t)})})},Bo=function(n){p.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(e,t){n.addButton(t,{tooltip:e[0],cmd:e[1]})})},Mo=function(n){p.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(e,t){n.addButton(t,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:lo(n,t)})})},Lo=function(e){var t,n;Io(t=e),Bo(t),Mo(t),n=e,p.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(e,t){n.addMenuItem(t,{text:e[0],icon:t,shortcut:e[2],cmd:e[1]})}),n.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:B(n,"code")})},Fo=function(n,r){return function(){function e(){return!!n.undoManager&&n.undoManager["redo"===r?"hasRedo":"hasUndo"]()}var t=this;t.disabled(!e()),n.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){t.disabled(n.readonly||!e())})}},Ho=function(e){var t;(t=e).addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:Fo(t,"undo"),cmd:"undo"}),t.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:Fo(t,"redo"),cmd:"redo"}),(t=e).addButton("undo",{tooltip:"Undo",onPostRender:Fo(t,"undo"),cmd:"undo"}),t.addButton("redo",{tooltip:"Redo",onPostRender:Fo(t,"redo"),cmd:"redo"})},zo=function(e){return function(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}},Uo=function(e){e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:zo(e),cmd:"mceToggleVisualAid"})},Wo={setup:function(e){var t;e.rtl&&(x.rtl=!0),e.on("mousedown",function(){T.hideAll()}),(t=e).settings.ui_container&&(y.container=bo.descendant(R.fromDom(document.body),t.settings.ui_container).fold(u.constant(null),function(e){return e.dom()})),o.tooltips=!y.iOS,x.translate=function(e){return $.translate(e)},Do(e),xo(e),Lo(e),Ho(e),No(e),So(e),_o(e),Uo(e),Oo(e)}},$o=un.extend({recalc:function(e){var t,n,r,o,i,a,s,l,c,u,d,f,m,p,h,g,v=[],y=[],b=e.settings,w=e.items().filter(":visible"),x=e.layoutRect(),C=b.columns||Math.ceil(Math.sqrt(w.length)),k=Math.ceil(w.length/C),S=b.spacingH||b.spacing||0,T=b.spacingV||b.spacing||0,E=b.alignH||b.align,N=b.alignV||b.align,R=e.paddingBox,_="reverseRows"in b?b.reverseRows:e.isRtl();for(E&&"string"==typeof E&&(E=[E]),N&&"string"==typeof N&&(N=[N]),I=0;I<C;I++)v.push(0);for(a=0;a<k;a++)y.push(0);for(a=0;a<k;a++)for(I=0;I<C&&(i=w[a*C+I]);I++)m=(o=i.layoutRect()).minW,p=o.minH,v[I]=v[I]<m?m:v[I],y[a]=y[a]<p?p:y[a];for(h=x.innerW-R.left-R.right,I=d=0;I<C;I++)d+=v[I]+(0<I?S:0),h-=(0<I?S:0)+v[I];for(g=x.innerH-R.top-R.bottom,a=f=0;a<k;a++)f+=y[a]+(0<a?T:0),g-=(0<a?T:0)+y[a];if(d+=R.left+R.right,f+=R.top+R.bottom,(r={}).minW=d+(x.w-x.innerW),r.minH=f+(x.h-x.innerH),r.contentW=r.minW-x.deltaW,r.contentH=r.minH-x.deltaH,r.minW=Math.min(r.minW,x.maxW),r.minH=Math.min(r.minH,x.maxH),r.minW=Math.max(r.minW,x.startMinWidth),r.minH=Math.max(r.minH,x.startMinHeight),!x.autoResize||r.minW===x.minW&&r.minH===x.minH){x.autoResize&&((r=e.layoutRect(r)).contentW=r.minW-x.deltaW,r.contentH=r.minH-x.deltaH),A="start"!==b.packV&&0<g?Math.floor(g/k):0;var A,D=0,P=b.flexWidths;if(P)for(I=0;I<P.length;I++)D+=P[I];else D=C;for(var O=h/D,I=0;I<C;I++)v[I]+=P?P[I]*O:O;for(l=R.top,a=0;a<k;a++){for(s=R.left,n=y[a]+A,I=0;I<C&&(i=w[_?a*C+C-1-I:a*C+I]);I++)c=i.settings,o=i.layoutRect(),t=Math.max(v[I],o.startMinWidth),o.x=s,o.y=l,"center"===(u=c.alignH||(E?E[I]||E[0]:null))?o.x=s+t/2-o.w/2:"right"===u?o.x=s+t-o.w:"stretch"===u&&(o.w=t),"center"===(u=c.alignV||(N?N[I]||N[0]:null))?o.y=l+n/2-o.h/2:"bottom"===u?o.y=l+n-o.h:"stretch"===u&&(o.h=n),i.layoutRect(o),s+=t+S,i.recalc&&i.recalc();l+=n+T}}else r.w=r.minW,r.h=r.minH,e.layoutRect(r),this.recalc(e),null===e._lastRect&&(x=e.parent())&&(x._lastRect=null,x.recalc())}}),jo=o.extend({renderHtml:function(){return this.classes.add("iframe"),this.canFocus=!1,'<iframe id="'+this._id+'" class="'+this.classes+'" tabindex="-1" src="'+(this.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=e,t&&t()):c.setTimeout(function(){n.html(e)}),this}}),qo=o.extend({init:function(e){this._super(e),this.classes.add("widget").add("infobox"),this.canFocus=!1},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+this.encode(this.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+e+"ico "+e+'i-help"></i></button></div></div>'},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl("body").firstChild.data=t.encode(e.value),t.state.get("rendered")&&t.updateLayoutRect()}),t.state.on("change:help",function(e){t.classes.toggle("has-help",e.value),t.state.get("rendered")&&t.updateLayoutRect()}),t._super()}}),Vo=o.extend({init:function(e){this._super(e),this.classes.add("widget").add("label"),this.canFocus=!1,e.multiline&&this.classes.add("autoscroll"),e.strong&&this.classes.add("strong")},initLayoutRect:function(){var e=this._super();return this.settings.multiline&&(w.getSize(this.getEl()).width>e.maxW&&(e.minW=e.maxW,this.classes.add("multiline")),this.getEl().style.width=e.minW+"px",e.startMinH=e.h=e.minH=Math.min(e.maxH,w.getSize(this.getEl()).height)),e},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e,t=this,n=t.settings.forId,r=t.settings.html||t.encode(t.state.get("text"));return(n=!n&&(e=t.settings.forName)&&(e=t.getRoot().find("#"+e)[0])?e._id:n)?'<label id="'+t._id+'" class="'+t.classes+'"'+(n?' for="'+n+'"':"")+">"+r+"</label>":'<span id="'+t._id+'" class="'+t.classes+'">'+r+"</span>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.innerHtml(t.encode(e.value)),t.state.get("rendered")&&t.updateLayoutRect()}),t._super()}}),Ko=r.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){this._super(e),this.classes.add("toolbar")},postRender:function(){return this.items().each(function(e){e.classes.add("toolbar-item")}),this._super()}}),Yo=Ko.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}});var Go=dn.extend({init:function(e){this._renderOpen=!0,this._super(e),e=this.settings,this.classes.add("menubtn"),e.fixedWidth&&this.classes.add("fixed-width"),this.aria("haspopup",!0),this.state.set("menu",e.menu||this.render())},showMenu:function(e){var t=this;if(t.menu&&t.menu.visible()&&!1!==e)return t.hideMenu();t.menu||(e=t.state.get("menu")||[],t.classes.add("opened"),e.length?e={type:"menu",animate:!0,items:e}:(e.type=e.type||"menu",e.animate=!0),e.renderTo?t.menu=e.parent(t).show().renderTo():t.menu=h.create(e).parent(t).renderTo(),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",function(e){e.control.parent()===t.menu&&(e.stopPropagation(),t.focus(),t.hideMenu())}),t.menu.on("select",function(){t.focus()}),t.menu.on("show hide",function(e){e.control===t.menu&&(t.activeMenu("show"===e.type),t.classes.toggle("opened","show"===e.type)),t.aria("expanded","show"===e.type)}).fire("show")),t.menu.show(),t.menu.layoutRect({w:t.layoutRect().w}),t.menu.repaint(),t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),t.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),this.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon,o=e.state.get("text"),i="",a=e.settings.image;return a=a?(r="none"," style=\"background-image: url('"+(a="string"!=typeof a?window.getSelection?a[0]:a[1]:a)+"')\""):"",o&&(e.classes.add("btn-has-text"),i='<span class="'+n+'txt">'+e.encode(o)+"</span>"),r=e.settings.icon?n+"ico "+n+"i-"+r:"",e.aria("role",e.parent()instanceof Yo?"menuitem":"button"),'<div id="'+t+'" class="'+e.classes+'" tabindex="-1" aria-labelledby="'+t+'"><button id="'+t+'-open" role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+a+"></i>":"")+i+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var r=this;return r.on("click",function(e){e.control===r&&function(e,t){for(;e;){if(t===e)return 1;e=e.parentNode}}(e.target,r.getEl())&&(r.focus(),r.showMenu(!e.aria),e.aria)&&r.menu.items().filter(":visible")[0].focus()}),r.on("mouseenter",function(e){var t,n=e.control,e=r.parent();n&&e&&n instanceof Go&&n.parent()===e&&(e.items().filter("MenuButton").each(function(e){e.hideMenu&&e!==n&&(e.menu&&e.menu.visible()&&(t=!0),e.hideMenu())}),t)&&(n.focus(),n.showMenu())}),r._super()},bindStates:function(){var e=this;return e.state.on("change:menu",function(){e.menu&&e.menu.remove(),e.menu=null}),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Xo=T.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){if(e.autohide=!0,e.constrainToViewport=!0,"function"==typeof e.items&&(e.itemsFactory=e.items,e.items=[]),e.itemDefaults)for(var t=e.items,n=t.length;n--;)t[n]=p.extend({},e.itemDefaults,t[n]);this._super(e),this.classes.add("menu"),e.animate&&11!==y.ie&&this.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){var t,n=this;function r(){n.throbber&&(n.throbber.hide(),n.throbber=null)}n.settings.itemsFactory&&(n.throbber||(n.throbber=new qt(n.getEl("body"),!0),0===n.items().length?(n.throbber.show(),n.fire("loading")):n.throbber.show(100,function(){n.items().remove(),n.fire("loading")}),n.on("hide close",r)),n.requestTime=t=(new Date).getTime(),n.settings.itemsFactory(function(e){0===e.length?n.hide():n.requestTime===t&&(n.getEl().style.width="",n.getEl("body").style.width="",r(),n.items().remove(),n.getEl("body").innerHTML="",n.add(e),n.renderNew(),n.fire("loaded"))}))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var t=this;return t.items().each(function(e){e=e.settings;if(e.icon||e.image||e.selectable)return!(t._hasIcons=!0)}),t.settings.itemsFactory&&t.on("postrender",function(){t.settings.itemsFactory&&t.load()}),t.on("show hide",function(e){e.control===t&&("show"===e.type?c.setTimeout(function(){t.classes.add("in")},0):t.classes.remove("in"))}),t._super()}}),Jo=Go.extend({init:function(r){var e,o,i,n,a=this;a._super(r),r=a.settings,a._values=e=r.values,e&&(void 0!==r.value&&function e(t){for(var n=0;n<t.length;n++){if(o=t[n].selected||r.value===t[n].value)return i=i||t[n].text,a.state.set("value",t[n].value),1;if(t[n].menu&&e(t[n].menu))return 1}}(e),!o&&0<e.length&&(i=e[0].text,a.state.set("value",e[0].value)),a.state.set("menu",e)),a.state.set("text",r.text||i),a.classes.add("listbox"),a.on("select",function(e){var t=e.control;n&&(e.lastControl=n),r.multiple?t.active(!t.active()):a.value(e.control.value()),n=t})},value:function(t){return 0===arguments.length?this.state.get("value"):(void 0!==t&&(!this.settings.values||0<p.grep(this.settings.values,function(e){return e.value===t}).length?this.state.set("value",t):null===t&&this.state.set("value",null)),this)},bindStates:function(){var n=this;return n.on("show",function(e){var t;e=e.control,t=n.value(),e instanceof Xo&&e.items().each(function(e){e.hasMenus()||e.active(e.value()===t)})}),n.state.on("change:value",function(e){e=function e(t,n){var r;if(t)for(var o=0;o<t.length;o++){if(t[o].value===n)return t[o];if(t[o].menu&&(r=e(t[o].menu,n)))return r}}(n.state.get("menu"),e.value);e?n.text(e.text):n.text(n.settings.text)}),n._super()}}),Qo=o.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t,n=this;n._super(e),e=n.settings,n.classes.add("menu-item"),e.menu&&n.classes.add("menu-item-expand"),e.preview&&n.classes.add("menu-item-preview"),"-"!==(t=n.state.get("text"))&&"|"!==t||(n.classes.add("menu-item-sep"),n.aria("role","separator"),n.state.set("text","-")),e.selectable&&(n.aria("role","menuitemcheckbox"),n.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||n.classes.add("menu-item-normal"),n.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&n.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var t,n=this,e=n.settings,r=n.parent();r.items().each(function(e){e!==n&&e.hideMenu()}),e.menu&&((t=n.menu)?t.show():((t=e.menu).length?t={type:"menu",items:t}:t.type=t.type||"menu",r.settings.itemDefaults&&(t.itemDefaults=r.settings.itemDefaults),(t=n.menu=h.create(t).parent(n).renderTo()).reflow(),t.on("cancel",function(e){e.stopPropagation(),n.focus(),t.hide()}),t.on("show hide",function(e){e.control.items&&e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),t.on("hide",function(e){e.control===t&&n.classes.remove("selected")}),t.submenu=!0),t._parentMenu=r,t.classes.add("menu-sub"),e=t.testMoveRel(n.getEl(),n.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]),t.moveRel(n.getEl(),e),e="menu-sub-"+(t.rel=e),t.classes.remove(t._lastRel).add(e),t._lastRel=e,n.classes.add("selected"),n.aria("expanded",!0))},hideMenu:function(){return this.menu&&(this.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),this.menu.hide(),this.aria("expanded",!1)),this},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.classPrefix,o=e.state.get("text"),i=e.settings.icon,a="",s=n.shortcut,l=e.encode(n.url);function c(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function u(e){var t=n.match||"";return t?e.replace(new RegExp(c(t),"gi"),function(e){return"!mce~match["+e+"]mce~match!"}):e}function d(e){return e.replace(new RegExp(c("!mce~match["),"g"),"<b>").replace(new RegExp(c("]mce~match!"),"g"),"</b>")}return i&&e.parent().classes.add("menu-has-icons"),n.image&&(a=" style=\"background-image: url('"+n.image+"')\""),s=s&&function(e){var t,n,r={},r=y.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"};for(e=e.split("+"),t=0;t<e.length;t++)(n=r[e[t].toLowerCase()])&&(e[t]=n);return e.join("+")}(s),i=r+"ico "+r+"i-"+(e.settings.icon||"none"),i="-"!==o?'<i class="'+i+'"'+a+"></i> ":"",o=d(e.encode(u(o))),l=d(e.encode(u(l))),'<div id="'+t+'" class="'+e.classes+'" tabindex="-1">'+i+("-"!==o?'<span id="'+t+'-text" class="'+r+'text">'+o+"</span>":"")+(s?'<div id="'+t+'-shortcut" class="'+r+'menu-shortcut">'+s+"</div>":"")+(n.menu?'<div class="'+r+'caret"></div>':"")+(l?'<div class="'+r+'menu-item-link">'+l+"</div>":"")+"</div>"},postRender:function(){var e,t=this,n=t.settings,r=n.textStyle;return(r="function"==typeof r?r.call(this):r)&&(e=t.getEl("text"))&&(e.setAttribute("style",r),t._textStyle=r),t.on("mouseenter click",function(e){e.control===t&&(n.menu||"click"!==e.type?(t.showMenu(),e.aria&&t.menu.focus(!0)):(t.fire("select"),c.requestAnimationFrame(function(){t.parent().hideAll()})))}),t._super(),t},hover:function(){return this.parent().items().each(function(e){e.classes.remove("selected")}),this.classes.toggle("selected",!0),this},active:function(e){var t,n,r;return n=e,(r=(t=this)._textStyle)&&((t=t.getEl("text")).setAttribute("style",r),n)&&(t.style.color="",t.style.backgroundColor=""),void 0!==e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Zo=pn.extend({Defaults:{classes:"radio",role:"radio"}}),ei=o.extend({renderHtml:function(){var e=this.classPrefix;return this.classes.add("resizehandle"),"both"===this.settings.direction&&this.classes.add("resizehandle-both"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"><i class="'+e+"ico "+e+'i-resize"></i></div>'},postRender:function(){var t=this;t._super(),t.resizeDragHelper=new C(this._id,{start:function(){t.fire("ResizeStart")},drag:function(e){"both"!==t.settings.direction&&(e.deltaX=0),t.fire("Resize",e)},stop:function(){t.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}});function ti(e){var t="";if(e)for(var n=0;n<e.length;n++)t+='<option value="'+e[n]+'">'+e[n]+"</option>";return t}var ni=o.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var n=this;n._super(e),n.settings.size&&(n.size=n.settings.size),n.settings.options&&(n._options=n.settings.options),n.on("keydown",function(e){var t;13===e.keyCode&&(e.preventDefault(),n.parents().reverse().each(function(e){if(e.toJSON)return t=e,!1}),n.fire("submit",{data:t.toJSON()}))})},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e="",t=ti(this._options);return this.size&&(e=' size = "'+this.size+'"'),'<select id="'+this._id+'" class="'+this.classes+'"'+e+">"+t+"</select>"},bindStates:function(){var t=this;return t.state.on("change:options",function(e){t.getEl().innerHTML=ti(e.value)}),t._super()}});function ri(e,t,n){return e=n<(e=e<t?t:e)?n:e}function oi(e,t,n){e.setAttribute("aria-"+t,n)}function ii(e,t){var n,r,o="v"===e.settings.orientation?(r="top",n="height","h"):(r="left",n="width","w"),i=e.getEl("handle"),o=((e.layoutRect()[o]||100)-w.getSize(i)[n])*((t-e._minValue)/(e._maxValue-e._minValue))+"px";i.style[r]=o,i.style.height=e.layoutRect().h+"px",oi(i,"valuenow",t),oi(i,"valuetext",""+e.settings.previewFilter(t)),oi(i,"valuemin",e._minValue),oi(i,"valuemax",e._maxValue)}function ai(){return{Selector:dt,Collection:ht,ReflowQueue:wt,Control:x,Factory:h,KeyboardNavigation:_t,Container:r,DragHelper:C,Scrollable:Mt,Panel:Lt,Movable:et,Resizable:Ft,FloatPanel:T,Window:rn,MessageBox:N,Tooltip:Gt,Widget:o,Progress:Xt,Notification:Jt,Layout:cn,AbsoluteLayout:un,Button:dn,ButtonGroup:mn,Checkbox:pn,ComboBox:gn,ColorBox:vn,PanelButton:yn,ColorButton:wn,ColorPicker:Cn,Path:Sn,ElementPath:Tn,FormItem:En,Form:Nn,FieldSet:Rn,FilePicker:eo,FitLayout:to,FlexLayout:no,FlowLayout:ro,FormatControls:Wo,GridLayout:$o,Iframe:jo,InfoBox:qo,Label:Vo,Toolbar:Ko,MenuBar:Yo,MenuButton:Go,MenuItem:Qo,Throbber:qt,Menu:Xo,ListBox:Jo,Radio:Zo,ResizeHandle:ei,SelectBox:ni,Slider:si,Spacer:li,SplitButton:ci,StackLayout:ui,TabPanel:di,TextBox:fi,DropZone:kn,BrowseButton:fn}}var si=o.extend({init:function(e){e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),this._super(e),this.classes.add("slider"),"v"===e.orientation&&this.classes.add("vertical"),this._minValue=a.isNumber(e.minValue)?e.minValue:0,this._maxValue=a.isNumber(e.maxValue)?e.maxValue:100,this._initValue=this.state.get("value")},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'"><div id="'+e+'-handle" class="'+t+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var e,t,n,r,o,i,a,s,l,c,u,d,f,m,p,h,g=this;function v(e){var t=g.value();t=ri(((t+a)/(s-a)+.05*e)*(s-a)-a,a,s),g.value(t),g.fire("dragstart",{value:t}),g.fire("drag",{value:t}),g.fire("dragend",{value:t})}e=g._minValue,t=g._maxValue,i="v"===g.settings.orientation?(n="screenY",r="top",o="height","h"):(n="screenX",r="left",o="width","w"),g._super(),a=e,s=t,g.on("keydown",function(e){switch(e.keyCode){case 37:case 38:v(-1);break;case 39:case 40:v(1)}}),l=e,c=t,u=g.getEl("handle"),g._dragHelper=new C(g._id,{handle:g._id+"-handle",start:function(e){d=e[n],f=parseInt(g.getEl("handle").style[r],10),m=(g.layoutRect()[i]||100)-w.getSize(u)[o],g.fire("dragstart",{value:h})},drag:function(e){e=e[n]-d;p=ri(f+e,0,m),u.style[r]=p+"px",h=l+p/m*(c-l),g.value(h),g.tooltip().text(""+g.settings.previewFilter(h)).show().moveRel(u,"bc tc"),g.fire("drag",{value:h})},stop:function(){g.tooltip().hide(),g.fire("dragend",{value:h})}})},repaint:function(){this._super(),ii(this,this.value())},bindStates:function(){var t=this;return t.state.on("change:value",function(e){ii(t,e.value)}),t._super()}}),li=o.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"></div>'}}),ci=Go.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,t=this.getEl(),n=this.layoutRect();return this._super(),e=t.firstChild,t=t.lastChild,b(e).css({width:n.w-w.getSize(t).width,height:n.h-2}),b(t).css({height:n.h-2}),this},activeMenu:function(e){b(this.getEl().lastChild).toggleClass(this.classPrefix+"active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.state.get("icon"),o=e.state.get("text"),i=e.settings,a="",s=i.image;return s=s?(r="none"," style=\"background-image: url('"+(s="string"!=typeof s?window.getSelection?s[0]:s[1]:s)+"')\""):"",r=i.icon?n+"ico "+n+"i-"+r:"",o&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(o)+"</span>"),o="boolean"==typeof i.active?' aria-pressed="'+i.active+'"':"",'<div id="'+t+'" class="'+e.classes+'" role="button"'+o+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(r?'<i class="'+r+'"'+s+"></i>":"")+a+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1">'+(e._menuBtnText?(r?" ":"")+e._menuBtnText:"")+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var n=this.settings.onclick;return this.on("click",function(e){var t=e.target;if(e.control===this)for(;t;){if(e.aria&&"down"!==e.aria.key||"BUTTON"===t.nodeName&&-1===t.className.indexOf("open"))return e.stopImmediatePropagation(),void(n&&n.call(this,e));t=t.parentNode}}),delete this.settings.onclick,this._super()}}),ui=ro.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),di=Lt.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(n){var e;this.activeTabId&&(e=this.getEl(this.activeTabId),b(e).removeClass(this.classPrefix+"active"),e.setAttribute("aria-selected","false")),this.activeTabId="t"+n,(e=this.getEl("t"+n)).setAttribute("aria-selected","true"),b(e).addClass(this.classPrefix+"active"),this.items()[n].show().fire("showtab"),this.reflow(),this.items().each(function(e,t){n!==t&&e.hide()})},renderHtml:function(){var n=this,e=n._layout,r="",o=n.classPrefix;return n.preRender(),e.preRender(n),n.items().each(function(e,t){t=n._id+"-t"+t;e.aria("role","tabpanel"),e.aria("labelledby",t),r+='<div id="'+t+'" class="'+o+'tab" unselectable="on" role="tab" aria-controls="'+e._id+'" aria-selected="false" tabIndex="-1">'+n.encode(e.settings.title)+"</div>"}),'<div id="'+n._id+'" class="'+n.classes+'" hidefocus="1" tabindex="-1"><div id="'+n._id+'-head" class="'+o+'tabs" role="tablist">'+r+'</div><div id="'+n._id+'-body" class="'+n.bodyClasses+'">'+e.renderHtml(n)+"</div></div>"},postRender:function(){var r=this;r._super(),r.settings.activeTab=r.settings.activeTab||0,r.activateTab(r.settings.activeTab),this.on("click",function(e){var t=e.target.parentNode;if(t&&t.id===r._id+"-head")for(var n=t.childNodes.length;n--;)t.childNodes[n]===e.target&&r.activateTab(n)})},initLayoutRect:function(){var e,t,n=w.getSize(this.getEl("head")).width,r=(n=n<0?0:n,t=0,this.items().each(function(e){n=Math.max(n,e.layoutRect().minW),t=Math.max(t,e.layoutRect().minH)}),this.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=n,e.settings.h=t,e.layoutRect({x:0,y:0,w:n,h:t})}),w.getSize(this.getEl("head")).height);return this.settings.minWidth=n,this.settings.minHeight=t+r,(e=this._super()).deltaH+=r,e.innerH=e.h-e.deltaH,e}}),fi=o.extend({init:function(e){var n=this;n._super(e),n.classes.add("textbox"),e.multiline?n.classes.add("multiline"):(n.on("keydown",function(e){var t;13===e.keyCode&&(e.preventDefault(),n.parents().reverse().each(function(e){if(e.toJSON)return t=e,!1}),n.fire("submit",{data:t.toJSON()}))}),n.on("keyup",function(e){n.state.set("value",e.target.value)}))},repaint:function(){var e,t=this.getEl().style,n=this._layoutRect,r=this._lastRepaintRect||{},o=document;return!this.settings.multiline&&o.all&&(!o.documentMode||o.documentMode<=8)&&(t.lineHeight=+n.h+"px"),e=(o=this.borderBox).left+o.right+8,o=o.top+o.bottom+(this.settings.multiline?8:0),n.x!==r.x&&(t.left=n.x+"px",r.x=n.x),n.y!==r.y&&(t.top=n.y+"px",r.y=n.y),n.w!==r.w&&(t.width=n.w-e+"px",r.w=n.w),n.h!==r.h&&(t.height=n.h-o+"px",r.h=n.h),this._lastRepaintRect=r,this.fire("repaint",{},!1),this},renderHtml:function(){var e,t=this.settings,n={id:this._id,hidefocus:"1"};return p.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(e){n[e]=t[e]}),this.disabled()&&(n.disabled="disabled"),t.subtype&&(n.type=t.subtype),(e=w.create(t.multiline?"textarea":"input",n)).value=this.state.get("value"),e.className=this.classes.toString(),e.outerHTML},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var t=this;t.getEl().value=t.state.get("value"),t._super(),t.$el.on("change",function(e){t.state.set("value",e.target.value),t.fire("change",e)})},bindStates:function(){var t=this;return t.state.on("change:value",function(e){t.getEl().value!==e.value&&(t.getEl().value=e.value)}),t.state.on("change:disabled",function(e){t.getEl().disabled=e.value}),t._super()},remove:function(){this.$el.off(),this._super()}}),Dr=function(n){n.ui?p.each(ai(),function(e,t){n.ui[t]=e}):n.ui=ai()};p.each(ai(),function(e,t){h.add(t,e)}),Dr(window.tinymce||{}),W.add("modern",function(e){return Wo.setup(e),ln(e)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-advlist",["tinymce"],function(){return function(){!function(){"use strict";function s(r,o){return function(e){var n=e.control;r.on("NodeChange",function(e){var t=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(e.parents,a),t=-1!==t?e.parents.slice(0,t):e.parents,e=i.grep(t,c(r));n.active(0<e.length&&e[0].nodeName===o)})}}function t(e,t,n,r,o,i){(0<i.length?f:m)(e,t,n,r,o,i)}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=tinymce.util.Tools.resolve("tinymce.util.Tools"),l=function(e,t,n){e.execCommand("UL"===t?"InsertUnorderedList":"InsertOrderedList",!1,!1===n?null:{"list-style-type":n})},n=function(n){n.addCommand("ApplyUnorderedListStyle",function(e,t){l(n,"UL",t["list-style-type"])}),n.addCommand("ApplyOrderedListStyle",function(e,t){l(n,"OL",t["list-style-type"])})},r=function(e){e=e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return e?e.split(/[ ,]/):[]},o=function(e){e=e.getParam("advlist_bullet_styles","default,circle,disc,square");return e?e.split(/[ ,]/):[]},a=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},c=function(t){return function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)&&(e=e,t.$.contains(t.getBody(),e))}},u=function(e){var t=e.dom.getParent(e.selection.getNode(),"ol,ul");return e.dom.getStyle(t,"listStyleType")||""},d=function(e){return i.map(e,function(e){return{text:e.replace(/\-/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()}),data:"default"===e?"":e}})},f=function(t,e,n,r,o,i){var a;t.addButton(e,{active:!1,type:"splitbutton",tooltip:n,menu:d(i),onPostRender:s(t,o),onshow:(a=t,function(e){var t=u(a);e.control.items().each(function(e){e.active(e.settings.data===t)})}),onselect:function(e){l(t,o,e.control.settings.data)},onclick:function(){t.execCommand(r)}})},m=function(e,t,n,r,o,i){e.addButton(t,{active:!1,type:"button",tooltip:n,onPostRender:s(e,o),onclick:function(){e.execCommand(r)}})},p=function(e){t(e,"numlist","Numbered list","InsertOrderedList","OL",r(e)),t(e,"bullist","Bullet list","InsertUnorderedList","UL",o(e))};e.add("advlist",function(e){!function(e,t){e=e.settings.plugins||"";return-1!==i.inArray(e.split(/[ ,]/),t)}(e,"lists")||(p(e),n(e))})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-anchor",["tinymce"],function(){return function(){!function(){"use strict";function t(n){return function(e){for(var t=0;t<e.length;t++)i(e[t])&&e[t].attr("contenteditable",n)}}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),o={isValidId:function(e){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(e)},getId:function(e){var t=e.selection.getNode();return"A"===t.tagName&&""===e.dom.getAttrib(t,"href")?t.id||t.name:""},insert:function(e,t){var n=e.selection.getNode();"A"===n.tagName&&""===e.dom.getAttrib(n,"href")?(n.removeAttribute("name"),n.id=t,e.undoManager.add()):(e.focus(),e.selection.collapse(!0),e.execCommand("mceInsertContent",!1,e.dom.createHTML("a",{id:t})))}},n=function(r){var e=o.getId(r);r.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:e},onsubmit:function(e){var t,n=e.data.id;t=r,n=n,(o.isValidId(n)?(o.insert(t,n),1):(t.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),0))||e.preventDefault()}})},r=function(e){e.addCommand("mceAnchor",function(){n(e)})},i=function(e){return!e.attr("href")&&(e.attr("id")||e.attr("name"))&&!e.firstChild},a=function(e){e.on("PreInit",function(){e.parser.addNodeFilter("a",t("false")),e.serializer.addNodeFilter("a",t(null))})},s=function(e){e.addButton("anchor",{icon:"anchor",tooltip:"Anchor",cmd:"mceAnchor",stateSelector:"a:not([href])"}),e.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",cmd:"mceAnchor"})};e.add("anchor",function(e){a(e),r(e),s(e)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-autolink",["tinymce"],function(){return function(){!function(){"use strict";function r(e,t){return t<0&&(t=0),t=3===e.nodeType&&(e=e.data.length)<t?e:t}function d(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setStart(t,r(t,n)):e.setStartBefore(t)}function f(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setEnd(t,r(t,n)):e.setEndAfter(t)}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.Env"),m=function(e){return e.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)},p=function(e){return e.getParam("default_link_target","")},o=function(e,t,n){var r,o,i,a,s,l,c=m(e),u=p(e);if("A"!==e.selection.getNode().tagName){if((r=e.selection.getRng(!0).cloneRange()).startOffset<5){if(!(l=r.endContainer.previousSibling)){if(!r.endContainer.firstChild||!r.endContainer.firstChild.nextSibling)return;l=r.endContainer.firstChild.nextSibling}if(a=l.length,d(r,l,a),f(r,l,a),r.endOffset<5)return;o=r.endOffset,i=l}else{if(3!==(i=r.endContainer).nodeType&&i.firstChild){for(;3!==i.nodeType&&i.firstChild;)i=i.firstChild;3===i.nodeType&&(d(r,i,0),f(r,i,i.nodeValue.length))}o=1===r.endOffset?2:r.endOffset-1-t}for(a=o;d(r,i,2<=o?o-2:0),f(r,i,1<=o?o-1:0),--o," "!==(s=r.toString())&&""!==s&&160!==s.charCodeAt(0)&&0<=o-2&&s!==n;);(l=r.toString())===n||" "===l||160===l.charCodeAt(0)?(d(r,i,o),f(r,i,a),o+=1):(0===r.startOffset?d(r,i,0):d(r,i,o),f(r,i,a)),"."===(t=r.toString()).charAt(t.length-1)&&f(r,i,a-1),(a=(t=r.toString().trim()).match(c))&&("www."===a[1]?a[1]="http://www.":/@$/.test(a[1])&&!/^mailto:/.test(a[1])&&(a[1]="mailto:"+a[1]),t=e.selection.getBookmark(),e.selection.setRng(r),e.execCommand("createlink",!1,a[1]+a[2]),u&&e.dom.setAttrib(e.selection.getNode(),"target",u),e.selection.moveToBookmark(t),e.nodeChanged())}},t=function(t){var e;t.on("keydown",function(e){13===e.keyCode&&o(t,-1,"")}),n.ie?t.on("focus",function(){if(!e){e=!0;try{t.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}}):(t.on("keypress",function(e){41===e.keyCode&&o(t,-1,"(")}),t.on("keyup",function(e){32===e.keyCode&&o(t,0,"")}))};e.add("autolink",function(e){t(e)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-autoresize",["tinymce"],function(){return function(){!function(){"use strict";function r(e){function t(){return n}var n=e;return{get:t,set:function(e){n=e},clone:function(){return r(n)}}}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),d=tinymce.util.Tools.resolve("tinymce.Env"),i=tinymce.util.Tools.resolve("tinymce.util.Delay"),f={getAutoResizeMinHeight:function(e){return parseInt(e.getParam("autoresize_min_height",e.getElement().offsetHeight),10)},getAutoResizeMaxHeight:function(e){return parseInt(e.getParam("autoresize_max_height",0),10)},getAutoResizeOverflowPadding:function(e){return e.getParam("autoresize_overflow_padding",1)},getAutoResizeBottomMargin:function(e){return e.getParam("autoresize_bottom_margin",50)},shouldAutoResizeOnInit:function(e){return e.getParam("autoresize_on_init",!0)}},m=function(e){return e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen()},a=function(e,t,n,r,o){i.setEditorTimeout(e,function(){h(e,t),n--?a(e,t,n,r,o):o&&o()},r)},p=function(e,t){e=e.getBody();e&&(e.style.overflowY=t?"":"hidden",t||(e.scrollTop=0))},h=function(e,t){var n,r,o,i,a,s,l,c=e.dom,u=e.getDoc();u&&(m(e)?p(e,!0):(u=u.body,n=f.getAutoResizeMinHeight(e),r=c.getStyle(u,"margin-top",!0),l=c.getStyle(u,"margin-bottom",!0),o=c.getStyle(u,"padding-top",!0),i=c.getStyle(u,"padding-bottom",!0),a=c.getStyle(u,"border-top-width",!0),s=c.getStyle(u,"border-bottom-width",!0),r=u.offsetHeight+parseInt(r,10)+parseInt(l,10)+parseInt(o,10)+parseInt(i,10)+parseInt(a,10)+parseInt(s,10),(r=isNaN(r)||r<=0?d.ie?u.scrollHeight:d.webkit&&0===u.clientHeight?0:u.offsetHeight:r)>f.getAutoResizeMinHeight(e)&&(n=r),(l=f.getAutoResizeMaxHeight(e))&&l<r?(n=l,p(e,!0)):p(e,!1),n!==t.get()&&(o=n-t.get(),c.setStyle(e.iframeElement,"height",n+"px"),t.set(n),d.webkit)&&o<0&&h(e,t)))},n=function(r,t){r.on("init",function(){var e=r.dom,t=f.getAutoResizeOverflowPadding(r),n=f.getAutoResizeBottomMargin(r);!1!==t&&e.setStyles(r.getBody(),{paddingLeft:t,paddingRight:t}),!1!==n&&e.setStyles(r.getBody(),{paddingBottom:n})}),r.on("nodechange setcontent keyup FullscreenStateChanged",function(e){h(r,t)}),f.shouldAutoResizeOnInit(r)&&r.on("init",function(){a(r,t,20,100,function(){a(r,t,5,1e3)})})},o=h,s=function(e,t){e.addCommand("mceAutoResize",function(){o(e,t)})};e.add("autoresize",function(e){var t;e.inline||(t=r(0),s(e,t),n(e,t))})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-autosave",["tinymce"],function(){return function(){!function(){"use strict";function r(e){function t(){return n}var n=e;return{get:t,set:function(e){n=e},clone:function(){return r(n)}}}function n(e,t){var n=e.settings.forced_root_block;return""===(t=u.trim(void 0===t?e.getBody().innerHTML:t))||new RegExp("^<"+n+"[^>]*>(( |&nbsp;|[ \t]|<br[^>]*>)+?|)</"+n+">|<br>$","i").test(t)}function o(e){var t=parseInt(c.getItem(m.getAutoSavePrefix(e)+"time"),10)||0;return!((new Date).getTime()-t>m.getAutoSaveRetention(e)&&(i(e,!1),1))}function i(e,t){var n=m.getAutoSavePrefix(e);c.removeItem(n+"draft"),c.removeItem(n+"time"),!1!==t&&d.fireRemoveDraft(e)}function a(e){var t=m.getAutoSavePrefix(e);!n(e)&&e.isDirty()&&(c.setItem(t+"draft",e.getContent({format:"raw",no_events:!0})),c.setItem(t+"time",(new Date).getTime().toString()),d.fireStoreDraft(e))}function t(e){var t=m.getAutoSavePrefix(e);o(e)&&(e.setContent(c.getItem(t+"draft"),{format:"raw"}),d.fireRestoreDraft(e))}function s(t,n){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[n].concat(e))}}function l(n,r){return function(e){var t=e.control;t.disabled(!p.hasDraft(n)),n.on("StoreDraft RestoreDraft RemoveDraft",function(){t.disabled(!p.hasDraft(n))}),p.startStoreDraft(n,r)}}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),u=tinymce.util.Tools.resolve("tinymce.util.Tools"),d={fireRestoreDraft:function(e){return e.fire("RestoreDraft")},fireStoreDraft:function(e){return e.fire("StoreDraft")},fireRemoveDraft:function(e){return e.fire("RemoveDraft")}},f=function(e,t){return((e=/^(\d+)([ms]?)$/.exec(""+(e||t)))[2]?{s:1e3,m:6e4}[e[2]]:1)*parseInt(e,10)},m={shouldAskBeforeUnload:function(e){return e.getParam("autosave_ask_before_unload",!0)},getAutoSavePrefix:function(e){var t=e.getParam("autosave_prefix","tinymce-autosave-{path}{query}{hash}-{id}-");return t=(t=(t=(t=t.replace(/\{path\}/g,document.location.pathname)).replace(/\{query\}/g,document.location.search)).replace(/\{hash\}/g,document.location.hash)).replace(/\{id\}/g,e.id)},shouldRestoreWhenEmpty:function(e){return e.getParam("autosave_restore_when_empty",!1)},getAutoSaveInterval:function(e){return f(e.settings.autosave_interval,"30s")},getAutoSaveRetention:function(e){return f(e.settings.autosave_retention,"20m")}},p={isEmpty:n,hasDraft:o,removeDraft:i,storeDraft:a,restoreDraft:t,startStoreDraft:function(e,t){var n=m.getAutoSaveInterval(e);t.get()||(setInterval(function(){e.removed||a(e)},n),t.set(!0))},restoreLastDraft:function(e){e.undoManager.transact(function(){t(e),i(e)}),e.focus()}},h=function(e){return{hasDraft:s(p.hasDraft,e),storeDraft:s(p.storeDraft,e),restoreDraft:s(p.restoreDraft,e),removeDraft:s(p.removeDraft,e),isEmpty:s(p.isEmpty,e)}},g=tinymce.util.Tools.resolve("tinymce.EditorManager"),v=(g._beforeUnloadHandler=function(){var t;return u.each(g.get(),function(e){e.plugins.autosave&&e.plugins.autosave.storeDraft(),!t&&e.isDirty()&&m.shouldAskBeforeUnload(e)&&(t=e.translate("You have unsaved changes are you sure you want to navigate away?"))}),t},function(e){window.onbeforeunload=g._beforeUnloadHandler}),y=function(e,t){e.addButton("restoredraft",{title:"Restore last draft",onclick:function(){p.restoreLastDraft(e)},onPostRender:l(e,t)}),e.addMenuItem("restoredraft",{text:"Restore last draft",onclick:function(){p.restoreLastDraft(e)},onPostRender:l(e,t),context:"file"})};e.add("autosave",function(e){var t=r(!1);return v(e),y(e,t),h(e)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-bbcode",["tinymce"],function(){return function(){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=function(n){n=t.trim(n);function e(e,t){n=n.replace(e,t)}return e(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),e(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),e(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),e(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),e(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),e(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]"),e(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]"),e(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),e(/<font>(.*?)<\/font>/gi,"$1"),e(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]"),e(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]"),e(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]"),e(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]"),e(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]"),e(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]"),e(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]"),e(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]"),e(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]"),e(/<\/(strong|b)>/gi,"[/b]"),e(/<(strong|b)>/gi,"[b]"),e(/<\/(em|i)>/gi,"[/i]"),e(/<(em|i)>/gi,"[i]"),e(/<\/u>/gi,"[/u]"),e(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]"),e(/<u>/gi,"[u]"),e(/<blockquote[^>]*>/gi,"[quote]"),e(/<\/blockquote>/gi,"[/quote]"),e(/<br \/>/gi,"\n"),e(/<br\/>/gi,"\n"),e(/<br>/gi,"\n"),e(/<p>/gi,""),e(/<\/p>/gi,"\n"),e(/&nbsp;|\u00a0/gi," "),e(/&quot;/gi,'"'),e(/&lt;/gi,"<"),e(/&gt;/gi,">"),e(/&amp;/gi,"&"),n},r=function(n){n=t.trim(n);function e(e,t){n=n.replace(e,t)}return e(/\n/gi,"<br />"),e(/\[b\]/gi,"<strong>"),e(/\[\/b\]/gi,"</strong>"),e(/\[i\]/gi,"<em>"),e(/\[\/i\]/gi,"</em>"),e(/\[u\]/gi,"<u>"),e(/\[\/u\]/gi,"</u>"),e(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>'),e(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1</a>'),e(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />'),e(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2</font>'),e(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1</span>&nbsp;'),e(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1</span>&nbsp;'),n};e.add("bbcode",function(){return{init:function(e){e.on("beforeSetContent",function(e){e.content=r(e.content)}),e.on("postProcess",function(e){e.set&&(e.content=r(e.content)),e.get&&(e.content=n(e.content))})}}})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-charmap",["tinymce"],function(){return function(){!function(){"use strict";function o(e){for(;e;){if("TD"===e.nodeName)return e;e=e.parentNode}}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e,t){return e.fire("insertCustomChar",{chr:t})},i=function(e,t){t=n(e,t).chr;e.execCommand("mceInsertContent",!1,t)},t=tinymce.util.Tools.resolve("tinymce.util.Tools"),r={getCharMap:function(e){return e.settings.charmap},getCharMapAppend:function(e){return e.settings.charmap_append}},a=t.isArray,s=function(e){return a(e)?[].concat(t.grep(e,function(e){return a(e)&&2===e.length})):"function"==typeof e?e():[]},l=function(e){return e=e,t=[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]],(n=r.getCharMap(e))&&(t=s(n)),(n=r.getCharMapAppend(e))?[].concat(t).concat(s(n)):t;var t,n},c=function(t){return{getCharMap:function(){return l(t)},insertChar:function(e){i(t,e)}}},u=function(e){for(var t,n=Math.min(e.length,25),r=Math.ceil(e.length/n),o='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>',i=0;i<r;i++){for(o+="<tr>",t=0;t<n;t++){var a,s,l=i*n+t;l<e.length?(l=e[l],a=parseInt(l[0],10),s=l?String.fromCharCode(a):"&nbsp;",o+='<td title="'+l[1]+'"><div tabindex="-1" title="'+l[1]+'" role="button" data-chr="'+a+'">'+s+"</div></td>"):o+="<td />"}o+="</tr>"}return o+="</tbody></table>"},d=function(n){var e={type:"container",html:u(l(n)),onclick:function(e){var t=e.target;/^(TD|DIV)$/.test(t.nodeName)&&(t=o(t).firstChild)&&t.hasAttribute("data-chr")&&(t=t.getAttribute("data-chr"),t=parseInt(t,10),isNaN(t)||i(n,String.fromCharCode(t)),e.ctrlKey||r.close())},onmouseover:function(e){e=o(e.target);e&&e.firstChild?(r.find("#preview").text(e.firstChild.firstChild.data),r.find("#previewTitle").text(e.title)):(r.find("#preview").text(" "),r.find("#previewTitle").text(" "))}},r=n.windowManager.open({title:"Special character",spacing:10,padding:10,items:[e,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"spacer",minHeight:20},{type:"label",name:"previewTitle",text:" ",style:"white-space: pre-wrap;",border:1,minWidth:140}]}],buttons:[{text:"Close",onclick:function(){r.close()}}]})},f=function(e){e.addCommand("mceShowCharmap",function(){d(e)})},m=function(e){e.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"}),e.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"})};e.add("charmap",function(e){return f(e),m(e),c(e)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-code",["tinymce"],function(){return function(){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),r=function(e){return e.getParam("code_dialog_width",600)},o=function(e){return e.getParam("code_dialog_height",Math.min(t.DOM.getViewPort().h-200,500))},i=function(e,t){e.focus(),e.undoManager.transact(function(){e.setContent(t)}),e.selection.setCursorLocation(),e.nodeChanged()},a=function(e){return e.getContent({source_view:!0})},n=function(t){var e=r(t),n=o(t);t.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:e,minHeight:n,spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(e){i(t,e.data.code)}}).find("#code").value(a(t))},s=function(e){e.addCommand("mceCodeEditor",function(){n(e)})},l=function(e){e.addButton("code",{icon:"code",tooltip:"Source code",onclick:function(){n(e)}}),e.addMenuItem("code",{icon:"code",text:"Source code",onclick:function(){n(e)}})};e.add("code",function(e){return s(e),l(e),{}})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-colorpicker",["tinymce"],function(){return function(){!function(){"use strict";function o(e,t){var n=(t=r(t)).toRgb();e.fromJSON({r:n.r,g:n.g,b:n.b,hex:t.toHex().substr(1)}),i(e,t.toHex())}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.util.Color"),i=function(e,t){e.find("#preview")[0].getEl().style.background=t},a=function(e,t,n){var r=e.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:n,onchange:function(){var e=this.rgb();r&&(r.find("#r").value(e.r),r.find("#g").value(e.g),r.find("#b").value(e.b),r.find("#hex").value(this.value().substr(1)),i(r,this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var e=r.find("colorpicker")[0],t=this.name(),n=this.value();"hex"===t?(o(r,n="#"+n),e.value(n)):(n={r:r.find("#r").value(),g:r.find("#g").value(),b:r.find("#b").value()},e.value(n),o(r,n))}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){t("#"+r.toJSON().hex)}});o(r,n)};e.add("colorpicker",function(n){n.settings.color_picker_callback||(n.settings.color_picker_callback=function(e,t){a(n,e,t)})})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-contextmenu",["tinymce"],function(){return function(){!function(){"use strict";function r(e){function t(){return n}var n=e;return{get:t,set:function(e){n=e},clone:function(){return r(n)}}}function n(e,t){var n,r;return e&&"static"!==i.DOM.getStyle(e,"position",!0)?(n=(r=i.DOM.getPos(e)).x-e.scrollLeft,r=r.y-e.scrollTop,c(t,-n,-r)):c(t,0,0)}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=function(e){return{isContextMenuVisible:function(){return e.get()}}},a={shouldNeverUseNative:function(e){return e.settings.contextmenu_never_use_native},getContextMenu:function(e){return e.getParam("contextmenu","link openlink image inserttable | cell row column deletetable")}},i=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),s=function(e){return i.DOM.select(e.settings.ui_container)[0]},l=function(e,t){return{x:e,y:t}},c=function(e,t,n){return l(e.x+t,e.y+n)},u=function(e,t){return e.inline?n(s(e),l(t.pageX,t.pageY)):(t=function(e,t){e=i.DOM.getPos(e);return c(t,e.x,e.y)}(e.getContentAreaContainer(),l(t.clientX,t.clientY)),n(s(e),t))},d=tinymce.util.Tools.resolve("tinymce.ui.Factory"),f=tinymce.util.Tools.resolve("tinymce.util.Tools"),m=function(e,t,n,r){null===r.get()?r.set(function(n,t){var e,r=[],o=a.getContextMenu(n);f.each(o.split(/[ ,]/),function(e){var t=n.menuItems[e];(t="|"===e?{text:e}:t)&&(t.shortcut="",r.push(t))});for(var i=0;i<r.length;i++)"|"!==r[i].text||0!==i&&i!==r.length-1||r.splice(i,1);return(e=d.create("menu",{items:r,context:"contextmenu",classes:"contextmenu"})).uiContainer=s(n),e.renderTo(s(n)),e.on("hide",function(e){e.control===this&&t.set(!1)}),n.on("remove",function(){e.remove(),e=null}),e}(e,n)):r.get().show(),r.get().moveTo(t.x,t.y),n.set(!0)},p=function(n,r,o){n.on("contextmenu",function(e){var t;t=n,e.ctrlKey&&!a.shouldNeverUseNative(t)||(e.preventDefault(),m(n,u(n,e),r,o))})};e.add("contextmenu",function(e){var t=r(null),n=r(!1);return p(e,n,t),o(n)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-directionality",["tinymce"],function(){return function(){!function(){"use strict";function t(t){var n=[];return i.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(e){n.push(e+"[dir="+t+"]")}),n.join(",")}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=function(e,t){var n,r=e.dom,o=e.selection.getSelectedBlocks();o.length&&(n=r.getAttrib(o[0],"dir"),i.each(o,function(e){r.getParent(e.parentNode,'*[dir="'+t+'"]',r.getRoot())||r.setAttrib(e,"dir",n!==t?t:null)}),e.nodeChanged())},r=function(e){e.addCommand("mceDirectionLTR",function(){n(e,"ltr")}),e.addCommand("mceDirectionRTL",function(){n(e,"rtl")})},o=function(e){e.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:t("ltr")}),e.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:t("rtl")})};e.add("directionality",function(e){r(e),o(e)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-emoticons",["tinymce"],function(){return function(){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=[["cool","cry","embarassed","foot-in-mouth"],["frown","innocent","kiss","laughing"],["money-mouth","sealed","smile","surprised"],["tongue-out","undecided","wink","yell"]],n=function(n){var r='<table role="list" class="mce-grid">';return t.each(o,function(e){r+="<tr>",t.each(e,function(e){var t=n+"/img/smiley-"+e+".gif";r+='<td><a href="#" data-mce-url="'+t+'" data-mce-alt="'+e+'" tabindex="-1" role="option" aria-label="'+e+'"><img src="'+t+'" style="width: 18px; height: 18px" role="presentation" /></a></td>'}),r+="</tr>"}),r+="</table>"},r=function(r,e){e=n(e);r.addButton("emoticons",{type:"panelbutton",panel:{role:"application",autohide:!0,html:e,onclick:function(e){var t,n,e=r.dom.getParent(e.target,"a");e&&(t=r,n=e.getAttribute("data-mce-url"),e=e.getAttribute("data-mce-alt"),t.insertContent(t.dom.createHTML("img",{src:n,alt:e})),this.hide())}},tooltip:"Emoticons"})};e.add("emoticons",function(e,t){r(e,t)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-fullpage",["tinymce"],function(){return function(){!function(){"use strict";function r(e){function t(){return n}var n=e;return{get:t,set:function(e){n=e},clone:function(){return r(n)}}}function u(e){return t({validate:!1,root_name:"#document"}).parse(e)}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),p=tinymce.util.Tools.resolve("tinymce.util.Tools"),t=tinymce.util.Tools.resolve("tinymce.html.DomParser"),d=tinymce.util.Tools.resolve("tinymce.html.Node"),f=tinymce.util.Tools.resolve("tinymce.html.Serializer"),h={shouldHideInSourceView:function(e){return e.getParam("fullpage_hide_in_source_view")},getDefaultXmlPi:function(e){return e.getParam("fullpage_default_xml_pi")},getDefaultEncoding:function(e){return e.getParam("fullpage_default_encoding")},getDefaultFontFamily:function(e){return e.getParam("fullpage_default_font_family")},getDefaultFontSize:function(e){return e.getParam("fullpage_default_font_size")},getDefaultTextColor:function(e){return e.getParam("fullpage_default_text_color")},getDefaultTitle:function(e){return e.getParam("fullpage_default_title")},getDefaultDocType:function(e){return e.getParam("fullpage_default_doctype","<!DOCTYPE html>")}},g={parseHeader:u,htmlToData:function(e,t){var n,t=u(t),r={};function o(e,t){return e.attr(t)||""}return r.fontface=h.getDefaultFontFamily(e),r.fontsize=h.getDefaultFontSize(e),7===(e=t.firstChild).type&&(r.xml_pi=!0,n=/encoding="([^"]+)"/.exec(e.value))&&(r.docencoding=n[1]),(e=t.getAll("#doctype")[0])&&(r.doctype="<!DOCTYPE"+e.value+">"),(e=t.getAll("title")[0])&&e.firstChild&&(r.title=e.firstChild.value),p.each(t.getAll("meta"),function(e){var t=e.attr("name"),n=e.attr("http-equiv");t?r[t.toLowerCase()]=e.attr("content"):"Content-Type"===n&&(t=/charset\s*=\s*(.*)\s*/gi.exec(e.attr("content")))&&(r.docencoding=t[1])}),(e=t.getAll("html")[0])&&(r.langcode=o(e,"lang")||o(e,"xml:lang")),r.stylesheets=[],p.each(t.getAll("link"),function(e){"stylesheet"===e.attr("rel")&&r.stylesheets.push(e.attr("href"))}),(e=t.getAll("body")[0])&&(r.langdir=o(e,"dir"),r.style=o(e,"style"),r.visited_color=o(e,"vlink"),r.link_color=o(e,"link"),r.active_color=o(e,"alink")),r},dataToHtml:function(e,i,t){var a,n,s,r=e.dom;function o(e,t,n){e.attr(t,n||void 0)}function l(e){n.firstChild?n.insert(e,n.firstChild):n.append(e)}a=u(t),(n=a.getAll("head")[0])||(s=a.getAll("html")[0],n=new d("head",1),s.firstChild?s.insert(n,s.firstChild,!0):s.append(n)),s=a.firstChild,i.xml_pi?(t='version="1.0"',i.docencoding&&(t+=' encoding="'+i.docencoding+'"'),7!==s.type&&(s=new d("xml",7),a.insert(s,a.firstChild,!0)),s.value=t):s&&7===s.type&&s.remove(),s=a.getAll("#doctype")[0],i.doctype?(s||(s=new d("#doctype",10),i.xml_pi?a.insert(s,a.firstChild):l(s)),s.value=i.doctype.substring(9,i.doctype.length-1)):s&&s.remove(),s=null,p.each(a.getAll("meta"),function(e){"Content-Type"===e.attr("http-equiv")&&(s=e)}),i.docencoding?(s||((s=new d("meta",1)).attr("http-equiv","Content-Type"),s.shortEnded=!0,l(s)),s.attr("content","text/html; charset="+i.docencoding)):s&&s.remove(),s=a.getAll("title")[0],i.title?(s?s.empty():l(s=new d("title",1)),s.append(new d("#text",3)).value=i.title):s&&s.remove(),p.each("keywords,description,author,copyright,robots".split(","),function(e){for(var t,n=a.getAll("meta"),r=i[e],o=0;o<n.length;o++)if((t=n[o]).attr("name")===e)return void(r?t.attr("content",r):t.remove());r&&((s=new d("meta",1)).attr("name",e),s.attr("content",r),s.shortEnded=!0,l(s))});var c={};return p.each(a.getAll("link"),function(e){"stylesheet"===e.attr("rel")&&(c[e.attr("href")]=e)}),p.each(i.stylesheets,function(e){c[e]||((s=new d("link",1)).attr({rel:"stylesheet",text:"text/css",href:e}),s.shortEnded=!0,l(s)),delete c[e]}),p.each(c,function(e){e.remove()}),(s=a.getAll("body")[0])&&(o(s,"dir",i.langdir),o(s,"style",i.style),o(s,"vlink",i.visited_color),o(s,"link",i.link_color),o(s,"alink",i.active_color),r.setAttribs(e.getBody(),{style:i.style,dir:i.dir,vLink:i.visited_color,link:i.link_color,aLink:i.active_color})),(s=a.getAll("html")[0])&&(o(s,"lang",i.langcode),o(s,"xml:lang",i.langcode)),n.firstChild||n.remove(),(t=f({validate:!1,indent:!0,apply_source_formatting:!0,indent_before:"head,html,body,meta,title,script,link,style",indent_after:"head,html,body,meta,title,script,link,style"}).serialize(a)).substring(0,t.indexOf("</body>"))}},n=function(t,n){var r=g.htmlToData(t,n.get());t.windowManager.open({title:"Document properties",data:r,defaults:{type:"textbox",size:40},body:[{name:"title",label:"Title"},{name:"keywords",label:"Keywords"},{name:"description",label:"Description"},{name:"robots",label:"Robots"},{name:"author",label:"Author"},{name:"docencoding",label:"Encoding"}],onSubmit:function(e){e=g.dataToHtml(t,p.extend(r,e.data),n.get());n.set(e)}})},o=function(e,t){e.addCommand("mceFullPageProperties",function(){n(e,t)})},v={protectHtml:function(e,t){return p.each(e,function(e){t=t.replace(e,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})}),t},unprotectHtml:function(e){return e.replace(/<!--mce:protected ([\s\S]*?)-->/g,function(e,t){return unescape(t)})}},y=p.each,b=function(e){return e.replace(/<\/?[A-Z]+/g,function(e){return e.toLowerCase()})},w=function(e){var t,n="",r="";return h.getDefaultXmlPi(e)&&(n+='<?xml version="1.0" encoding="'+(h.getDefaultEncoding(e)||"ISO-8859-1")+'" ?>\n'),n=n+h.getDefaultDocType(e)+"\n<html>\n<head>\n",(t=h.getDefaultTitle(e))&&(n+="<title>"+t+"</title>\n"),(t=h.getDefaultEncoding(e))&&(n+='<meta http-equiv="Content-Type" content="text/html; charset='+t+'" />\n'),(t=h.getDefaultFontFamily(e))&&(r+="font-family: "+t+";"),(t=h.getDefaultFontSize(e))&&(r+="font-size: "+t+";"),(t=h.getDefaultTextColor(e))&&(r+="color: "+t+";"),n+="</head>\n<body"+(r?' style="'+r+'"':"")+">\n"},i=function(d,f,m){d.on("BeforeSetContent",function(e){var t,n,r,o,i,a,s,l,c,u;n=f,r=m,e=e,c="",u=(t=d).dom,e.selection||(l=v.protectHtml(t.settings.protect,e.content),"raw"===e.format&&n.get())||e.source_view&&h.shouldHideInSourceView(t)||(-1!==(i=(l=(l=0!==l.length||e.source_view?l:p.trim(n.get())+"\n"+p.trim(l)+"\n"+p.trim(r.get())).replace(/<(\/?)BODY/gi,"<$1body")).indexOf("<body"))?(i=l.indexOf(">",i),n.set(b(l.substring(0,i+1))),-1===(o=l.indexOf("</body",i))&&(o=l.length),e.content=p.trim(l.substring(i+1,o)),r.set(b(l.substring(o)))):(n.set(w(t)),r.set("\n</body>\n</html>")),e=g.parseHeader(n.get()),y(e.getAll("style"),function(e){e.firstChild&&(c+=e.firstChild.value)}),(i=e.getAll("body")[0])&&u.setAttribs(t.getBody(),{style:i.attr("style")||"",dir:i.attr("dir")||"",vLink:i.attr("vlink")||"",link:i.attr("link")||"",aLink:i.attr("alink")||""}),u.remove("fullpage_styles"),a=t.getDoc().getElementsByTagName("head")[0],c&&(u.add(a,"style",{id:"fullpage_styles"},c),(i=u.get("fullpage_styles")).styleSheet)&&(i.styleSheet.cssText=c),s={},p.each(a.getElementsByTagName("link"),function(e){"stylesheet"===e.rel&&e.getAttribute("data-mce-fullpage")&&(s[e.href]=e)}),p.each(e.getAll("link"),function(e){var t=e.attr("href");if(!t)return!0;s[t]||"stylesheet"!==e.attr("rel")||u.add(a,"link",{rel:"stylesheet",text:"text/css",href:t,"data-mce-fullpage":"1"}),delete s[t]}),p.each(s,function(e){e.parentNode.removeChild(e)}))}),d.on("GetContent",function(e){var t,n,r;t=d,n=f.get(),r=m.get(),(e=e).selection||e.source_view&&h.shouldHideInSourceView(t)||(e.content=v.unprotectHtml(p.trim(n)+"\n"+p.trim(e.content)+"\n"+p.trim(r)))})},a=function(e){e.addButton("fullpage",{title:"Document properties",cmd:"mceFullPageProperties"}),e.addMenuItem("fullpage",{text:"Document properties",cmd:"mceFullPageProperties",context:"file"})};e.add("fullpage",function(e){var t=r(""),n=r("");o(e,t),a(e),i(e,t,n)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-fullscreen",["tinymce"],function(){return function(){!function(){"use strict";function r(e){function t(){return n}var n=e;return{get:t,set:function(e){n=e},clone:function(){return r(n)}}}function t(n){return function(e){var t=e.control;n.on("FullscreenStateChanged",function(e){t.active(e.state)})}}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){return{isFullscreen:function(){return null!==e.get()}}},o=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),f=function(e,t){e.fire("FullscreenStateChanged",{state:t})},m=o.DOM,i=function(e,t){function n(){var e,t,n;m.setStyle(u,"height",(t=window,(n=document.body).offsetWidth&&(n.offsetWidth,e=n.offsetHeight),t.innerWidth&&t.innerHeight&&(t.innerWidth,e=t.innerHeight),e-(l.clientHeight-u.clientHeight)))}function r(){m.unbind(window,"resize",n)}var o,i=document.body,a=document.documentElement,s=t.get(),l=e.getContainer(),c=l.style,u=e.getContentAreaContainer().firstChild,d=u.style;s?(d.width=s.iframeWidth,d.height=s.iframeHeight,s.containerWidth&&(c.width=s.containerWidth),s.containerHeight&&(c.height=s.containerHeight),m.removeClass(i,"mce-fullscreen"),m.removeClass(a,"mce-fullscreen"),m.removeClass(l,"mce-fullscreen"),o=s.scrollPos,window.scrollTo(o.x,o.y),m.unbind(window,"resize",s.resizeHandler),e.off("remove",s.removeHandler),t.set(null),f(e,!1)):(s={scrollPos:{x:(o=m.getViewPort()).x,y:o.y},containerWidth:c.width,containerHeight:c.height,iframeWidth:d.width,iframeHeight:d.height,resizeHandler:n,removeHandler:r},d.width=d.height="100%",c.width=c.height="",m.addClass(i,"mce-fullscreen"),m.addClass(a,"mce-fullscreen"),m.addClass(l,"mce-fullscreen"),m.bind(window,"resize",n),e.on("remove",r),n(),t.set(s),f(e,!0))},a=function(e,t){e.addCommand("mceFullScreen",function(){i(e,t)})},s=function(e){e.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:!0,cmd:"mceFullScreen",onPostRender:t(e),context:"view"}),e.addButton("fullscreen",{active:!1,tooltip:"Fullscreen",cmd:"mceFullScreen",onPostRender:t(e)})};e.add("fullscreen",function(e){var t=r(null);return e.settings.inline||(a(e,t),s(e),e.addShortcut("Ctrl+Shift+F","","mceFullScreen")),n(t)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-hr",["tinymce"],function(){return function(){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e){e.addCommand("InsertHorizontalRule",function(){e.execCommand("mceInsertContent",!1,"<hr />")})},n=function(e){e.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"}),e.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})};e.add("hr",function(e){t(e),n(e)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-image",["tinymce"],function(){return function(){!function(){"use strict";function n(e,t){for(var n=null!=t?t:a,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n}function r(e,t){for(var n,r,o=void 0!==t?t:a,i=0;i<e.length;++i)n=o,r=e[i],void 0!==n[r]&&null!==n[r]||(n[r]={}),o=n[r];return o}var M=tinymce.util.Tools.resolve("tinymce.PluginManager"),c={hasDimensions:function(e){return!1!==e.settings.image_dimensions},hasAdvTab:function(e){return!0===e.settings.image_advtab},getPrependUrl:function(e){return e.getParam("image_prepend_url","")},getClassList:function(e){return e.getParam("image_class_list")},hasDescription:function(e){return!1!==e.settings.image_description},hasImageTitle:function(e){return!0===e.settings.image_title},hasImageCaption:function(e){return!0===e.settings.image_caption},getImageList:function(e){return e.getParam("image_list",!1)},hasUploadUrl:function(e){return e.getParam("images_upload_url",!1)},hasUploadHandler:function(e){return e.getParam("images_upload_handler",!1)},getUploadUrl:function(e){return e.getParam("images_upload_url")},getUploadHandler:function(e){return e.getParam("images_upload_handler")},getUploadBasePath:function(e){return e.getParam("images_upload_base_path")},getUploadCredentials:function(e){return e.getParam("images_upload_credentials")}},a="undefined"!=typeof window?window:Function("return this;")(),L={path:n,resolve:function(e,t){e=e.split(".");return n(e,t)},forge:r,namespace:function(e,t){e=e.split(".");return r(e,t)}},e={getOrDie:function(e,t){t=L.resolve(e,t);if(null==t)throw e+" not available on this browser";return t}};function o(){return new(e.getOrDie("FileReader"))}function i(e,t){return Math.max(parseInt(e,10),parseInt(t,10))}function t(n){return function(e){return(null===(e=e)?"null":"object"==(t=typeof e)&&Array.prototype.isPrototypeOf(e)?"array":"object"==t&&String.prototype.isPrototypeOf(e)?"string":t)===n;var t}}function s(a){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var o,i=e[r];for(o in i)i.hasOwnProperty(o)&&(n[o]=a(n[o],i[o]))}return n}}function l(e){return e.style.marginLeft&&e.style.marginRight&&e.style.marginLeft===e.style.marginRight?E.removePixelSuffix(e.style.marginLeft):""}function u(e){return e.style.marginTop&&e.style.marginBottom&&e.style.marginTop===e.style.marginBottom?E.removePixelSuffix(e.style.marginTop):""}function d(e){return e.style.borderWidth?E.removePixelSuffix(e.style.borderWidth):""}function f(e,t){return e.hasAttribute(t)?e.getAttribute(t):""}function m(e,t){return e.style[t]||""}function p(e){return null!==e.parentNode&&"FIGURE"===e.parentNode.nodeName}function h(e,t){var n=e.getAttribute("style");0<(t=t(null!==n?n:"")).length?(e.setAttribute("style",t),e.setAttribute("data-mce-style",t)):e.removeAttribute("style")}function g(e,t){return e.style[t]?E.removePixelSuffix(e.style[t]):f(e,t)}function v(e){return"FIGURE"===e.nodeName}function y(e,t,n){var r=te(e,n);A(n,r,t,"caption",function(e,t,n){return K(e)}),A(n,r,t,"src",_),A(n,r,t,"alt",_),A(n,r,t,"title",_),A(n,r,t,"width",Y("width",e)),A(n,r,t,"height",Y("height",e)),A(n,r,t,"class",_),A(n,r,t,"style",D(function(e,t){return _(e,"style",t)},e)),A(n,r,t,"hspace",D(G,e)),A(n,r,t,"vspace",D(X,e)),A(n,r,t,"border",D(J,e)),A(n,r,t,"borderStyle",D(Q,e))}function b(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return n?e.dom.select("img",n)[0]:t&&("IMG"!==t.nodeName||t.getAttribute("data-mce-object")||t.getAttribute("data-mce-placeholder"))?null:t}function w(t,e){var n=t.dom,r=n.getParent(e.parentNode,function(e){return t.schema.getTextBlockElements()[e.nodeName]});return r?n.split(r,e):e}function F(t,e){r=function(e){return P(t,e)},e=e,n=document.createElement("img"),y(r,N.merge(e,{caption:!1}),n),_(n,"alt",e.alt);var n,e=e.caption?((r=R.create("figure",{class:"image"})).appendChild(n),r.appendChild(R.create("figcaption",{contentEditable:!0},"Caption")),r.contentEditable="false",r):n,r=(t.dom.setAttrib(e,"data-mce-id","__mcenew"),t.focus(),t.selection.setContent(e.outerHTML),t.dom.select('*[data-mce-id="__mcenew"]')[0]);t.dom.setAttrib(r,"data-mce-id",null),v(r)?(n=w(t,r),t.selection.select(n)):t.selection.select(r)}function H(e,t){var n,r,o,i,a=b(e);a?t.src?(r=t,i=b(n=e),y(function(e){return P(n,e)},r,i),n.dom.setAttrib(i,"src",i.getAttribute("src")),v(i.parentNode)?(o=i.parentNode,w(n,o),n.selection.select(i.parentNode)):(n.selection.select(i),E.waitLoadImage(n,r,i))):(o=e,(r=a)&&(r=o.dom.is(r.parentNode,"figure.image")?r.parentNode:r,o.dom.remove(r),o.focus(),o.nodeChanged(),o.dom.isEmpty(o.getBody()))&&(o.setContent(""),o.selection.setCursorLocation())):t.src&&F(e,t)}function x(n,r){r.find("#style").each(function(e){var t=ee(function(e){return P(n,e)},N.merge(Z(),r.toJSON()));e.value(t)})}function C(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())}function k(e){oe(e,ie)}function z(t,e){return e=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:function(e){ae(e,t)},onbeforecall:se},e],c.hasDescription(t)&&e.push({name:"alt",type:"textbox",label:"Image description"}),c.hasImageTitle(t)&&e.push({name:"title",type:"textbox",label:"Image Title"}),c.hasDimensions(t)&&e.push(O.createUi()),c.getClassList(t)&&e.push({name:"class",type:"listbox",label:"Class",values:E.buildListItems(c.getClassList(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({inline:"img",classes:[e.value]})})})}),c.hasImageCaption(t)&&e.push({name:"caption",type:"checkbox",label:"Caption"}),e}function U(){return e.getOrDie("URL")}var S=tinymce.util.Tools.resolve("tinymce.util.Promise"),T=tinymce.util.Tools.resolve("tinymce.util.Tools"),W=tinymce.util.Tools.resolve("tinymce.util.XHR"),E={getImageSize:function(e,n){var r=document.createElement("img");function t(e,t){r.parentNode&&r.parentNode.removeChild(r),n({width:e,height:t})}r.onload=function(){t(i(r.width,r.clientWidth),i(r.height,r.clientHeight))},r.onerror=function(){t(0,0)};var o=r.style;o.visibility="hidden",o.position="fixed",o.bottom=o.left="0px",o.width=o.height="auto",document.body.appendChild(r),r.src=e},buildListItems:function(e,o,t){return function n(e,r){return r=r||[],T.each(e,function(e){var t={text:e.text||e.title};e.menu?t.menu=n(e.menu):(t.value=e.value,o(t)),r.push(t)}),r}(e,t||[])},removePixelSuffix:function(e){return e=e&&e.replace(/px$/,"")},addPixelSuffix:function(e){return 0<e.length&&/^[0-9]+$/.test(e)&&(e+="px"),e},mergeMargins:function(e){if(e.margin){var t=e.margin.split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e},createImageList:function(e,t){e=c.getImageList(e);"string"==typeof e?W.send({url:e,success:function(e){t(JSON.parse(e))}}):"function"==typeof e?e(t):t(e)},waitLoadImage:function(e,t,n){function r(){n.onload=n.onerror=null,e.selection&&(e.selection.select(n),e.nodeChanged())}n.onload=function(){t.width||t.height||!c.hasDimensions(e)||e.dom.setAttribs(n,{width:n.clientWidth,height:n.clientHeight}),r()},n.onerror=r},blobToDataUri:function(r){return new S(function(e,t){var n=new o;n.onload=function(){e(n.result)},n.onerror=function(){t(o.error.message)},n.readAsDataURL(r)})}},$=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),j={isString:t("string"),isObject:t("object"),isArray:t("array"),isNull:t("null"),isBoolean:t("boolean"),isUndefined:t("undefined"),isFunction:t("function"),isNumber:t("number")},q=s(function(e,t){return j.isObject(e)&&j.isObject(t)?q(e,t):t}),V=s(function(e,t){return t}),N={deepMerge:q,merge:V},R=$.DOM,_=function(e,t,n){e.setAttribute(t,n)},K=function(e){var t;p(e)?(t=e.parentNode,R.insertAfter(e,t),R.remove(t)):(t=e,e=R.create("figure",{class:"image"}),R.insertAfter(e,t),e.appendChild(t),e.appendChild(R.create("figcaption",{contentEditable:!0},"Caption")),e.contentEditable="false")},Y=function(e,r){return function(e,t,n){e.style[t]?(e.style[t]=E.addPixelSuffix(n),h(e,r)):_(e,t,n)}},G=function(e,t){t=E.addPixelSuffix(t);e.style.marginLeft=t,e.style.marginRight=t},X=function(e,t){t=E.addPixelSuffix(t);e.style.marginTop=t,e.style.marginBottom=t},J=function(e,t){t=E.addPixelSuffix(t);e.style.borderWidth=t},Q=function(e,t){e.style.borderStyle=t},Z=function(){return{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""}},ee=function(e,t){var n=document.createElement("img");return _(n,"style",t.style),!l(n)&&""===t.hspace||G(n,t.hspace),!u(n)&&""===t.vspace||X(n,t.vspace),!d(n)&&""===t.border||J(n,t.border),!m(n,"borderStyle")&&""===t.borderStyle||Q(n,t.borderStyle),e(n.getAttribute("style"))},te=function(e,t){return{src:f(t,"src"),alt:f(t,"alt"),title:f(t,"title"),width:g(t,"width"),height:g(t,"height"),class:f(t,"class"),style:e(f(t,"style")),caption:p(t),hspace:l(t),vspace:u(t),border:d(t),borderStyle:m(t,"borderStyle")}},A=function(e,t,n,r,o){n[r]!==t[r]&&o(e,r,n[r])},D=function(r,o){return function(e,t,n){r(e,n),h(e,o)}},P=function(e,t){t=e.dom.styles.parse(t),t=E.mergeMargins(t),t=e.dom.styles.parse(e.dom.styles.serialize(t));return e.dom.styles.serialize(t)},ne=function(t){var e=b(t);return e?te(function(e){return P(t,e)},e):Z()},re={makeTab:function(t){return{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:(r=t,function(e){var t,n=r.dom,e=e.control.rootControl;c.hasAdvTab(r)&&(t=e.toJSON(),t=n.parseStyle(t.style),e.find("#vspace").value(""),e.find("#hspace").value(""),((t=E.mergeMargins(t))["margin-top"]&&t["margin-bottom"]||t["margin-right"]&&t["margin-left"])&&(t["margin-top"]===t["margin-bottom"]?e.find("#vspace").value(E.removePixelSuffix(t["margin-top"])):e.find("#vspace").value(""),t["margin-right"]===t["margin-left"]?e.find("#hspace").value(E.removePixelSuffix(t["margin-right"])):e.find("#hspace").value("")),t["border-width"]?e.find("#border").value(E.removePixelSuffix(t["border-width"])):e.find("#border").value(""),t["border-style"]?e.find("#borderStyle").value(t["border-style"]):e.find("#borderStyle").value(""),e.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(t)))))})},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,defaults:{type:"textbox",maxWidth:50,onchange:function(e){x(t,e.control.rootControl)}},items:[{label:"Vertical space",name:"vspace"},{label:"Border width",name:"border"},{label:"Horizontal space",name:"hspace"},{label:"Border style",type:"listbox",name:"borderStyle",width:90,maxWidth:90,onselect:function(e){x(t,e.control.rootControl)},values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]};var r}},oe=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],e=e.find("#constrain")[0];n&&r&&e&&t(n,r,e.checked())},ie=function(e,t,n){var r=e.state.get("oldVal"),o=t.state.get("oldVal"),i=e.value(),a=t.value();n&&r&&o&&i&&a&&(i!==r?(a=Math.round(i/r*a),isNaN(a)||t.value(a)):(i=Math.round(a/o*i),isNaN(i)||e.value(i))),C(e,t)},O={createUi:function(){function e(e){k(e.control.rootControl)}return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},syncSize:function(e){oe(e,C)},updateSize:k},ae=function(e,t){var n,r=e.meta||{},e=e.control,o=e.rootControl,i=o.find("#image-list")[0];i&&i.value(t.convertURL(e.value(),"src")),T.each(r,function(e,t){o.find("#"+t).value(e)}),r.width||r.height||(i=t.convertURL(e.value(),"src"),r=c.getPrependUrl(t),n=new RegExp("^(?:[a-z]+:)?//","i"),r&&!n.test(i)&&i.substring(0,r.length)!==r&&(i=r+i),e.value(i),E.getImageSize(t.documentBaseURI.toAbsolute(e.value()),function(e){e.width&&e.height&&c.hasDimensions(t)&&(o.find("#width").value(e.width),o.find("#height").value(e.height),O.syncSize(o))}))},se=function(e){e.meta=e.control.rootControl.toJSON()},le={makeTab:function(e,t){return{title:"General",type:"form",items:z(e,t)}},getGeneralItems:z},ce={createObjectURL:function(e){return U().createObjectURL(e)},revokeObjectURL:function(e){U().revokeObjectURL(e)}},ue=tinymce.util.Tools.resolve("tinymce.ui.Factory");function de(){return new(e.getOrDie("XMLHttpRequest"))}function fe(){}function me(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t}function pe(a){var t=function(e,t,n,r){var o,i=new de;i.open("POST",a.url),i.withCredentials=a.credentials,i.upload.onprogress=function(e){r(e.loaded/e.total*100)},i.onerror=function(){n("Image upload failed due to a XHR Transport error. Code: "+i.status)},i.onload=function(){var e;i.status<200||300<=i.status?n("HTTP Error: "+i.status):(e=JSON.parse(i.responseText))&&"string"==typeof e.location?t(me(a.basePath,e.location)):n("Invalid JSON: "+i.responseText)},(o=new FormData).append("file",e.blob(),e.filename()),i.send(o)};return a=T.extend({credentials:!1,handler:t},a),{upload:function(e){return a.url||a.handler!==t?(n=e,r=a.handler,new S(function(e,t){try{r(n,e,t,fe)}catch(e){t(e.message)}})):S.reject("Upload url missing from the settings.");var n,r}}}function he(l){return function(e){function n(){o.hide(),ce.revokeObjectURL(a)}var t=ue.get("Throbber"),r=e.control.rootControl,o=new t(r.getEl()),i=e.control.value(),a=ce.createObjectURL(i),s=pe({url:c.getUploadUrl(l),basePath:c.getUploadBasePath(l),credentials:c.getUploadCredentials(l),handler:c.getUploadHandler(l)});return o.show(),E.blobToDataUri(i).then(function(e){e=l.editorUpload.blobCache.create({blob:i,blobUri:a,name:i.name?i.name.replace(/\.[^\.]+$/,""):null,base64:e.split(",")[1]});return s.upload(e).then(function(e){var t=r.find("#src");return t.value(e),r.find("tabpanel")[0].activateTab(0),t.fire("change"),n(),e})}).catch(function(e){l.windowManager.alert(e),n()})}}function I(e){return function(){return e}}var ge=".jpg,.jpeg,.png,.gif",ve={makeTab:function(e){return{title:"Upload",type:"form",layout:"flex",direction:"column",align:"stretch",padding:"20 20 20 20",items:[{type:"container",layout:"flex",direction:"column",align:"center",spacing:10,items:[{text:"Browse for an image",type:"browsebutton",accept:ge,onchange:he(e)},{text:"OR",type:"label"}]},{text:"Drop an image here",type:"dropzone",accept:ge,height:100,onchange:he(e)}]}}},ye={noop:function(){for(var e=0;e<arguments.length;e++)e,0},noarg:function(t){return function(){for(var e=0;e<arguments.length;e++)e,0;return t()}},compose:function(t,n){return function(){for(var e=0;e<arguments.length;e++)e,0;return t(n.apply(null,arguments))}},constant:I,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(o){for(var e=1;e<arguments.length;e++)e-1,0;for(var i=new Array(arguments.length-1),t=1;t<arguments.length;t++)i[t-1]=arguments[t];return function(){for(var e=0;e<arguments.length;e++)e,0;for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var r=i.concat(t);return o.apply(null,r)}},not:function(t){return function(){for(var e=0;e<arguments.length;e++)e,0;return!t.apply(null,arguments)}},die:function(e){return function(){throw new Error(e)}},apply:function(e){return e()},call:function(e){e()},never:I(!1),always:I(!0)},be=function(t,e){var n=e.control.getRoot();O.updateSize(n),t.undoManager.transact(function(){var e=N.merge(ne(t),n.toJSON());H(t,e)}),t.editorUpload.uploadImagesAuto()};function B(o){function e(e){var n,t,r=ne(o);e&&(t={type:"listbox",label:"Image list",name:"image-list",values:E.buildListItems(e,function(e){e.value=o.convertURL(e.value||e.url,"src")},[{text:"None",value:""}]),value:r.src&&o.convertURL(r.src,"src"),onselect:function(e){var t=n.find("#alt");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),n.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){t=this}}),n=c.hasAdvTab(o)||c.hasUploadUrl(o)||c.hasUploadHandler(o)?(e=[le.makeTab(o,t)],c.hasAdvTab(o)&&e.push(re.makeTab(o)),(c.hasUploadUrl(o)||c.hasUploadHandler(o))&&e.push(ve.makeTab(o)),o.windowManager.open({title:"Insert/edit image",data:r,bodyType:"tabpanel",body:e,onSubmit:ye.curry(be,o)})):o.windowManager.open({title:"Insert/edit image",data:r,body:le.getGeneralItems(o,t),onSubmit:ye.curry(be,o)}),O.syncSize(n)}return{open:function(){E.createImageList(o,e)}}}function we(o){return function(e){for(var t,n=e.length,r=function(e){e.attr("contenteditable",o?"true":null)};n--;)t=e[n],Ce(t)&&(t.attr("contenteditable",o?"false":null),T.each(t.getAll("figcaption"),r))}}var xe=function(e){e.addCommand("mceImage",B(e).open)},Ce=function(e){e=e.attr("class");return e&&/\bimage\b/.test(e)},ke=function(e){e.on("preInit",function(){e.parser.addNodeFilter("figure",we(!0)),e.serializer.addNodeFilter("figure",we(!1))})},Se=function(e){e.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:B(e).open,stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"}),e.addMenuItem("image",{icon:"image",text:"Image",onclick:B(e).open,context:"insert",prependToContext:!0})};M.add("image",function(e){ke(e),Se(e),xe(e)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-importcss",["tinymce"],function(){return function(){!function(){"use strict";function n(i,e,a){var s=[],n={};d.each(i.contentCSS,function(e){n[e]=!0}),a=a||function(e,t){return t||n[e]};try{d.each(e.styleSheets,function(e){!function t(e,n){var r,o=e.href;if((o=l(o))&&a(o,n)&&!c(i,o)){d.each(e.imports,function(e){t(e,!0)});try{r=e.cssRules||e.rules}catch(e){}d.each(r,function(e){e.styleSheet?t(e.styleSheet,!0):e.selectorText&&d.each(e.selectorText.split(","),function(e){s.push(d.trim(e))})})}}(e)})}catch(e){}return s}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),o=tinymce.util.Tools.resolve("tinymce.EditorManager"),r=tinymce.util.Tools.resolve("tinymce.Env"),d=tinymce.util.Tools.resolve("tinymce.util.Tools"),f={shouldMergeClasses:function(e){return e.getParam("importcss_merge_classes")},shouldImportExclusive:function(e){return e.getParam("importcss_exclusive")},getSelectorConverter:function(e){return e.getParam("importcss_selector_converter")},getSelectorFilter:function(e){return e.getParam("importcss_selector_filter")},getCssGroups:function(e){return e.getParam("importcss_groups")},shouldAppend:function(e){return e.getParam("importcss_append")},getFileFilter:function(e){return e.getParam("importcss_file_filter")}},l=function(e){var t=r.cacheSuffix;return e="string"==typeof e?e.replace("?"+t,"").replace("&"+t,""):e},c=function(e,t){var n=e.settings,r=!1!==n.skin&&(n.skin||"lightgray");return!!r&&t===(n.skin_url?e.documentBaseURI.toAbsolute(n.skin_url):o.baseURL+"/skins/"+r)+"/content"+(e.inline?".inline":"")+".min.css"},a=function(t){return"string"==typeof t?function(e){return-1!==e.indexOf(t)}:t instanceof RegExp?function(e){return t.test(e)}:t},m=function(e,t){var n,r,o,i,a=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(t);if(a)return r=a[1],o=a[2].substr(1).split(".").join(" "),i=d.makeMap("a,img"),a[1]?(n={title:t},e.schema.getTextBlockElements()[r]?n.block=r:e.schema.getBlockElements()[r]||i[r.toLowerCase()]?n.selector=r:n.inline=r):a[2]&&(n={inline:"span",title:t.substr(1),classes:o}),!1!==f.shouldMergeClasses(e)?n.classes=o:n.attributes={class:o},n},p=function(e,t){return null===t||!1!==f.shouldImportExclusive(e)},i=m,t=function(c){c.on("renderFormatsMenu",function(e){function r(e,t){if(o=e,a=s,!(p(c,i=t)?o in a:o in i.selectors)){a=e,o=s,p(c,i=t)?o[a]=!0:i.selectors[a]=!0;o=(n=c).plugins.importcss,r=e;a=((i=t)&&i.selector_converter?i.selector_converter:f.getSelectorConverter(n)?f.getSelectorConverter(n):function(){return m(n,r)}).call(o,r,i);if(a)return e=a.name||u.DOM.uniqueId(),c.formatter.register(e,a),d.extend({},l.settings.itemDefaults,{text:a.title,format:e})}var n,r,o,i,a;return null}var t,s={},o=a(f.getSelectorFilter(c)),l=e.control,i=(t=f.getCssGroups(c),d.map(t,function(e){return d.extend({},e,{original:e,selectors:{},filter:a(e.filter),item:{text:e.title,menu:[]}})}));f.shouldAppend(c)||l.items().remove(),d.each(n(c,e.doc||c.getDoc(),a(f.getFileFilter(c))),function(n){var e,t;-1!==n.indexOf(".mce-")||o&&!o(n)||(t=n,0<(e=d.grep(i,function(e){return!e.filter||e.filter(t)})).length?d.each(e,function(e){var t=r(n,e);t&&e.item.menu.push(t)}):(e=r(n,null))&&l.add(e))}),d.each(i,function(e){0<e.item.menu.length&&l.add(e.item)}),e.control.renderNew()})},s=function(t){return{convertSelectorToFormat:function(e){return i(t,e)}}};e.add("importcss",function(e){return t(e),s(e)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-insertdatetime",["tinymce"],function(){return function(){!function(){"use strict";function r(e){function t(){return n}var n=e;return{get:t,set:function(e){n=e},clone:function(){return r(n)}}}function n(e){return e.getParam("insertdatetime_timeformat",e.translate("%H:%M:%S"))}function o(e){return e.getParam("insertdatetime_formats",["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"])}function s(e,t,n){return n=n||new Date,t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+n.getFullYear())).replace("%y",""+n.getYear())).replace("%m",d(n.getMonth()+1,2))).replace("%d",d(n.getDate(),2))).replace("%H",""+d(n.getHours(),2))).replace("%M",""+d(n.getMinutes(),2))).replace("%S",""+d(n.getSeconds(),2))).replace("%I",""+((n.getHours()+11)%12+1))).replace("%p",n.getHours()<12?"AM":"PM")).replace("%B",""+e.translate(u[n.getMonth()]))).replace("%b",""+e.translate(c[n.getMonth()]))).replace("%A",""+e.translate(a[n.getDay()]))).replace("%a",""+e.translate(i[n.getDay()]))).replace("%%","%")}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),l={getDateFormat:function(e){return e.getParam("insertdatetime_dateformat",e.translate("%Y-%m-%d"))},getTimeFormat:n,getFormats:o,getDefaultDateTime:function(e){var t=o(e);return 0<t.length?t[0]:n(e)},shouldInsertTimeElement:function(e){return e.getParam("insertdatetime_element",!1)}},i="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),a="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),c="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),u="January February March April May June July August September October November December".split(" "),d=function(e,t){if((e=""+e).length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e},f={insertDateTime:function(e,t){var n,r,o,i,a;l.shouldInsertTimeElement(e)?(n=s(e,t),r=void 0,r=/%[HMSIp]/.test(t)?s(e,"%Y-%m-%dT%H:%M"):s(e,"%Y-%m-%d"),(i=e.dom.getParent(e.selection.getStart(),"time"))?(i=i,a=r,a=(o=e).dom.create("time",{datetime:a},n),i.parentNode.insertBefore(a,i),o.dom.remove(i),o.selection.select(a,!0),o.selection.collapse(!1)):e.insertContent('<time datetime="'+r+'">'+n+"</time>")):e.insertContent(s(e,t))},getDateTime:s},m=function(e){e.addCommand("mceInsertDate",function(){f.insertDateTime(e,l.getDateFormat(e))}),e.addCommand("mceInsertTime",function(){f.insertDateTime(e,l.getTimeFormat(e))})},p=tinymce.util.Tools.resolve("tinymce.util.Tools"),h=function(t,n){r=t,o=n,e=l.getFormats(r);var r,o,e=p.map(e,function(e){return{text:f.getDateTime(r,e),onclick:function(){o.set(e),f.insertDateTime(r,e)}}});t.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",menu:e,onclick:function(){var e=n.get();f.insertDateTime(t,e||l.getDefaultDateTime(t))}}),t.addMenuItem("insertdatetime",{icon:"date",text:"Date/time",menu:e,context:"insert"})};e.add("insertdatetime",function(e){var t=r(null);m(e),h(e,t)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-legacyoutput",["tinymce"],function(){return function(){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=tinymce.util.Tools.resolve("tinymce.util.Tools"),t=function(o){o.settings.inline_styles=!1,o.on("init",function(){var e,t,n,r;e=o,t="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",n=i.explode(e.settings.font_size_style_values),r=e.schema,e.formatter.register({alignleft:{selector:t,attributes:{align:"left"}},aligncenter:{selector:t,attributes:{align:"center"}},alignright:{selector:t,attributes:{align:"right"}},alignjustify:{selector:t,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(e){return i.inArray(n,e.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}}),i.each("b,i,u,strike".split(","),function(e){r.addValidElements(e+"[*]")}),r.getElementRule("font")||r.addValidElements("font[face|size|color|style]"),i.each(t.split(","),function(e){e=r.getElementRule(e);e&&!e.attributes.align&&(e.attributes.align={},e.attributesOrder.push("align"))})})},n=function(r){r.addButton("fontsizeselect",function(){var o=[],e=r.settings.fontsizeFormats||"8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7";return r.$.each(e.split(" "),function(e,t){var n=t,r=t,t=t.split("=");1<t.length&&(n=t[0],r=t[1]),o.push({text:n,value:r})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:o,fixedWidth:!0,onPostRender:function(){var t=this;r.on("NodeChange",function(){var e=r.dom.getParent(r.selection.getNode(),"font");e?t.value(e.size):t.value("")})},onclick:function(e){e.control.settings.value&&r.execCommand("FontSize",!1,e.control.settings.value)}}}),r.addButton("fontselect",function(){var n=[],e=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}(r.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return r.$.each(e,function(e,t){n.push({text:{raw:t[0]},value:t[1],textStyle:-1===t[1].indexOf("dings")?"font-family:"+t[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:n,fixedWidth:!0,onPostRender:function(){var t=this;r.on("NodeChange",function(){var e=r.dom.getParent(r.selection.getNode(),"font");e?t.value(e.face):t.value("")})},onselect:function(e){e.control.settings.value&&r.execCommand("FontName",!1,e.control.settings.value)}}})};e.add("legacyoutput",function(e){t(e),n(e)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-link",["tinymce"],function(){return function(){!function(){"use strict";function t(e){return e.target_list}function n(e){return e.rel_list}function r(e){return e.link_class_list}function s(e,t){function n(e){return e.filter(function(e){return-1===y.inArray(r,e)})}var r=["noopener"],e=e?e.split(/\s+/):[];return(e=t?(t=n(t=e)).length?t.concat(r):r:n(e)).length?y.trim(e.sort().join(" ")):null}function l(e,t){return t=t||e.selection.getNode(),p(t)?e.dom.select("a[href]",t)[0]:e.dom.getParent(t,"a[href]")}function o(e){return e&&"A"===e.nodeName&&e.href}function i(a,e){function r(e){var t=o.find("#text");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),o.find("#href").value(e.control.value())}function n(){s||!g||m.text||this.parent().parent().find("#text")[0].value(this.value())}var s,o,t,i,l,c,u,d,f,m={},p=a.selection,h=a.dom,g=b.isOnlyTextSelected(p.getContent()),p=b.getAnchorElement(a);m.text=s=b.getAnchorText(a.selection,p),m.href=p?h.getAttrib(p,"href"):"",p?m.target=h.getAttrib(p,"target"):v.hasDefaultLinkTarget(a.settings)&&(m.target=v.getDefaultLinkTarget(a.settings)),(f=h.getAttrib(p,"rel"))&&(m.rel=f),(f=h.getAttrib(p,"class"))&&(m.class=f),(f=h.getAttrib(p,"title"))&&(m.title=f),g&&(t={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){m.text=this.value()}}),e&&(i={type:"listbox",label:"Link list",values:x(e,function(e){e.value=a.convertURL(e.value||e.url,"href")},[{text:"None",value:""}]),onselect:r,value:a.convertURL(m.href,"href"),onPostRender:function(){i=this}}),v.shouldShowTargetList(a.settings)&&(void 0===v.getTargetList(a.settings)&&v.setTargetList(a,[{text:"None",value:""},{text:"New window",value:"_blank"}]),c={name:"target",type:"listbox",label:"Target",values:x(v.getTargetList(a.settings))}),v.hasRelList(a.settings)&&(l={name:"rel",type:"listbox",label:"Rel",values:x(v.getRelList(a.settings),function(e){!1===v.allowUnsafeLinkTarget(a.settings)&&(e.value=b.toggleTargetRules(e.value,"_blank"===m.target))})}),v.hasLinkClassList(a.settings)&&(u={name:"class",type:"listbox",label:"Class",values:x(v.getLinkClassList(a.settings),function(e){e.value&&(e.textStyle=function(){return a.formatter.getCssText({inline:"a",classes:[e.value]})})})}),v.shouldShowLinkTitle(a.settings)&&(d={name:"title",type:"textbox",label:"Title",value:m.title}),o=a.windowManager.open({title:"Insert link",data:m,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function(e){var t=e.meta||{};i&&i.value(a.convertURL(this.value(),"href")),y.each(e.meta,function(e,t){var n=o.find("#"+t);"text"===t?0===s.length&&(n.value(e),m.text=e):n.value(e)}),t.attach&&(w={href:this.value(),attach:t.attach}),t.text||n.call(this)},onkeyup:n,onpaste:n,onbeforecall:function(e){e.meta=o.toJSON()}},t,d,function(t){var n=[];if(y.each(a.dom.select("a:not([href])"),function(e){e=e.name||e.id;e&&n.push({text:e,value:"#"+e,selected:-1!==t.indexOf("#"+e)})}),n.length)return n.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:n,onselect:r}}(m.href),i,l,c,u],onSubmit:function(e){var t=v.assumeExternalTargets(a.settings),n=b.link(a,w),r=b.unlink(a),o=y.extend({},m,e.data),i=o.href;i?(g&&o.text!==s||delete o.text,0<i.indexOf("@")&&-1===i.indexOf("//")&&-1===i.indexOf("mailto:")?C(a,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(e){e&&(o.href="mailto:"+i),n(o)}):!0===t&&!/^\w+:/i.test(i)||!1===t&&/^\s*www[\.|\d\.]/i.test(i)?C(a,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){e&&(o.href="http://"+i),n(o)}):n(o)):r()}})}function a(e){return S(e,e.selection.getStart())}function c(e,t){var n;t&&(n=T(t),/^#/.test(n)?(n=e.$(n)).length&&e.selection.scrollIntoView(n[0],!0):m.open(t.href))}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=tinymce.util.Tools.resolve("tinymce.util.VK"),v={assumeExternalTargets:function(e){return"boolean"==typeof e.link_assume_external_targets&&e.link_assume_external_targets},hasContextToolbar:function(e){return"boolean"==typeof e.link_context_toolbar&&e.link_context_toolbar},getLinkList:function(e){return e.link_list},hasDefaultLinkTarget:function(e){return"string"==typeof e.default_link_target},getDefaultLinkTarget:function(e){return e.default_link_target},getTargetList:t,setTargetList:function(e,t){e.settings.target_list=t},shouldShowTargetList:function(e){return!1!==t(e)},getRelList:n,hasRelList:function(e){return void 0!==n(e)},getLinkClassList:r,hasLinkClassList:function(e){return void 0!==r(e)},shouldShowLinkTitle:function(e){return!1!==e.link_title},allowUnsafeLinkTarget:function(e){return"boolean"==typeof e.allow_unsafe_link_target&&e.allow_unsafe_link_target}},d=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),f=tinymce.util.Tools.resolve("tinymce.Env"),m={open:function(e){var t,n;!f.ie||10<f.ie?((t=document.createElement("a")).target="_blank",t.href=e,t.rel="noreferrer noopener",(n=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t=t,n=n,document.body.appendChild(t),t.dispatchEvent(n),document.body.removeChild(t)):(n=window.open("","_blank"))&&(n.opener=null,(t=n.document).open(),t.write('<meta http-equiv="refresh" content="0; url='+d.DOM.encode(e)+'">'),t.close())}},y=tinymce.util.Tools.resolve("tinymce.util.Tools"),p=function(e){return e&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className)},b={link:function(i,a){return function(o){i.undoManager.transact(function(){var e=i.selection.getNode(),t=l(i,e),n={href:o.href,target:o.target||null,rel:o.rel||null,class:o.class||null,title:o.title||null};if(v.hasRelList(i.settings)||!1!==v.allowUnsafeLinkTarget(i.settings)||(n.rel=s(n.rel,"_blank"===n.target)),o.href===a.href&&(a.attach(),a={}),t)i.focus(),o.hasOwnProperty("text")&&("innerText"in t?t.innerText=o.text:t.textContent=o.text),i.dom.setAttribs(t,n),i.selection.select(t),i.undoManager.add();else if(p(e)){var t=i,r=n,e=t.dom.select("img",e)[0];if(e){t=t.dom.create("a",r);e.parentNode.insertBefore(t,e);t.appendChild(e)}}else o.hasOwnProperty("text")?i.insertContent(i.dom.createHTML("a",n,i.dom.encode(o.text))):i.execCommand("mceInsertLink",!1,n)})}},unlink:function(r){return function(){r.undoManager.transact(function(){var e=r.selection.getNode();if(p(e)){var t=r,n=t.dom.select("img",e)[0];if(n){e=t.dom.getParents(n,"a[href]",e)[0];if(e){e.parentNode.insertBefore(n,e);t.dom.remove(e)}}}else r.execCommand("unlink")})}},isLink:o,hasLinks:function(e){return 0<y.grep(e,o).length},isOnlyTextSelected:function(e){return!(/</.test(e)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(e)||-1===e.indexOf("href=")))},getAnchorElement:l,getAnchorText:function(e,t){return(t?t.innerText||t.textContent:e.getContent({format:"text"})).replace(/\uFEFF/g,"")},toggleTargetRules:s},h=tinymce.util.Tools.resolve("tinymce.util.Delay"),g=tinymce.util.Tools.resolve("tinymce.util.XHR"),w={},x=function(e,r,t){function o(e,n){return n=n||[],y.each(e,function(e){var t={text:e.text||e.title};e.menu?t.menu=o(e.menu):(t.value=e.value,r&&r(t)),n.push(t)}),n}return o(e,t||[])},C=function(t,e,n){var r=t.selection.getRng();h.setEditorTimeout(t,function(){t.windowManager.confirm(e,function(e){t.selection.setRng(r),n(e)})})},k=function(e){var t,n;t=e,n=i,"string"==typeof(e=v.getLinkList(t.settings))?g.send({url:e,success:function(e){n(t,JSON.parse(e))}}):"function"==typeof e?e(function(e){n(t,e)}):n(t,e)},S=function(e,t){return e.dom.getParent(t,"a[href]")},T=function(e){var t=e.getAttribute("data-mce-href");return t||e.getAttribute("href")},E=function(e){return function(){k(e)}},N=function(e){return function(){c(e,a(e))}},R=function(r){return function(e){var t,n;return!!(v.hasContextToolbar(r.settings)&&!function(e){e=e.plugins.contextmenu;return!!e&&e.isContextMenuVisible()}(r)&&b.isLink(e)&&3===(n=(t=(e=r.selection).getRng()).startContainer).nodeType&&e.isCollapsed()&&0<t.startOffset&&t.startOffset<n.data.length)}},_=function(r){r.on("click",function(e){var t=S(r,e.target);t&&u.metaKeyPressed(e)&&(e.preventDefault(),c(r,t))}),r.on("keydown",function(e){var t,n=a(r);n&&13===e.keyCode&&!0===(t=e).altKey&&!1===t.shiftKey&&!1===t.ctrlKey&&!1===t.metaKey&&(e.preventDefault(),c(r,n))})},A=function(n){return function(){var t=this;n.on("nodechange",function(e){t.active(!n.readonly&&!!b.getAnchorElement(n,e.element))})}},D=function(n){return function(){function e(e){b.hasLinks(e.parents)?t.show():t.hide()}var t=this;b.hasLinks(n.dom.getParents(n.selection.getStart()))||t.hide(),n.on("nodechange",e),t.on("remove",function(){n.off("nodechange",e)})}},P=function(e){e.addCommand("mceLink",E(e))},O=function(e){e.addShortcut("Meta+K","",E(e))},I=function(e){e.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:E(e),onpostrender:A(e)}),e.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:b.unlink(e),onpostrender:A(e)}),e.addContextToolbar&&e.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:N(e)})},B=function(e){e.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:N(e),onPostRender:D(e),prependToContext:!0}),e.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:E(e),stateSelector:"a[href]",context:"insert",prependToContext:!0}),e.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onclick:b.unlink(e),stateSelector:"a[href]"})},M=function(e){e.addContextToolbar&&e.addContextToolbar(R(e),"openlink | link unlink")};e.add("link",function(e){I(e),B(e),M(e),_(e),P(e),O(e)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-lists",["tinymce"],function(){return function(){!function(){"use strict";function n(e){return e&&"BR"===e.nodeName}function r(e,t){var n=p.getNode(e,t);return y.isListItemNode(e)&&y.isTextNode(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:{container:e,offset:t}}function M(e,t){var n,r=t.parentNode;"LI"===r.nodeName&&r.firstChild===t&&((n=r.previousSibling)&&"LI"===n.nodeName?(n.appendChild(t),y.isEmpty(e,r)&&C.remove(r)):C.setStyle(r,"listStyleType","none")),y.isListNode(r)&&(n=r.previousSibling)&&"LI"===n.nodeName&&n.appendChild(t)}function o(e){var t=e.selection.getStart(!0);return e.dom.getParent(t,"OL,UL,DL",S(e,t))}function i(e,t){y.isEmpty(e,t)&&_.remove(t)}function s(e,t){var n,r=t.parentNode;return r?(n=r.parentNode,r!==e.getBody()&&("DD"===t.nodeName?_.rename(t,"DT"):y.isFirstChild(t)&&y.isLastChild(t)?"LI"===n.nodeName?(_.insertAfter(t,n),i(e.dom,n),_.remove(r)):y.isListNode(n)?_.remove(r,!0):(n.insertBefore(N(e,t),r),_.remove(r)):y.isFirstChild(t)?"LI"===n.nodeName?(_.insertAfter(t,n),t.appendChild(r),i(e.dom,n)):y.isListNode(n)?n.insertBefore(t,r):(n.insertBefore(N(e,t),r),_.remove(t)):y.isLastChild(t)?"LI"===n.nodeName?_.insertAfter(t,n):y.isListNode(n)?_.insertAfter(t,r):(_.insertAfter(N(e,t),r),_.remove(t)):(n="LI"===n.nodeName?(r=n,N(e,t,"LI")):y.isListNode(n)?N(e,t,"LI"):N(e,t),V(e,r,t,n),k(e.dom,r.parentNode)))):i(e.dom,t),!0}function l(n,e){g.each(e,function(e,t){n.setAttribute(t,e)})}function u(e,t,n,r){var o=t[n?"startContainer":"endContainer"],t=t[n?"startOffset":"endOffset"];for(1===o.nodeType&&(o=o.childNodes[Math.min(t,o.childNodes.length-1)]||o),!n&&y.isBr(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if(y.isTextBlock(e,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o}function a(e,t,n){return Y(t,n)&&G(e,t,n)&&X(t,n)}function c(e,t,n,r){var o,i,a=t.startContainer,t=t.startOffset;if(3===a.nodeType&&(n?t<a.data.length:0<t))return a;for(o=e.schema.getNonEmptyElements(),1===a.nodeType&&(a=p.getNode(a,t)),i=new W(a,r),n&&y.isBogusBr(e.dom,a)&&i.next();a=i[n?"next":"prev2"]();){if("LI"===a.nodeName&&!a.hasChildNodes())return a;if(o[a.nodeName])return a;if(3===a.nodeType&&0<a.data.length)return a}}function d(e,t){return 1===(t=t.childNodes).length&&!y.isListNode(t[0])&&e.isBlock(t[0])}function L(e,t,n){var r,o,i=d(e,n)?n.firstChild:n;if(d(n=e,o=t)&&n.remove(o.firstChild,!0),!y.isEmpty(e,t,!0))for(;r=t.firstChild;)i.appendChild(r)}function f(e,t,n){var r,o,i=t.parentNode;y.isChildOfBody(e,t)&&y.isChildOfBody(e,n)&&(y.isListNode(n.lastChild)&&(o=n.lastChild),i===n.lastChild&&y.isBr(i.previousSibling)&&e.remove(i.previousSibling),(r=n.lastChild)&&y.isBr(r)&&t.hasChildNodes()&&e.remove(r),y.isEmpty(e,n,!0)&&e.$(n).empty(),L(e,t,n),o&&n.appendChild(o),e.remove(t),y.isEmpty(e,i))&&i!==e.getRoot()&&e.remove(i)}function F(e,t,n,r){var o,i,a,s=e.dom;s.isEmpty(r)?(i=n,a=r,(o=e).dom.$(a).empty(),f(o.dom,i,a),o.selection.setCursorLocation(a)):(i=x.createBookmark(t),f(s,n,r),e.selection.setRng(x.resolveBookmark(i)))}function H(e,t){var n=e.dom,r=e.selection,o=r.getStart(),o=T.getClosestListRootElm(e,o),i=n.getParent(r.getStart(),"LI",o);if(i){if((s=i.parentNode)===e.getBody()&&y.isEmpty(n,s))return!0;var a,s=b(r.getRng(!0));if((r=n.getParent(c(e,s,t,o),"LI",o))&&r!==i)return t?F(e,s,r,i):(n=e,o=s,i=i,a=r,o=x.createBookmark(s),f(n.dom,i,a),i=x.resolveBookmark(o),n.selection.setRng(i)),!0;if(!r&&!t&&Z(e))return!0}return!1}function z(r,o){var i=r.dom,e=r.selection.getStart(),a=T.getClosestListRootElm(r,e),s=i.getParent(e,i.isBlock,a);if(s&&i.isEmpty(s)){var e=b(r.selection.getRng(!0)),l=i.getParent(c(r,e,o,a),"LI",a);if(l)return r.undoManager.transact(function(){var e=i,t=s,n=a;n=e.getParent(t.parentNode,e.isBlock,n),e.remove(t),n&&e.isEmpty(n)&&e.remove(n),ee(i,l.parentNode),r.selection.select(l,!0),r.selection.collapse(o)}),!0}return!1}function m(e,t){return e.selection.isCollapsed()?te(e,t):ne(e)}function e(t,n){return function(){var e=t.dom.getParent(t.selection.getStart(),"UL,OL,DL");return e&&e.nodeName===n}}function t(t,r){return function(e){var n=e.control;t.on("NodeChange",function(e){var t=de(e.parents,y.isTableCellNode),t=-1!==t?e.parents.slice(0,t):e.parents,e=g.grep(t,y.isListNode);n.active(0<e.length&&e[0].nodeName===r)})}}var U=tinymce.util.Tools.resolve("tinymce.PluginManager"),p=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),W=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),h=tinymce.util.Tools.resolve("tinymce.util.VK"),$=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),g=tinymce.util.Tools.resolve("tinymce.util.Tools"),v=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),y={isTextNode:function(e){return e&&3===e.nodeType},isListNode:function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},isListItemNode:function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},isTableCellNode:function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},isBr:n,isFirstChild:function(e){return e.parentNode.firstChild===e},isLastChild:function(e){return e.parentNode.lastChild===e},isTextBlock:function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},isBlock:function(e,t){return e&&e.nodeName in t},isBogusBr:function(e,t){return!!n(t)&&!(!e.isBlock(t.nextSibling)||n(t.previousSibling))},isEmpty:function(e,t,n){var r=e.isEmpty(t);return!(n&&0<e.select("span[data-mce-type=bookmark]",t).length)&&r},isChildOfBody:function(e,t){return e.isChildOf(t,e.getRoot())}},b=function(e){var t=e.cloneRange(),n=r(e.startContainer,e.startOffset),n=(t.setStart(n.container,n.offset),r(e.endContainer,e.endOffset));return t.setEnd(n.container,n.offset),t},w=v.DOM,x={createBookmark:function(o){function e(e){var t,n=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"];1===n.nodeType&&(t=w.create("span",{"data-mce-type":"bookmark"}),n.hasChildNodes()?(r=Math.min(r,n.childNodes.length-1),e?n.insertBefore(t,n.childNodes[r]):w.insertAfter(t,n.childNodes[r])):n.appendChild(t),n=t,r=0),i[e?"startContainer":"endContainer"]=n,i[e?"startOffset":"endOffset"]=r}var i={};return e(!0),o.collapsed||e(),i},resolveBookmark:function(o){function e(e){var t,n=t=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"];n&&(1===n.nodeType&&(r=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(n),n=n.parentNode,w.remove(t),!n.hasChildNodes())&&w.isBlock(n)&&n.appendChild(w.create("br")),o[e?"startContainer":"endContainer"]=n,o[e?"startOffset":"endOffset"]=r)}e(!0),e();var t=w.createRng();return t.setStart(o.startContainer,o.startOffset),o.endContainer&&t.setEnd(o.endContainer,o.endOffset),b(t)}},C=v.DOM,k=function(t,e){g.each(g.grep(t.select("ol,ul",e)),function(e){M(t,e)})},j=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),S=function(e,t){t=e.dom.getParents(t,"TD,TH");return 0<t.length?t[0]:e.getBody()},T={getParentList:o,getSelectedSubLists:function(e){var t,n,r=o(e),e=e.selection.getSelectedBlocks();return n=e,(t=r)&&1===n.length&&n[0]===t?g.grep(r.querySelectorAll("ol,ul,dl"),function(e){return y.isListNode(e)}):g.grep(e,function(e){return y.isListNode(e)&&r!==e})},getSelectedListItems:function(e){var t=e.selection.getSelectedBlocks();return g.grep(function(n,e){e=g.map(e,function(e){var t=n.dom.getParent(e,"li,dd,dt",S(n,e));return t||e});return j.unique(e)}(e,t),function(e){return y.isListItemNode(e)})},getClosestListRootElm:S},q=tinymce.util.Tools.resolve("tinymce.Env"),E=v.DOM,N=function(e,t,n){var r,o,i,a=E.createFragment(),s=e.schema.getBlockElements();if((n=e.settings.forced_root_block?n||e.settings.forced_root_block:n)&&((o=E.create(n)).tagName===e.settings.forced_root_block&&E.setAttribs(o,e.settings.forced_root_block_attrs),y.isBlock(t.firstChild,s)||a.appendChild(o)),t)for(;r=t.firstChild;){var l=r.nodeName;i||"SPAN"===l&&"bookmark"===r.getAttribute("data-mce-type")||(i=!0),y.isBlock(r,s)?(a.appendChild(r),o=null):(n?(o||(o=E.create(n),a.appendChild(o)),o):a).appendChild(r)}return e.settings.forced_root_block?i||q.ie&&!(10<q.ie)||o.appendChild(E.create("br",{"data-mce-bogus":"1"})):a.appendChild(E.create("br")),a},R=v.DOM,V=function(e,t,n,r){var o,i,a,s=R.select('span[data-mce-type="bookmark"]',t);for(r=r||N(e,n),(o=R.createRng()).setStartAfter(n),o.setEndAfter(t),i=(o=o.extractContents()).firstChild;i;i=i.firstChild)if("LI"===i.nodeName&&e.dom.isEmpty(i)){R.remove(i);break}e.dom.isEmpty(o)||R.insertAfter(o,t),R.insertAfter(r,t),y.isEmpty(e.dom,n.parentNode)&&(a=n.parentNode,g.each(s,function(e){a.parentNode.insertBefore(e,n.parentNode)}),R.remove(a)),R.remove(n),y.isEmpty(e.dom,t)&&R.remove(t)},_=v.DOM,A={outdent:s,outdentSelection:function(e){var t=T.getSelectedListItems(e);if(t.length){for(var n=x.createBookmark(e.selection.getRng()),r=void 0,o=void 0,i=T.getClosestListRootElm(e,e.selection.getStart(!0)),r=t.length;r--;)for(var a=t[r].parentNode;a&&a!==i;){for(o=t.length;o--;)if(t[o]===a){t.splice(r,1);break}a=a.parentNode}for(r=0;r<t.length&&(s(e,t[r])||0!==r);r++);return e.selection.setRng(x.resolveBookmark(n)),e.nodeChanged(),!0}}},D=function(e,t,n){var r,o=e,i=t,a=n;a=a["list-style-type"]||null,o.setStyle(i,"list-style-type",a),o=e,l(i=t,(r=n)["list-attributes"]),g.each(o.select("li",i),function(e){l(e,r["list-item-attributes"])})},K=function(i,a,s){void 0===s&&(s={});var e,t=i.selection.getRng(!0),l="LI",n=T.getClosestListRootElm(i,i.selection.getStart(!0)),c=i.dom;"false"!==c.getContentEditable(i.selection.getNode())&&("DL"===(a=a.toUpperCase())&&(l="DT"),e=x.createBookmark(t),g.each(function(n,e,r){for(var o,i=[],a=n.dom,t=u(n,e,!0,r),s=u(n,e,!1,r),l=[],c=t;c&&(l.push(c),c!==s);c=c.nextSibling);return g.each(l,function(e){var t;y.isTextBlock(n,e)?(i.push(e),o=null):a.isBlock(e)||y.isBr(e)?(y.isBr(e)&&a.remove(e),o=null):(t=e.nextSibling,$.isBookmarkNode(e)&&(y.isTextBlock(n,t)||!t&&e.parentNode===r)?o=null:(o||(o=a.create("p"),e.parentNode.insertBefore(o,e),i.push(o)),o.appendChild(e)))}),i}(i,t,n),function(e){var t,n,r,o=e.previousSibling;o&&y.isListNode(o)&&o.nodeName===a&&function(e,t,n){e=e.getStyle(t,"list-style-type"),t=n?n["list-style-type"]:"";return e===(null===t?"":t)}(c,o,s)?(t=o,e=c.rename(e,l),o.appendChild(e)):(t=c.create(a),e.parentNode.insertBefore(t,e),t.appendChild(e),e=c.rename(e,l)),n=c,r=e,o=["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],g.each(o,function(e){return n.setStyle(r,((t={})[e]="",t));var t}),D(c,t,s),O(i.dom,t)}),i.selection.setRng(x.resolveBookmark(e)))},P=function(r){var e=x.createBookmark(r.selection.getRng(!0)),o=T.getClosestListRootElm(r,r.selection.getStart(!0)),t=T.getSelectedListItems(r),n=g.grep(t,function(e){return r.dom.isEmpty(e)}),t=g.grep(t,function(e){return!r.dom.isEmpty(e)});g.each(n,function(e){y.isEmpty(r.dom,e)&&A.outdent(r,e)}),g.each(t,function(e){var t,n;if(e.parentNode!==r.getBody()){for(t=e;t&&t!==o;t=t.parentNode)y.isListNode(t)&&(n=t);V(r,n,e),k(r.dom,n.parentNode)}}),r.selection.setRng(x.resolveBookmark(e))},Y=function(e,t){return e&&t&&y.isListNode(e)&&e.nodeName===t.nodeName},G=function(e,t,n){return e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)},X=function(e,t){return e.className===t.className},O=function(e,t){var n,r=t.nextSibling;if(a(e,t,r)){for(;n=r.firstChild;)t.appendChild(n);e.remove(r)}if(r=t.previousSibling,a(e,t,r)){for(;n=r.lastChild;)t.insertBefore(n,t.firstChild);e.remove(r)}},J=function(e,t,n,r){t.nodeName!==n?(n=e.rename(t,n),D(e,n,r)):D(e,t,r)},Q=function(e){return"list-style-type"in e},I=function(e,t,n){var r,o,i,a,s,l=T.getParentList(e),c=T.getSelectedSubLists(e);n=n||{},l&&0<c.length?(r=e,c=c,i=t,a=n,(o=l).nodeName!==i||Q(a)?(s=x.createBookmark(r.selection.getRng(!0)),g.each([o].concat(c),function(e){J(r.dom,e,i,a)}),r.selection.setRng(x.resolveBookmark(s))):P(r)):(o=t,c=n,(s=l)!==(t=e).getBody()&&(s?s.nodeName!==o||Q(c)?(n=x.createBookmark(t.selection.getRng(!0)),D(t.dom,s,c),O(t.dom,t.dom.rename(s,o)),t.selection.setRng(x.resolveBookmark(n))):P(t):K(t,o,c)))},Z=P,ee=O,te=function(e,t){return H(e,t)||z(e,t)},ne=function(e){var t=e.selection.getStart(),n=T.getClosestListRootElm(e,t);return!!(e.dom.getParent(t,"LI,DT,DD",n)||0<T.getSelectedListItems(e).length)&&(e.undoManager.transact(function(){e.execCommand("Delete"),k(e.dom,e.getBody())}),!0)},re=function(t){t.on("keydown",function(e){e.keyCode===h.BACKSPACE?m(t,!1)&&e.preventDefault():e.keyCode===h.DELETE&&m(t,!0)&&e.preventDefault()})},oe=m,ie=function(t){return{backspaceDelete:function(e){oe(t,e)}}},B=v.DOM,ae=function(e,t){var n;if(y.isListNode(e)){for(;n=e.firstChild;)t.appendChild(n);B.remove(e)}},se={indentSelection:function(e){var t,n,r,o,i=T.getSelectedListItems(e);if(i.length){for(var a=x.createBookmark(e.selection.getRng(!0)),s=0;s<i.length&&(t=i[s],o=r=n=void 0,("DT"===t.nodeName?(B.rename(t,"DD"),!0):(n=t.previousSibling)&&y.isListNode(n)?(n.appendChild(t),!0):n&&"LI"===n.nodeName&&y.isListNode(n.lastChild)?(n.lastChild.appendChild(t),ae(t.lastChild,n.lastChild),!0):(n=t.nextSibling)&&y.isListNode(n)?(n.insertBefore(t,n.firstChild),!0):!(!(n=t.previousSibling)||"LI"!==n.nodeName||(r=B.create(t.parentNode.nodeName),(o=B.getStyle(t.parentNode,"listStyleType"))&&B.setStyle(r,"listStyleType",o),n.appendChild(r),r.appendChild(t),ae(t.lastChild,r),0)))||0!==s);s++);return e.selection.setRng(x.resolveBookmark(a)),e.nodeChanged(),!0}}},le=function(r){r.on("BeforeExecCommand",function(e){var t,n=e.command.toLowerCase();if("indent"===n?se.indentSelection(r)&&(t=!0):"outdent"===n&&A.outdentSelection(r)&&(t=!0),t)return r.fire("ExecCommand",{command:e.command}),e.preventDefault(),!0}),r.addCommand("InsertUnorderedList",function(e,t){I(r,"UL",t)}),r.addCommand("InsertOrderedList",function(e,t){I(r,"OL",t)}),r.addCommand("InsertDefinitionList",function(e,t){I(r,"DL",t)}),r.addQueryStateHandler("InsertUnorderedList",e(r,"UL")),r.addQueryStateHandler("InsertOrderedList",e(r,"OL")),r.addQueryStateHandler("InsertDefinitionList",e(r,"DL"))},ce=function(e){return e.getParam("lists_indent_on_tab",!0)},ue=function(e){var t;ce(e)&&(t=e).on("keydown",function(e){e.keyCode!==h.TAB||h.metaKeyPressed(e)||t.dom.getParent(t.selection.getStart(),"LI,DT,DD")&&(e.preventDefault(),e.shiftKey?A.outdentSelection(t):se.indentSelection(t))}),re(e)},de=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1},fe=function(e){var n;!function(e,t){e=e.settings.plugins||"";return-1!==g.inArray(e.split(/[ ,]/),t)}(e,"advlist")&&(e.addButton("numlist",{active:!1,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:t(e,"OL")}),e.addButton("bullist",{active:!1,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:t(e,"UL")})),e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:(n=e,function(e){var t=e.control;n.on("nodechange",function(){var e=T.getSelectedListItems(n),e=0<e.length&&y.isFirstChild(e[0]);t.disabled(e)})})})};U.add("lists",function(e){return ue(e),fe(e),le(e),ie(e)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-media",["tinymce"],function(){return function(){!function(){"use strict";function e(t){return function(e){return e?e.style[t].replace(/px$/,""):""}}function t(n){return function(e,t){e&&(e.style[n]=/^[0-9.]+$/.test(e=t)?e+"px":e)}}function i(r,o,i){return new w(function(t,e){function n(e){return e.html&&(N[r.source1]=e),t({url:r.source1,html:e.html||o(r)})}N[r.source1]?n(N[r.source1]):i({url:r.source1},n,e)})}function a(t){return function(e){return U.dataToHtml(t,e)}}function s(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())}function n(e){_(e,W)}function l(r,o){return function(e){var t=e.html,n=r.find("#embed")[0],e=f.extend(b.htmlToData(m.getScripts(o),t),{source1:e.url});r.fromJSON(e),n&&(n.value(t),A.updateSize(r))}}function c(e,t){var n=t.name,r=new I("img",1);return r.shortEnded=!0,o(e,t,r),r.attr({width:t.attr("width")||"300",height:t.attr("height")||("audio"===n?"30":"150"),style:t.attr("style"),src:d.transparentSrc,"data-mce-object":n,class:"mce-object mce-object-"+n}),r}function M(e,t){var n=t.name,r=new I("span",1);return r.attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":n,class:"mce-preview-object mce-object-"+n}),o(e,t,r),(e=new I(n,1)).attr({src:t.attr("src"),allowfullscreen:t.attr("allowfullscreen"),style:t.attr("style"),class:t.attr("class"),width:t.attr("width"),height:t.attr("height"),frameborder:"0"}),(n=new I("span",1)).attr("class","mce-shim"),r.append(e),r.append(n),r}function o(e,t,n){for(var r,o,i=t.attributes,a=i.length;a--;)r=i[a].name,o=i[a].value,"width"!==r&&"height"!==r&&"style"!==r&&("data"!==r&&"src"!==r||(o=e.convertURL(o,r)),n.attr("data-mce-p-"+r,o));(t=t.firstChild&&t.firstChild.value)&&(n.attr("data-mce-html",escape(B.sanitize(e,t))),n.firstChild=null)}function u(e){for(;e=e.parent;)if(e.attr("data-ephox-embed-iri"))return 1}var L=tinymce.util.Tools.resolve("tinymce.PluginManager"),d=tinymce.util.Tools.resolve("tinymce.Env"),f=tinymce.util.Tools.resolve("tinymce.util.Tools"),m={getScripts:function(e){return e.getParam("media_scripts")},getAudioTemplateCallback:function(e){return e.getParam("audio_template_callback")},getVideoTemplateCallback:function(e){return e.getParam("video_template_callback")},hasLiveEmbeds:function(e){return e.getParam("media_live_embeds",!0)},shouldFilterHtml:function(e){return e.getParam("media_filter_html",!0)},getUrlResolver:function(e){return e.getParam("media_url_resolver")},hasAltSource:function(e){return e.getParam("media_alt_source",!0)},hasPoster:function(e){return e.getParam("media_poster",!0)},hasDimensions:function(e){return e.getParam("media_dimensions",!0)}},p=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),r=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),h={getVideoScriptMatch:function(e,t){if(e)for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n].filter))return e[n]}},g={getMaxWidth:e("maxWidth"),getMaxHeight:e("maxHeight"),setMaxWidth:t("maxWidth"),setMaxHeight:t("maxHeight")},v=r.DOM,y=function(e){return v.getAttrib(e,"data-ephox-embed-iri")},b={htmlToData:function(e,t){var r,n,o;return function(e){e=v.createFragment(e);return""!==y(e.firstChild)}(t)?(n=t,n=v.createFragment(n).firstChild,{type:"ephox-embed-iri",source1:y(n),source2:"",poster:"",width:g.getMaxWidth(n),height:g.getMaxHeight(n)}):(r=e,n=t,p({validate:!(o={}),allow_conditional_comments:!0,special:"script,noscript",start:function(e,t){if(o.source1||"param"!==e||(o.source1=t.map.movie),"iframe"!==e&&"object"!==e&&"embed"!==e&&"video"!==e&&"audio"!==e||(o.type||(o.type=e),o=f.extend(t.map,o)),"script"===e){var n=h.getVideoScriptMatch(r,t.map.src);if(!n)return;o={type:"script",source1:t.map.src,width:n.width,height:n.height}}"source"===e&&(o.source1?o.source2||(o.source2=t.map.src):o.source1=t.map.src),"img"!==e||o.poster||(o.poster=t.map.src)}}).parse(n),o.source1=o.source1||o.src||o.data,o.source2=o.source2||"",o.poster=o.poster||"",o)}},w=tinymce.util.Tools.resolve("tinymce.util.Promise"),x=function(e){e={mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"}[e.toLowerCase().split(".").pop()];return e||""},C=tinymce.util.Tools.resolve("tinymce.html.Writer"),k=tinymce.util.Tools.resolve("tinymce.html.Schema"),S=r.DOM,T=function(e,t){var n,r,o,i;for(n in t)if(o=""+t[n],e.map[n])for(r=e.length;r--;)(i=e[r]).name===n&&(o?(e.map[n]=o,i.value=o):(delete e.map[n],e.splice(r,1)));else o&&(e.push({name:n,value:o}),e.map[n]=o)},F=function(e){var t=C();return p(t).parse(e),t.getContent()},E={updateHtml:function(e,t,n){var r,o,i,a,s,l,c;return function(e){e=S.createFragment(e);return""!==S.getAttrib(e.firstChild,"data-ephox-embed-iri")}(e)?(r=e,o=t,r=S.createFragment(r).firstChild,g.setMaxWidth(r,o.width),g.setMaxHeight(r,o.height),F(r.outerHTML)):(o=e,i=t,a=n,l=C(),p({validate:!1,allow_conditional_comments:!(c=0),special:"script,noscript",comment:function(e){l.comment(e)},cdata:function(e){l.cdata(e)},text:function(e,t){l.text(e,t)},start:function(e,t,n){switch(e){case"video":case"object":case"embed":case"img":case"iframe":void 0!==i.height&&void 0!==i.width&&T(t,{width:i.width,height:i.height})}if(a)switch(e){case"video":T(t,{poster:i.poster,src:""}),i.source2&&T(t,{src:""});break;case"iframe":T(t,{src:i.source1});break;case"source":if(++c<=2&&(T(t,{src:i["source"+c],type:i["source"+c+"mime"]}),!i["source"+c]))return;break;case"img":if(!i.poster)return;s=!0}l.start(e,t,n)},end:function(e){if("video"===e&&a)for(var t,n=1;n<=2;n++)i["source"+n]&&((t=[]).map={},c<n)&&(T(t,{src:i["source"+n],type:i["source"+n+"mime"]}),l.start("source",t,!0));var r;i.poster&&"object"===e&&a&&!s&&((r=[]).map={},T(r,{src:i.poster,width:i.width,height:i.height}),l.start("img",r,!0)),l.end(e)}},k({})).parse(o),l.getContent())}},H=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],z=function(e,t){for(var n=e.regex.exec(t),r=e.url,o=0;o<n.length;o++)!function(e){r=r.replace("$"+e,function(){return n[e]||""})}(o);return r.replace(/\?$/,"")},U={dataToHtml:function(n,e){var r=f.extend({},e);if(!r.source1&&(f.extend(r,b.htmlToData(m.getScripts(n),r.embed)),!r.source1))return"";r.source2||(r.source2=""),r.poster||(r.poster=""),r.source1=n.convertURL(r.source1,"source"),r.source2=n.convertURL(r.source2,"source"),r.source1mime=x(r.source1),r.source2mime=x(r.source2),r.poster=n.convertURL(r.poster,"poster");t=r.source1;var t,o,i,a,e=0<(e=H.filter(function(e){return e.regex.test(t)})).length?f.extend({},e[0],{url:z(e[0],t)}):null;return e&&(r.source1=e.url,r.type=e.type,r.allowFullscreen=e.allowFullscreen,r.width=r.width||e.w,r.height=r.height||e.h),r.embed?E.updateHtml(r.embed,r,!0):((e=h.getVideoScriptMatch(m.getScripts(n),r.source1))&&(r.type="script",r.width=e.width,r.height=e.height),e=m.getAudioTemplateCallback(n),o=m.getVideoTemplateCallback(n),r.width=r.width||300,r.height=r.height||150,f.each(r,function(e,t){r[t]=n.dom.encode(e)}),"iframe"===r.type?(a=r.allowFullscreen?' allowFullscreen="1"':"",'<iframe src="'+r.source1+'" width="'+r.width+'" height="'+r.height+'"'+a+"></iframe>"):"application/x-shockwave-flash"===r.source1mime?(i='<object data="'+(a=r).source1+'" width="'+a.width+'" height="'+a.height+'" type="application/x-shockwave-flash">',a.poster&&(i+='<img src="'+a.poster+'" width="'+a.width+'" height="'+a.height+'" />'),i+="</object>"):-1!==r.source1mime.indexOf("audio")?(i=r,(e=e)?e(i):'<audio controls="controls" src="'+i.source1+'">'+(i.source2?'\n<source src="'+i.source2+'"'+(i.source2mime?' type="'+i.source2mime+'"':"")+" />\n":"")+"</audio>"):"script"===r.type?'<script src="'+r.source1+'"><\/script>':(e=r,(o=o)?o(e):'<video width="'+e.width+'" height="'+e.height+'"'+(e.poster?' poster="'+e.poster+'"':"")+' controls="controls">\n<source src="'+e.source1+'"'+(e.source1mime?' type="'+e.source1mime+'"':"")+" />\n"+(e.source2?'<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</video>"))}},N={},R={getEmbedHtml:function(e,t){var n,r,o=m.getUrlResolver(e);return o?i(t,a(e),o):(n=t,r=a(e),new w(function(e){e({html:r(n),url:n.source1})}))},isCached:function(e){return N.hasOwnProperty(e)}},_=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],e=e.find("#constrain")[0];n&&r&&e&&t(n,r,e.checked())},W=function(e,t,n){var r=e.state.get("oldVal"),o=t.state.get("oldVal"),i=e.value(),a=t.value();n&&r&&o&&i&&a&&(i!==r?(a=Math.round(i/r*a),isNaN(a)||t.value(a)):(i=Math.round(a/o*i),isNaN(i)||e.value(i))),s(e,t)},A={createUi:function(e){function t(){e(function(e){n(e)})}return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},syncSize:function(e){_(e,s)},updateSize:n},$=d.ie&&d.ie<=8?"onChange":"onInput",D=function(t){return function(e){e=e&&e.msg?"Media embed handler error: "+e.msg:"Media embed handler threw unknown error.";t.notificationManager.open({type:"error",text:e})}},P=function(e,t){for(var n,r=e.dom.select("img[data-mce-object]"),t=(e.insertContent(t),e),o=r,i=t.dom.select("img[data-mce-object]"),a=0;a<o.length;a++)for(n=i.length-1;0<=n;n--)o[a]===i[n]&&i.splice(n,1);t.selection.select(i[0]),e.nodeChanged()},O=function(r){var o,t,e,n=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onpaste:function(){setTimeout(function(){R.getEmbedHtml(r,o.toJSON()).then(l(o,r)).catch(D(r))},1)},onchange:function(e){var n;R.getEmbedHtml(r,o.toJSON()).then(l(o,r)).catch(D(r)),n=o,e=e.meta,f.each(e,function(e,t){n.find("#"+t).value(e)})},onbeforecall:function(e){e.meta=o.toJSON()}}],i=[],a=(m.hasAltSource(r)&&i.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),m.hasPoster(r)&&i.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),m.hasDimensions(r)&&(e=A.createUi(function(e){e(o),t=o.toJSON(),o.find("#embed").value(E.updateHtml(t.embed,t))}),n.push(e)),s=(e=r).selection.getNode(),a=s.getAttribute("data-ephox-embed-iri"),t=a?{source1:a,"data-ephox-embed-iri":a,width:g.getMaxWidth(s),height:g.getMaxHeight(s)}:s.getAttribute("data-mce-object")?b.htmlToData(m.getScripts(e),e.serializer.serialize(s,{selection:!0})):{},{id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:function(e){var t=e.selection.getNode();if(t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri"))return e.selection.getContent()}(r),multiline:!0,rows:5,label:"Source"}),s=(a[$]=function(){t=f.extend({},b.htmlToData(m.getScripts(r),this.value())),this.parent().parent().fromJSON(t)},[{title:"General",type:"form",items:n},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},a]}]);0<i.length&&s.push({title:"Advanced",type:"form",items:i}),o=r.windowManager.open({title:"Insert/edit media",data:t,bodyType:"tabpanel",body:s,onSubmit:function(){A.updateSize(o);var e=o,t=r;(e=e.toJSON()).embed=E.updateHtml(e.embed,e),e.embed&&R.isCached(e.source1)?P(t,e.embed):R.getEmbedHtml(t,e).then(function(e){P(t,e.html)}).catch(D(t))}}),A.syncSize(o)},j=function(e){return{showDialog:function(){O(e)}}},q=function(e){e.addCommand("mceMedia",function(){O(e)})},I=tinymce.util.Tools.resolve("tinymce.html.Node"),B={sanitize:function(o,e){var i,a;return!1===m.shouldFilterHtml(o)?e:(i=C(),p({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(e){i.comment(e)},cdata:function(e){i.cdata(e)},text:function(e,t){i.text(e,t)},start:function(e,t,n){if(a=!0,"script"!==e&&"noscript"!==e){for(var r=0;r<t.length;r++){if(0===t[r].name.indexOf("on"))return;"style"===t[r].name&&(t[r].value=o.dom.serializeStyle(o.dom.parseStyle(t[r].value),e))}i.start(e,t,n),a=!1}},end:function(e){a||i.end(e)}},k({})).parse(e),i.getContent())}},V=function(o){return function(e){for(var t,n,r=e.length;r--;)!(t=e[r]).parent||t.parent.attr("data-mce-object")||"script"===t.name&&!(n=h.getVideoScriptMatch(m.getScripts(o),t.attr("src")))||(n&&(n.width&&t.attr("width",n.width.toString()),n.height)&&t.attr("height",n.height.toString()),"iframe"===t.name&&m.hasLiveEmbeds(o)&&d.ceFalse?u(t)||t.replace(M(o,t)):u(t)||t.replace(c(o,t)))}},K=function(u){u.on("preInit",function(){var t=u.schema.getSpecialElements(),n=(f.each("video audio iframe object".split(" "),function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")}),u.schema.getBoolAttrs());f.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){n[e]={}}),u.parser.addNodeFilter("iframe,video,audio,object,embed,script",V(u)),u.serializer.addAttributeFilter("data-mce-object",function(e,t){for(var n,r,o,i,a,s,l=e.length;l--;)if((n=e[l]).parent){for(a=n.attr(t),r=new I(a,1),"audio"!==a&&"script"!==a&&((s=n.attr("class"))&&-1!==s.indexOf("mce-preview-object")?r.attr({width:n.firstChild.attr("width"),height:n.firstChild.attr("height")}):r.attr({width:n.attr("width"),height:n.attr("height")})),r.attr({style:n.attr("style")}),o=(i=n.attributes).length;o--;){var c=i[o].name;0===c.indexOf("data-mce-p-")&&r.attr(c.substr(11),i[o].value)}"script"===a&&r.attr("type","text/javascript"),(s=n.attr("data-mce-html"))&&((a=new I("#text",3)).raw=!0,a.value=B.sanitize(u,unescape(s)),r.append(a)),n.replace(r)}})}),u.on("setContent",function(){u.$("span.mce-preview-object").each(function(e,t){var n=u.$(t);0===n.find("span.mce-shim",t).length&&n.append('<span class="mce-shim"></span>')})})},Y=function(e){e.on("ResolveName",function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)})},G=function(t){t.on("click keyup",function(){var e=t.selection.getNode();e&&t.dom.hasClass(e,"mce-preview-object")&&t.dom.getAttrib(e,"data-mce-selected")&&e.setAttribute("data-mce-selected","2")}),t.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");"audio"!==t&&"script"!==t||e.preventDefault()}),t.on("objectResized",function(e){var t,n=e.target;n.getAttribute("data-mce-object")&&(t=n.getAttribute("data-mce-html"))&&(t=unescape(t),n.setAttribute("data-mce-html",escape(E.updateHtml(t,{width:e.width,height:e.height}))))})},X=function(e){e.addButton("media",{tooltip:"Insert/edit media",cmd:"mceMedia",stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]}),e.addMenuItem("media",{icon:"media",text:"Media",cmd:"mceMedia",context:"insert",prependToContext:!0})};L.add("media",function(e){return q(e),X(e),Y(e),K(e),G(e),j(e)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-nonbreaking",["tinymce"],function(){return function(){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(e,t){var n=!!(n=e).plugins.visualchars&&n.plugins.visualchars.isEnabled()?'<span class="mce-nbsp">&nbsp;</span>':"&nbsp;";e.insertContent(function(e,t){for(var n="",r=0;r<t;r++)n+=e;return n}(n,t)),e.dom.setAttrib(e.dom.select("span.mce-nbsp"),"data-mce-bogus","1")},t=function(e){e.addCommand("mceNonBreaking",function(){r(e,1)})},o=tinymce.util.Tools.resolve("tinymce.util.VK"),i=function(e){e=e.getParam("nonbreaking_force_tab",0);return"boolean"==typeof e?!0===e?3:0:e},n=function(t){var n=i(t);0<n&&t.on("keydown",function(e){e.keyCode!==o.TAB||e.isDefaultPrevented()||e.shiftKey||(e.preventDefault(),e.stopImmediatePropagation(),r(t,n))})},a=function(e){e.addButton("nonbreaking",{title:"Nonbreaking space",cmd:"mceNonBreaking"}),e.addMenuItem("nonbreaking",{icon:"nonbreaking",text:"Nonbreaking space",cmd:"mceNonBreaking",context:"insert"})};e.add("nonbreaking",function(e){t(e),a(e),n(e)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-noneditable",["tinymce"],function(){return function(){!function(){"use strict";function n(t){return function(e){return-1!==(" "+e.attr("class")+" ").indexOf(t)}}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),l=tinymce.util.Tools.resolve("tinymce.util.Tools"),c={getNonEditableClass:function(e){return e.getParam("noneditable_noneditable_class","mceNonEditable")},getEditableClass:function(e){return e.getParam("noneditable_editable_class","mceEditable")},getNonEditableRegExps:function(e){e=e.getParam("noneditable_regexp",[]);return e&&e.constructor===RegExp?[e]:e}},u=function(o,i,a){return function(e){var t=arguments,n=t[t.length-2],r=0<n?i.charAt(n-1):"";if('"'===r)return e;if(">"===r){r=i.lastIndexOf("<",n);if(-1!==r)if(-1!==i.substring(r,n).indexOf('contenteditable="false"'))return e}return'<span class="'+a+'" data-mce-content="'+o.dom.encode(t[0])+'">'+o.dom.encode("string"==typeof t[1]?t[1]:t[0])+"</span>"}},t=function(i){var r="contenteditable",e=" "+l.trim(c.getEditableClass(i))+" ",t=" "+l.trim(c.getNonEditableClass(i))+" ",o=n(e),a=n(t),s=c.getNonEditableRegExps(i);i.on("PreInit",function(){0<s.length&&i.on("BeforeSetContent",function(e){var t=i,n=s,r=n.length,o=e.content;if("raw"!==e.format){for(;r--;)o=o.replace(n[r],u(t,o,c.getNonEditableClass(t)));e.content=o}}),i.parser.addAttributeFilter("class",function(e){for(var t,n=e.length;n--;)t=e[n],o(t)?t.attr(r,"true"):a(t)&&t.attr(r,"false")}),i.serializer.addAttributeFilter(r,function(e){for(var t,n=e.length;n--;)t=e[n],(o(t)||a(t))&&(0<s.length&&t.attr("data-mce-content")?(t.name="#text",t.type=3,t.raw=!0,t.value=t.attr("data-mce-content")):t.attr(r,null))})})};e.add("noneditable",function(e){t(e)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-pagebreak",["tinymce"],function(){return function(){!function(){"use strict";function n(){return'<img src="'+t.transparentSrc+'" class="'+o()+'" data-mce-resize="false" data-mce-placeholder />'}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),r=function(e){return e.getParam("pagebreak_separator","\x3c!-- pagebreak --\x3e")},a=function(e){return e.getParam("pagebreak_split_block",!1)},o=function(){return"mce-pagebreak"},i=function(o){var i=r(o),t=new RegExp(i.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(e){return"\\"+e}),"gi");o.on("BeforeSetContent",function(e){e.content=e.content.replace(t,n())}),o.on("PreInit",function(){o.serializer.addNodeFilter("img",function(e){for(var t,n,r=e.length;r--;)(n=(t=e[r]).attr("class"))&&-1!==n.indexOf("mce-pagebreak")&&(n=t.parent,o.schema.getBlockElements()[n.name]&&a(o)?(n.type=3,n.value=i,n.raw=!0,t.remove()):(t.type=3,t.value=i,t.raw=!0))})})},s=n,l=o,c=function(e){e.addCommand("mcePageBreak",function(){e.settings.pagebreak_split_block?e.insertContent("<p>"+s()+"</p>"):e.insertContent(s())})},u=function(t){t.on("ResolveName",function(e){"IMG"===e.target.nodeName&&t.dom.hasClass(e.target,l())&&(e.name="pagebreak")})},d=function(e){e.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"}),e.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"})};e.add("pagebreak",function(e){c(e),d(e),i(e),u(e)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-paste",["tinymce"],function(){return function(){!function(){"use strict";function r(e){return e.replace(/\r?\n/g,"<br>")}function o(e,t,n){var e=e.split(/\n\n/),r=W(t,n),o="</"+t+">";return 1===(n=p.map(e,function(e){return e.split(/\n/).join("<br />")})).length?n[0]:p.map(n,function(e){return r+e+o}).join("")}var a=function(e){function t(){return n}var n=e;return{get:t,set:function(e){n=e},clone:function(){return a(n)}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),M=function(e){return!(!/(^|[ ,])powerpaste([, ]|$)/.test(e.settings.plugins)||!t.get("powerpaste")||(void 0!==window.console&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),0))},L=function(e,t){return{clipboard:e,quirks:t}},i={firePastePreProcess:function(e,t,n,r){return e.fire("PastePreProcess",{content:t,internal:n,wordContent:r})},firePastePostProcess:function(e,t,n,r){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:r})},firePastePlainTextToggle:function(e,t){return e.fire("PastePlainTextToggle",{state:t})},firePaste:function(e,t){return e.fire("paste",{ieFake:t})}},l={shouldPlainTextInform:function(e){return e.getParam("paste_plaintext_inform",!0)},shouldBlockDrop:function(e){return e.getParam("paste_block_drop",!1)},shouldPasteDataImages:function(e){return e.getParam("paste_data_images",!1)},shouldFilterDrop:function(e){return e.getParam("paste_filter_drop",!0)},getPreProcess:function(e){return e.getParam("paste_preprocess")},getPostProcess:function(e){return e.getParam("paste_postprocess")},getWebkitStyles:function(e){return e.getParam("paste_webkit_styles")},shouldRemoveWebKitStyles:function(e){return e.getParam("paste_remove_styles_if_webkit",!0)},shouldMergeFormats:function(e){return e.getParam("paste_merge_formats",!0)},isSmartPasteEnabled:function(e){return e.getParam("smart_paste",!0)},isPasteAsTextEnabled:function(e){return e.getParam("paste_as_text",!1)},getRetainStyleProps:function(e){return e.getParam("paste_retain_style_properties")},getWordValidElements:function(e){return e.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")},shouldConvertWordFakeLists:function(e){return e.getParam("paste_convert_word_fake_lists",!0)},shouldUseDefaultFilters:function(e){return e.getParam("paste_enable_default_filters",!0)}},F=function(e,t,n){"text"===t.pasteFormat.get()?(t.pasteFormat.set("html"),i.firePastePlainTextToggle(e,!1)):(t.pasteFormat.set("text"),i.firePastePlainTextToggle(e,!0),t=e,!1===n.get()&&l.shouldPlainTextInform(t)&&(t="Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.",e.notificationManager.open({text:e.translate(t),type:"info"}),n.set(!0))),e.focus()},H=function(e,n,t){e.addCommand("mceTogglePlainTextPaste",function(){F(e,n,t)}),e.addCommand("mceInsertClipboardContent",function(e,t){t.content&&n.pasteHtml(t.content,t.internal),t.text&&n.pasteText(t.text)})},f=tinymce.util.Tools.resolve("tinymce.Env"),m=tinymce.util.Tools.resolve("tinymce.util.Delay"),p=tinymce.util.Tools.resolve("tinymce.util.Tools"),z=tinymce.util.Tools.resolve("tinymce.util.VK"),e="x-tinymce/html",n="\x3c!-- "+e+" --\x3e",h={mark:function(e){return n+e},unmark:function(e){return e.replace(n,"")},isMarked:function(e){return-1!==e.indexOf(n)},internalHtmlMime:function(){return e}},U=tinymce.util.Tools.resolve("tinymce.html.Entities"),W=function(e,t){var n,r=[],e="<"+e;if("object"==typeof t){for(n in t)t.hasOwnProperty(n)&&r.push(n+'="'+U.encodeAllRaw(t[n])+'"');r.length&&(e+=" "+r.join(" "))}return e+">"},g={isPlainText:function(e){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)},convert:function(e,t,n){return t?o(e,t,n):r(e)},toBRs:r,toBlockElements:o},c=tinymce.util.Tools.resolve("tinymce.html.DomParser"),d=tinymce.util.Tools.resolve("tinymce.html.Node"),u=tinymce.util.Tools.resolve("tinymce.html.Schema"),$=tinymce.util.Tools.resolve("tinymce.html.Serializer");function v(t,e){return p.each(e,function(e){t=e.constructor===RegExp?t.replace(e,""):t.replace(e[0],e[1])}),t}var y={filter:v,innerText:function(e){var t=u(),n=c({},t),o="",i=t.getShortEndedElements(),a=p.makeMap("script noscript style textarea video audio iframe object"," "),s=t.getBlockElements();return e=v(e,[/<!\[[^\]]+\]>/g]),function e(t){var n=t.name,r=t;if("br"===n)o+="\n";else if(i[n]&&(o+=" "),a[n])o+=" ";else{if(3===t.type&&(o+=t.value),!t.shortEnded&&(t=t.firstChild))for(;e(t),t=t.next;);s[n]&&r.next&&(o+="\n","p"===n)&&(o+="\n")}}(n.parse(e)),o},trimHtml:function(e){return e=v(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(e,t,n){return t||n?" ":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},createIdGenerator:function(e){var t=0;return function(){return e+t++}},isMsEdge:function(){return-1!==navigator.userAgent.indexOf(" Edge/")}};function j(e){var o,i,a=1;function s(e,t){if(3!==e.type||!t.test(e.value)){if(e=e.firstChild)do{if(!s(e,t))return}while(e=e.next);return 1}e.value=e.value.replace(t,"")}function t(e,t,n){var r=e._listLevel||a;(o=r!==a?r<a?o&&o.parent.parent:(i=o,null):o)&&o.name===t?o.append(e):(i=i||o,o=new d(t,1),1<n&&o.attr("start",""+n),e.wrap(o)),e.name="li",a<r&&i&&i.lastChild.append(o),a=r,function e(t){if(t._listIgnore)t.remove();else if(t=t.firstChild)for(;e(t),t=t.next;);}(e),s(e,/^\u00a0+/),s(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),s(e,/^\u00a0+/)}for(var n=[],r=e.firstChild;null!=r;)if(n.push(r),null!==(r=r.walk()))for(;void 0!==r&&r.parent!==e;)r=r.walk();for(var l,c,u=0;u<n.length;u++)"p"===(e=n[u]).name&&e.firstChild?(l=function e(t){var n="";if(3===t.type)return t.value;if(t=t.firstChild)for(;n+=e(t),t=t.next;);return n}(e),/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(l)?t(e,"ul"):!function(t){var n,e=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/];return t=t.replace(/^[\u00a0 ]+/,""),p.each(e,function(e){if(e.test(t))return!(n=!0)}),n}(l)?e._listLevel?t(e,"ul",1):o=null:(c=1,t(e,"ol",c=(l=/([0-9]+)\./.exec(l))?parseInt(l[1],10):c))):(i=o,o=null)}function q(r,e){(t=l.getRetainStyleProps(r))&&(o=p.makeMap(t.split(/[, ]/))),e=y.filter(e,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return 0<t.length?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(" "):""}]]);var o,t=l.getWordValidElements(r),t=u({valid_elements:t,valid_children:"-li[p]"});p.each(t.elements,function(e){e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))});(n=c({},t)).addAttributeFilter("style",function(e){for(var t,n=e.length;n--;)(t=e[n]).attr("style",function(n,r,o,i){var a,s={},e=n.dom.parseStyle(i);return p.each(e,function(e,t){switch(t){case"mso-list":(a=/\w+ \w+([0-9]+)/i.exec(i))&&(o._listLevel=parseInt(a[1],10)),/Ignore/i.test(e)&&o.firstChild&&(o._listIgnore=!0,o.firstChild._listIgnore=!0);break;case"horiz-align":t="text-align";break;case"vert-align":t="vertical-align";break;case"font-color":case"mso-foreground":t="color";break;case"mso-background":case"mso-highlight":t="background";break;case"font-weight":case"font-style":return void("normal"!==e&&(s[t]=e));case"mso-element":if(/^(comment|comment-list)$/i.test(e))return void o.remove()}0===t.indexOf("mso-comment")?o.remove():0!==t.indexOf("mso-")&&("all"===l.getRetainStyleProps(n)||r&&r[t])&&(s[t]=e)}),/(bold)/i.test(s["font-weight"])&&(delete s["font-weight"],o.wrap(new d("b",1))),/(italic)/i.test(s["font-style"])&&(delete s["font-style"],o.wrap(new d("i",1))),(s=n.dom.serializeStyle(s,o.name))||null}(r,o,t,t.attr("style"))),"span"===t.name&&t.parent&&!t.attributes.length&&t.unwrap()}),n.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)n=(t=e[r]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)}),n.addNodeFilter("del",function(e){for(var t=e.length;t--;)e[t].remove()}),n.addNodeFilter("a",function(e){for(var t,n,r,o=e.length;o--;)n=(t=e[o]).attr("href"),r=t.attr("name"),n&&-1!==n.indexOf("#_msocom_")?t.remove():!(n=n&&0===n.indexOf("file://")?(n=n.split("#")[1])&&"#"+n:n)&&!r||r&&!/^_?(?:toc|edn|ftn)/i.test(r)?t.unwrap():t.attr({href:n,name:r})});var n=n.parse(e);return l.shouldConvertWordFakeLists(r)&&j(n),e=$({validate:r.settings.validate},t).serialize(n)}function s(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)}function b(e){return s(e)&&/.(gif|jpe?g|png)$/.test(e)}function w(e,t){t=e.dom.encode(t).replace(/\r\n/g,"\n"),t=g.convert(t,e.settings.forced_root_block,e.settings.forced_root_block_attrs),D(e,t,!1)}function x(e){var t,n={};if(e&&(e.getData&&(t=e.getData("Text"))&&0<t.length&&-1===t.indexOf("data:text/mce-internal,")&&(n["text/plain"]=t),e.types))for(var r=0;r<e.types.length;r++){var o=e.types[r];try{n[o]=e.getData(o)}catch(e){n[o]=""}}return n}function C(e){return P(e,"text/html")||P(e,"text/plain")}function k(i,a,s){var e=re(a)?a.clipboardData:a.dataTransfer;function t(e){var t,n=!1;if(e)for(t=0;t<e.length;t++){var r,o=e[t];/^image\/(jpeg|png|gif|bmp)$/.test(o.type)&&(o=o.getAsFile?o.getAsFile():o,(r=new window.FileReader).onload=ne.bind(null,i,s,r,o),r.readAsDataURL(o),a.preventDefault(),n=!0)}return n}if(i.settings.paste_data_images&&e)return t(e.items)||t(e.files)}function S(e){return z.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode}function V(i,e,t){var a;oe(i,e,t),i.parser.addNodeFilter("img",function(e,t,n){function r(e){e.attr("data-mce-object")||a===f.transparentSrc||e.remove()}if(!i.settings.paste_data_images&&(n=n).data&&!0===n.data.paste)for(var o=e.length;o--;)!(a=e[o].attributes.map.src)||0!==a.indexOf("webkit-fake-url")&&(i.settings.allow_html_data_urls||0!==a.indexOf("data:"))||r(e[o])})}function T(e){return f.ie&&e.inline?document.body:e.getBody()}function K(t,e){var n;T(n=t)!==n.getBody()&&t.dom.bind(e,"paste keyup",function(e){setTimeout(function(){t.fire("paste")},0)})}function Y(n,e){t=n,r=a(null),o="%MCEPASTEBIN%";var t,r,o,i={create:function(){return ie(t,r,o)},remove:function(){return ae(t,r)},getEl:function(){return O(t)},getHtml:function(){return se(t)},getLastRng:function(){return le(r)},isDefault:function(){return ce(t,o)},isDefaultContent:function(e){return I(o,e)}};return n.on("preInit",function(){return V(n,i,e)}),{pasteFormat:e,pasteHtml:function(e,t){return D(n,e,t)},pasteText:function(e){return w(n,e)},pasteImageData:function(e,t){return k(n,e,t)},getDataTransferItems:x,hasHtmlOrText:C,hasContentType:P}}function G(e,t,n){var r;if(r=e,!1===f.iOS&&void 0!==r&&"function"==typeof r.setData&&!0!==y.isMsEdge())try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(h.internalHtmlMime(),t),1}catch(e){return}}function E(e,t){return pe.getCaretRangeFromPoint(t.clientX,t.clientY,e.getDoc())}function N(e,t){e.focus(),e.selection.setRng(t)}var R={preProcess:function(e,t){return l.shouldUseDefaultFilters(e)?q(e,t):t},isWordContent:function(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}},_=function(e,t){return{content:e,cancelled:t}},X=function(e,t,n,r){t=e.dom.create("div",{style:"display:none"},t),e=i.firePastePostProcess(e,t,n,r);return _(e.node.innerHTML,e.isDefaultPrevented())},J={process:function(e,t,n){var r=R.isWordContent(t),t=r?R.preProcess(e,t):t;return t=i.firePastePreProcess(e,t,n,r),e.hasEventListeners("PastePostProcess")&&!t.isDefaultPrevented()?X(e,t.content,n,r):_(t.content,t.isDefaultPrevented())}},A=function(e,t){return e.insertContent(t,{merge:l.shouldMergeFormats(e),paste:!0}),!0},Q=function(e,t,n){return!(!1!==e.selection.isCollapsed()||!s(t)||(o=t,i=n,(r=e).undoManager.extra(function(){i(r,o)},function(){r.execCommand("mceInsertLink",!1,o)}),0));var r,o,i},Z=function(e,t,n){return!!b(t)&&(o=t,i=n,(r=e).undoManager.extra(function(){i(r,o)},function(){r.insertContent('<img src="'+o+'">')}),!0);var r,o,i},ee={isImageUrl:b,isAbsoluteUrl:s,insertContent:function(e,t){var n,r;!1===l.isSmartPasteEnabled(e)?A(e,t):(n=e,r=t,p.each([Q,Z,A],function(e){return!0!==e(n,r,A)}))}},D=function(e,t,n){n=n||h.isMarked(t),t=J.process(e,h.unmark(t),n);!1===t.cancelled&&ee.insertContent(e,t.content)},P=function(e,t){return t in e&&0<e[t].length},te=y.createIdGenerator("mceclip"),ne=function(e,t,n,r){t&&(e.selection.setRng(t),t=null);var o,i,t=n.result,a=-1!==(s=(n=t).indexOf(","))?n.substr(s+1):null,n=te(),s=e.settings.images_reuse_filename&&r.name?function(e,t){t=t.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i);return t?e.dom.encode(t[1]):null}(e,r.name):n,l=new Image;l.src=t,i=e.settings,l=l,!i.images_dataimg_filter||i.images_dataimg_filter(l)?(l=i=void 0,(l=(o=e.editorUpload.blobCache).findFirst(function(e){return e.base64()===a}))?i=l:(i=o.create(n,r,a,s),o.add(i)),D(e,'<img src="'+i.blobUri()+'">',!1)):D(e,'<img src="'+t+'">',!1)},re=function(e){return"paste"===e.type},oe=function(a,s,l){var c,u=0;function d(e,t,n,r){var o,i;P(e,"text/html")?o=e["text/html"]:(o=s.getHtml(),r=r||h.isMarked(o),s.isDefaultContent(o)&&(n=!0)),o=y.trimHtml(o),s.remove(),i=!1===r&&g.isPlainText(o),(n=o.length&&!i?n:!0)&&(o=P(e,"text/plain")&&i?e["text/plain"]:y.innerText(o)),s.isDefaultContent(o)?t||a.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):n?w(a,o):D(a,o,r)}a.on("keydown",function(e){function t(e){S(e)&&!e.isDefaultPrevented()&&s.remove()}!S(e)||e.isDefaultPrevented()||(c=e.shiftKey&&86===e.keyCode)&&f.webkit&&-1!==navigator.userAgent.indexOf("Version/")||(e.stopImmediatePropagation(),u=(new Date).getTime(),f.ie&&c?(e.preventDefault(),i.firePaste(a,!0)):(s.remove(),s.create(),a.once("keyup",t),a.once("paste",function(){a.off("keyup",t)})))});a.on("paste",function(e){var t=(new Date).getTime(),n=function(e,t){t=x(t.clipboardData||e.getDoc().dataTransfer);return y.isMsEdge()?p.extend(t,{"text/html":""}):t}(a,e),t=(new Date).getTime()-t,r=(new Date).getTime()-u-t<1e3,o="text"===l.get()||c,i=P(n,h.internalHtmlMime());c=!1,e.isDefaultPrevented()||function(e){e=e.clipboardData;return-1!==navigator.userAgent.indexOf("Android")&&e&&e.items&&0===e.items.length}(e)||!C(n)&&k(a,e,s.getLastRng()||a.selection.getRng())?s.remove():(r||e.preventDefault(),!f.ie||r&&!e.ieFake||P(n,"text/html")||(s.create(),a.dom.bind(s.getEl(),"paste",function(e){e.stopPropagation()}),a.getDoc().execCommand("Paste",!1,null),n["text/html"]=s.getHtml()),P(n,"text/html")?(e.preventDefault(),i=i||h.isMarked(n["text/html"]),d(n,r,o,i)):m.setEditorTimeout(a,function(){d(n,r,o,i)},0))})},ie=function(e,t,n){var r=e.dom,o=e.getBody();t.set(e.selection.getRng()),t=e.dom.add(T(e),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},n),(f.ie||f.gecko)&&r.setStyle(t,"left","rtl"===r.getStyle(o,"direction",!0)?65535:-65535),r.bind(t,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),K(e,t),t.focus(),e.selection.select(t,!0)},ae=function(e,t){if(O(e)){for(var n,r=t.get();n=e.dom.get("mcepastebin");)e.dom.remove(n),e.dom.unbind(n);r&&e.selection.setRng(r)}t.set(null)},O=function(e){return e.dom.get("mcepastebin")},se=function(n){function t(e,t){e.appendChild(t),n.dom.remove(t,!0)}var e,r,o,i=p.grep(T(n).childNodes,function(e){return"mcepastebin"===e.id}),a=i.shift();for(p.each(i,function(e){t(a,e)}),e=(r=n.dom.select("div[id=mcepastebin]",a)).length-1;0<=e;e--)o=n.dom.create("div"),a.insertBefore(o,r[e]),t(o,r[e]);return a?a.innerHTML:""},le=function(e){return e.get()},I=function(e,t){return t===e},ce=function(e,t){var n,e=O(e);return(n=e)&&"mcepastebin"===n.id&&I(t,e.innerHTML)},ue=function(){},B=function(e,t,n,r){G(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):n(t.html,r)},de=function(i){return function(e,t){var e=h.mark(e),n=i.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),e=i.dom.create("div",{contenteditable:"true"},e),r=(i.dom.setStyles(n,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),n.appendChild(e),i.dom.add(i.getBody(),n),i.selection.getRng()),o=(e.focus(),i.dom.createRng());o.selectNodeContents(e),i.selection.setRng(o),setTimeout(function(){i.selection.setRng(r),n.parentNode.removeChild(n),t()},0)}},fe=function(e){return{html:e.selection.getContent({contextual:!0}),text:e.selection.getContent({format:"text"})}},me=function(e){var t,n;e.on("cut",(t=e,function(e){!1===t.selection.isCollapsed()&&B(e,fe(t),de(t),function(){setTimeout(function(){t.execCommand("Delete")},0)})})),e.on("copy",(n=e,function(e){!1===n.selection.isCollapsed()&&B(e,fe(n),de(n),ue)}))},pe=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),he=function(i,a,s){l.shouldBlockDrop(i)&&i.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),l.shouldPasteDataImages(i)||i.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&0<t.files.length&&e.preventDefault()}),i.on("drop",function(e){var t,n,r,o=E(i,e);e.isDefaultPrevented()||s.get()||(t=a.getDataTransferItems(e.dataTransfer),n=a.hasContentType(t,h.internalHtmlMime()),(a.hasHtmlOrText(t)&&!function(e){e=e["text/plain"];return!!e&&0===e.indexOf("file://")}(t)||!a.pasteImageData(e,o))&&o&&l.shouldFilterDrop(i)&&(r=t["mce-internal"]||t["text/html"]||t["text/plain"])&&(e.preventDefault(),m.setEditorTimeout(i,function(){i.undoManager.transact(function(){t["mce-internal"]&&i.execCommand("Delete"),N(i,o),r=y.trimHtml(r),t["text/html"]?a.pasteHtml(r,n):a.pasteText(r)})})))}),i.on("dragstart",function(e){s.set(!0)}),i.on("dragover dragend",function(e){l.shouldPasteDataImages(i)&&!1===s.get()&&(e.preventDefault(),N(i,E(i,e))),"dragend"===e.type&&s.set(!1)})},ge=function(e){var t=e.plugins.paste,n=l.getPreProcess(e),r=(n&&e.on("PastePreProcess",function(e){n.call(t,t,e)}),l.getPostProcess(e));r&&e.on("PastePostProcess",function(e){r.call(t,t,e)})};function ve(t,n){t.on("PastePreProcess",function(e){e.content=n(t,e.content,e.internal,e.wordContent)})}function ye(e,t){var n;return R.isWordContent(t)&&(n=[],p.each(e.schema.getBlockElements(),function(e,t){n.push(t)}),e=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+n.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g"),t=y.filter(t,[[e,"$1"]]),t=y.filter(t,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])),t}function be(e,t,n,r){var c,u,d;return r||n||(r=l.getWebkitStyles(e),!1!==l.shouldRemoveWebKitStyles(e)&&"all"!==r&&(t=(t=(c=r?r.split(/[, ]/):c)?(u=e.dom,d=e.selection.getNode(),t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,t,n,r){var o=u.parseStyle(u.decode(n)),i={};if("none"===c)return t+r;for(var a=0;a<c.length;a++){var s=o[c[a]],l=u.getStyle(d,c[a],!0);/color/.test(c[a])&&(s=u.toHex(s),l=u.toHex(l)),l!==s&&(i[c[a]]=s)}return(i=u.serializeStyle(i,"span"))?t+' style="'+i+'"'+r:t+r})):t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3")).replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,r){return t+' style="'+n+'"'+r}))),t}function we(n,e){n.$("a",e).find("font,u").each(function(e,t){n.dom.remove(t,!0)})}function xe(e){return function(){return e}}function Ce(e,t,n){var r=n.control;r.active("text"===t.pasteFormat.get()),e.on("PastePlainTextToggle",function(e){r.active(e.state)})}var ke=function(e){var t,n;f.webkit&&ve(e,be),f.ie&&(ve(e,ye),n=we,(t=e).on("PastePostProcess",function(e){n(t,e.node)}))},Se=(xe(!1),xe(!0),function(o){for(var e=1;e<arguments.length;e++)e-1,0;for(var i=new Array(arguments.length-1),t=1;t<arguments.length;t++)i[t-1]=arguments[t];return function(){for(var e=0;e<arguments.length;e++)e,0;for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var r=i.concat(t);return o.apply(null,r)}}),Te=function(e,t){var n=Se(Ce,e,t);e.addButton("pastetext",{active:!1,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:n}),e.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:t.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:n})};t.add("paste",function(e){var t,n,r,o;if(!1===M(e))return t=a(!1),n=a(!1),r=a(l.isPasteAsTextEnabled(e)?"text":"html"),r=Y(e,r),o=ke(e),Te(e,r),H(e,r,t),ge(e),me(e),he(e,r,n),L(r,o)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-preview",["tinymce"],function(){return function(){!function(){"use strict";function r(t){var n="",r=t.dom.encode,e=l(t);n+='<base href="'+r(t.documentBaseURI.getURI())+'">',e&&(n+='<style type="text/css">'+e+"</style>"),c.each(t.contentCSS,function(e){n+='<link type="text/css" rel="stylesheet" href="'+r(t.documentBaseURI.toAbsolute(e))+'">'});-1!==(e=t.settings.body_id||"tinymce").indexOf("=")&&(e=(e=t.getParam("body_id","","hash"))[t.id]||e);var o=t.settings.body_class||"",i=(-1!==o.indexOf("=")&&(o=(o=t.getParam("body_class","","hash"))[t.id]||""),t.settings.directionality?' dir="'+t.settings.directionality+'"':"");return"<!DOCTYPE html><html><head>"+n+'</head><body id="'+r(e)+'" class="mce-content-body '+r(o)+'"'+r(i)+">"+t.getContent()+'<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);<\/script> </body></html>'}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=tinymce.util.Tools.resolve("tinymce.Env"),a=function(e){return parseInt(e.getParam("plugin_preview_width","650"),10)},s=function(e){return parseInt(e.getParam("plugin_preview_height","500"),10)},l=function(e){return e.getParam("content_style","")},c=tinymce.util.Tools.resolve("tinymce.util.Tools"),u=function(e,t,n){e=r(e);n?t.src="data:text/html;charset=utf-8,"+encodeURIComponent(e):((n=t.contentWindow.document).open(),n.write(e),n.close())},t=function(t){var n=!i.ie,e='<iframe src="" frameborder="0"'+(n?' sandbox="allow-scripts"':"")+"></iframe>",r=a(t),o=s(t);t.windowManager.open({title:"Preview",width:r,height:o,html:e,buttons:{text:"Close",onclick:function(e){e.control.parent().parent().close()}},onPostRender:function(e){e=e.control.getEl("body").firstChild;u(t,e,n)}})},n=function(e){e.addCommand("mcePreview",function(){t(e)})},o=function(e){e.addButton("preview",{title:"Preview",cmd:"mcePreview"}),e.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})};e.add("preview",function(e){n(e),o(e)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-print",["tinymce"],function(){return function(){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e){e.addCommand("mcePrint",function(){e.getWin().print()})},n=function(e){e.addButton("print",{title:"Print",cmd:"mcePrint"}),e.addMenuItem("print",{text:"Print",cmd:"mcePrint",icon:"print"})};e.add("print",function(e){t(e),n(e),e.addShortcut("Meta+P","","mcePrint")})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-save",["tinymce"],function(){return function(){!function(){"use strict";function n(e,t){e.notificationManager.open({text:e.translate(t),type:"error"})}function t(n){return function(e){var t=e.control;n.on("nodeChange dirty",function(){t.disabled(i.enableWhenDirty(n)&&!n.isDirty())})}}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),o=tinymce.util.Tools.resolve("tinymce.util.Tools"),i={enableWhenDirty:function(e){return e.getParam("save_enablewhendirty",!0)},hasOnSaveCallback:function(e){return!!e.getParam("save_onsavecallback")},hasOnCancelCallback:function(e){return!!e.getParam("save_oncancelcallback")}},a=function(e){var t=r.DOM.getParent(e.id,"form");i.enableWhenDirty(e)&&!e.isDirty()||(e.save(),i.hasOnSaveCallback(e)?(e.execCallback("save_onsavecallback",e),e.nodeChanged()):t?(e.setDirty(!1),t.onsubmit&&!t.onsubmit()||("function"==typeof t.submit?t.submit():n(e,"Error: Form submit field collision.")),e.nodeChanged()):n(e,"Error: No form element found."))},s=function(e){var t=o.trim(e.startContent);i.hasOnCancelCallback(e)?e.execCallback("save_oncancelcallback",e):(e.setContent(t),e.undoManager.clear(),e.nodeChanged())},l=function(e){e.addCommand("mceSave",function(){a(e)}),e.addCommand("mceCancel",function(){s(e)})},c=function(e){e.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:!0,onPostRender:t(e)}),e.addButton("cancel",{text:"Cancel",icon:!1,cmd:"mceCancel",disabled:!0,onPostRender:t(e)}),e.addShortcut("Meta+S","","mceSave")};e.add("save",function(e){c(e),l(e)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-searchreplace",["tinymce"],function(){return function(){!function(){"use strict";function r(e){function t(){return n}var n=e;return{get:t,set:function(e){n=e},clone:function(){return r(n)}}}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),m=tinymce.util.Tools.resolve("tinymce.util.Tools");function R(e){return e&&1===e.nodeType&&"false"===e.contentEditable}function p(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)}function s(e,t,n){var r=t.get(),o=e.dom;return(n=!1!==n)?r++:r--,o.removeClass(i(e,t.get()),"mce-match-marker-selected"),(n=i(e,r)).length?(o.addClass(i(e,r),"mce-match-marker-selected"),e.selection.scrollIntoView(n[0]),r):-1}function h(e,t){var n=t.parentNode;e.remove(t),e.isEmpty(n)&&e.remove(n)}function g(e,t){-1!==(e=s(e,t,!0))&&t.set(e)}function v(e,t){-1!==(e=s(e,t,!1))&&t.set(e)}function y(e){return null!==(e=x(e))&&0<e.length}function b(e,t){return 0<i(e,t.get()+1).length}function w(e,t){return 0<i(e,t.get()-1).length}function n(e,t){return function(){a.open(e,t)}}var l={findAndReplaceDOMText:function(e,t,n,r,o){var i,a,p,s,l,c,u,h,d=[],f=0;function m(e,t){if(t=t||0,!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");var n=e.index;if(0<t){t=e[t];if(!t)throw new Error("Invalid capture group");n+=e[0].indexOf(t),e[0]=t}return[n,n+e[0].length,[e[0]]]}if(p=t.ownerDocument,s=o.getBlockElements(),l=o.getWhiteSpaceElements(),c=o.getShortEndedElements(),a=function e(t){var n;if(3===t.nodeType)return t.data;if(l[t.nodeName]&&!s[t.nodeName])return"";if(n="",R(t))return"\n";if((s[t.nodeName]||c[t.nodeName])&&(n+="\n"),t=t.firstChild)for(;n+=e(t),t=t.nextSibling;);return n}(t)){if(e.global)for(;i=e.exec(a);)d.push(m(i,r));else i=a.match(e),d.push(m(i,r));if(d.length){var g,v,y,b,f=d.length,w=t,x=d,C=(h="function"!=typeof(o=n)?(u=o.nodeType?o:p.createElement(o),function(e,t){var n=u.cloneNode(!1);return n.setAttribute("data-mce-index",t),e&&n.appendChild(p.createTextNode(e)),n}):o,function(e){var t,n=e.startNode,r=e.endNode,o=e.matchIndex;if(n===r)return t=(s=n).parentNode,0<e.startNodeIndex&&(i=p.createTextNode(s.data.substring(0,e.startNodeIndex)),t.insertBefore(i,s)),m=h(e.match[0],o),t.insertBefore(m,s),e.endNodeIndex<s.length&&(a=p.createTextNode(s.data.substring(e.endNodeIndex)),t.insertBefore(a,s)),s.parentNode.removeChild(s),m;for(var i=p.createTextNode(n.data.substring(0,e.startNodeIndex)),a=p.createTextNode(r.data.substring(e.endNodeIndex)),s=h(n.data.substring(e.startNodeIndex),o),l=[],c=0,u=e.innerNodes.length;c<u;++c){var d=e.innerNodes[c],f=h(d.data,o);d.parentNode.replaceChild(f,d),l.push(f)}var m=h(r.data.substring(0,e.endNodeIndex),o);return(t=n.parentNode).insertBefore(i,n),t.insertBefore(s,n),t.removeChild(n),(t=r.parentNode).insertBefore(m,r),t.insertBefore(a,r),t.removeChild(r),m}),k=[],S=0,T=w,E=x.shift(),N=0;e:for(;;){if((s[T.nodeName]||c[T.nodeName]||R(T))&&S++,3===T.nodeType&&(!v&&T.length+S>=E[1]?(v=T,b=E[1]-S):g&&k.push(T),!g&&T.length+S>E[0]&&(g=T,y=E[0]-S),S+=T.length),g&&v){if(T=C({startNode:g,startNodeIndex:y,endNode:v,endNodeIndex:b,innerNodes:k,match:E[2],matchIndex:N}),S-=v.length-b,v=g=null,k=[],N++,!(E=x.shift()))break}else if(l[T.nodeName]&&!s[T.nodeName]||!T.firstChild){if(T.nextSibling){T=T.nextSibling;continue}}else if(!R(T)){T=T.firstChild;continue}for(;;){if(T.nextSibling){T=T.nextSibling;break}if(T.parentNode===w)break e;T=T.parentNode}}}return f}}},x=function(e){e=e.getAttribute("data-mce-index");return"number"==typeof e?""+e:e},i=function(e,t){var n=[],r=m.toArray(e.getBody().getElementsByTagName("span"));if(r.length)for(var o=0;o<r.length;o++){var i=x(r[o]);null!==i&&i.length&&i===t.toString()&&n.push(r[o])}return n},c=function(e,t,n){for(var r,o,i,a=m.toArray(e.getBody().getElementsByTagName("span")),s=0;s<a.length;s++){var l=x(a[s]);null!==l&&l.length&&(l===t.get().toString()&&(r=r||a[s].firstChild,o=a[s].firstChild),p(a[s]))}if(r&&o)return(i=e.dom.createRng()).setStart(r,0),i.setEnd(o,o.data.length),!1!==n&&e.selection.setRng(i),i},u=c,d=function(e,t,n,r,o){n=(n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")).replace(/\s/g,"\\s"),n=o?"\\b"+n+"\\b":n;o=e,a=t,n=new RegExp(n,r?"g":"gi"),(r=o.dom.create("span",{"data-mce-bogus":1})).className="mce-match-marker",i=o.getBody(),c(o,a,!1);var i,a=l.findAndReplaceDOMText(n,i,r,!1,o.schema);return a&&(t.set(-1),t.set(s(e,t,!0))),a},f=g,t=v,C=function(e,t,n,r,o){var i,a,s,l,c,u=t.get();for(r=!1!==r,s=e.getBody(),a=m.grep(m.toArray(s.getElementsByTagName("span")),y),i=0;i<a.length;i++){var d=x(a[i]),f=l=parseInt(d,10);if(o||f===t.get()){for(n.length?(a[i].firstChild.nodeValue=n,p(a[i])):h(e.dom,a[i]);a[++i];){if((f=parseInt(x(a[i]),10))!==l){i--;break}h(e.dom,a[i])}r&&u--}else l>t.get()&&a[i].setAttribute("data-mce-index",l-1)}return t.set(u),(r?(c=b(e,t),g):(c=w(e,t),v))(e,t),!o&&c},k=b,S=w,o=function(r,o){return{done:function(e){return u(r,o,e)},find:function(e,t,n){return d(r,o,e,t,n)},next:function(){return f(r,o)},prev:function(){return t(r,o)},replace:function(e,t,n){return C(r,o,e,t,n)}}},a={open:function(o,i){var a={};function s(){c.statusbar.find("#next").disabled(!1===k(o,i)),c.statusbar.find("#prev").disabled(!1===S(o,i))}function l(){o.windowManager.alert("Could not find the specified string.",function(){c.find("#find")[0].focus()})}o.undoManager.add();var e=m.trim(o.selection.getContent({format:"text"})),c=o.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){o.focus(),u(o,i),o.undoManager.add()},onSubmit:function(e){var t,n,r;if(e.preventDefault(),e=c.find("#case").checked(),r=c.find("#words").checked(),(n=c.find("#find").value()).length){if(a.text===n&&a.caseState===e&&a.wholeWord===r)return k(o,i)?(f(o,i),void s()):void l();(t=d(o,i,n,e,r))||l(),c.statusbar.items().slice(1).disabled(0===t),s(),a={text:n,caseState:e,wholeWord:r}}else u(o,i,!1),c.statusbar.items().slice(1).disabled(!0)},buttons:[{text:"Find",subtype:"primary",onclick:function(){c.submit()}},{text:"Replace",disabled:!0,onclick:function(){C(o,i,c.find("#replace").value())||(c.statusbar.items().slice(1).disabled(!0),i.set(-1),a={})}},{text:"Replace all",disabled:!0,onclick:function(){C(o,i,c.find("#replace").value(),!0,!0),c.statusbar.items().slice(1).disabled(!0),a={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){t(o,i),s()}},{text:"Next",name:"next",disabled:!0,onclick:function(){f(o,i),s()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:e},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})}},T=function(e,t){e.addCommand("SearchReplace",function(){a.open(e,t)})},E=function(e,t){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:n(e,t),separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",onclick:n(e,t)}),e.shortcuts.add("Meta+F","",n(e,t))};e.add("searchreplace",function(e){var t=r(-1);return T(e,t),E(e,t),o(e,t)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-spellchecker",["tinymce"],function(){return function(){!function(){"use strict";function a(e){function t(){return n}var n=e;return{get:t,set:function(e){n=e},clone:function(){return a(n)}}}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),s=function(e){return!(!/(^|[ ,])tinymcespellchecker([, ]|$)/.test(e.settings.plugins)||!t.get("tinymcespellchecker")||(void 0!==window.console&&window.console.log&&window.console.log("Spell Checker Pro is incompatible with Spell Checker plugin! Remove 'spellchecker' from the 'plugins' option."),0))},d={getLanguages:function(e){return e.getParam("spellchecker_languages","English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv")},getLanguage:function(e){var t=e.getParam("language","en");return e.getParam("spellchecker_language",t)},getRpcUrl:function(e){return e.getParam("spellchecker_rpc_url")},getSpellcheckerCallback:function(e){return e.getParam("spellchecker_callback")},getSpellcheckerWordcharPattern:function(e){var t=new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`§©«®±¶·¸»¼½¾¿×÷¤”“„    ]+',"g");return e.getParam("spellchecker_wordchar_pattern",t)}},v=tinymce.util.Tools.resolve("tinymce.util.Tools"),c=tinymce.util.Tools.resolve("tinymce.util.URI"),u=tinymce.util.Tools.resolve("tinymce.util.XHR"),l={fireSpellcheckStart:function(e){return e.fire("SpellcheckStart")},fireSpellcheckEnd:function(e){return e.fire("SpellcheckEnd")}};function x(e){return e&&1===e.nodeType&&"false"===e.contentEditable}function f(e,t,n,r,o,i,a){var s=d.getSpellcheckerCallback(e);(s||C(e,t,n)).call(e.plugins.spellchecker,r,o,i,a)}function m(e,t,n){e.dom.select("span.mce-spellchecker-word").length||p(e,t,n)}function p(e,t,n){return b(e,n).reset(),n.set(null),t.get()&&(t.set(!1),l.fireSpellcheckEnd(e),1)}function h(e){return"number"==typeof(e=e.getAttribute("data-mce-index"))?""+e:e}function g(t,e,n,r,o){var i,a="string"!=typeof o&&o.words?(i=!!o.dictionary,o.words):o;t.setProgressState(!1),w(a)?(o=t.translate("No misspellings found."),t.notificationManager.open({text:o,type:"info"}),e.set(!1)):(r.set({suggestions:a,hasDictionarySupport:i}),b(t,n).find(d.getSpellcheckerWordcharPattern(t)).filter(function(e){return!!a[e.text]}).wrap(function(e){return t.dom.create("span",{class:"mce-spellchecker-word","data-mce-bogus":1,"data-mce-word":e.text})}),e.set(!0),l.fireSpellcheckStart(t))}var y,n=function(p,n){var r,o,g,v,y,b=[],w=n.dom;function i(e){var t=p.getElementsByTagName("*"),n=[];e="number"==typeof e?""+e:null;for(var r=0;r<t.length;r++){var o=t[r],i=o.getAttribute("data-mce-index");null===i||!i.length||-1===o.className.indexOf("mce-spellchecker-word")||i!==e&&null!==e||n.push(o)}return n}function a(e){for(var t=b.length;t--;)if(b[t]===e)return t;return-1}function e(e){for(var t=0,n=b.length;t<n&&!1!==e(b[t],t);t++);return this}function t(e){for(var t,n=i(e?a(e):null),r=n.length;r--;)(t=n[r]).parentNode.insertBefore(t.firstChild,t),t.parentNode.removeChild(t);return this}function s(e){var e=i(a(e)),t=n.dom.createRng();return t.setStartBefore(e[0]),t.setEndAfter(e[e.length-1]),t}return g=n.schema.getBlockElements(),v=n.schema.getWhiteSpaceElements(),y=n.schema.getShortEndedElements(),{text:o=function e(t){var n;if(3===t.nodeType)return t.data;if(v[t.nodeName]&&!g[t.nodeName])return"";if(x(t))return"\n";if(n="",(g[t.nodeName]||y[t.nodeName])&&(n+="\n"),t=t.firstChild)for(;n+=e(t),t=t.nextSibling;);return n}(p),matches:b,each:e,filter:function(n){var r=[];return e(function(e,t){n(e,t)&&r.push(e)}),b=r,this},reset:function(){return b.splice(0,b.length),t(),this},matchFromElement:function(e){return b[e.getAttribute("data-mce-index")]},elementFromMatch:function(e){return i(a(e))[0]},find:function(e,t){if(o&&e.global)for(;r=e.exec(o);)b.push(function(e,t){if(e[0])return{start:e.index,end:e.index+e[0].length,text:e[0],data:t};throw new Error("findAndReplaceDOMText cannot handle zero-length matches")}(r,t));return this},add:function(e,t,n){return b.push({start:e,end:e+t,text:o.substr(e,t),data:n}),this},wrap:function(e){if(b.length){var t,n,r,o,i,a=p,s=b,l=(m=e,function(e){var t,n=e.startNode,r=e.endNode,o=e.matchIndex,i=w.doc;if(n===r)return t=(l=n).parentNode,0<e.startNodeIndex&&(a=i.createTextNode(l.data.substring(0,e.startNodeIndex)),t.insertBefore(a,l)),p=h(e.match,o),t.insertBefore(p,l),e.endNodeIndex<l.length&&(s=i.createTextNode(l.data.substring(e.endNodeIndex)),t.insertBefore(s,l)),l.parentNode.removeChild(l),p;for(var a=i.createTextNode(n.data.substring(0,e.startNodeIndex)),s=i.createTextNode(r.data.substring(e.endNodeIndex)),l=h(n.data.substring(e.startNodeIndex),o),c=[],u=0,d=e.innerNodes.length;u<d;++u){var f=e.innerNodes[u],m=h(f.data,o);f.parentNode.replaceChild(m,f),c.push(m)}var p=h(r.data.substring(0,e.endNodeIndex),o);return(t=n.parentNode).insertBefore(a,n),t.insertBefore(l,n),t.removeChild(n),(t=r.parentNode).insertBefore(p,r),t.insertBefore(s,r),t.removeChild(r),p}),c=[],u=0,d=a,f=0;(s=s.slice(0)).sort(function(e,t){return e.start-t.start}),i=s.shift();e:for(;;){if((g[d.nodeName]||y[d.nodeName]||x(d))&&u++,3===d.nodeType&&(!n&&d.length+u>=i.end?(n=d,o=i.end-u):t&&c.push(d),!t&&d.length+u>i.start&&(t=d,r=i.start-u),u+=d.length),t&&n){if(d=l({startNode:t,startNodeIndex:r,endNode:n,endNodeIndex:o,innerNodes:c,match:i.text,matchIndex:f}),u-=n.length-o,n=t=null,c=[],f++,!(i=s.shift()))break}else if(v[d.nodeName]&&!g[d.nodeName]||!d.firstChild){if(d.nextSibling){d=d.nextSibling;continue}}else if(!x(d)){d=d.firstChild;continue}for(;;){if(d.nextSibling){d=d.nextSibling;break}if(d.parentNode===a)break e;d=d.parentNode}}}function h(e,t){var n=b[t],n=(n.stencil||(n.stencil=m(n)),n.stencil.cloneNode(!1));return n.setAttribute("data-mce-index",t),e&&n.appendChild(w.doc.createTextNode(e)),n}var m;return this},unwrap:t,replace:function(e,t){return(e=s(e)).deleteContents(),0<t.length&&e.insertNode(n.dom.doc.createTextNode(t)),e},rangeFromMatch:s,indexOf:a}},b=function(e,t){return t.get()||(e=n(e.getBody(),e),t.set(e)),t.get()},w=function(e){for(var t in e)return!1;return!0},C=function(a,s,l){return function(e,t,n,r){var o={method:e,lang:l.get()},i="";o["addToDictionary"===e?"word":"text"]=t,v.each(o,function(e,t){i&&(i+="&"),i+=t+"="+encodeURIComponent(e)}),u.send({url:new c(s).toAbsolute(d.getRpcUrl(a)),type:"post",content_type:"application/x-www-form-urlencoded",data:i,success:function(e){(e=JSON.parse(e))?e.error?r(e.error):n(e):(e=a.translate("Server response wasn't proper JSON."),r(e))},error:function(){var e=a.translate("The spelling service was not found: (")+d.getRpcUrl(a)+a.translate(")");r(e)}})}},k={spellcheck:function(t,e,n,r,o,i){p(t,n,r)||(t.setProgressState(!0),f(t,e,i,"spellcheck",b(t,r).text,function(e){g(t,n,r,o,e)},function(e){t.notificationManager.open({text:e,type:"error"}),t.setProgressState(!1),p(t,n,r)}),t.focus())},checkIfFinished:m,addToDictionary:function(t,e,n,r,o,i,a){t.setProgressState(!0),f(t,e,o,"addToDictionary",i,function(){t.setProgressState(!1),t.dom.remove(a,!0),m(t,n,r)},function(e){t.notificationManager.open({text:e,type:"error"}),t.setProgressState(!1)})},ignoreWord:function(t,e,n,r,o,i){t.selection.collapse(),i?v.each(t.dom.select("span.mce-spellchecker-word"),function(e){e.getAttribute("data-mce-word")===r&&t.dom.remove(e,!0)}):t.dom.remove(o,!0),m(t,e,n)},findSpansByIndex:function(e,t){var n=[],r=v.toArray(e.getBody().getElementsByTagName("span"));if(r.length)for(var o=0;o<r.length;o++){var i=h(r[o]);null!==i&&i.length&&i===t.toString()&&n.push(r[o])}return n},getElmIndex:h,markErrors:g},S=function(t,n,r,o,e,i){return{getTextMatcher:function(){return o.get()},getWordCharPattern:function(){return d.getSpellcheckerWordcharPattern(t)},markErrors:function(e){k.markErrors(t,n,o,r,e)},getLanguage:function(){return e.get()}}},T=function(e,t,n,r,o,i){e.addCommand("mceSpellCheck",function(){k.spellcheck(e,t,n,r,o,i)})},E=function(n,e,r,t,o,i){function a(){k.spellcheck(n,e,r,t,i,o)}c=v.map(d.getLanguages(n).split(","),function(e){return{name:(e=e.split("="))[0],value:e[1]}}),s=[],v.each(c,function(e){s.push({selectable:!0,text:e.name,data:e.value})});var s,l,c=s,u={tooltip:"Spellcheck",onclick:a,onPostRender:function(e){var t=e.control;n.on("SpellcheckStart SpellcheckEnd",function(){t.active(r.get())})}};1<c.length&&(u.type="splitbutton",u.menu=c,u.onshow=(l=o,function(e){var t=l.get();e.control.items().each(function(e){e.active(e.settings.data===t)})}),u.onselect=function(e){o.set(e.control.settings.data)}),n.addButton("spellchecker",u),n.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:a,selectable:!0,onPostRender:function(){var e=this;e.active(r.get()),n.on("SpellcheckStart SpellcheckEnd",function(){e.active(r.get())})}})},N=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),R=tinymce.util.Tools.resolve("tinymce.ui.Factory"),_=function(d,f,m,p,h,g){d.on("click",function(e){var t,n,r,o,i,a,s,l,c,u=e.target;"mce-spellchecker-word"===u.className&&(e.preventDefault(),0<(e=k.findSpansByIndex(d,k.getElmIndex(u))).length)&&((c=d.dom.createRng()).setStartBefore(e[0]),c.setEndAfter(e[e.length-1]),d.selection.setRng(c),t=d,n=f,c=m,r=p,o=h,i=g,a=u.getAttribute("data-mce-word"),s=e,l=[],u=c.get().suggestions[a],v.each(u,function(e){l.push({text:e,onclick:function(){t.insertContent(t.dom.encode(e)),t.dom.remove(s),k.checkIfFinished(t,r,o)}})}),l.push({text:"-"}),c.get().hasDictionarySupport&&l.push({text:"Add to Dictionary",onclick:function(){k.addToDictionary(t,n,r,o,i,a,s)}}),l.push.apply(l,[{text:"Ignore",onclick:function(){k.ignoreWord(t,r,o,a,s)}},{text:"Ignore all",onclick:function(){k.ignoreWord(t,r,o,a,s,!0)}}]),(y=R.create("menu",{items:l,context:"contextmenu",onautohide:function(e){-1!==e.target.className.indexOf("spellchecker")&&e.preventDefault()},onhide:function(){y.remove(),y=null}})).renderTo(document.body),u=N.DOM.getPos(t.getContentAreaContainer()),c=t.dom.getPos(s[0]),"BODY"===(e=t.dom.getRoot()).nodeName?(c.x-=e.ownerDocument.documentElement.scrollLeft||e.scrollLeft,c.y-=e.ownerDocument.documentElement.scrollTop||e.scrollTop):(c.x-=e.scrollLeft,c.y-=e.scrollTop),u.x+=c.x,u.y+=c.y,y.moveTo(u.x,u.y+s[0].offsetHeight))})};t.add("spellchecker",function(e,t){var n,r,o,i;if(!1===s(e))return n=a(!1),r=a(d.getLanguage(e)),o=a(null),i=a(null),E(e,t,n,o,r,i),_(e,t,i,n,o,r),T(e,t,n,o,i,r),S(e,n,i,o,r,t)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-tabfocus",["tinymce"],function(){return function(){!function(){"use strict";function t(e){e.keyCode!==d.TAB||e.ctrlKey||e.altKey||e.metaKey||e.preventDefault()}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),s=tinymce.util.Tools.resolve("tinymce.EditorManager"),l=tinymce.util.Tools.resolve("tinymce.Env"),c=tinymce.util.Tools.resolve("tinymce.util.Delay"),u=tinymce.util.Tools.resolve("tinymce.util.Tools"),d=tinymce.util.Tools.resolve("tinymce.util.VK"),f=function(e){return e.getParam("tab_focus",e.getParam("tabfocus_elements",":prev,:next"))},m=n.DOM,r=function(a){function e(n){var r,o,i,e;function t(e){function t(e){return/INPUT|TEXTAREA|BUTTON/.test(e.tagName)&&s.get(n.id)&&-1!==e.tabIndex&&function e(t){return"BODY"===t.nodeName||"hidden"!==t.type&&"none"!==t.style.display&&"hidden"!==t.style.visibility&&e(t.parentNode)}(e)}if(o=m.select(":input:enabled,*[tabindex]:not(iframe)"),u.each(o,function(e,t){if(e.id===a.id)return r=t,!1}),0<e){for(i=r+1;i<o.length;i++)if(t(o[i]))return o[i]}else for(i=r-1;0<=i;i--)if(t(o[i]))return o[i];return null}n.keyCode!==d.TAB||n.ctrlKey||n.altKey||n.metaKey||n.isDefaultPrevented()||(1===(e=u.explode(f(a))).length&&(e[1]=e[0],e[0]=":prev"),(o=n.shiftKey?":prev"===e[0]?t(-1):m.get(e[0]):":next"===e[1]?t(1):m.get(e[1]))&&(e=s.get(o.id||o.name),o.id&&e?e.focus():c.setTimeout(function(){l.webkit||window.focus(),o.focus()},10),n.preventDefault()))}a.on("init",function(){a.inline&&m.setAttrib(a.getBody(),"tabIndex",null),a.on("keyup",t),l.gecko?a.on("keypress keydown",e):a.on("keydown",e)})};e.add("tabfocus",function(e){r(e)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-table",["tinymce"],function(){return function(){!function(){"use strict";function M(e){return function(){return e}}function L(){return U}var F=tinymce.util.Tools.resolve("tinymce.PluginManager"),x={noop:function(){for(var e=0;e<arguments.length;e++)e,0},noarg:function(t){return function(){for(var e=0;e<arguments.length;e++)e,0;return t()}},compose:function(t,n){return function(){for(var e=0;e<arguments.length;e++)e,0;return t(n.apply(null,arguments))}},constant:M,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(o){for(var e=1;e<arguments.length;e++)e-1,0;for(var i=new Array(arguments.length-1),t=1;t<arguments.length;t++)i[t-1]=arguments[t];return function(){for(var e=0;e<arguments.length;e++)e,0;for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var r=i.concat(t);return o.apply(null,r)}},not:function(t){return function(){for(var e=0;e<arguments.length;e++)e,0;return!t.apply(null,arguments)}},die:function(e){return function(){throw new Error(e)}},apply:function(e){return e()},call:function(e){e()},never:M(!1),always:M(!0)},H=x.never,z=x.always,U=(e={fold:function(e,t){return e()},is:H,isSome:H,isNone:z,getOr:j,getOrThunk:$,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:j,orThunk:$,map:L,ap:L,each:function(){},bind:L,flatten:L,exists:H,forall:z,filter:L,equals:W,equals_:W,toArray:function(){return[]},toString:x.constant("none()")},Object.freeze&&Object.freeze(e),e);function W(e){return e.isNone()}function $(e){return e()}function j(e){return e}function q(n){function e(){return n}function t(){return o}function r(e){return e(n)}var o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:z,isNone:H,getOr:e,getOrThunk:e,getOrDie:e,or:t,orThunk:t,map:function(e){return q(e(n))},ap:function(e){return e.fold(L,function(e){return q(e(n))})},each:function(e){e(n)},bind:r,flatten:e,exists:r,forall:r,filter:function(e){return e(n)?o:U},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(H,function(e){return t(n,e)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}function V(n){return function(e){return(null===(e=e)?"null":"object"==(t=typeof e)&&Array.prototype.isPrototypeOf(e)?"array":"object"==t&&String.prototype.isPrototypeOf(e)?"string":t)===n;var t}}function K(e,t){return-1<ie(e,t)}function Y(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o,e)}return r}function G(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n,e)}function X(e,t){for(var n=e.length-1;0<=n;n--)t(e[n],n,e)}function J(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n}function Q(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n,e))return C.some(n);return C.none()}function Z(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);se.apply(t,e[n])}return t}function ee(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n,e))return!1;return!0}function te(n,r){var o={};return ue(n,function(e,t){e=r(e,t,n);o[e.k]=e.v}),o}function ne(e,n){var r=[];return ue(e,function(e,t){r.push(n(e,t))}),r}function re(e){return ne(e,function(e){return e})}var oe,C={some:q,none:L,from:function(e){return null==e?U:q(e)}},l={isString:V("string"),isObject:V("object"),isArray:V("array"),isNull:V("null"),isBoolean:V("boolean"),isUndefined:V("undefined"),isFunction:V("function"),isNumber:V("number")},ie=void 0===(oe=Array.prototype.indexOf)?function(e,t){return ae(e,t)}:function(e,t){return oe.call(e,t)},ae=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},se=Array.prototype.push,le=Array.prototype.slice,e=l.isFunction(Array.from)?Array.from:function(e){return le.call(e)},k={map:Y,each:G,eachr:X,partition:function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{pass:n,fail:r}},filter:J,groupBy:function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var s=e[i],l=t(s);l!==n&&(r.push(o),o=[]),n=l,o.push(s)}return 0!==o.length&&r.push(o),r},indexOf:function(e,t){e=ie(e,t);return-1===e?C.none():C.some(e)},foldr:function(e,t,n){return X(e,function(e){n=t(n,e)}),n},foldl:function(e,t,n){return G(e,function(e){n=t(n,e)}),n},find:function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n,e))return C.some(o)}return C.none()},findIndex:Q,flatten:Z,bind:function(e,t){e=Y(e,t);return Z(e)},forall:ee,exists:function(e,t){return Q(e,t).isSome()},contains:K,equal:function(e,n){return e.length===n.length&&ee(e,function(e,t){return e===n[t]})},reverse:function(e){e=le.call(e,0);return e.reverse(),e},chunk:function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},difference:function(e,t){return J(e,function(e){return!K(t,e)})},mapToObject:function(e,t){for(var n={},r=0,o=e.length;r<o;r++){var i=e[r];n[String(i)]=t(i,r)}return n},pure:function(e){return[e]},sort:function(e,t){e=le.call(e,0);return e.sort(t),e},range:function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},head:function(e){return 0===e.length?C.none():C.some(e[0])},last:function(e){return 0===e.length?C.none():C.some(e[e.length-1])},from:e},ce=void 0===(e=Object.keys)?function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n}:e,ue=function(e,t){for(var n=ce(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i,e)}},S={bifilter:function(e,n){var r={},o={};return ue(e,function(e,t){(n(e,t)?r:o)[t]=e}),{t:r,f:o}},each:ue,map:function(e,r){return te(e,function(e,t,n){return{k:t,v:r(e,t,n)}})},mapToArray:ne,tupleMap:te,find:function(e,t){for(var n=ce(e),r=0,o=n.length;r<o;r++){var i=n[r],a=e[i];if(t(a,i,e))return C.some(a)}return C.none()},keys:ce,values:re,size:function(e){return re(e).length}};function de(e){return e.slice(0).sort()}var fe={sort:de,reqMessage:function(e,t){throw new Error("All required keys ("+de(e).join(", ")+") were not specified. Specified keys were: "+de(t).join(", ")+".")},unsuppMessage:function(e){throw new Error("Unsupported keys for object: "+de(e).join(", "))},validateStrArr:function(t,e){if(!l.isArray(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");k.each(e,function(e){if(!l.isString(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")})},invalidTypeMessage:function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+de(e).join(", ")+") were not.")},checkDupes:function(e){var n=de(e);k.find(n,function(e,t){return t<n.length-1&&e===n[t+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+n.join(", ")+"].")})}};function me(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:x.constant(e)}}function pe(e){return e.nodeType!==Ne&&e.nodeType!==Re||0===e.childElementCount}function he(e,t){for(var n=null!=t?t:Ae,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n}function ge(e,t){for(var n,r,o=void 0!==t?t:Ae,i=0;i<e.length;++i)n=o,r=e[i],void 0!==n[r]&&null!==n[r]||(n[r]={}),o=n[r];return o}function ve(){return Pe.getOrDie("Node")}function ye(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}function be(){return Me(0,0)}function we(e){var t=e.current;return{current:t,version:e.version,isEdge:qe(He,t),isChrome:qe(ze,t),isIE:qe(Ue,t),isOpera:qe(We,t),isFirefox:qe($e,t),isSafari:qe(je,t)}}function xe(e){var t=e.current;return{current:t,version:e.version,isWindows:tt(Ye,t),isiOS:tt(Ge,t),isAndroid:tt(Xe,t),isOSX:tt(Qe,t),isLinux:tt(Je,t),isSolaris:tt(Ze,t),isFreeBSD:tt(et,t)}}var t={immutable:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(t.length!==n.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+n.length+" arguments");var r={};return k.each(t,function(e,t){r[e]=x.constant(n[t])}),r}},immutableBag:function(o,i){var a=o.concat(i);if(0===a.length)throw new Error("You must specify at least one required or optional field.");return fe.validateStrArr("required",o),fe.validateStrArr("optional",i),fe.checkDupes(a),function(t){var n=S.keys(t),e=(k.forall(o,function(e){return k.contains(n,e)})||fe.reqMessage(o,n),k.filter(n,function(e){return!k.contains(a,e)})),r=(0<e.length&&fe.unsuppMessage(e),{});return k.each(o,function(e){r[e]=x.constant(t[e])}),k.each(i,function(e){r[e]=x.constant(Object.prototype.hasOwnProperty.call(t,e)?C.some(t[e]):C.none())}),r}}},e=t.immutable("width","height"),Ce=t.immutable("rows","columns"),ke=t.immutable("row","column"),Se=t.immutable("x","y"),n=t.immutable("element","rowspan","colspan"),Te=t.immutable("element","rowspan","colspan","isNew"),y={dimensions:e,grid:Ce,address:ke,coords:Se,extended:t.immutable("element","rowspan","colspan","row","column"),detail:n,detailnew:Te,rowdata:t.immutable("element","cells","section"),elementnew:t.immutable("element","isNew"),rowdatanew:t.immutable("element","cells","section","isNew"),rowcells:t.immutable("cells","section"),rowdetails:t.immutable("details","section"),bounds:t.immutable("startRow","startCol","finishRow","finishCol")},T={fromHtml:function(e,t){t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",e),"HTML must have a single root node";return me(t.childNodes[0])},fromTag:function(e,t){t=(t||document).createElement(e);return me(t)},fromText:function(e,t){t=(t||document).createTextNode(e);return me(t)},fromDom:me,fromPoint:function(e,t,n){return C.from(e.dom().elementFromPoint(t,n)).map(me)}},Ee=8,e=9,Ce=1,ke=3,Ne=Ce,Re=e,E={all:function(e,t){t=void 0===t?document:t.dom();return pe(t)?[]:k.map(t.querySelectorAll(e),T.fromDom)},is:function(e,t){e=e.dom();if(e.nodeType!==Ne)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},one:function(e,t){t=void 0===t?document:t.dom();return pe(t)?C.none():C.from(t.querySelector(e)).map(T.fromDom)}},_e=function(e,t){for(var n=[],r=function(e){return n.push(e),t(e)},o=t(e);(o=o.bind(r)).isSome(););return n},Ae="undefined"!=typeof window?window:Function("return this;")(),De={path:he,resolve:function(e,t){e=e.split(".");return he(e,t)},forge:ge,namespace:function(e,t){e=e.split(".");return ge(e,t)}},Pe={getOrDie:function(e,t){t=De.resolve(e,t);if(null==t)throw e+" not available on this browser";return t}},Oe=function(e,t){return ye(e,t,ve().DOCUMENT_POSITION_CONTAINED_BY)},Ie={cached:function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(null,arguments)),t}}},Be=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}},Me=function(e,t){return{major:e,minor:t}},Le=function(e,t){var n,r,t=String(t).toLowerCase();return 0===e.length?be():(r=Be(e=e,n=t))?Me((e=function(e){return Number(n.replace(r,"$"+e))})(1),e(2)):{major:0,minor:0}},Fe=be,He="Edge",ze="Chrome",Ue="IE",We="Opera",$e="Firefox",je="Safari",qe=function(e,t){return function(){return t===e}},Ve=function(){return we({current:void 0,version:Fe()})},Ke=we,Ye=(x.constant(He),x.constant(ze),x.constant(Ue),x.constant(We),x.constant($e),x.constant(je),"Windows"),Ge="iOS",Xe="Android",Je="Linux",Qe="OSX",Ze="Solaris",et="FreeBSD",tt=function(e,t){return function(){return t===e}},nt=function(){return xe({current:void 0,version:Fe()})},rt=xe;x.constant(Ye),x.constant(Ge),x.constant(Xe),x.constant(Je),x.constant(Qe),x.constant(Ze),x.constant(et);function ot(e,t){var n=String(t).toLowerCase();return k.find(e,function(e){return e.search(n)})}function it(e,t){return wt(e,t,e.length-t.length)}function at(t){return function(e){return r(e,t)}}function st(e,t){return e.dom()===t.dom()}function lt(e){return T.fromDom(e.dom().ownerDocument)}function ct(e){return e=e.dom(),C.from(e.parentNode).map(T.fromDom)}function ut(e){return e=e.dom(),C.from(e.previousSibling).map(T.fromDom)}function dt(e){return e=e.dom(),C.from(e.nextSibling).map(T.fromDom)}function ft(e){return e=e.dom(),k.map(e.childNodes,T.fromDom)}function mt(e,t){return e=e.dom().childNodes,C.from(e[t]).map(T.fromDom)}function pt(e){return e.dom().nodeName.toLowerCase()}function ht(e){return e.dom().nodeType}function gt(t){return function(e){return ht(e)===t}}function vt(e,t,n){if(!(l.isString(n)||l.isBoolean(n)||l.isNumber(n)))throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")}var yt=function(e,n){return ot(e,n).map(function(e){var t=Le(e.versionRegexes,n);return{current:e.name,version:t}})},bt=function(e,n){return ot(e,n).map(function(e){var t=Le(e.versionRegexes,n);return{current:e.name,version:t}})},wt=function(e,t,n){return""===t||!(e.length<t.length)&&e.substr(n,n+t.length)===t},xt=it,r=function(e,t){return-1!==e.indexOf(t)},Ct=function(e){return e.replace(/^\s+|\s+$/g,"")},Se=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,n=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return r(e,"edge/")&&r(e,"chrome")&&r(e,"safari")&&r(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Se],search:function(e){return r(e,"chrome")&&!r(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return r(e,"msie")||r(e,"trident")}},{name:"Opera",versionRegexes:[Se,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:at("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:at("firefox")},{name:"Safari",versionRegexes:[Se,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(r(e,"safari")||r(e,"mobile/"))&&r(e,"applewebkit")}}],Te=[{name:"Windows",search:at("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return r(e,"iphone")||r(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:at("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:at("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:at("linux"),versionRegexes:[]},{name:"Solaris",search:at("sunos"),versionRegexes:[]},{name:"FreeBSD",search:at("freebsd"),versionRegexes:[]}],kt={browsers:x.constant(n),oses:x.constant(Te)},St=function(e){var t,n,r,o,i,a,s,l=kt.browsers(),c=kt.oses(),l=yt(l,e).fold(Ve,Ke),c=bt(c,e).fold(nt,rt),e=(n=l,e=e,r=(t=c).isiOS()&&!0===/ipad/i.test(e),o=t.isiOS()&&!r,i=t.isAndroid()&&3===t.version.major,a=t.isAndroid()&&4===t.version.major,i=r||i||a&&!0===/mobile/i.test(e),s=(a=t.isiOS()||t.isAndroid())&&!i,n=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(e),{isiPad:x.constant(r),isiPhone:x.constant(o),isTablet:x.constant(i),isPhone:x.constant(s),isTouch:x.constant(a),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:x.constant(n)});return{browser:l,os:c,deviceType:e}},Se={detect:Ie.cached(function(){var e=navigator.userAgent;return St(e)})},n=Se.detect().browser.isIE()?function(e,t){return Oe(e.dom(),t.dom())}:function(e,t){e=e.dom(),t=t.dom();return e!==t&&e.contains(t)},m={eq:st,isEqualNode:function(e,t){return e.dom().isEqualNode(t.dom())},member:function(e,t){return k.exists(t,x.curry(st,e))},contains:n,is:E.is},Tt=t.immutable("element","offset"),u={owner:lt,defaultView:function(e){e=e.dom().ownerDocument.defaultView;return T.fromDom(e)},documentElement:function(e){e=lt(e);return T.fromDom(e.dom().documentElement)},parent:ct,findIndex:function(t){return ct(t).bind(function(e){e=ft(e);return k.findIndex(e,function(e){return m.eq(t,e)})})},parents:function(e,t){for(var n=l.isFunction(t)?t:x.constant(!1),r=e.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,a=T.fromDom(i);if(o.push(a),!0===n(a))break;r=i}return o},siblings:function(t){return ct(t).map(ft).map(function(e){return k.filter(e,function(e){return!m.eq(t,e)})}).getOr([])},prevSibling:ut,offsetParent:function(e){e=e.dom();return C.from(e.offsetParent).map(T.fromDom)},prevSiblings:function(e){return k.reverse(_e(e,ut))},nextSibling:dt,nextSiblings:function(e){return _e(e,dt)},children:ft,child:mt,firstChild:function(e){return mt(e,0)},lastChild:function(e){return mt(e,e.dom().childNodes.length-1)},childNodesCount:function(e){return e.dom().childNodes.length},hasChildNodes:function(e){return e.dom().hasChildNodes()},leaf:function(e,t){var n=ft(e);return 0<n.length&&t<n.length?Tt(n[t],0):Tt(e,t)}},Et=function(e,t,n){return k.bind(u.children(e),function(e){return E.is(e,t)?n(e)?[e]:[]:Et(e,t,n)})},Nt={firstLayer:function(e,t){return Et(e,t,x.constant(!0))},filterFirstLayer:Et},Te=gt(Ce),n=gt(ke),Ce=gt(e),p={name:pt,type:ht,value:function(e){return e.dom().nodeValue},isElement:Te,isText:n,isDocument:Ce,isComment:function(e){return ht(e)===Ee||"#comment"===pt(e)}},Rt=function(e,t,n){vt(e.dom(),t,n)},_t=function(e,t){e=e.dom().getAttribute(t);return null===e?void 0:e},At=function(e,t){e=e.dom();return!(!e||!e.hasAttribute)&&e.hasAttribute(t)},N={clone:function(e){return k.foldl(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},set:Rt,setAll:function(e,t){var n=e.dom();S.each(t,function(e,t){vt(n,t,e)})},get:_t,has:At,remove:function(e,t){e.dom().removeAttribute(t)},hasNone:function(e){e=e.dom().attributes;return null==e||0===e.length},transfer:function(r,o,e){p.isElement(r)&&p.isElement(o)&&k.each(e,function(e){var t,n;n=o,At(t=r,e=e)&&!At(n,e)&&Rt(n,e,_t(t,e))})}},ke=Ie.cached(function(){return Dt(T.fromDom(document))}),Dt=function(e){e=e.dom().body;if(null==e)throw"Body is not available yet";return T.fromDom(e)},Pt={body:ke,getBody:Dt,inBody:function(e){e=p.isText(e)?e.dom().parentNode:e.dom();return null!=e&&e.ownerDocument.body.contains(e)}},Ot=function(e,t){var n=[];return k.each(u.children(e),function(e){n=(n=t(e)?n.concat([e]):n).concat(Ot(e,t))}),n},It={all:function(e){return Ot(Pt.body(),e)},ancestors:function(e,t,n){return k.filter(u.parents(e,n),t)},siblings:function(e,t){return k.filter(u.siblings(e),t)},children:function(e,t){return k.filter(u.children(e),t)},descendants:Ot},c={all:function(e){return E.all(e)},ancestors:function(e,t,n){return It.ancestors(e,function(e){return E.is(e,t)},n)},siblings:function(e,t){return It.siblings(e,function(e){return E.is(e,t)})},children:function(e,t){return It.children(e,function(e){return E.is(e,t)})},descendants:function(e,t){return E.all(t,e)}};function Bt(e,t,n,r,o){return e(n,r)?C.some(n):l.isFunction(o)&&o(n)?C.none():t(n,r,o)}function Mt(e,t,n){for(var r=e.dom(),o=l.isFunction(n)?n:x.constant(!1);r.parentNode;){var r=r.parentNode,i=T.fromDom(r);if(t(i))return C.some(i);if(o(i))break}return C.none()}function Lt(e,t){return k.find(e.dom().childNodes,x.compose(t,T.fromDom)).map(T.fromDom)}function Ft(e,r){function o(e){for(var t=0;t<e.childNodes.length;t++){if(r(T.fromDom(e.childNodes[t])))return C.some(T.fromDom(e.childNodes[t]));var n=o(e.childNodes[t]);if(n.isSome())return n}return C.none()}return o(e.dom())}function Ht(e,t,n){return Zt.ancestor(e,function(e){return E.is(e,t)},n)}function zt(e,t,n){var r=void 0!==n?n:x.constant(!1);return r(t)?C.none():k.contains(e,p.name(t))?C.some(t):h.ancestor(t,e.join(","),function(e){return E.is(e,"table")||r(e)})}function Ut(t,e){return u.parent(e).map(function(e){return c.children(e,t)})}function Wt(e,t){return parseInt(N.get(e,t),10)}function $t(e,t){return e=k.bind(e.all(),function(e){return e.cells()}),k.filter(e,t)}function jt(e,t,n){if(!l.isString(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);tn.isSupported(e)&&e.style.setProperty(t,n)}function qt(e,t){tn.isSupported(e)&&e.style.removeProperty(t)}function Vt(e,t){return tn.isSupported(e)?e.style.getPropertyValue(t):""}function Kt(t,n){u.parent(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})}function Yt(e,t){e.dom().appendChild(t.dom())}function Gt(e){null!==(e=e.dom()).parentNode&&e.parentNode.removeChild(e)}function Xt(e,t){return T.fromDom(e.dom().cloneNode(t))}function Jt(e){return Xt(e,!0)}function Qt(e,t){return t=T.fromTag(t),e=N.clone(e),N.setAll(t,e),t}var Zt={first:function(e){return Ft(Pt.body(),e)},ancestor:Mt,closest:function(e,t,n){return Bt(function(e){return t(e)},Mt,e,t,n)},sibling:function(t,n){var e=t.dom();return e.parentNode?Lt(T.fromDom(e.parentNode),function(e){return!m.eq(t,e)&&n(e)}):C.none()},child:Lt,descendant:Ft},h={first:function(e){return E.one(e)},ancestor:Ht,sibling:function(e,t){return Zt.sibling(e,function(e){return E.is(e,t)})},child:function(e,t){return Zt.child(e,function(e){return E.is(e,t)})},descendant:function(e,t){return E.one(t,e)},closest:function(e,t,n){return Bt(E.is,Ht,e,t,n)}},e=x.curry(Ut,"th,td"),Te=x.curry(Ut,"tr"),R={cell:function(e,t){return zt(["td","th"],e,t)},firstCell:function(e){return h.descendant(e,"th,td")},cells:function(e){return Nt.firstLayer(e,"th,td")},neighbourCells:e,table:function(e,t){return h.closest(e,"table",t)},row:function(e,t){return zt(["tr"],e,t)},rows:function(e){return Nt.firstLayer(e,"tr")},notCell:function(e,t){return zt(["caption","tr","tbody","tfoot","thead"],e,t)},neighbourRows:Te,attr:Wt,grid:function(e,t,n){t=Wt(e,t),e=Wt(e,n);return y.grid(t,e)}},en={fromTable:function(e){e=R.rows(e);return k.map(e,function(e){var t=e,n=u.parent(t).bind(function(e){e=p.name(e);return"tfoot"===e||"thead"===e||"tbody"===e?e:"tbody"}),e=k.map(R.cells(e),function(e){var t=N.has(e,"rowspan")?parseInt(N.get(e,"rowspan"),10):1,n=N.has(e,"colspan")?parseInt(N.get(e,"colspan"),10):1;return y.detail(e,t,n)});return y.rowdata(t,e,n)})},fromPastedRows:function(e,n){return k.map(e,function(e){var t=k.map(R.cells(e),function(e){var t=N.has(e,"rowspan")?parseInt(N.get(e,"rowspan"),10):1,n=N.has(e,"colspan")?parseInt(N.get(e,"colspan"),10):1;return y.detail(e,t,n)});return y.rowdata(e,t,n.section())})}},_={generate:function(e){var c={},t=[],n=e.length,u=0,e=(k.each(e,function(e,s){var l=[];k.each(e.cells(),function(e,t){for(var n=0;void 0!==c[s+","+n];)n++;for(var r=y.extended(e.element(),e.rowspan(),e.colspan(),s,n),o=0;o<e.colspan();o++)for(var i=0;i<e.rowspan();i++){var a=n+o;c[s+i+","+a]=r,u=Math.max(u,a+1)}l.push(r)}),t.push(y.rowdata(e.element(),l,e.section()))}),y.grid(n,u));return{grid:x.constant(e),access:x.constant(c),all:x.constant(t)}},getAt:function(e,t,n){e=e.access()[t+","+n];return void 0!==e?C.some(e):C.none()},findItem:function(e,t,n){e=$t(e,function(e){return n(t,e.element())});return 0<e.length?C.some(e[0]):C.none()},filterItems:$t,justCells:function(e){e=k.map(e.all(),function(e){return e.cells()});return k.flatten(e)}},tn={isSupported:function(e){return void 0!==e.style}},nn=function(e,t,n){e=e.dom();jt(e,t,n)},rn=function(e,t){e=e.dom(),e=Vt(e,t);return C.from(e).filter(function(e){return 0<e.length})},A={copy:function(e,t){e=e.dom(),t=t.dom();tn.isSupported(e)&&tn.isSupported(t)&&(t.style.cssText=e.style.cssText)},set:nn,preserve:function(e,t){var n=N.get(e,"style"),t=t(e);return(void 0===n?N.remove:N.set)(e,"style",n),t},setAll:function(e,t){var n=e.dom();S.each(t,function(e,t){jt(n,t,e)})},setOptions:function(e,t){var n=e.dom();S.each(t,function(e,t){e.fold(function(){qt(n,t)},function(e){jt(n,t,e)})})},remove:function(e,t){var n=e.dom();qt(n,t),N.has(e,"style")&&""===Ct(N.get(e,"style"))&&N.remove(e,"style")},get:function(e,t){var n=e.dom(),r=window.getComputedStyle(n).getPropertyValue(t),e=""!==r||Pt.inBody(e)?r:Vt(n,t);return null===e?void 0:e},getRaw:rn,getAllRaw:function(e){var t={},n=e.dom();if(tn.isSupported(n))for(var r=0;r<n.style.length;r++){var o=n.style.item(r);t[o]=n.style[o]}return t},isValidValue:function(e,t,n){e=T.fromTag(e);return nn(e,t,n),rn(e,t).isSome()},reflow:function(e){return e.dom().offsetWidth},transfer:function(r,o,e){p.isElement(r)&&p.isElement(o)&&k.each(e,function(e){var t,n;t=o,rn(r,n=e).each(function(e){rn(t,n).isNone()&&nn(t,n,e)})})}},g={before:Kt,after:function(e,t){u.nextSibling(e).fold(function(){u.parent(e).each(function(e){Yt(e,t)})},function(e){Kt(e,t)})},prepend:function(t,n){u.firstChild(t).fold(function(){Yt(t,n)},function(e){t.dom().insertBefore(n.dom(),e.dom())})},append:Yt,appendAt:function(e,t,n){u.child(e,n).fold(function(){Yt(e,t)},function(e){Kt(e,t)})},wrap:function(e,t){Kt(e,t),Yt(t,e)}},on={before:function(t,e){k.each(e,function(e){g.before(t,e)})},after:function(n,r){k.each(r,function(e,t){t=0===t?n:r[t-1];g.after(t,e)})},prepend:function(t,e){k.each(e.slice().reverse(),function(e){g.prepend(t,e)})},append:function(t,e){k.each(e,function(e){g.append(t,e)})}},D={empty:function(e){e.dom().textContent="",k.each(u.children(e),function(e){Gt(e)})},remove:Gt,unwrap:function(e){var t=u.children(e);0<t.length&&on.before(e,t),Gt(e)}},an=t.immutable("minRow","minCol","maxRow","maxCol"),sn=function(e,t,n){e=e[n].element(),n=T.fromTag("td");g.append(n,T.fromTag("br")),(t?g.append:g.prepend)(e,n)},ln={extract:function(e,t){for(var o,i,a,s,l,n=function(e){return E.is(e.element(),t)},r=en.fromTable(e),c=_.generate(r),u=(o=n,u=(f=c).grid().columns(),i=f.grid().rows(),a=u,l=s=0,S.each(f.access(),function(e){var t,n,r;o(e)&&(n=(t=e.row())+e.rowspan()-1,e=(r=e.column())+e.colspan()-1,t<i?i=t:s<n&&(s=n),r<a?a=r:l<e&&(l=e))}),an(i,a,s,l)),d="th:not("+t+"),td:not("+t+")",f=Nt.filterFirstLayer(e,"th,td",function(e){return E.is(e,d)}),m=(k.each(f,D.remove),r),p=c,h=u,g=n,v=p.grid().columns(),y=p.grid().rows(),b=0;b<y;b++)for(var w=!1,x=0;x<v;x++)b<h.minRow()||b>h.maxRow()||x<h.minCol()||x>h.maxCol()||(_.getAt(p,b,x).filter(g).isNone()?sn(m,w,b):w=!0);return f=e,r=u,c=k.filter(Nt.firstLayer(f,"tr"),function(e){return 0===e.dom().childElementCount}),k.each(c,D.remove),r.minCol()!==r.maxCol()&&r.minRow()!==r.maxRow()||k.each(Nt.firstLayer(f,"th,td"),function(e){N.remove(e,"rowspan"),N.remove(e,"colspan")}),N.remove(f,"width"),N.remove(f,"height"),A.remove(f,"width"),A.remove(f,"height"),e}},cn={shallow:function(e){return Xt(e,!1)},shallowAs:Qt,deep:Jt,copy:function(e,t){t=Qt(e,t),e=u.children(Jt(e));return on.append(t,e),t},mutate:function(e,t){var t=Qt(e,t),n=(g.before(e,t),u.children(e));return on.append(t,n),D.remove(e),t}};un=p.isText,dn="text",n=Se.detect().browser;var un,dn,fn,mn={get:function(e){if(un(e))return fn(e).getOr("");throw new Error("Can only get "+dn+" value of a "+dn+" node")},getOption:fn=n.isIE()&&10===n.version.major?function(e){try{return pn(e)}catch(e){return C.none()}}:pn,set:function(e,t){if(!un(e))throw new Error("Can only set raw "+dn+" value of a "+dn+" node");e.dom().nodeValue=t}};function pn(e){return un(e)?C.from(e.dom().nodeValue):C.none()}function hn(e){return"img"===p.name(e)?1:wn.getOption(e).fold(function(){return u.children(e).length},function(e){return e.length})}function gn(){var e=T.fromTag("td");return g.append(e,T.fromTag("br")),e}function vn(e,t,n){var r=cn.copy(e,t);return S.each(n,function(e,t){null===e?N.remove(r,t):N.set(r,t,e)}),r}function yn(e){return e}function bn(e){return function(){return T.fromTag("tr",e.dom())}}var wn={get:function(e){return mn.get(e)},getOption:function(e){return mn.getOption(e)},set:function(e,t){mn.set(e,t)}},xn=" ",Cn=["img","br"],kn={getEnd:hn,isEnd:function(e,t){return hn(e)===t},isStart:function(e,t){return 0===t},isCursorPosition:function(e){return wn.getOption(e).filter(function(e){return 0!==e.trim().length||-1<e.indexOf(xn)}).isSome()||k.contains(Cn,p.name(e))}},Sn={first:function(e){return Zt.descendant(e,kn.isCursorPosition)},last:function(e){return o=kn.isCursorPosition,(i=function(e){for(var t=u.children(e),n=t.length-1;0<=n;n--){var r=t[n];if(o(r))return C.some(r);r=i(r);if(r.isSome())return r}return C.none()})(e);var o,i}},Tn={cellOperations:function(a,e,s){return{row:bn(e),cell:function(e){var n,r,o,t=u.owner(e.element()),t=T.fromTag(p.name(e.element()),t.dom()),i=s.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),i=0<i.length?(n=e.element(),r=t,o=i,Sn.first(n).map(function(e){var t=o.join(","),e=c.ancestors(e,t,function(e){return m.eq(e,n)});return k.foldr(e,function(e,t){t=cn.shallow(t);return g.append(e,t),t},r)}).getOr(r)):t;return g.append(i,T.fromTag("br")),A.copy(e.element(),t),A.remove(t,"height"),1!==e.colspan()&&A.remove(e.element(),"width"),a(e.element(),t),t},replace:vn,gap:gn}},paste:function(e){return{row:bn(e),cell:gn,replace:yn,gap:gn}}},En=function(e,t){t=(t||document).createElement("div");return t.innerHTML=e,u.children(T.fromDom(t))},Nn=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Rn(){return{up:x.constant({selector:h.ancestor,closest:h.closest,predicate:Zt.ancestor,all:u.parents}),down:x.constant({selector:c.descendants,predicate:It.descendants}),styles:x.constant({get:A.get,getRaw:A.getRaw,set:A.set,remove:A.remove}),attrs:x.constant({get:N.get,set:N.set,remove:N.remove,copyTo:function(e,t){e=N.clone(e);N.setAll(t,e)}}),insert:x.constant({before:g.before,after:g.after,afterAll:on.after,append:g.append,appendAll:on.append,prepend:g.prepend,wrap:g.wrap}),remove:x.constant({unwrap:D.unwrap,remove:D.remove}),create:x.constant({nu:T.fromTag,clone:function(e){return T.fromDom(e.dom().cloneNode(!1))},text:T.fromText}),query:x.constant({comparePosition:function(e,t){return e.dom().compareDocumentPosition(t.dom())},prevSibling:u.prevSibling,nextSibling:u.nextSibling}),property:x.constant({children:u.children,name:p.name,parent:u.parent,isText:p.isText,isComment:p.isComment,isElement:p.isElement,getText:wn.get,setText:wn.set,isBoundary:function(e){return!!p.isElement(e)&&("body"===p.name(e)||k.contains(Nn,p.name(e)))},isEmptyTag:function(e){return!!p.isElement(e)&&k.contains(["br","img","hr","input"],p.name(e))}}),eq:m.eq,is:m.is}}function _n(e,t,n){var r=e.property().children(t);return k.findIndex(r,x.curry(e.eq,n)).map(function(e){return{before:x.constant(r.slice(0,e)),after:x.constant(r.slice(e+1))}})}function An(n,r,e,t){return e=r(n,e),k.foldr(t,function(e,t){t=r(n,t);return Wn(n,e,t)},e)}function Dn(t,e,n,r){function o(t){return k.findIndex(t,i).fold(function(){return t},function(e){return t.slice(0,e+1)})}var i=void 0!==r?r:x.constant(!1),r=[e].concat(t.up().all(e)),e=[n].concat(t.up().all(n)),n=o(r),a=o(e),r=k.find(n,function(e){return k.exists(a,jn(t,e))});return{firstpath:x.constant(n),secondpath:x.constant(a),shared:x.constant(r)}}function Pn(e,t){return t.column()>=e.startCol()&&t.column()+t.colspan()-1<=e.finishCol()&&t.row()>=e.startRow()&&t.row()+t.rowspan()-1<=e.finishRow()}function On(e,t,n){var t=_.findItem(e,t,m.eq),r=_.findItem(e,n,m.eq);return t.bind(function(n){return r.map(function(e){return t=n,e=e,y.bounds(Math.min(t.row(),e.row()),Math.min(t.column(),e.column()),Math.max(t.row()+t.rowspan()-1,e.row()+e.rowspan()-1),Math.max(t.column()+t.colspan()-1,e.column()+e.colspan()-1));var t})})}function In(e){return e=en.fromTable(e),_.generate(e)}function Bn(e,t){return h.ancestor(e,"table")}function Mn(e,t){return vr.cata(t.get(),x.constant([]),x.identity,x.constant([e]))}function Ln(e){return{element:x.constant(e),mergable:C.none,unmergable:C.none,selection:x.constant([e])}}var Fn=t.immutable("left","right"),Hn=function(n,r,o){return _n(n,r,o).map(function(e){var t=n.create().clone(r);return n.insert().appendAll(t,e.before().concat([o])),n.insert().appendAll(r,e.after()),n.insert().before(r,t),Fn(t,r)})},zn=function(n,r,e){return _n(n,r,e).map(function(e){var t=n.create().clone(r);return n.insert().appendAll(t,e.after()),n.insert().after(r,t),Fn(r,t)})},Un=function(i,e,a,s){function l(e,t,o){var n=r(e,C.none(),o);return a(e)?r(e,t,o):i.property().parent(e).bind(function(r){return s(i,r,e).map(function(e){var t=[{first:e.left,second:e.right}],n=a(r)?r:e.left();return l(n,C.some(e.right()),o.concat(t))}).getOr(n)})}var r=t.immutable("first","second","splits");return l(e,C.none(),[])},Wn=function(t,e,n){return e.bind(function(e){return n.filter(x.curry(t.eq,e))})},$n=function(e,t,n){return 0<n.length?An(e,t,n[0],n.slice(1)):C.none()},jn=function(e,t){return x.curry(e.eq,t)},qn=function(s,e,t){var l=Dn(s,e,t);return l.shared().bind(function(e){return n=s,r=e,e=l.firstpath(),t=l.secondpath(),a=n.property().children(r),n.eq(r,e[0])?C.some([e[0]]):n.eq(r,t[0])?C.some([t[0]]):(e=(o=function(e){var e=k.reverse(e),t=k.findIndex(e,jn(n,r)).getOr(-1),e=t<e.length-1?e[t+1]:e[t];return k.findIndex(a,jn(n,e))})(e),i=o(t),e.bind(function(n){return i.map(function(e){var t=Math.min(n,e),e=Math.max(n,e);return a.slice(t,e+1)})}));var n,r,t,o,i,a})},Vn=Dn,Kn=function(e,t,n){return $n(e,t,n)},Yn=function(e,t,n){return qn(e,t,n)},Gn=function(e,t,n,r){return Vn(e,t,n,r)},Xn=function(e,t,n){return Hn(e,t,n)},Jn=function(e,t,n){return zn(e,t,n)},Qn=function(e,t,n,r){return Un(e,t,n,r)},Zn=Rn(),er={sharedOne:function(n,e){return Kn(Zn,function(e,t){return n(t)},e)},subset:function(e,t){return Yn(Zn,e,t)},ancestors:function(e,t,n){return Gn(Zn,e,t,n)},breakToLeft:function(e,t){return Xn(Zn,e,t)},breakToRight:function(e,t){return Jn(Zn,e,t)},breakPath:function(e,t,r){return Qn(Zn,e,t,function(e,t,n){return r(t,n)})}},tr=function(e,t){var n=t.column(),r=t.column()+t.colspan()-1,o=t.row(),t=t.row()+t.rowspan()-1;return n<=e.finishCol()&&r>=e.startCol()&&o<=e.finishRow()&&t>=e.startRow()},nr=function(e,t){for(var n=!0,r=x.curry(Pn,t),o=t.startRow();o<=t.finishRow();o++)for(var i=t.startCol();i<=t.finishCol();i++)n=n&&_.getAt(e,o,i).exists(r);return n?C.some(t):C.none()},rr=On,or=function(t,e,n){return On(t,e,n).bind(function(e){return nr(t,e)})},ir=function(n,e,r,o){return _.findItem(n,e,m.eq).bind(function(e){var t=0<r?e.row()+e.rowspan()-1:e.row(),e=0<o?e.column()+e.colspan()-1:e.column();return _.getAt(n,t+r,e+o).map(function(e){return e.element()})})},ar=function(t,e,n){return rr(t,e,n).map(function(e){e=_.filterItems(t,x.curry(tr,e));return k.map(e,function(e){return e.element()})})},sr=function(e,t){return _.findItem(e,t,function(e,t){return m.contains(t,e)}).bind(function(e){return e.element()})},lr=function(t,n,r){return R.table(t).bind(function(e){e=In(e);return ir(e,t,n,r)})},cr=function(e,t,n){e=In(e);return ar(e,t,n)},ur=function(e,t,n,r,o){var i=In(e),n=m.eq(e,n)?t:sr(i,t),t=m.eq(e,o)?r:sr(i,r);return ar(i,n,t)},dr=function(e,t,n){e=In(e);return or(e,t,n)},fr=t.immutableBag(["boxes","start","finish"],[]),mr=function(i,a,n){function s(t){return function(e){return n(e)||m.eq(e,t)}}return m.eq(i,a)?C.some(fr({boxes:C.some([i]),start:i,finish:a})):Bn(i).bind(function(o){return Bn(a).bind(function(r){var e,t;return m.eq(o,r)?C.some(fr({boxes:cr(o,i,a),start:i,finish:a})):m.contains(o,r)?(t=0<(e=c.ancestors(a,"td,th",s(o))).length?e[e.length-1]:a,C.some(fr({boxes:ur(o,i,o,a,r),start:i,finish:t}))):m.contains(r,o)?(t=0<(e=c.ancestors(i,"td,th",s(r))).length?e[e.length-1]:i,C.some(fr({boxes:ur(r,i,o,a,r),start:i,finish:t}))):er.ancestors(i,a).shared().bind(function(e){return h.closest(e,"table",n).bind(function(e){var t=c.ancestors(a,"td,th",s(e)),t=0<t.length?t[t.length-1]:a,n=c.ancestors(i,"td,th",s(e)),n=0<n.length?n[n.length-1]:i;return C.some(fr({boxes:ur(e,i,o,a,r),start:n,finish:t}))})})})})},pr={identify:mr,retrieve:function(e,t){e=c.descendants(e,t);return 0<e.length?C.some(e):C.none()},shiftSelection:function(e,t,n,r,o){return i=o,k.find(e,function(e){return E.is(e,i)}).bind(function(e){return lr(e,t,n).bind(function(e){return t=e,n=r,h.ancestor(t,"table").bind(function(e){return h.descendant(e,n).bind(function(e){return mr(e,t).bind(function(t){return t.boxes().map(function(e){return{boxes:x.constant(e),start:x.constant(t.start()),finish:x.constant(t.finish())}})})})});var t,n})});var i},getEdges:function(e,t,r){return h.descendant(e,t).bind(function(n){return h.descendant(e,r).bind(function(t){return er.sharedOne(Bn,[n,t]).map(function(e){return{first:x.constant(n),last:x.constant(t),table:x.constant(e)}})})})}},hr={retrieve:function(e,t){return pr.retrieve(e,t)},retrieveBox:function(o,e,t){return pr.getEdges(o,e,t).bind(function(n){function e(e){return m.eq(o,e)}var t=h.ancestor(n.first(),"thead,tfoot,tbody,table",e),r=h.ancestor(n.last(),"thead,tfoot,tbody,table",e);return t.bind(function(t){return r.bind(function(e){return m.eq(t,e)?dr(n.table(),n.first(),n.last()):C.none()})})})}},Ce="data-mce-selected",ke="data-mce-first-selected",e="data-mce-last-selected",gr={selected:x.constant(Ce),selectedSelector:x.constant("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:x.constant("[data-mce-selected]"),firstSelected:x.constant(ke),firstSelectedSelector:x.constant("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:x.constant(e),lastSelectedSelector:x.constant("td[data-mce-last-selected],th[data-mce-last-selected]")},Te=function(a){if(!l.isArray(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");var s=[],n={};return k.each(a,function(e,r){var t=S.keys(e);if(1!==t.length)throw new Error("one and only one name per case");var o=t[0],i=e[o];if(void 0!==n[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!l.isArray(i))throw new Error("case arguments must be an array");s.push(o),n[o]=function(){var e=arguments.length;if(e!==i.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+i.length+" ("+i+"), got "+e);for(var n=new Array(e),t=0;t<n.length;t++)n[t]=arguments[t];return{fold:function(){if(arguments.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+arguments.length);return arguments[r].apply(null,n)},match:function(e){var t=S.keys(e);if(s.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+"\nActual: "+t.join(","));if(k.forall(s,function(e){return k.contains(t,e)}))return e[o].apply(null,n);throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+s.join(", "))},log:function(e){console.log(e,{constructors:s,constructor:o,params:n})}}}}),n},n=Te([{none:[]},{multiple:["elements"]},{single:["selection"]}]),vr={cata:function(e,t,n,r){return e.fold(t,n,r)},none:n.none,multiple:n.multiple,single:n.single},yr=function(n,e){return vr.cata(e.get(),C.none,function(t,e){return 0===t.length?C.none():hr.retrieveBox(n,gr.firstSelectedSelector(),gr.lastSelectedSelector()).bind(function(e){return 1<t.length?C.some({bounds:x.constant(e),cells:x.constant(t)}):C.none()})},C.none)},br=function(e,t){e=Mn(e,t);return 0<e.length&&k.forall(e,function(e){return N.has(e,"rowspan")&&1<parseInt(N.get(e,"rowspan"),10)||N.has(e,"colspan")&&1<parseInt(N.get(e,"colspan"),10)})?C.some(e):C.none()},wr=Mn,Ce=Ln,ke=t.immutable("element","clipboard","generators"),xr={noMenu:Ln,forMenu:function(e,t,n){return{element:x.constant(n),mergable:x.constant(yr(t,e)),unmergable:x.constant(br(n,e)),selection:x.constant(wr(n,e))}},notCell:Ce,paste:ke,pasteRows:function(e,t,n,r,o){return{element:x.constant(n),mergable:C.none,unmergable:C.none,selection:x.constant(wr(n,e)),clipboard:x.constant(r),generators:x.constant(o)}}},Cr=function(i,n,a,s){i.on("BeforeGetContent",function(t){function e(e){t.preventDefault(),R.table(e[0]).map(cn.deep).map(function(e){return[ln.extract(e,gr.attributeSelector())]}).each(function(e){t.content=k.map(e,function(e){return i.selection.serializer.serialize(e.dom(),{})}).join("")})}!0===t.selection&&vr.cata(n.get(),x.noop,e,x.noop)}),i.on("BeforeSetContent",function(o){!0===o.selection&&!0===o.paste&&C.from(i.dom.getParent(i.selection.getStart(),"th,td")).each(function(e){var r=T.fromDom(e);R.table(r).bind(function(t){var e,n=k.filter(En(o.content),function(e){return"meta"!==p.name(e)});1===n.length&&"table"===p.name(n[0])&&(o.preventDefault(),e=T.fromDom(i.getDoc()),e=Tn.paste(e),n=xr.paste(r,n[0],e),a.pasteCells(t,n).each(function(e){i.selection.setRng(e),i.focus(),s.clear(t)}))})})})};function kr(n,r){function e(e){var t=r(e);return t<=0||null===t?(e=A.get(e,n),parseFloat(e)||0):t}function o(n,e){return k.foldl(e,function(e,t){t=A.get(n,t),t=void 0===t?0:parseInt(t,10);return isNaN(t)?e:e+t},0)}return{set:function(e,t){if(!l.isNumber(t)&&!t.match(/^[0-9]+$/))throw n+".set accepts only positive integer values. Value was "+t;e=e.dom();tn.isSupported(e)&&(e.style[n]=t+"px")},get:e,getOuter:e,aggregate:o,max:function(e,t,n){e=o(e,n);return e<t?t-e:0}}}function Sr(e){var t=Vr(e);return t?Kr(t,e,Br.get,qr):Br.get(e)}function Tr(e){return A.getRaw(e,"width").fold(function(){return C.from(N.get(e,"width"))},function(e){return C.some(e)})}function Er(e,t){return void 0!==e?e:void 0!==t?t:0}function Nr(e){var t=e.dom(),n=(r=t.ownerDocument).body,r=T.fromDom(r.documentElement);return n===t?Zr(n.offsetLeft,n.offsetTop):Qr.attached(e,r)?eo(t):Zr(0,0)}function Rr(e){return to.absolute(e).left()+Lr.getOuter(e)}function _r(e){return to.absolute(e).left()}function Ar(e,t){return ro(e,_r(t))}function Dr(e,t){return ro(e,Rr(t))}function Pr(e){return to.absolute(e).top()}function Or(n,t,r){var e,o;return 0===r.length?[]:(e=k.map(r.slice(1),function(e,t){return e.map(function(e){return n(t,e)})}),o=r[r.length-1].map(function(e){return t(r.length-1,e)}),e.concat([o]))}var Ir=kr("height",function(e){return Pt.inBody(e)?e.dom().getBoundingClientRect().height:e.dom().offsetHeight}),Br={set:function(e,t){Ir.set(e,t)},get:function(e){return Ir.get(e)},getOuter:function(e){return Ir.getOuter(e)},setMax:function(e,t){t=Ir.max(e,t,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);A.set(e,"max-height",t+"px")}},Mr=kr("width",function(e){return e.dom().offsetWidth}),Lr={set:function(e,t){Mr.set(e,t)},get:function(e){return Mr.get(e)},getOuter:function(e){return Mr.getOuter(e)},setMax:function(e,t){t=Mr.max(e,t,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);A.set(e,"max-width",t+"px")}},Fr=Se.detect(),Hr=function(e,t){e=parseFloat(e);return isNaN(e)?t:e},zr=function(e,t,n){return Hr(A.get(e,t),n)},Ur=function(e){return Fr.browser.isIE()||Fr.browser.isEdge()?(n=zr(t=e,"padding-top",0),r=zr(t,"padding-bottom",0),o=zr(t,"border-top-width",0),i=zr(t,"border-bottom-width",0),a=t.dom().getBoundingClientRect().height,"border-box"===A.get(t,"box-sizing")?a:a-n-r-(o+i)):zr(e,"height",Br.get(e));var t,n,r,o,i,a},Wr=/(\d+(\.\d+)?)(\w|%)*/,$r=/(\d+(\.\d+)?)%/,jr=/(\d+(\.\d+)?)px|em/,qr=function(e,t){A.set(e,"height",t+"px")},Vr=function(e){return A.getRaw(e,"height").getOrThunk(function(){return Ur(e)+"px"})},Kr=function(e,t,n,r){var o,i,a=parseInt(e,10);return xt(e,"%")&&"table"!==p.name(t)?(e=t,o=a,i=n,t=r,n=R.table(e).map(function(e){e=i(e);return Math.floor(o/100*e)}).getOr(o),t(e,n),n):a},Yr=function(e,t){return N.has(e,t)?parseInt(N.get(e,t),10):1},Gr=function(e,t){return e/t.pixelWidth()*100},Xr=function(e,t){return e/100*t.pixelWidth()},a={percentageBasedSizeRegex:x.constant($r),pixelBasedSizeRegex:x.constant(jr),setPixelWidth:function(e,t){A.set(e,"width",t+"px")},setPercentageWidth:function(e,t){A.set(e,"width",t+"%")},setHeight:qr,getPixelWidth:function(o,i){return Tr(o).fold(function(){var e=Lr.get(o);return parseInt(e,10)},function(e){return t=o,e=e,n=i,jr.test(e)?(r=jr.exec(e),parseInt(r[1],10)):$r.test(e)?(r=$r.exec(e),e=parseFloat(r[1]),Xr(e,n)):(r=Lr.get(t),parseInt(r,10));var t,n,r})},getPercentageWidth:function(r,o){return Tr(r).fold(function(){var e=Lr.get(r),e=parseInt(e,10);return Gr(e,o)},function(e){return t=r,e=e,n=o,$r.test(e)?(e=$r.exec(e),parseFloat(e[1])):(e=Lr.get(t),t=parseInt(e,10),Gr(t,n));var t,n})},getGenericWidth:function(e){return Tr(e).bind(function(e){return Wr.test(e)?(e=Wr.exec(e),C.some({width:x.constant(e[1]),unit:x.constant(e[3])})):C.none()})},setGenericWidth:function(e,t,n){A.set(e,"width",t+n)},getHeight:function(e){return t="rowspan",Sr(e=e)/Yr(e,t);var t},getRawWidth:Tr},Jr={halve:function(n,r){a.getGenericWidth(n).each(function(e){var t=e.width()/2;a.setGenericWidth(n,t,e.unit()),a.setGenericWidth(r,t,e.unit())})}},Qr={attached:function(e,t){t=t||T.fromDom(document.documentElement);return Zt.ancestor(e,x.curry(m.eq,t)).isSome()},windowOf:function(e){var t=e.dom();return t===t.window?e:p.isDocument(e)?t.defaultView||t.parentWindow:null}},Zr=function(n,r){return{left:x.constant(n),top:x.constant(r),translate:function(e,t){return Zr(n+e,r+t)}}},eo=function(e){e=e.getBoundingClientRect();return Zr(e.left,e.top)},to={absolute:function(e){var t=e.dom().ownerDocument,n=t.body,r=Qr.windowOf(T.fromDom(t)),t=t.documentElement,o=Er(r.pageYOffset,t.scrollTop),r=Er(r.pageXOffset,t.scrollLeft),i=Er(t.clientTop,n.clientTop),t=Er(t.clientLeft,n.clientLeft);return Nr(e).translate(r-t,o-i)},relative:function(e){e=e.dom();return Zr(e.offsetLeft,e.offsetTop)},viewport:Nr},no=t.immutable("row","y"),ro=t.immutable("col","x"),e={delta:x.identity,positions:x.curry(Or,function(e,t){return no(e,Pr(t))},function(e,t){return no(e,Pr(t)+Br.getOuter(t))}),edge:Pr},n={delta:x.identity,edge:_r,positions:x.curry(Or,Ar,Dr)},oo={height:e,rtl:{delta:function(e,t){return-e},edge:Rr,positions:x.curry(Or,Dr,Ar)},ltr:n},io={ltr:oo.ltr,rtl:oo.rtl};function ao(t){function n(e){return t(e).isRtl()?io.rtl:io.ltr}return{delta:function(e,t){return n(t).delta(e,t)},edge:function(e){return n(e).edge(e)},positions:function(e,t){return n(t).positions(e,t)}}}function so(e,t){return lo(e,t,{validate:l.isFunction,label:"function"})}function lo(r,o,i){if(0===o.length)throw new Error("You must specify at least one required field.");return fe.validateStrArr("required",o),fe.checkDupes(o),function(t){var n=S.keys(t),e=(k.forall(o,function(e){return k.contains(n,e)})||fe.reqMessage(o,n),r(o,n),k.filter(o,function(e){return!i.validate(t[e],e)}));return 0<e.length&&fe.invalidTypeMessage(e,i.label),t}}function co(e){var t=N.has(e,"colspan")?parseInt(N.get(e,"colspan"),10):1,n=N.has(e,"rowspan")?parseInt(N.get(e,"rowspan"),10):1;return{element:x.constant(e),colspan:x.constant(t),rowspan:x.constant(n)}}function uo(e,t){return e=e.property().name(t),k.contains(Co,e)}function fo(e,t){return k.contains(["br","img","hr","input"],e.property().name(t))}function mo(a){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var o,i=e[r];for(o in i)i.hasOwnProperty(o)&&(n[o]=a(n[o],i[o]))}return n}}function po(e,t){return y.rowcells(t,e.section())}function ho(e,t){return e.cells()[t]}function go(e,t){var n;return 0===e.length?0:(n=e[0],k.findIndex(e,function(e){return!t(n.element(),e.element())}).fold(function(){return e.length},function(e){return e}))}function vo(e,t,n,r){n===r?N.remove(e,t):N.set(e,t,n)}function yo(e,t,n){var r=e();return k.find(r,t).orThunk(function(){return C.from(r[0]).orThunk(n)}).map(function(e){return e.element()})}var bo={getGridSize:function(e){e=en.fromTable(e);return _.generate(e).grid()}},wo=function(e){function t(){return n}var n=e;return{get:t,set:function(e){n=e},clone:function(){return wo(n)}}},Ce=x.noop,ke={exactly:x.curry(so,function(t,e){e=k.filter(e,function(e){return!k.contains(t,e)});0<e.length&&fe.unsuppMessage(e)}),ensure:x.curry(so,Ce),ensureWith:x.curry(lo,Ce)},xo=ke.exactly(["cell","row","replace","gap"]),e=function(t,e){xo(t);function r(e){var t=i(e);return n.get().isNone()&&n.set(C.some(t)),a=C.some({item:e,replacement:t}),t}var n=wo(C.none()),o=void 0!==e?e:co,i=function(e){e=o(e);return t.cell(e)},a=C.none();return{getOrInit:function(t,n){return a.fold(function(){return r(t)},function(e){return n(t,e.item)?e.replacement:r(t)})},cursor:n.get}},n=function(a,s){return function(n){var r=wo(C.none()),o=(xo(n),[]),e=function(t,n){return k.find(o,function(e){return n(e.item,t)})},i=function(e){var t=n.replace(e,s,{scope:a});return o.push({item:e,sub:t}),r.get().isNone()&&r.set(C.some(t)),t};return{replaceOrInit:function(t,n){return e(t,n).fold(function(){return i(t)},function(e){return n(t,e.item)?e.sub:i(t)})},cursor:r.get}}},Ce=function(n){xo(n);var e=wo(C.none());return{combine:function(t){return e.get().isNone()&&e.set(C.some(t)),function(){var e=n.cell({element:x.constant(t),colspan:x.constant(1),rowspan:x.constant(1)});return A.remove(e,"width"),A.remove(t,"width"),e}},cursor:e.get}},Co=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ko=uo,So=function(e,t){e=e.property().name(t);return k.contains(["ol","ul"],e)},To=function(e,t){e=e.property().name(t);return k.contains(["address","pre","p","h1","h2","h3","h4","h5","h6"],e)},Eo=function(e,t){e=e.property().name(t);return k.contains(["h1","h2","h3","h4","h5","h6"],e)},No=function(e,t){return k.contains(["div","li","td","th","blockquote","body","caption"],e.property().name(t))},Ro=fo,_o=function(e,t){return"iframe"===e.property().name(t)},Ao=function(e,t){return!(uo(e,t)||fo(e,t))&&"li"!==e.property().name(t)},Do=Rn(),Po={isBlock:function(e){return ko(Do,e)},isList:function(e){return So(Do,e)},isFormatting:function(e){return To(Do,e)},isHeading:function(e){return Eo(Do,e)},isContainer:function(e){return No(Do,e)},isEmptyTag:function(e){return Ro(Do,e)},isFrame:function(e){return _o(Do,e)},isInline:function(e){return Ao(Do,e)}},Oo=function(e){var o=function(e){return"br"===p.name(e)},i=function(e){return"li"===p.name(e)||Zt.ancestor(e,Po.isList).isSome()},a=function(e){return u.nextSibling(e).map(function(e){return!!Po.isBlock(e)||(Po.isEmptyTag(e)?"img"!==p.name(e):void 0)}).getOr(!1)},t=0===(t=k.bind(e,function(e){var r,t=u.children(e);return k.forall(t,function(e){return o(e)||p.isText(e)&&0===wn.get(e).trim().length})?[]:t.concat((r=e,Sn.last(r).bind(function(t){var n=a(t);return u.parent(t).map(function(e){return!0===n||i(e)||o(t)||Po.isBlock(e)&&!m.eq(r,e)?[]:[T.fromTag("br")]})}).getOr([])))})).length?[T.fromTag("br")]:t;D.empty(e[0]),on.append(e[0],t)},Io=mo(function(e,t){return l.isObject(e)&&l.isObject(t)?Io(e,t):t}),Bo=mo(function(e,t){return t}),Mo={deepMerge:Io,merge:Bo},Lo=function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},Fo=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return C.none()},b={addCell:function(e,t,n){var r=e.cells(),o=r.slice(0,t),r=r.slice(t),t=o.concat([n]).concat(r);return po(e,t)},setCells:po,mutateCell:function(e,t,n){e.cells()[t]=n},getCell:ho,getCellElement:function(e,t){return ho(e,t).element()},mapCells:function(e,t){var n=e.cells(),n=k.map(n,t);return y.rowcells(n,e.section())},cellLength:function(e){return e.cells().length}},Ho=function(e,t,n,r){var o,i=e[t].cells().slice(n),i=go(i,r),n=(o=n,k.map(e,function(e){return b.getCell(e,o)}).slice(t)),e=go(n,r);return{colspan:x.constant(i),rowspan:x.constant(e)}},zo={toDetails:function(u,d){var f=k.map(u,function(e,t){return k.map(e.cells(),function(e,t){return!1})});return k.map(u,function(e,c){var t=k.bind(e.cells(),function(e,t){if(!1!==f[c][t])return[];for(var n=Ho(u,c,t,d),r=c,o=t,i=n.rowspan(),a=n.colspan(),s=r;s<r+i;s++)for(var l=o;l<o+a;l++)f[s][l]=!0;return[y.detailnew(e.element(),n.rowspan(),n.colspan(),e.isNew())]});return y.rowdetails(t,e.section())})},toGrid:function(e,t,n){for(var r=[],o=0;o<e.grid().rows();o++){for(var i=[],a=0;a<e.grid().columns();a++){var s=_.getAt(e,o,a).map(function(e){return y.elementnew(e.element(),n)}).getOrThunk(function(){return y.elementnew(t.gap(),!0)});i.push(s)}var l=y.rowcells(i,e.all()[o].section());r.push(l)}return r}},Uo=function(o,e){function t(e,t){var n,r;0<e.length?(e=e,n=t,r=h.child(o,n).getOrThunk(function(){var e=T.fromTag(n,u.owner(o).dom());return g.append(o,e),e}),D.empty(r),e=k.map(e,function(e){e.isNew()&&i.push(e.element());var t=e.element();return D.empty(t),k.each(e.cells(),function(e){e.isNew()&&a.push(e.element()),vo(e.element(),"colspan",e.colspan(),1),vo(e.element(),"rowspan",e.rowspan(),1),g.append(t,e.element())}),t}),on.append(r,e)):h.child(o,t).bind(D.remove)}var i=[],a=[],n=[],r=[],s=[];return k.each(e,function(e){switch(e.section()){case"thead":n.push(e);break;case"tbody":r.push(e);break;case"tfoot":s.push(e)}}),t(n,"thead"),t(r,"tbody"),t(s,"tfoot"),{newRows:x.constant(i),newCells:x.constant(a)}},Wo=function(e){return k.map(e,function(e){var n=cn.shallow(e.element());return k.each(e.cells(),function(e){var t=cn.deep(e.element());vo(t,"colspan",e.colspan(),1),vo(t,"rowspan",e.rowspan(),1),g.append(n,t)}),n})},$o={repeat:function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},range:function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n},unique:function(n,r){var o=[];return k.each(n,function(e,t){(t<n.length-1&&!r(e,n[t+1])||t===n.length-1)&&o.push(e)}),o},deduce:function(t,n){var e,r;return n<0||n>=t.length-1?C.none():(e=t[n].fold(function(){var e=k.reverse(t.slice(0,n));return Fo(e,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return C.some({value:e,delta:0})}),r=t[n+1].fold(function(){var e=t.slice(n+1);return Fo(e,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return C.some({value:e,delta:1})}),e.bind(function(n){return r.map(function(e){var t=e.delta+n.delta;return Math.abs(e.value-n.value)/t})}))}},jo={columns:function(n){var e=n.grid(),t=$o.range(0,e.columns()),r=$o.range(0,e.rows());return k.map(t,function(t){return yo(function(){return k.bind(r,function(e){return _.getAt(n,e,t).filter(function(e){return e.column()===t}).fold(x.constant([]),function(e){return[e]})})},function(e){return 1===e.colspan()},function(){return _.getAt(n,0,t)})})},rows:function(n){var e=n.grid(),t=$o.range(0,e.rows()),r=$o.range(0,e.columns());return k.map(t,function(t){return yo(function(){return k.bind(r,function(e){return _.getAt(n,t,e).filter(function(e){return e.row()===t}).fold(x.constant([]),function(e){return[e]})})},function(e){return 1===e.rowspan()},function(){return _.getAt(n,t,0)})})}},qo=function(e,t,n,r,o){var i=T.fromTag("div");return A.setAll(i,{position:"absolute",left:t-r/2+"px",top:n+"px",height:o+"px",width:r+"px"}),N.setAll(i,{"data-column":e,role:"presentation"}),i},Vo=function(e,t,n,r,o){var i=T.fromTag("div");return A.setAll(i,{position:"absolute",left:t+"px",top:n-o/2+"px",height:o+"px",width:r+"px"}),N.setAll(i,{"data-row":e,role:"presentation"}),i},Bo=function(e){var t=e.replace(/\./g,"-");return{resolve:function(e){return t+"-"+e}}},Ko={resolve:Bo("ephox-snooker").resolve};function Yo(e,t){return void 0===(e=N.get(e,t))||""===e?[]:e.split(" ")}function Go(e){return Ii(e,"class")}function Xo(e,t){return Bi(e,"class",t)}function Jo(e,t){return Mi(e,"class",t)}function Qo(e,t){return d.supports(e)&&e.dom().classList.contains(t)}function Zo(e){e=c.descendants(e.parent(),"."+Li),k.each(e,D.remove)}function ei(n,e,r){var o=n.origin();k.each(e,function(e,t){e.each(function(e){e=r(o,e);v.add(e,Li),g.append(n.parent(),e)})})}function ti(e,t){e=c.descendants(e.parent(),"."+Li),k.each(e,t)}function ni(e,t){return e=zo.toDetails(e,m.eq),Yi(e,t)}function ri(e,t){return e=k.flatten(k.map(e.all(),function(e){return e.cells()})),k.find(e,function(e){return m.eq(t,e.element())})}function oi(n){return{is:function(e){return n===e},isValue:x.always,isError:x.never,getOr:x.constant(n),getOrThunk:x.constant(n),getOrDie:x.constant(n),or:function(e){return oi(n)},orThunk:function(e){return oi(n)},fold:function(e,t){return t(n)},map:function(e){return oi(e(n))},each:function(e){e(n)},bind:function(e){return e(n)},exists:function(e){return e(n)},forall:function(e){return e(n)},toOption:function(){return C.some(n)}}}function ii(n){return{is:x.never,isValue:x.never,isError:x.always,getOr:x.identity,getOrThunk:function(e){return e()},getOrDie:function(){return x.die(String(n))()},or:function(e){return e},orThunk:function(e){return e()},fold:function(e,t){return e(n)},map:function(e){return ii(n)},each:x.noop,bind:function(e){return ii(n)},exists:x.never,forall:x.always,toOption:C.none}}function ai(t,e,n){return t.concat($o.repeat(e,function(e){return b.setCells(t[t.length-1],ra(t[t.length-1].cells(),n))}))}function si(e,t,n){return k.map(e,function(e){return b.setCells(e,e.cells().concat(ra($o.range(0,t),n)))})}function li(e,n,r,o){return k.map(e,function(e){return b.mapCells(e,function(e){return t=e,k.exists(n,function(e){return r(t.element(),e.element())})?y.elementnew(o(e.element(),r),!0):e;var t})})}function ci(e,t,n,r){return void 0!==b.getCellElement(e[t],n)&&0<t&&r(b.getCellElement(e[t-1],n),b.getCellElement(e[t],n))}function ui(e,t,n){return 0<t&&n(b.getCellElement(e,t-1),b.getCellElement(e,t))}function di(e){return{fold:e}}function fi(e,t){return N.has(e,t)&&1<parseInt(N.get(e,t),10)}function mi(e){return Ca(e,"width",a.getPixelWidth)}function pi(e){return Ca(e,"height",a.getHeight)}function hi(e,t,n,r,o){var e=jo.columns(e),i=k.map(e,function(e){return e.map(t.edge)});return k.map(e,function(e,t){return e.filter(x.not(xa.hasColspan)).fold(function(){var e=$o.deduce(i,t);return r(e)},function(e){return n(e,o)})})}function gi(e){return e.map(function(e){return e+"px"}).getOr("")}function vi(e,t,n,r){var e=jo.rows(e),o=k.map(e,function(e){return e.map(t.edge)});return k.map(e,function(e,t){return e.filter(x.not(xa.hasRowspan)).fold(function(){var e=$o.deduce(o,t);return r(e)},function(e){return n(e)})})}function yi(e,t,n){for(var r=0,o=e;o<t;o++)r+=void 0!==n[o]?n[o]:0;return r}function bi(e){return e=en.fromTable(e),Aa(e)}function wi(e){0===R.cells(e).length&&D.remove(e)}function xi(e,t,n){return Oa(e,t,n).orThunk(function(){return Oa(e,0,0)})}function s(e,t,n){return Pa(e,Oa(e,t,n))}function Ci(e){return k.foldl(e,function(e,t){return k.exists(e,function(e){return e.row()===t.row()})?e:e.concat([t])},[]).sort(function(e,t){return e.row()-t.row()})}function ki(e){return k.foldl(e,function(e,t){return k.exists(e,function(e){return e.column()===t.column()})?e:e.concat([t])},[]).sort(function(e,t){return e.column()-t.column()})}function Si(e,t,n){return e=en.fromPastedRows(e,n),n=_.generate(e),zo.toGrid(n,t,!0)}function Ti(e){return"rtl"===A.get(e,"direction")?"rtl":"ltr"}function Ei(e){return e.getParam("table_style_by_css",!1,"boolean")}function Ni(e){return e.getParam("table_cell_class_list",[],"array")}function Ri(e){return e.getParam("table_row_class_list",[],"array")}function _i(e){return e.getParam("table_class_list",[],"array")}function Ai(e){return!1===e.getParam("table_responsive_width")}function Di(c,e){function t(e){return"table"===p.name(Ma(e))}function n(i,a,s,l){return function(e,t){Ua(e);var n=l(),r=T.fromDom(c.getDoc()),o=ao(qa.directionAt),r=Tn.cellOperations(s,r,u);return a(e)?i(n,e,t,r,o).bind(function(e){return k.each(e.newRows(),function(e){ts(c,e.dom())}),k.each(e.newCells(),function(e){ns(c,e.dom())}),e.cursor().map(function(e){var t=c.dom.createRng();return t.setStart(e.dom(),0),t.setEnd(e.dom(),0),t})}):C.none()}}var u=Za(c);return{deleteRow:n(Ba.eraseRows,function(e){e=bo.getGridSize(e);return!1===t(c)||1<e.rows()},x.noop,e),deleteColumn:n(Ba.eraseColumns,function(e){e=bo.getGridSize(e);return!1===t(c)||1<e.columns()},x.noop,e),insertRowsBefore:n(Ba.insertRowsBefore,x.always,x.noop,e),insertRowsAfter:n(Ba.insertRowsAfter,x.always,x.noop,e),insertColumnsBefore:n(Ba.insertColumnsBefore,x.always,Jr.halve,e),insertColumnsAfter:n(Ba.insertColumnsAfter,x.always,Jr.halve,e),mergeCells:n(Ba.mergeCells,x.always,x.noop,e),unmergeCells:n(Ba.unmergeCells,x.always,x.noop,e),pasteRowsBefore:n(Ba.pasteRowsBefore,x.always,x.noop,e),pasteRowsAfter:n(Ba.pasteRowsAfter,x.always,x.noop,e),pasteCells:n(Ba.pasteCells,x.always,x.noop,e)}}function Pi(e,t){var e=e.dom,n=t.control.rootControl,r=n.toJSON(),o=e.parseStyle(r.style);"style"===t.control.name()?(n.find("#borderStyle").value(o["border-style"]||"")[0].fire("select"),n.find("#borderColor").value(o["border-color"]||"")[0].fire("change"),n.find("#backgroundColor").value(o["background-color"]||"")[0].fire("change"),n.find("#width").value(o.width||"").fire("change"),n.find("#height").value(o.height||"").fire("change")):(o["border-style"]=r.borderStyle,o["border-color"]=r.borderColor,o["background-color"]=r.backgroundColor,o.width=r.width?za(r.width):"",o.height=r.height?za(r.height):""),n.find("#style").value(e.serializeStyle(e.parseStyle(e.serializeStyle(o))))}function Oi(t,n,e){var r,o=t.dom;function i(e,t,n){n&&o.setAttrib(e,t,n)}function a(e,t,n){n&&o.setStyle(e,t,n)}w.updateStyleField(t,e),r=e.control.rootControl.toJSON(),t.undoManager.transact(function(){f.each(n,function(e){i(e,"scope",r.scope),1===n.length?i(e,"style",r.style):ss(e,r.style),i(e,"class",r.class),a(e,"width",za(r.width)),a(e,"height",za(r.height)),r.type&&e.nodeName.toLowerCase()!==r.type&&(e=o.rename(e,r.type)),1===n.length&&(as.unApplyAlign(t,e),as.unApplyVAlign(t,e)),r.align&&as.applyAlign(t,e,r.align),r.valign&&as.applyVAlign(t,e,r.valign)}),t.focus()})}var Ii=Yo,Bi=function(e,t,n){n=Yo(e,t).concat([n]);N.set(e,t,n.join(" "))},Mi=function(e,t,n){var r=k.filter(Yo(e,t),function(e){return e!==n});0<r.length?N.set(e,t,r.join(" ")):N.remove(e,t)},d={get:Go,add:Xo,remove:Jo,toggle:function(e,t){(k.contains(Go(e),t)?Jo:Xo)(e,t)},supports:function(e){return void 0!==e.dom().classList}},v={add:function(e,t){d.supports(e)?e.dom().classList.add(t):d.add(e,t)},remove:function(e,t){d.supports(e)?e.dom().classList.remove(t):d.remove(e,t),t=e,0===(d.supports(t)?t.dom().classList:d.get(t)).length&&N.remove(t,"class")},toggle:function(e,t){return d.supports(e)?e.dom().classList.toggle(t):d.toggle(e,t)},toggler:function(e,t){var n,r,o,i,a=d.supports(e),s=e.dom().classList;return n=function(){a?s.remove(t):d.remove(e,t)},r=function(){a?s.add(t):d.add(e,t)},o=Qo(e,t),i=o||!1,{on:l,off:c,toggle:function(){(i?c:l)()},isOn:function(){return i}};function l(){r(),i=!0}function c(){n(),i=!1}},has:Qo},Li=Ko.resolve("resizer-bar"),Fi=Ko.resolve("resizer-rows"),Hi=Ko.resolve("resizer-cols"),zi=function(e,t,n,r){ei(e,t,function(e,t){t=qo(t.col(),t.x()-e.left(),n.top()-e.top(),7,r);return v.add(t,Hi),t})},Ui=function(e,t,n,r){ei(e,t,function(e,t){t=Vo(t.row(),n.left()-e.left(),t.y()-e.top(),r,7);return v.add(t,Fi),t})},Wi=function(e,t,n,r){Zo(e);var o,i=en.fromTable(t),i=_.generate(i),a=jo.rows(i),i=jo.columns(i);e=e,t=t,a=a,i=i,n=n,r=r,o=to.absolute(t),n=0<a.length?n.positions(a,t):[],Ui(e,n,o,Lr.getOuter(t)),a=0<i.length?r.positions(i,t):[],zi(e,a,o,Br.getOuter(t))},$i=function(e){ti(e,function(e){A.set(e,"display","none")})},ji=function(e){ti(e,function(e){A.set(e,"display","block")})},qi=Zo,Vi=function(e){return v.has(e,Fi)},Ki=function(e){return v.has(e,Hi)},Yi=function(e,n){return k.map(e,function(e){t=e.details();var t=Fo(t,function(e){return u.parent(e.element()).map(function(e){var t=u.parent(e).isNone();return y.elementnew(e,t)})}).getOrThunk(function(){return y.elementnew(n.row(),!0)});return y.rowdatanew(t.element(),e.details(),e.section(),t.isNew())})},o=function(s,l,c,u,d){return function(n,r,e,o,i){var t=en.fromTable(r),a=_.generate(t);return l(a,e).map(function(e){var t=zo.toGrid(a,o,!1),t=s(t,e,m.eq,d(o)),e=ni(t.grid(),o);return{grid:x.constant(e),cursor:t.cursor}}).fold(function(){return C.none()},function(e){var t=Uo(r,e.grid());return c(r,e.grid(),i),u(r),Wi(n,r,oo.height,i),C.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})}},Gi=ni,i=function(t,e){return R.cell(e.element()).bind(function(e){return ri(t,e)})},Xi=function(t,e){e=k.map(e.selection(),function(e){return R.cell(e).bind(function(e){return ri(t,e)})}),e=Lo(e);return 0<e.length?C.some(e):C.none()},Ji=function(t,n){return R.cell(n.element()).bind(function(e){return ri(t,e).map(function(e){return Mo.merge(e,{generators:n.generators,clipboard:n.clipboard})})})},Qi=function(t,e){var n=k.map(e.selection(),function(e){return R.cell(e).bind(function(e){return ri(t,e)})}),n=Lo(n);return 0<n.length?C.some(Mo.merge({cells:n},{generators:e.generators,clipboard:e.clipboard})):C.none()},Zi=function(e,t){return t.mergable()},ea=function(e,t){return t.unmergable()},ta=oi,na=ii,ra=function(e,t){return k.map(e,function(){return y.elementnew(t.cell(),!0)})},oa=function(e,t,n){var r;return e.row()>=t.length||e.column()>b.cellLength(t[0])?na("invalid start address out of table bounds, row: "+e.row()+", column: "+e.column()):(e=(t=t.slice(e.row()))[0].cells().slice(e.column()),r=b.cellLength(n[0]),n=n.length,ta({rowDelta:x.constant(t.length-n),colDelta:x.constant(e.length-r)}))},ia=function(e,t){e=b.cellLength(e[0]),t=b.cellLength(t[0]);return{rowDelta:x.constant(0),colDelta:x.constant(e-t)}},aa=function(e,t,n){var r=t.colDelta()<0?si:x.identity;return(t.rowDelta()<0?ai:x.identity)(r(e,Math.abs(t.colDelta()),n),Math.abs(t.rowDelta()),n)},sa={merge:function(e,t,n,r){if(0!==e.length)for(var o=t.startRow();o<=t.finishRow();o++)for(var i=t.startCol();i<=t.finishCol();i++)b.mutateCell(e[o],i,y.elementnew(r(),!1));return e},unmerge:function(e,t,n,r){for(var o=!0,i=0;i<e.length;i++)for(var a=0;a<b.cellLength(e[0]);a++){var s=n(b.getCellElement(e[i],a),t);!0===s&&!1===o?b.mutateCell(e[i],a,y.elementnew(r(),!0)):!0===s&&(o=!1)}return e},splitRows:function(i,a,s,l){var e,n;return 0<a&&a<i.length&&(e=i[a-1].cells(),n=s,e=k.foldl(e,function(e,t){return k.exists(e,function(e){return n(e.element(),t.element())})?e:e.concat([t])},[]),k.each(e,function(e){for(var t=C.none(),n=a;n<i.length;n++)for(var r=0;r<b.cellLength(i[0]);r++){var o=i[n].cells()[r];s(o.element(),e.element())&&(t=t.isNone()?C.some(l()):t).each(function(e){b.mutateCell(i[n],r,y.elementnew(e,!0))})}})),i}},la=function(e,t,n,r){var o=b.getCell(e[t],n),r=x.curry(r,o.element()),o=e[t];return 1<e.length&&1<b.cellLength(o)&&(0<n&&r(b.getCellElement(o,n-1))||n<o.length-1&&r(b.getCellElement(o,n+1))||0<t&&r(b.getCellElement(e[t-1],n))||t<e.length-1&&r(b.getCellElement(e[t+1],n)))},ca=function(m,p,h,g,v){return oa(m,p,h).map(function(e){for(var e=aa(p,e,g),t=m,n=e,r=h,o=g,i=v,a=t.row(),s=t.column(),l=a+r.length,c=s+b.cellLength(r[0]),u=a;u<l;u++)for(var d=s;d<c;d++){la(n,u,d,i)&&sa.unmerge(n,b.getCellElement(n[u],d),i,o.cell);var f=b.getCellElement(r[u-a],d-s),f=o.replace(f);b.mutateCell(n[u],d,y.elementnew(f,!0))}return n})},ua=function(e,t,n,r,o){sa.splitRows(t,e,o,r.cell);o=ia(n,t),n=aa(n,o,r),o=ia(t,n),t=aa(t,o,r);return t.slice(0,e).concat(n).concat(t.slice(e,t.length))},da=function(n,r,e,o,i){var t=n.slice(0,r),a=n.slice(r),e=b.mapCells(n[e],function(e,t){return 0<r&&r<n.length&&o(b.getCellElement(n[r-1],t),b.getCellElement(n[r],t))?b.getCell(n[r],t):y.elementnew(i(e.element(),o),!0)});return t.concat([e]).concat(a)},fa=function(e,n,r,o,i){return k.map(e,function(e){var t=0<n&&n<b.cellLength(e)&&o(b.getCellElement(e,n-1),b.getCellElement(e,n))?b.getCell(e,n):y.elementnew(i(b.getCellElement(e,r),o),!0);return b.addCell(e,n,t)})},ma=function(e,n,r,o,i){var a=r+1;return k.map(e,function(e,t){t=t===n?y.elementnew(i(b.getCellElement(e,r),o),!0):b.getCell(e,r);return b.addCell(e,a,t)})},pa=function(e,t,n,r,o){var i=t+1,a=e.slice(0,i),i=e.slice(i),e=b.mapCells(e[t],function(e,t){return t===n?y.elementnew(o(e.element(),r),!0):e});return a.concat([e]).concat(i)},ha=function(e,t,n){return e.slice(0,t).concat(e.slice(n+1))},ga=function(e,n,r){e=k.map(e,function(e){var t=e.cells().slice(0,n).concat(e.cells().slice(r+1));return y.rowcells(t,e.section())});return k.filter(e,function(e){return 0<e.cells().length})},va=function(n,r,o,e){var t=k.bind(n,function(e,t){return ci(n,t,r,o)||ui(e,r,o)?[]:[b.getCell(e,r)]});return li(n,t,o,e)},ya=function(n,r,o,e){var i=n[r],t=k.bind(i.cells(),function(e,t){return ci(n,r,t,o)||ui(i,t,o)?[]:[e]});return li(n,t,o,e)},ba={none:function(){return di(function(e,t,n,r,o){return e()})},only:function(i){return di(function(e,t,n,r,o){return t(i)})},left:function(i,a){return di(function(e,t,n,r,o){return n(i,a)})},middle:function(i,a,s){return di(function(e,t,n,r,o){return r(i,a,s)})},right:function(i,a){return di(function(e,t,n,r,o){return o(i,a)})}},wa=function(e,t,o,i){function a(e){return k.map(e,x.constant(0))}function r(e,t){var n,r;return(0<=o?(n=Math.max(i.minCellWidth(),s[t]-o),a(s.slice(0,e)).concat([o,n-s[t]])):(n=Math.max(i.minCellWidth(),s[e]+o),r=s[e]-n,a(s.slice(0,e)).concat([n-s[e],r]))).concat(a(s.slice(t+1)))}var s=e.slice(0),e=(t=t,0===(e=e).length?ba.none():1===e.length?ba.only(0):0===t?ba.left(0,1):t===e.length-1?ba.right(t-1,t):0<t&&t<e.length-1?ba.middle(t-1,t,t+1):ba.none()),t=x.constant(a(s));return e.fold(t,function(e){return i.singleColumnWidth(s[e],o)},r,function(e,t,n){return r(t,n)},function(e,t){var n;return 0<=o?a(s.slice(0,t)).concat([o]):(n=Math.max(i.minCellWidth(),s[t]+o),a(s.slice(0,t)).concat([n-s[t]]))})},xa={hasColspan:function(e){return fi(e,"colspan")},hasRowspan:function(e){return fi(e,"rowspan")},minWidth:x.constant(10),minHeight:x.constant(10),getInt:function(e,t){return parseInt(A.get(e,t),10)}},Ca=function(e,t,n){return A.getRaw(e,t).fold(function(){return n(e)+"px"},function(e){return e})},ka={getRawWidths:function(e,t){return hi(e,t,mi,gi)},getPixelWidths:function(e,t,n){return hi(e,t,a.getPixelWidth,function(e){return e.getOrThunk(n.minCellWidth)},n)},getPercentageWidths:function(e,t,n){return hi(e,t,a.getPercentageWidth,function(e){return e.fold(function(){return n.minCellWidth()},function(e){return e/n.pixelWidth()*100})},n)},getPixelHeights:function(e,t){return vi(e,t,a.getHeight,function(e){return e.getOrThunk(xa.minHeight)})},getRawHeights:function(e,t){return vi(e,t,pi,gi)}},Sa=function(e,n){e=_.justCells(e);return k.map(e,function(e){var t=yi(e.column(),e.column()+e.colspan(),n);return{element:e.element,width:x.constant(t),colspan:e.colspan}})},Ta=function(e,n){e=_.justCells(e);return k.map(e,function(e){var t=yi(e.row(),e.row()+e.rowspan(),n);return{element:e.element,height:x.constant(t),rowspan:e.rowspan}})},Ea=function(e,n){return k.map(e.all(),function(e,t){return{element:e.element,height:x.constant(n[t])}})},Na=function(e,t){var r=parseFloat(e),n=Lr.get(t);return{width:x.constant(r),pixelWidth:x.constant(n),getWidths:ka.getPercentageWidths,getCellDelta:function(e){return e/n*100},singleColumnWidth:function(e,t){return[100-e]},minCellWidth:function(){return xa.minWidth()/n*100},setElementWidth:a.setPercentageWidth,setTableWidth:function(e,t,n){a.setPercentageWidth(e,r+n)}}},Ra=function(e){var e=parseInt(e,10),t=x.identity;return{width:x.constant(e),pixelWidth:x.constant(e),getWidths:ka.getPixelWidths,getCellDelta:t,singleColumnWidth:function(e,t){return[Math.max(xa.minWidth(),e+t)-e]},minCellWidth:xa.minWidth,setElementWidth:a.setPixelWidth,setTableWidth:function(e,t,n){t=k.foldr(t,function(e,t){return e+t},0);a.setPixelWidth(e,t)}}},_a=function(r){return a.getRawWidth(r).fold(function(){var e=Lr.get(r);return Ra(e)},function(e){return t=r,e=e,a.percentageBasedSizeRegex().test(e)?(n=a.percentageBasedSizeRegex().exec(e),Na(n[1],t)):a.pixelBasedSizeRegex().test(e)?(n=a.pixelBasedSizeRegex().exec(e),Ra(n[1])):(e=Lr.get(t),Ra(e));var t,n})},Aa=function(e){return _.generate(e)},Da={adjustWidth:function(e,t,n,r){var o=_a(e),t=o.getCellDelta(t),i=bi(e),a=o.getWidths(i,r,o),r=wa(a,n,t,o),r=k.map(r,function(e,t){return e+a[t]}),s=Sa(i,r);k.each(s,function(e){o.setElementWidth(e.element(),e.width())}),n===i.grid().columns()-1&&o.setTableWidth(e,r,t)},adjustHeight:function(e,n,r,t){var o=bi(e),t=ka.getPixelHeights(o,t),t=k.map(t,function(e,t){return r===t?Math.max(n+e,xa.minHeight()):e}),i=Ta(o,t),o=Ea(o,t),o=(k.each(o,function(e){a.setHeight(e.element(),e.height())}),k.each(i,function(e){a.setHeight(e.element(),e.height())}),k.foldr(t,function(e,t){return e+t},0));a.setHeight(e,o)},adjustWidthTo:function(e,t,n){var r=_a(e),t=Aa(t),n=r.getWidths(t,n,r),t=Sa(t,n),n=(k.each(t,function(e){r.setElementWidth(e.element(),e.width())}),k.foldr(n,function(e,t){return t+e},0));0<t.length&&r.setElementWidth(e,n)}},Pa=t.immutable("grid","cursor"),Oa=function(e,t,n){return C.from(e[t]).bind(function(e){return C.from(e.cells()[n]).bind(function(e){return C.from(e.element())})})},Ia=Da.adjustWidthTo,Ba={insertRowBefore:o(function(e,t,n,r){var o=t.row(),i=t.row(),e=da(e,i,o,n,r.getOrInit);return s(e,i,t.column())},i,x.noop,x.noop,e),insertRowsBefore:o(function(e,t,n,r){var o=t[0].row(),i=t[0].row(),a=Ci(t),a=k.foldl(a,function(e,t){return da(e,i,o,n,r.getOrInit)},e);return s(a,i,t[0].column())},Xi,x.noop,x.noop,e),insertRowAfter:o(function(e,t,n,r){var o=t.row(),i=t.row()+t.rowspan(),e=da(e,i,o,n,r.getOrInit);return s(e,i,t.column())},i,x.noop,x.noop,e),insertRowsAfter:o(function(e,t,n,r){var o=Ci(t),i=o[o.length-1].row(),a=o[o.length-1].row()+o[o.length-1].rowspan(),o=k.foldl(o,function(e,t){return da(e,a,i,n,r.getOrInit)},e);return s(o,a,t[0].column())},Xi,x.noop,x.noop,e),insertColumnBefore:o(function(e,t,n,r){var o=t.column(),i=t.column(),e=fa(e,i,o,n,r.getOrInit);return s(e,t.row(),i)},i,Ia,x.noop,e),insertColumnsBefore:o(function(e,t,n,r){var o=ki(t),i=o[0].column(),a=o[0].column(),o=k.foldl(o,function(e,t){return fa(e,a,i,n,r.getOrInit)},e);return s(o,t[0].row(),a)},Xi,Ia,x.noop,e),insertColumnAfter:o(function(e,t,n,r){var o=t.column(),i=t.column()+t.colspan(),e=fa(e,i,o,n,r.getOrInit);return s(e,t.row(),i)},i,Ia,x.noop,e),insertColumnsAfter:o(function(e,t,n,r){var o=t[t.length-1].column(),i=t[t.length-1].column()+t[t.length-1].colspan(),a=ki(t),a=k.foldl(a,function(e,t){return fa(e,i,o,n,r.getOrInit)},e);return s(a,t[0].row(),i)},Xi,Ia,x.noop,e),splitCellIntoColumns:o(function(e,t,n,r){e=ma(e,t.row(),t.column(),n,r.getOrInit);return s(e,t.row(),t.column())},i,Ia,x.noop,e),splitCellIntoRows:o(function(e,t,n,r){e=pa(e,t.row(),t.column(),n,r.getOrInit);return s(e,t.row(),t.column())},i,x.noop,x.noop,e),eraseColumns:o(function(e,t,n,r){var o=ki(t),e=ga(e,o[0].column(),o[o.length-1].column()),o=xi(e,t[0].row(),t[0].column());return Pa(e,o)},Xi,Ia,wi,e),eraseRows:o(function(e,t,n,r){var o=Ci(t),e=ha(e,o[0].row(),o[o.length-1].row()),o=xi(e,t[0].row(),t[0].column());return Pa(e,o)},Xi,x.noop,wi,e),makeColumnHeader:o(function(e,t,n,r){e=va(e,t.column(),n,r.replaceOrInit);return s(e,t.row(),t.column())},i,x.noop,x.noop,n("row","th")),unmakeColumnHeader:o(function(e,t,n,r){e=va(e,t.column(),n,r.replaceOrInit);return s(e,t.row(),t.column())},i,x.noop,x.noop,n(null,"td")),makeRowHeader:o(function(e,t,n,r){e=ya(e,t.row(),n,r.replaceOrInit);return s(e,t.row(),t.column())},i,x.noop,x.noop,n("col","th")),unmakeRowHeader:o(function(e,t,n,r){e=ya(e,t.row(),n,r.replaceOrInit);return s(e,t.row(),t.column())},i,x.noop,x.noop,n(null,"td")),mergeCells:o(function(e,t,n,r){var o=t.cells(),e=(Oo(o),sa.merge(e,t.bounds(),n,x.constant(o[0])));return Pa(e,C.from(o[0]))},Zi,x.noop,x.noop,Ce),unmergeCells:o(function(e,t,n,r){e=k.foldr(t,function(e,t){return sa.unmerge(e,t,n,r.combine(t))},e);return Pa(e,C.from(t[0]))},ea,Ia,x.noop,Ce),pasteCells:o(function(e,n,t,r){var o=function(e,t){e=en.fromTable(e),e=_.generate(e);return zo.toGrid(e,t,!0)}(n.clipboard(),n.generators()),i=y.address(n.row(),n.column());return ca(i,e,o,n.generators(),t).fold(function(){return Pa(e,C.some(n.element()))},function(e){var t=xi(e,n.row(),n.column());return Pa(e,t)})},Ji,Ia,x.noop,e),pasteRowsBefore:o(function(e,t,n,r){var o=e[t.cells[0].row()],i=t.cells[0].row(),o=Si(t.clipboard(),t.generators(),o),i=ua(i,e,o,t.generators(),n),e=xi(i,t.cells[0].row(),t.cells[0].column());return Pa(i,e)},Qi,x.noop,x.noop,e),pasteRowsAfter:o(function(e,t,n,r){var o=e[t.cells[0].row()],i=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan(),o=Si(t.clipboard(),t.generators(),o),i=ua(i,e,o,t.generators(),n),e=xi(i,t.cells[0].row(),t.cells[0].column());return Pa(i,e)},Qi,x.noop,x.noop,e)},Ma=function(e){return T.fromDom(e.getBody())},La=function(e){return e.getBoundingClientRect().width},Fa=function(e){return e.getBoundingClientRect().height},Ha=function(t){return function(e){return m.eq(e,Ma(t))}},za=function(e){return/^[0-9]+$/.test(e)&&(e+="px"),e},Ua=function(e){var t=c.descendants(e,"td[data-mce-style],th[data-mce-style]");N.remove(e,"data-mce-style"),k.each(t,function(e){N.remove(e,"data-mce-style")})},Wa=Ti,$a={isRtl:x.constant(!1)},ja={isRtl:x.constant(!0)},qa={directionAt:function(e){return"rtl"===Wa(e)?ja:$a}},Va=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],Ka={"border-collapse":"collapse",width:"100%"},Ya={border:"1"},Ga=function(e){return e.getParam("table_resize_bars",!0,"boolean")},Xa=function(e){return e.getParam("table_cell_advtab",!0,"boolean")},Ja=function(e){return e.getParam("table_row_advtab",!0,"boolean")},Qa=function(e){return e.getParam("table_advtab",!0,"boolean")},Za=function(e){e=e.getParam("table_clone_elements");return l.isString(e)?C.some(e.split(/[ ,]/)):Array.isArray(e)?C.some(e):C.none()},es=function(e){e=e.getParam("object_resizing",!0);return"table"===e||e},ts=function(e,t){return e.fire("newrow",{node:t})},ns=function(e,t){return e.fire("newcell",{node:t})},rs=function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})},os=function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})},is=function(e,t,n){var e=en.fromTable(e),r=_.generate(e);return Xi(r,t).map(function(e){e=zo.toGrid(r,n,!1).slice(e[0].row(),e[e.length-1].row()+e[e.length-1].rowspan()),e=Gi(e,n);return Wo(e)})},f=tinymce.util.Tools.resolve("tinymce.util.Tools"),as={applyAlign:function(e,t,n){n&&e.formatter.apply("align"+n,{},t)},applyVAlign:function(e,t,n){n&&e.formatter.apply("valign"+n,{},t)},unApplyAlign:function(t,n){f.each("left center right".split(" "),function(e){t.formatter.remove("align"+e,{},n)})},unApplyVAlign:function(t,n){f.each("top middle bottom".split(" "),function(e){t.formatter.remove("valign"+e,{},n)})},getTDTHOverallStyle:function(e,t,n){for(var r=void 0,o=e.select("td,th",t),i=0;i<o.length;i++){var a=e.getStyle(o[i],n);if((r=void 0===r?a:r)!==a)return""}return r}},w={createStyleForm:function(n){function e(){var e=n.getParam("color_picker_callback");if(e)return function(t){return e.call(n,function(e){t.control.value(e).fire("change")},t.control.value())}}return{title:"Advanced",type:"form",defaults:{onchange:x.curry(Pi,n)},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:x.curry(Pi,n),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:e()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:e()}]}]}},buildListItems:function(e,r,t){function o(e,n){return n=n||[],f.each(e,function(e){var t={text:e.text||e.title};e.menu?t.menu=o(e.menu):(t.value=e.value,r&&r(t)),n.push(t)}),n}return o(e,t||[])},updateStyleField:Pi,extractAdvancedStyles:function(e,t){var t=e.parseStyle(e.getAttrib(t,"style")),n={};return t["border-style"]&&(n.borderStyle=t["border-style"]),t["border-color"]&&(n.borderColor=t["border-color"]),t["background-color"]&&(n.backgroundColor=t["background-color"]),n.style=e.serializeStyle(t),n}},ss=function(e,t){delete e.dataset.mceStyle,e.style.cssText+=";"+t},ls=function(t){var n,r,o,e,i=[],i=t.dom.select("td[data-mce-selected],th[data-mce-selected]"),a=t.dom.getParent(t.selection.getStart(),"td,th");!i.length&&a&&i.push(a),(a=a||i[0])&&(a=1<i.length?{width:"",height:"",scope:"",class:"",align:"",valign:"",style:"",type:a.nodeName.toLowerCase()}:(r=a,a=(n=t).dom,o={width:a.getStyle(r,"width")||a.getAttrib(r,"width"),height:a.getStyle(r,"height")||a.getAttrib(r,"height"),scope:a.getAttrib(r,"scope"),class:a.getAttrib(r,"class"),type:r.nodeName.toLowerCase(),style:"",align:"",valign:""},f.each("left center right".split(" "),function(e){n.formatter.matchNode(r,"align"+e)&&(o.align=e)}),f.each("top middle bottom".split(" "),function(e){n.formatter.matchNode(r,"valign"+e)&&(o.valign=e)}),Xa(n)&&f.extend(o,w.extractAdvancedStyles(a,r)),o),0<Ni(t).length&&(e={name:"class",type:"listbox",label:"Class",values:w.buildListItems(Ni(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"td",classes:[e.value]})})})}),e={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:x.curry(w.updateStyleField,t)},{label:"Height",name:"height",onchange:x.curry(w.updateStyleField,t)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},e]},Xa(t)?t.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:a,body:[{title:"General",type:"form",items:e},w.createStyleForm(t)],onsubmit:x.curry(Oi,t,i)}):t.windowManager.open({title:"Cell properties",data:a,body:e,onsubmit:x.curry(Oi,t,i)}))},cs=function(e,t,n){var r=e.getParent(t,"table"),o=t.parentNode,i=e.select(n,r)[0];i||(i=e.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?e.insertAfter(i,r.firstChild):r.insertBefore(i,r.firstChild):r.appendChild(i)),i.appendChild(t),o.hasChildNodes()||e.remove(o)};function us(o,e,i,t){var a=o.dom;function s(e,t,n){n&&a.setAttrib(e,t,n)}w.updateStyleField(o,t);var l=t.control.rootControl.toJSON();o.undoManager.transact(function(){f.each(e,function(e){var t,n,r;s(e,"scope",l.scope),s(e,"style",l.style),s(e,"class",l.class),t=e,n="height",(r=za(l.height))&&a.setStyle(t,n,r),l.type!==e.parentNode.nodeName.toLowerCase()&&cs(o.dom,e,l.type),l.align!==i.align&&(as.unApplyAlign(o,e),as.applyAlign(o,e,l.align))}),o.focus()})}function ds(e){return e.dom().innerHTML}var fs=function(t){var n,r,o,e,i=t.dom,a=[],s=i.getParent(t.selection.getStart(),"table"),l=i.getParent(t.selection.getStart(),"td,th");f.each(s.rows,function(t){f.each(t.cells,function(e){if(i.getAttrib(e,"data-mce-selected")||e===l)return a.push(t),!1})}),(s=a[0])&&(s=1<a.length?{height:"",scope:"",style:"",class:"",align:"",type:s.parentNode.nodeName.toLowerCase()}:(r=s,s=(n=t).dom,o={height:s.getStyle(r,"height")||s.getAttrib(r,"height"),scope:s.getAttrib(r,"scope"),class:s.getAttrib(r,"class"),align:"",style:"",type:r.parentNode.nodeName.toLowerCase()},f.each("left center right".split(" "),function(e){n.formatter.matchNode(r,"align"+e)&&(o.align=e)}),Ja(n)&&f.extend(o,w.extractAdvancedStyles(s,r)),o),e={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},e=0<Ri(t).length?{name:"class",type:"listbox",label:"Class",values:w.buildListItems(Ri(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"tr",classes:[e.value]})})})}:e]},Ja(t)?t.windowManager.open({title:"Row properties",data:s,bodyType:"tabpanel",body:[{title:"General",type:"form",items:e},w.createStyleForm(t)],onsubmit:x.curry(us,t,a,s)}):t.windowManager.open({title:"Row properties",data:s,body:e,onsubmit:x.curry(us,t,a,s)}))},ms=tinymce.util.Tools.resolve("tinymce.Env"),ps={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},hs=function(){return T.fromTag("table")},gs=function(){return T.fromTag("tbody")},vs=function(){return T.fromTag("tr")},ys=function(){return T.fromTag("th")},bs=function(){return T.fromTag("td")},ws=function(e){var t=T.fromTag("div"),e=T.fromDom(e.dom().cloneNode(!0));return g.append(t,e),ds(t)},xs=function(e,t){e.selection.select(t.dom(),!0),e.selection.collapse(!0)},Cs={insert:function(r,e,t){var n=r.getParam("table_default_styles",Ka,"object"),e=function(e,t,n,r,o){void 0===o&&(o=ps);for(var i=hs(),a=(A.setAll(i,o.styles),N.setAll(i,o.attributes),gs()),s=(g.append(i,a),[]),l=0;l<e;l++){for(var c=vs(),u=0;u<t;u++){var d=(l<n||u<r?ys:bs)();u<r&&N.set(d,"scope","row"),l<n&&N.set(d,"scope","col"),g.append(d,T.fromTag("br")),o.percentages&&A.set(d,"width",100/t+"%"),g.append(c,d)}s.push(c)}return on.append(a,s),i}(t,e,0,0,{styles:n,attributes:r.getParam("table_default_attributes",Ya,"object"),percentages:(t=n.width,l.isString(t)&&-1!==t.indexOf("%")&&!Ai(r))}),n=(N.set(e,"data-mce-id","__mce"),ws(e));return r.insertContent(n),h.descendant(Ma(r),'table[data-mce-id="__mce"]').map(function(e){var t,n;return Ai(r)&&A.set(e,"width",A.get(e,"width")),N.remove(e,"data-mce-id"),t=r,k.each(c.descendants(e,"tr"),function(e){ts(t,e.dom()),k.each(c.descendants(e,"th,td"),function(e){ns(t,e.dom())})}),n=r,h.descendant(e,"td,th").each(x.curry(xs,n)),e.dom()}).getOr(null)}};function ks(e,t,n){var r,o,i=e.dom;w.updateStyleField(e,n),!1===(o=n.control.rootControl.toJSON()).class&&delete o.class,e.undoManager.transact(function(){t=t||Cs.insert(e,o.cols||1,o.rows||1),Ss(e,t,o),(r=i.select("caption",t)[0])&&!o.caption&&i.remove(r),!r&&o.caption&&((r=i.create("caption")).innerHTML=ms.ie?" ":'<br data-mce-bogus="1"/>',t.insertBefore(r,t.firstChild)),as.unApplyAlign(e,t),o.align&&as.applyAlign(e,t,o.align),e.focus(),e.addVisual()})}var Ss=function(e,t,n){var r,o=e.dom,i={},a={};if(i.class=n.class,a.height=za(n.height),o.getAttrib(t,"width")&&!Ei(e)?i.width=(r=n.width)?r.replace(/px$/,""):"":a.width=za(n.width),Ei(e)?(a["border-width"]=za(n.border),a["border-spacing"]=za(n.cellspacing),f.extend(i,{"data-mce-border-color":n.borderColor,"data-mce-cell-padding":n.cellpadding,"data-mce-border":n.border})):f.extend(i,{border:n.border,cellpadding:n.cellpadding,cellspacing:n.cellspacing}),Ei(e)&&t.children)for(var s=0;s<t.children.length;s++)!function e(t,n,r,o){if("TD"===n.tagName||"TH"===n.tagName)t.setStyle(n,r,o);else if(n.children)for(var i=0;i<n.children.length;i++)e(t,n.children[i],r,o)}(o,t.children[s],{"border-width":za(n.border),"border-color":n.borderColor,padding:za(n.cellpadding)});n.style?f.extend(a,o.parseStyle(n.style)):a=f.extend({},o.parseStyle(o.getAttrib(t,"style")),a),i.style=o.serializeStyle(a),o.setAttribs(t,i)},Ts=function(t,e){var n,r,o,i,a,s,l,c=t.dom,u={};!0===e?(n=c.getParent(t.selection.getStart(),"table"))&&(s=n,e=(a=t).dom,l={width:e.getStyle(s,"width")||e.getAttrib(s,"width"),height:e.getStyle(s,"height")||e.getAttrib(s,"height"),cellspacing:e.getStyle(s,"border-spacing")||e.getAttrib(s,"cellspacing"),cellpadding:e.getAttrib(s,"data-mce-cell-padding")||e.getAttrib(s,"cellpadding")||as.getTDTHOverallStyle(a.dom,s,"padding"),border:e.getAttrib(s,"data-mce-border")||e.getAttrib(s,"border")||as.getTDTHOverallStyle(a.dom,s,"border"),borderColor:e.getAttrib(s,"data-mce-border-color"),caption:!!e.select("caption",s)[0],class:e.getAttrib(s,"class")},f.each("left center right".split(" "),function(e){a.formatter.matchNode(s,"align"+e)&&(l.align=e)}),Qa(a)&&f.extend(l,w.extractAdvancedStyles(e,s)),u=l):(r={label:"Cols",name:"cols"},o={label:"Rows",name:"rows"}),0<_i(t).length&&(u.class&&(u.class=u.class.replace(/\s*mce\-item\-table\s*/g,"")),i={name:"class",type:"listbox",label:"Class",values:w.buildListItems(_i(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"table",classes:[e.value]})})})}),c={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:t.getParam("table_appearance_options",!0,"boolean")?[r,o,{label:"Width",name:"width",onchange:x.curry(w.updateStyleField,t)},{label:"Height",name:"height",onchange:x.curry(w.updateStyleField,t)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[r,o,{label:"Width",name:"width",onchange:x.curry(w.updateStyleField,t)},{label:"Height",name:"height",onchange:x.curry(w.updateStyleField,t)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},i]},Qa(t)?t.windowManager.open({title:"Table properties",data:u,bodyType:"tabpanel",body:[{title:"General",type:"form",items:c},w.createStyleForm(t)],onsubmit:x.curry(ks,t,n)}):t.windowManager.open({title:"Table properties",data:u,body:c,onsubmit:x.curry(ks,t,n)})},Es=f.each,Ns=function(s,t,l,c,n){function i(){return T.fromDom(s.dom.getParent(s.selection.getStart(),"th,td"))}function a(e){return R.table(e,d)}function r(t){var n=i();a(n).each(function(i){var e=xr.forMenu(c,i,n),a=f(i);t(i,e).each(function(e){var t,n,r,o;t=s,n=a,o=f(r=i),n.width===o.width&&n.height===o.height||(rs(t,r.dom(),n.width,n.height),os(t,r.dom(),o.width,o.height)),s.selection.setRng(e),s.focus(),l.clear(i),Ua(i)})})}function o(e){var r=i();return a(r).bind(function(e){var t=T.fromDom(s.getDoc()),n=xr.forMenu(c,e,r),t=Tn.cellOperations(x.noop,t,C.none());return is(e,n,t)})}function u(o){n.get().each(function(e){var n=k.map(e,function(e){return cn.deep(e)}),r=i();a(r).bind(function(t){var e=T.fromDom(s.getDoc()),e=Tn.paste(e),e=xr.pasteRows(c,t,r,n,e);o(t,e).each(function(e){s.selection.setRng(e),s.focus(),l.clear(t)})})})}var d=Ha(s),f=function(e){return{width:La(e.dom()),height:La(e.dom())}};Es({mceTableSplitCells:function(){r(t.unmergeCells)},mceTableMergeCells:function(){r(t.mergeCells)},mceTableInsertRowBefore:function(){r(t.insertRowsBefore)},mceTableInsertRowAfter:function(){r(t.insertRowsAfter)},mceTableInsertColBefore:function(){r(t.insertColumnsBefore)},mceTableInsertColAfter:function(){r(t.insertColumnsAfter)},mceTableDeleteCol:function(){r(t.deleteColumn)},mceTableDeleteRow:function(){r(t.deleteRow)},mceTableCutRow:function(e){n.set(o()),r(t.deleteRow)},mceTableCopyRow:function(e){n.set(o())},mceTablePasteRowBefore:function(e){u(t.pasteRowsBefore)},mceTablePasteRowAfter:function(e){u(t.pasteRowsAfter)},mceTableDelete:function(){var e=T.fromDom(s.dom.getParent(s.selection.getStart(),"th,td"));R.table(e,d).filter(x.not(d)).each(function(e){var t=T.fromText(""),e=(g.after(e,t),D.remove(e),s.dom.createRng());e.setStart(t.dom(),0),e.setEnd(t.dom(),0),s.selection.setRng(e)})}},function(e,t){s.addCommand(t,e)}),Es({mceInsertTable:x.curry(Ts,s),mceTableProps:x.curry(Ts,s,!0),mceTableRowProps:x.curry(fs,s),mceTableCellProps:x.curry(ls,s)},function(n,e){s.addCommand(e,function(e,t){n(t)})})},Rs={only:function(e){var t=C.from(e.dom().documentElement).map(T.fromDom).getOr(e);return{parent:x.constant(t),view:x.constant(e),origin:x.constant(Zr(0,0))}},detached:function(e,t){var n=x.curry(to.absolute,t);return{parent:x.constant(t),view:x.constant(e),origin:n}},body:function(e,t){return{parent:x.constant(t),view:x.constant(e),origin:x.constant(Zr(0,0))}}};function _s(e){var n=t.immutable.apply(null,e),r=[];return{bind:function(e){if(void 0===e)throw"Event bind error: undefined handler";r.push(e)},unbind:function(t){r=k.filter(r,function(e){return e!==t})},trigger:function(){var t=n.apply(null,arguments);k.each(r,function(e){e(t)})}}}var As={create:function(e){return{registry:S.map(e,function(e){return{bind:e.bind,unbind:e.unbind}}),trigger:S.map(e,function(e){return e.trigger})}}},Ds={mode:ke.exactly(["compare","extract","mutate","sink"]),sink:ke.exactly(["element","start","stop","destroy"]),api:ke.exactly(["forceDrop","drop","move","delayDrop"])},Ps={resolve:Bo("ephox-dragster").resolve};function Os(e,t,n,r,o){return n=Is(n,r),e.dom().addEventListener(t,n,o),{unbind:x.curry(Bs,e,t,n,o)}}var Is=function(l,c){return function(e){var t,n,r,o,i,a,s;l(e)&&(t=T.fromDom(e.target),a=x.compose(i=function(){e.preventDefault()},o=function(){e.stopPropagation()}),n=e.clientX,r=e.clientY,o=o,i=i,a=a,s=e,t={target:x.constant(t),x:x.constant(n),y:x.constant(r),stop:o,prevent:i,kill:a,raw:x.constant(s)},c(t))}},Bs=function(e,t,n,r){e.dom().removeEventListener(t,n,r)},Ms=function(e,t,n,r){return Os(e,t,n,r,!1)},Ls=x.constant(!0),Fs=function(e,t,n){return Ms(e,t,Ls,n)},Hs=Ds.mode({compare:function(e,t){return Zr(t.left()-e.left(),t.top()-e.top())},extract:function(e){return C.some(Zr(e.x(),e.y()))},sink:function(e,t){t=t,t=Mo.merge({layerClass:Ps.resolve("blocker")},t),n=T.fromTag("div"),N.set(n,"role","presentation"),A.setAll(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),v.add(n,Ps.resolve("blocker")),v.add(n,t.layerClass);var n,r={element:function(){return n},destroy:function(){D.remove(n)}},o=Fs(r.element(),"mousedown",e.forceDrop),i=Fs(r.element(),"mouseup",e.drop),a=Fs(r.element(),"mousemove",e.move),s=Fs(r.element(),"mouseout",e.delayDrop);return Ds.sink({element:r.element,start:function(e){g.append(e,r.element())},stop:function(){D.remove(r.element())},destroy:function(){r.destroy(),i.unbind(),a.unbind(),s.unbind(),o.unbind()}})},mutate:function(e,t){e.mutate(t.left(),t.top())}});function zs(){var o=C.none(),i=As.create({move:_s(["info"])});return{onEvent:function(e,r){r.extract(e).each(function(e){var t,n;t=r,n=e,e=o.map(function(e){return t.compare(e,n)}),o=C.some(n),e.each(function(e){i.trigger.move(e)})})},reset:function(){o=C.none()},events:i.registry}}function Us(){var e={onEvent:function(e,t){},reset:x.noop},t=zs(),n=e;return{on:function(){n.reset(),n=t},off:function(){n.reset(),n=e},isOn:function(){return n===t},onEvent:function(e,t){n.onEvent(e,t)},events:t.events}}var Ws=function(t,n){var r=null;return{cancel:function(){null!==r&&(clearTimeout(r),r=null)},throttle:function(){var e=arguments;null!==r&&clearTimeout(r),r=setTimeout(function(){t.apply(null,e),e=r=null},n)}}},$s=function(t,n,e){function r(){c.stop(),s.isOn()&&(s.off(),a.trigger.stop())}function o(t){return function(){var e=Array.prototype.slice.call(arguments,0);if(i)return t.apply(null,e)}}var i=!1,a=As.create({start:_s([]),stop:_s([])}),s=Us(),l=Ws(r,200),c=(s.events.move.bind(function(e){n.mutate(t,e.info())}),n.sink(Ds.api({forceDrop:r,drop:o(r),move:o(function(e,t){l.cancel(),s.onEvent(e,n)}),delayDrop:o(l.throttle)}),e));return{element:c.element,go:function(e){c.start(e),s.on(),a.trigger.start()},on:function(){i=!0},off:function(){i=!1},destroy:function(){c.destroy()},events:a.registry}},js=function(e,t){var n=void 0!==t?t:{},n=void 0!==n.mode?n.mode:Hs;return $s(e,n,t)};function qs(){var n,r=As.create({drag:_s(["xDelta","yDelta","target"])}),o=C.none(),e={mutate:function(e,t){n.trigger.drag(e,t)},events:(n=As.create({drag:_s(["xDelta","yDelta"])})).registry};e.events.drag.bind(function(t){o.each(function(e){r.trigger.drag(t.xDelta(),t.yDelta(),e)})});return{assign:function(e){o=C.some(e)},get:function(){return o},mutate:e.mutate,events:r.registry}}var Vs=function(e,t,n){return h.closest(e,t,n).isSome()},Ks=Ko.resolve("resizer-bar-dragging");function Ys(o,t,i){function e(e,t){return C.from(N.get(e,t))}function a(e,t){return xa.getInt(e,t)-parseInt(N.get(e,"data-initial-"+t),10)}function n(e,t){f.trigger.startAdjust(),s.assign(e),N.set(e,"data-initial-"+t,parseInt(A.get(e,t),10)),v.add(e,Ks),A.set(e,"opacity","0.2"),l.go(o.parent())}function r(e){return m.eq(e,o.view())}var s=qs(),l=js(s,{}),c=C.none(),u=(s.events.drag.bind(function(n){e(n.target(),"data-row").each(function(e){var t=xa.getInt(n.target(),"top");A.set(n.target(),"top",t+n.yDelta()+"px")}),e(n.target(),"data-column").each(function(e){var t=xa.getInt(n.target(),"left");A.set(n.target(),"left",t+n.xDelta()+"px")})}),l.events.stop.bind(function(){s.get().each(function(r){c.each(function(n){e(r,"data-row").each(function(e){var t=a(r,"top");N.remove(r,"data-initial-top"),f.trigger.adjustHeight(n,t,parseInt(e,10))}),e(r,"data-column").each(function(e){var t=a(r,"left");N.remove(r,"data-initial-left"),f.trigger.adjustWidth(n,t,parseInt(e,10))}),Wi(o,n,i,t)})})}),Fs(o.parent(),"mousedown",function(e){Vi(e.target())&&n(e.target(),"top"),Ki(e.target())&&n(e.target(),"left")})),d=Fs(o.view(),"mouseover",function(e){"table"===p.name(e.target())||Vs(e.target(),"table",r)?(c="table"===p.name(e.target())?C.some(e.target()):h.ancestor(e.target(),"table",r)).each(function(e){Wi(o,e,i,t)}):Pt.inBody(e.target())&&qi(o)}),f=As.create({adjustHeight:_s(["table","delta","row"]),adjustWidth:_s(["table","delta","column"]),startAdjust:_s([])});return{destroy:function(){u.unbind(),d.unbind(),l.destroy(),qi(o)},refresh:function(e){Wi(o,e,i,t)},on:l.on,off:l.off,hideBars:x.curry($i,o),showBars:x.curry(ji,o),events:f.registry}}function Gs(i){function o(e){return"TABLE"===e.nodeName}var a,s,l=C.none(),c=C.none(),u=C.none(),d=/(\d+(\.\d+)?)%/;return i.on("init",function(){var n,r,o,e=ao(qa.directionAt),t=wl.get(i);u=C.some(t),es(i)&&Ga(i)&&(t=t,n=e,r=oo.height,t=Ys(t,n,r),o=As.create({beforeResize:_s(["table"]),afterResize:_s(["table"]),startDrag:_s([])}),t.events.adjustHeight.bind(function(e){o.trigger.beforeResize(e.table());var t=r.delta(e.delta(),e.table());Da.adjustHeight(e.table(),t,e.row(),r),o.trigger.afterResize(e.table())}),t.events.startAdjust.bind(function(e){o.trigger.startDrag()}),t.events.adjustWidth.bind(function(e){o.trigger.beforeResize(e.table());var t=n.delta(e.delta(),e.table());Da.adjustWidth(e.table(),t,e.column(),n),o.trigger.afterResize(e.table())}),(e={on:t.on,off:t.off,hideBars:t.hideBars,showBars:t.showBars,destroy:t.destroy,events:o.registry}).on(),e.events.startDrag.bind(function(e){l=C.some(i.selection.getRng())}),e.events.beforeResize.bind(function(e){e=e.table().dom();rs(i,e,La(e),Fa(e))}),e.events.afterResize.bind(function(e){var e=e.table(),t=e.dom();Ua(e),l.each(function(e){i.selection.setRng(e),i.focus()}),os(i,t,La(t),Fa(t)),i.undoManager.add()}),c=C.some(e))}),i.on("ObjectResizeStart",function(e){var t=e.target;o(t)&&(a=e.width,e=t,s=i.dom.getStyle(e,"width")||i.dom.getAttrib(e,"width"))}),i.on("ObjectResized",function(e){var t,n,r=e.target;o(r)&&(r=r,d.test(s)?(t=parseFloat(d.exec(s)[1]),e=e.width*t/a,i.dom.setStyle(r,"width",e+"%")):(n=[],f.each(r.rows,function(e){f.each(e.cells,function(e){var t=i.dom.getStyle(e,"width",!0);n.push({cell:e,width:t})})}),f.each(n,function(e){i.dom.setStyle(e.cell,"width",e.width),i.dom.setAttrib(e.cell,"width",null)})))}),{lazyResize:function(){return c},lazyWire:function(){return u.getOr(Rs.only(T.fromDom(i.getBody())))},destroy:function(){c.each(function(e){e.destroy()}),u.each(function(e){wl.remove(i,e)})}}}function Xs(e){return{fold:e}}function Js(n,e){return R.table(n,e).bind(function(e){var t=R.cells(e);return k.findIndex(t,function(e){return m.eq(n,e)}).map(function(e){return{index:x.constant(e),all:x.constant(t)}})})}function Qs(e,t,n,r){var o=u.owner(e).dom().createRange();return o.setStart(e.dom(),t),o.setEnd(n.dom(),r),o}function Zs(e,t){e.selectNodeContents(t.dom())}function el(e){e.deleteContents()}function tl(e){return{left:x.constant(e.left),top:x.constant(e.top),right:x.constant(e.right),bottom:x.constant(e.bottom),width:x.constant(e.width),height:x.constant(e.height)}}function nl(e,t){o=e;var o,n,r,t=t.match({domRange:function(e){return{ltr:x.constant(e),rtl:C.none}},relative:function(e,t){return{ltr:Ie.cached(function(){return I.relativeToNative(o,e,t)}),rtl:Ie.cached(function(){return C.some(I.relativeToNative(o,t,e))})}},exact:function(e,t,n,r){return{ltr:Ie.cached(function(){return I.exactToNative(o,e,t,n,r)}),rtl:Ie.cached(function(){return C.some(I.exactToNative(o,n,r,e,t))})}}});return n=e,(r=(e=t).ltr()).collapsed?e.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return _l.rtl(T.fromDom(e.endContainer),e.endOffset,T.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return Al(n,_l.ltr,r)}):Al(n,_l.ltr,r)}function rl(n,r,e,t,o){function i(e){var t=n.dom().createRange();return t.setStart(r.dom(),e),t.collapse(!0),t}var a=wn.get(r).length,e=Pl.searchForPoint(function(e){return i(e).getBoundingClientRect()},e,t,o.right,a);return i(e)}function ol(e,t,n,r){return(p.isText(t)?Ol.locate:Il)(e,t,n,r)}function il(t,e,n){(r=t.dom().createRange()).selectNode(e.dom());var r=r.getBoundingClientRect(),o=Ll(r,n);return(o===Ml?Sn.first:Sn.last)(e).map(function(e){return Fl(t,e,o)})}function al(e,t,n){var r=t.dom().getBoundingClientRect(),r=Ll(r,n);return C.some(Fl(e,t,r))}function sl(e,t){return e=e.fold(P.before,$l,P.after),t=t.fold(P.before,$l,P.after),O.relative(e,t)}function ll(e,t,n,r){return e=$l(e,t),t=$l(n,r),O.relative(e,t)}function cl(e,t){C.from(e.getSelection()).each(function(e){e.removeAllRanges(),e.addRange(t)})}function ul(i,e){Dl.diagnose(i,e).match({ltr:function(e,t,n,r){Kl(i,e,t,n,r)},rtl:function(e,t,n,r){var o=i.getSelection();o.setBaseAndExtent?o.setBaseAndExtent(e.dom(),t,n.dom(),r):o.extend?(o.collapse(e.dom(),t),o.extend(n.dom(),r)):Kl(i,n,r,e,t)}})}function dl(e){var t=T.fromDom(e.anchorNode),n=T.fromDom(e.focusNode);return Nl.after(t,e.anchorOffset,n,e.focusOffset)?C.some(O.range(T.fromDom(e.anchorNode),e.anchorOffset,T.fromDom(e.focusNode),e.focusOffset)):Yl(e)}function fl(e){return C.from(e.getSelection()).filter(function(e){return 0<e.rangeCount}).bind(dl)}function ml(e,t,n,r){return Jl(e,t,Tl.next(n),r)}function pl(e,t,n,r){return Jl(e,t,Tl.prev(n),r)}function hl(e,t){return t=O.exact(t,0,t,0),Gl.toNative(t)}function gl(t){return function(e){return e===t}}function vl(e){var t=(e=void 0!==e?e.dom():document).body.scrollLeft||e.documentElement.scrollLeft,e=e.body.scrollTop||e.documentElement.scrollTop;return Zr(t,e)}function yl(e,t,n){(void 0!==n?n.dom():document).defaultView.scrollTo(e,t)}function bl(e,t){rc&&l.isFunction(e.dom().scrollIntoViewIfNeeded)?e.dom().scrollIntoViewIfNeeded(!1):e.dom().scrollIntoView(t)}var wl={get:function(e,t){return e.inline?Rs.body(Ma(e),(n=T.fromTag("div"),A.setAll(n,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),g.append(Pt.body(),n),n)):Rs.only(T.fromDom(e.getDoc()));var n},remove:function(e,t){e.inline&&D.remove(t.parent())}},xl=function(o){return Xs(function(e,t,n,r){return e(o)})},Cl=function(o){return Xs(function(e,t,n,r){return t(o)})},kl=function(o,i){return Xs(function(e,t,n,r){return n(o,i)})},Sl=function(o){return Xs(function(e,t,n,r){return r(o)})},Tl={next:function(t,e){return Js(t,e).fold(function(){return xl(t)},function(e){return e.index()+1<e.all().length?kl(t,e.all()[e.index()+1]):Sl(t)})},prev:function(t,e){return Js(t,e).fold(function(){return xl()},function(e){return 0<=e.index()-1?kl(t,e.all()[e.index()-1]):Cl(t)})}},i=Te([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),P={before:i.before,on:i.on,after:i.after,cata:function(e,t,n,r){return e.fold(t,n,r)},getStart:function(e){return e.fold(x.identity,x.identity,x.identity)}},El=Te([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),n=t.immutable("start","soffset","finish","foffset"),O={domRange:El.domRange,relative:El.relative,exact:El.exact,exactFromRange:function(e){return El.exact(e.start(),e.soffset(),e.finish(),e.foffset())},range:n,getWin:function(e){e=e.match({domRange:function(e){return T.fromDom(e.startContainer)},relative:function(e,t){return P.getStart(e)},exact:function(e,t,n,r){return e}});return u.defaultView(e)}},Nl={after:function(e,t,n,r){var o=Qs(e,t,n,r),e=m.eq(e,n)&&t===r;return o.collapsed&&!e},commonAncestorContainer:function(e,t,n,r){e=Qs(e,t,n,r);return T.fromDom(e.commonAncestorContainer)}},Rl=function(e,t){var n=(t||document).createDocumentFragment();return k.each(e,function(e){n.appendChild(e.dom())}),T.fromDom(n)},I={create:function(e){return e.document.createRange()},replaceWith:function(e,t){el(e),e.insertNode(t.dom())},selectNodeContents:function(e,t){e=e.document.createRange();return Zs(e,t),e},selectNodeContentsUsing:Zs,relativeToNative:function(e,t,n){var r,o,e=e.document.createRange();return r=e,t.fold(function(e){r.setStartBefore(e.dom())},function(e,t){r.setStart(e.dom(),t)},function(e){r.setStartAfter(e.dom())}),o=e,n.fold(function(e){o.setEndBefore(e.dom())},function(e,t){o.setEnd(e.dom(),t)},function(e){o.setEndAfter(e.dom())}),e},exactToNative:function(e,t,n,r,o){e=e.document.createRange();return e.setStart(t.dom(),n),e.setEnd(r.dom(),o),e},deleteContents:el,cloneFragment:function(e){e=e.cloneContents();return T.fromDom(e)},getFirstRect:function(e){var t=e.getClientRects(),t=0<t.length?t[0]:e.getBoundingClientRect();return 0<t.width||0<t.height?C.some(t).map(tl):C.none()},getBounds:function(e){e=e.getBoundingClientRect();return 0<e.width||0<e.height?C.some(e).map(tl):C.none()},isWithin:function(e,t){return t.compareBoundaryPoints(e.END_TO_START,e)<1&&-1<t.compareBoundaryPoints(e.START_TO_END,e)},toString:function(e){return e.toString()}},_l=Te([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Al=function(e,t,n){return t(T.fromDom(n.startContainer),n.startOffset,T.fromDom(n.endContainer),n.endOffset)},Dl={ltr:_l.ltr,rtl:_l.rtl,diagnose:nl,asLtrRange:function(i,e){return nl(i,e).match({ltr:function(e,t,n,r){var o=i.document.createRange();return o.setStart(e.dom(),t),o.setEnd(n.dom(),r),o},rtl:function(e,t,n,r){var o=i.document.createRange();return o.setStart(n.dom(),r),o.setEnd(e.dom(),t),o}})}},Pl={inRect:function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},searchForPoint:function(e,t,n,r,o){if(0!==o){if(t===r)return o-1;for(var i=r,a=1;a<o;a++){var s=e(a),l=Math.abs(t-s.left);if(!(n>s.bottom)){if(n<s.top||i<l)return a-1;i=l}}}return 0}},Ol={locate:function(t,n,r,o){var e=t.dom().createRange(),e=(e.selectNode(n.dom()),e.getClientRects());return Fo(e,function(e){return Pl.inRect(e,r,o)?C.some(e):C.none()}).map(function(e){return rl(t,n,r,o,e)})}},Il=function(t,e,n,r){var o=t.dom().createRange(),e=u.children(e);return Fo(e,function(e){return o.selectNode(e.dom()),Pl.inRect(o.getBoundingClientRect(),n,r)?ol(t,e,n,r):C.none()})},Bl={locate:function(e,t,n,r){var o=e.dom().createRange(),o=(o.selectNode(t.dom()),o.getBoundingClientRect()),n=Math.max(o.left,Math.min(o.right,n)),o=Math.max(o.top,Math.min(o.bottom,r));return ol(e,t,n,o)}},Ml=!0,Ll=function(e,t){return t-e.left<e.right-t&&Ml},Fl=function(e,t,n){e=e.dom().createRange();return e.selectNode(t.dom()),e.collapse(n),e},Hl=function(e,t,n){return(0===u.children(t).length?al:il)(e,t,n)},zl=document.caretPositionFromPoint?function(n,e,t){return C.from(n.dom().caretPositionFromPoint(e,t)).bind(function(e){var t;return null===e.offsetNode?C.none():((t=n.dom().createRange()).setStart(e.offsetNode,e.offset),t.collapse(),C.some(t))})}:document.caretRangeFromPoint?function(e,t,n){return C.from(e.dom().caretRangeFromPoint(t,n))}:function(s,l,c){return T.fromPoint(s,l,c).bind(function(e){function t(){return Hl(s,e,l)}var n,r,o,i,a;return 0===u.children(e).length?t():(r=e,o=l,i=c,(a=(n=s).dom().createRange()).selectNode(r.dom()),a=a.getBoundingClientRect(),o=Math.max(a.left,Math.min(a.right,o)),a=Math.max(a.top,Math.min(a.bottom,i)),Bl.locate(n,r,o,a).orThunk(t))})},Ul=function(e,t,n){e=T.fromDom(e.document);return zl(e,t,n).map(function(e){return O.range(T.fromDom(e.startContainer),e.startOffset,T.fromDom(e.endContainer),e.endOffset)})},Wl=function(e,t,n){var r,o,t=Dl.asLtrRange(e,t),i=T.fromDom(t.commonAncestorContainer);return p.isElement(i)?(e=e,i=i,r=t,t=n,o=I.create(e),e=(E.is(i,t)?[i]:[]).concat(c.descendants(i,t)),k.filter(e,function(e){return I.selectNodeContentsUsing(o,e),I.isWithin(r,o)})):[]},$l=function(e,t){var n=p.name(e);return"input"===n?P.after(e):k.contains(["br","img"],n)?0===t?P.before(e):P.after(e):P.on(e,t)},jl=function(e){return e.match({domRange:function(e){var t=T.fromDom(e.startContainer),n=T.fromDom(e.endContainer);return ll(t,e.startOffset,n,e.endOffset)},relative:sl,exact:ll})},ql=sl,Vl=ll,Kl=function(e,t,n,r,o){t=I.exactToNative(e,t,n,r,o);cl(e,t)},Yl=function(e){var t;return 0<e.rangeCount?(t=e.getRangeAt(0),e=e.getRangeAt(e.rangeCount-1),C.some(O.range(T.fromDom(t.startContainer),t.startOffset,T.fromDom(e.endContainer),e.endOffset))):C.none()},Gl={setExact:function(e,t,n,r,o){t=Vl(t,n,r,o);ul(e,t)},getExact:fl,get:function(e){return fl(e).map(function(e){return O.exact(e.start(),e.soffset(),e.finish(),e.foffset())})},setRelative:function(e,t,n){t=ql(t,n);ul(e,t)},toNative:function(e){function t(e,t,n,r){return I.exactToNative(o,e,t,n,r)}var o=O.getWin(e).dom(),e=jl(e);return Dl.diagnose(o,e).match({ltr:t,rtl:t})},setToElement:function(e,t){t=I.selectNodeContents(e,t);cl(e,t)},clear:function(e){e.getSelection().removeAllRanges()},clone:function(e,t){e=Dl.asLtrRange(e,t);return I.cloneFragment(e)},replace:function(e,t,n){t=Dl.asLtrRange(e,t),n=Rl(n,e.document);I.replaceWith(t,n)},deleteAt:function(e,t){e=Dl.asLtrRange(e,t);I.deleteContents(e)},forElement:function(e,t){e=I.selectNodeContents(e,t);return O.range(T.fromDom(e.startContainer),e.startOffset,T.fromDom(e.endContainer),e.endOffset)},getFirstRect:function(e,t){e=Dl.asLtrRange(e,t);return I.getFirstRect(e)},getBounds:function(e,t){e=Dl.asLtrRange(e,t);return I.getBounds(e)},getAtPoint:function(e,t,n){return Ul(e,t,n)},findWithin:function(e,t,n){return Wl(e,t,n)},getAsString:function(e,t){e=Dl.asLtrRange(e,t);return I.toString(e)},isCollapsed:function(e,t,n,r){return m.eq(e,n)&&t===r}},Xl=tinymce.util.Tools.resolve("tinymce.util.VK"),Jl=function(o,e,t,i,n){return t.fold(C.none,C.none,function(e,t){return Sn.first(t).map(function(e){return hl(0,e)})},function(r){return R.table(r,e).bind(function(e){var t=xr.noMenu(r),n=(o.undoManager.transact(function(){i.insertRowsAfter(e,t)}),e);return n=c.descendants(n,"tr"),k.last(n).bind(function(e){return h.descendant(e,"td,th").map(function(e){return hl(0,e)})})})})},Ql=["table","li","dl"],Zl=function(t,n,r,o){var i,a,e;t.keyCode===Xl.TAB&&(i=Ma(n),a=function(e){var t=p.name(e);return m.eq(e,i)||k.contains(Ql,t)},(e=n.selection.getRng()).collapsed)&&(e=T.fromDom(e.startContainer),R.cell(e,a).each(function(e){t.preventDefault(),(t.shiftKey?pl:ml)(n,a,e,r,o).each(function(e){n.selection.setRng(e)})}))},ec={response:t.immutable("selection","kill")},tc={ltr:{isBackward:gl(37),isForward:gl(39)},rtl:{isBackward:gl(39),isForward:gl(37)},isUp:gl(38),isDown:gl(40),isNavigation:function(e){return 37<=e&&e<=40}},nc={convertToRange:function(e,t){e=Dl.asLtrRange(e,t);return{start:x.constant(T.fromDom(e.startContainer)),soffset:x.constant(e.startOffset),finish:x.constant(T.fromDom(e.endContainer)),foffset:x.constant(e.endOffset)}},makeSitus:function(e,t,n,r){return{start:x.constant(P.on(e,t)),finish:x.constant(P.on(n,r))}}},rc=Se.detect().browser.isSafari(),oc={get:vl,to:yl,by:function(e,t,n){(void 0!==n?n.dom():document).defaultView.scrollBy(e,t)},preserve:function(e,t){var n=vl(e),t=(t(),vl(e));n.top()===t.top()&&n.left()===t.left()||yl(n.left(),n.top(),e)},capture:function(t){function e(){n=C.some(vl(t))}var n=C.none();return e(),{save:e,restore:function(){n.each(function(e){yl(e.left(),e.top(),t)})}}},intoView:bl,intoViewIfNeeded:function(e,t){var t=t.dom().getBoundingClientRect(),n=e.dom().getBoundingClientRect();n.top<t.top?bl(e,!0):n.bottom>t.bottom&&bl(e,!1)},setToElement:function(e,t){t=to.absolute(t),e=T.fromDom(e.document);yl(t.left(),t.top(),e)},scrollBarWidth:function(){var e=T.fromHtml('<div style="width: 100px; height: 100px; overflow: scroll; position: absolute; top: -9999px;"></div>'),t=(g.after(Pt.body(),e),e.dom().offsetWidth-e.dom().clientWidth);return D.remove(e),t}};function ic(o){return{elementFromPoint:function(e,t){return T.fromPoint(T.fromDom(o.document),e,t)},getRect:function(e){return e.dom().getBoundingClientRect()},getRangedRect:function(e,t,n,r){e=O.exact(e,t,n,r);return Gl.getFirstRect(o,e).map(function(e){return S.map(e,x.apply)})},getSelection:function(){return Gl.get(o).map(function(e){return nc.convertToRange(o,e)})},fromSitus:function(e){e=O.relative(e.start(),e.finish());return nc.convertToRange(o,e)},situsFromPoint:function(e,t){return Gl.getAtPoint(o,e,t).map(function(e){return{start:x.constant(P.on(e.start(),e.soffset())),finish:x.constant(P.on(e.finish(),e.foffset()))}})},clearSelection:function(){Gl.clear(o)},setSelection:function(e){Gl.setExact(o,e.start(),e.soffset(),e.finish(),e.foffset())},setRelativeSelection:function(e,t){Gl.setRelative(o,e,t)},selectContents:function(e){Gl.setToElement(o,e)},getInnerHeight:function(){return o.innerHeight},getScrollY:function(){return oc.get(T.fromDom(o.document)).top()},scrollBy:function(e,t){oc.by(e,t,T.fromDom(o.document))}}}function ac(n,e,r,t,o){return m.eq(r,t)?C.none():pr.identify(r,t,e).bind(function(e){var t=e.boxes().getOr([]);return 0<t.length?(o(n,t,e.start(),e.finish()),C.some(ec.response(C.some(nc.makeSitus(r,0,r,kn.getEnd(r))),!0))):C.none()})}function sc(e){return B.nu({left:e.left,top:e.top,right:e.right,bottom:e.bottom})}function lc(e,t){return C.some(e.getRect(t))}function cc(e,t,n,r){var o=void 0!==r?r:uc;return e.property().parent(t).map(function(e){return Nc(e,o)})}function uc(e,t,n,r){var o=void 0!==r?r:Rc;return n.sibling(e,t).map(function(e){return Nc(e,o)})}function dc(t,n,r,o,e){return e=void 0!==e?e:_c,k.find(e,function(e){return e.current===r}).bind(function(e){return e.current(t,n,o,e.next).orThunk(function(){return e.fallback.bind(function(e){return dc(t,n,e,o)})})})}function fc(e,t){return 0===e.property().children(t).length}function mc(e,t,n,r){return Oc.left(e,t,n,r)}function pc(e,t,n,r){return Oc.right(e,t,n,r)}function hc(t,e,n){return Zt.closest(e,Po.isBlock).fold(x.constant(!1),function(e){return Ec.getEntireBox(t,e).exists(function(e){return Fc(n,e)})})}function gc(t,n,e){var r,o=t.move(e,5),i=Uc(n,t,e,o,100).getOr(o);return e=i,o=n,((r=t).point(e)>o.getInnerHeight()?C.some(r.point(e)-o.getInnerHeight()):r.point(e)<0?C.some(-r.point(e)):C.none()).fold(function(){return n.situsFromPoint(i.left(),t.point(i))},function(e){return n.scrollBy(0,e),n.situsFromPoint(i.left(),t.point(i)-e)})}function vc(e){return h.closest(e,"tr")}function yc(e,t){return k.findIndex(e,x.curry(m.eq,t))}function bc(e){return"br"===p.name(e)}function wc(e,t,n){return Qc.browser.isChrome()||Qc.browser.isSafari()||Qc.browser.isFirefox()||Qc.browser.isEdge()?t.otherRetry(e,n):Qc.browser.isIE()?t.ieRetry(e,n):C.none()}function xc(t,r,o,e,i){return h.closest(e,"td,th",r).bind(function(n){return h.closest(n,"table",r).bind(function(e){return iu(i,e)?nu.handle(t,r,o).bind(function(t){return h.closest(t.finish(),"td,th",r).map(function(e){return{start:x.constant(n),finish:x.constant(e),range:x.constant(t)}})}):C.none()})})}var Cc=function(n,r,e,t,o,i,a){return m.eq(e,o)&&t===i?C.none():h.closest(e,"td,th",r).bind(function(t){return h.closest(o,"td,th",r).bind(function(e){return ac(n,r,t,e,a)})})},kc=ac,Sc=function(e,t,n,r,o){return pr.shiftSelection(r,e,t,o.firstSelectedSelector(),o.lastSelectedSelector()).map(function(e){return o.clear(n),o.selectRange(n,e.boxes(),e.start(),e.finish()),e.boxes()})},Tc=t.immutableBag(["left","top","right","bottom"],[]),B={nu:Tc,moveUp:function(e,t){return Tc({left:e.left(),top:e.top()-t,right:e.right(),bottom:e.bottom()-t})},moveDown:function(e,t){return Tc({left:e.left(),top:e.top()+t,right:e.right(),bottom:e.bottom()+t})},moveBottomTo:function(e,t){var n=e.bottom()-e.top();return Tc({left:e.left(),top:t-n,right:e.right(),bottom:t})},moveTopTo:function(e,t){var n=e.bottom()-e.top();return Tc({left:e.left(),top:t,right:e.right(),bottom:t+n})},getTop:function(e){return e.top()},getBottom:function(e){return e.bottom()},translate:function(e,t,n){return Tc({left:e.left()+t,top:e.top()+n,right:e.right()+t,bottom:e.bottom()+n})},toString:function(e){return"("+e.left()+", "+e.top()+") -> ("+e.right()+", "+e.bottom()+")"}},Ec={getBoxAt:function(e,t,n){return p.isElement(t)?lc(e,t).map(sc):p.isText(t)?(e=e,t=t,(0<=(n=n)&&n<kn.getEnd(t)?e.getRangedRect(t,n,t,n+1):0<n?e.getRangedRect(t,n-1,t,n):C.none()).map(sc)):C.none()},getEntireBox:function(e,t){return p.isElement(t)?lc(e,t).map(sc):p.isText(t)?e.getRangedRect(t,0,t,kn.getEnd(t)).map(sc):C.none()}},Nc=t.immutable("item","mode"),Rc=function(e,t,n,r){var o=void 0!==r?r:Rc,r=e.property().children(t);return n.first(r).map(function(e){return Nc(e,o)})},_c=[{current:cc,next:uc,fallback:C.none()},{current:uc,next:Rc,fallback:C.some(cc)},{current:Rc,next:Rc,fallback:C.some(uc)}],Ac={backtrack:cc,sidestep:uc,advance:Rc,go:dc},Dc={left:function(){return{sibling:function(e,t){return e.query().prevSibling(t)},first:function(e){return 0<e.length?C.some(e[e.length-1]):C.none()}}},right:function(){return{sibling:function(e,t){return e.query().nextSibling(t)},first:function(e){return 0<e.length?C.some(e[0]):C.none()}}}},Pc=function(t,e,n,r,o,i){return Ac.go(t,e,r,o).bind(function(e){return i(e.item())?C.none():n(e.item())?C.some(e.item()):Pc(t,e.item(),n,e.mode(),o,i)})},Oc={left:function(e,t,n,r){return Pc(e,t,n,Ac.sidestep,Dc.left(),r)},right:function(e,t,n,r){return Pc(e,t,n,Ac.sidestep,Dc.right(),r)}},Ic={before:function(e,t,n){return mc(e,t,x.curry(fc,e),n)},after:function(e,t,n){return pc(e,t,x.curry(fc,e),n)},seekLeft:mc,seekRight:pc,walkers:function(){return{left:Dc.left,right:Dc.right}},walk:function(e,t,n,r,o){return Ac.go(e,t,n,r,o)},backtrack:Ac.backtrack,sidestep:Ac.sidestep,advance:Ac.advance},Bc=Rn(),Mc={gather:function(e,t,n){return Ic.gather(Bc,e,t,n)},before:function(e,t){return Ic.before(Bc,e,t)},after:function(e,t){return Ic.after(Bc,e,t)},seekLeft:function(e,t,n){return Ic.seekLeft(Bc,e,t,n)},seekRight:function(e,t,n){return Ic.seekRight(Bc,e,t,n)},walkers:function(){return Ic.walkers()},walk:function(e,t,n,r){return Ic.walk(Bc,e,t,n,r)}},Lc=Te([{none:[]},{retry:["caret"]}]),Fc=function(e,t){return e.left()<t.left()||Math.abs(t.right()-e.left())<1||e.left()>t.right()},Zi={point:B.getTop,adjuster:function(e,t,n,r,o){var i=B.moveUp(o,5);return Math.abs(n.top()-r.top())<1||n.bottom()<o.top()?Lc.retry(i):n.bottom()===o.top()?Lc.retry(B.moveUp(o,1)):hc(e,t,o)?Lc.retry(B.translate(i,5,0)):Lc.none()},move:B.moveUp,gather:Mc.before},ea={point:B.getBottom,adjuster:function(e,t,n,r,o){var i=B.moveDown(o,5);return Math.abs(n.bottom()-r.bottom())<1||n.top()>o.bottom()?Lc.retry(i):n.top()===o.bottom()?Lc.retry(B.moveDown(o,1)):hc(e,t,o)?Lc.retry(B.translate(i,5,0)):Lc.none()},move:B.moveDown,gather:Mc.after},Hc=function(e,t,n){return e.elementFromPoint(t,n).filter(function(e){return"table"===p.name(e)}).isSome()},zc=function(e,t,n,r,o){return Uc(e,t,n,t.move(r,5),o)},Uc=function(n,r,o,i,a){return 0===a?C.some(i):Hc(n,i.left(),r.point(i))?zc(n,r,o,i,a-1):n.situsFromPoint(i.left(),r.point(i)).bind(function(e){return e.start().fold(C.none,function(t,e){return Ec.getEntireBox(n,t,e).bind(function(e){return r.adjuster(n,t,e,o,i).fold(C.none,function(e){return Uc(n,r,o,e,a-1)})}).orThunk(function(){return C.some(i)})},C.none)})},Wc={tryUp:x.curry(gc,Zi),tryDown:x.curry(gc,ea),ieTryUp:function(e,t){return e.situsFromPoint(t.left(),t.top()-5)},ieTryDown:function(e,t){return e.situsFromPoint(t.left(),t.bottom()+5)},getJumpSize:x.constant(5)},$c=Te([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),jc={verify:function(n,t,e,r,o,i,a){return h.closest(r,"td,th",a).bind(function(e){return h.closest(t,"td,th",a).map(function(t){return m.eq(e,t)?m.eq(r,e)&&kn.getEnd(e)===o?i(t):$c.none("in same cell"):er.sharedOne(vc,[e,t]).fold(function(){return function(e,t,n){t=e.getRect(t),e=e.getRect(n);return e.right>t.left&&e.left<t.right}(n,t,e)?$c.success():i(t)},function(e){return i(t)})})}).getOr($c.none("default"))},cata:function(e,t,n,r,o){return e.fold(t,n,r,o)},adt:$c},qc={point:t.immutable("element","offset"),delta:t.immutable("element","deltaOffset"),range:t.immutable("element","start","finish"),points:t.immutable("begin","end"),text:t.immutable("element","text")},Vc=t.immutable("ancestor","descendants","element","index"),Kc=t.immutable("parent","children","element","index"),Yc={childOf:function(e,t){return Zt.closest(e,function(e){return u.parent(e).exists(function(e){return m.eq(e,t)})})},indexOf:yc,indexInParent:function(r){return u.parent(r).bind(function(t){var n=u.children(t);return yc(n,r).map(function(e){return Kc(t,n,r,e)})})},selectorsInParent:function(r,e){return u.parent(r).bind(function(t){var n=c.children(t,e);return yc(n,r).map(function(e){return Kc(t,n,r,e)})})},descendantsInAncestor:function(r,e,o){return h.closest(r,e).bind(function(t){var n=c.descendants(t,o);return yc(n,r).map(function(e){return Vc(t,n,r,e)})})}},Gc=function(e,t,n){return t(e,n).bind(function(e){return p.isText(e)&&0===wn.get(e).trim().length?Gc(e,t,n):C.some(e)})},Xc=function(e,t){return u.child(e,t).filter(bc).orThunk(function(){return u.child(e,t-1).filter(bc)})},Jc={tryBr:function(e,t,n,r){var o,i,a,s,l;return(bc(t)?(a=e,s=t,(l=r).traverse(s).orThunk(function(){return Gc(s,l.gather,a)}).map(l.relative)):(o=e,i=r,Xc(t,n).bind(function(e){return i.traverse(e).fold(function(){return Gc(e,i.gather,o).map(i.relative)},function(e){return Yc.indexInParent(e).map(function(e){return P.on(e.parent(),e.index())})})}))).map(function(e){return{start:x.constant(e),finish:x.constant(e)}})},process:function(e){return jc.cata(e,function(e){return C.none()},function(){return C.none()},function(e){return C.some(qc.point(e,0))},function(e){return C.some(qc.point(e,kn.getEnd(e)))})}},Qc=Se.detect(),Zc=function(n,r,o,i,a,s){return 0===s?C.none():tu(n,r,o,i,a).bind(function(e){var t=n.fromSitus(e),t=jc.verify(n,o,i,t.finish(),t.foffset(),a.failure,r);return jc.cata(t,function(){return C.none()},function(){return C.some(e)},function(e){return m.eq(o,e)&&0===i?eu(n,o,i,B.moveUp,a):Zc(n,r,e,0,a,s-1)},function(e){return m.eq(o,e)&&i===kn.getEnd(e)?eu(n,o,i,B.moveDown,a):Zc(n,r,e,kn.getEnd(e),a,s-1)})})},eu=function(t,e,n,r,o){return Ec.getBoxAt(t,e,n).bind(function(e){return wc(t,o,r(e,Wc.getJumpSize()))})},tu=function(t,e,n,r,o){return Ec.getBoxAt(t,n,r).bind(function(e){return wc(t,o,e)})},nu={handle:function(t,n,r){return i=n,a=r,(o=t).getSelection().bind(function(t){return Jc.tryBr(i,t.finish(),t.foffset(),a).fold(function(){return C.some(qc.point(t.finish(),t.foffset()))},function(e){e=o.fromSitus(e),e=jc.verify(o,t.finish(),t.foffset(),e.finish(),e.foffset(),a.failure,i);return Jc.process(e)})}).bind(function(e){return Zc(t,n,e.element(),e.offset(),r,20).map(t.fromSitus)});var o,i,a}},ru=function(e,t,n){return Zt.ancestor(e,t,n).isSome()},ou=Se.detect(),iu=function(e,t){return ru(e,function(e){return u.parent(e).exists(function(e){return m.eq(e,t)})})},au=function(e,t,n,r,o,i){return ou.browser.isIE()?C.none():i(r,t).orThunk(function(){return xc(e,t,n,r,o).map(function(e){e=e.range();return ec.response(C.some(nc.makeSitus(e.start(),e.soffset(),e.finish(),e.foffset())),!0)})})},su=function(e,t,n,r,o,i,a){return xc(e,n,r,o,i).bind(function(e){return kc(t,n,e.start(),e.finish(),a)})},lu=function(e,r){return h.closest(e,"tr",r).bind(function(n){return h.closest(n,"table",r).bind(function(e){var t=c.descendants(e,"tr");return m.eq(n,t[0])?Mc.seekLeft(e,function(e){return Sn.last(e).isSome()},r).map(function(e){var t=kn.getEnd(e);return ec.response(C.some(nc.makeSitus(e,t,e,t)),!0)}):C.none()})})},cu=function(e,r){return h.closest(e,"tr",r).bind(function(n){return h.closest(n,"table",r).bind(function(e){var t=c.descendants(e,"tr");return m.eq(n,t[t.length-1])?Mc.seekRight(e,function(e){return Sn.first(e).isSome()},r).map(function(e){return ec.response(C.some(nc.makeSitus(e,0,e,0)),!0)}):C.none()})})},uu=function(e,t){return h.closest(e,"td,th",t)};var du={down:{traverse:u.nextSibling,gather:Mc.after,relative:P.before,otherRetry:Wc.tryDown,ieRetry:Wc.ieTryDown,failure:jc.adt.failedDown},up:{traverse:u.prevSibling,gather:Mc.before,relative:P.before,otherRetry:Wc.tryUp,ieRetry:Wc.ieTryUp,failure:jc.adt.failedUp}},fu=t.immutable("rows","cols"),mu={mouse:function(e,t,n,r){var o,i,a,s,l,e=ic(e),e=(o=e,i=t,a=n,s=r,l=C.none(),{mousedown:function(e){s.clear(i),l=uu(e.target(),a)},mouseover:function(e){l.each(function(r){s.clear(i),uu(e.target(),a).each(function(n){pr.identify(r,n,a).each(function(e){var t=e.boxes().getOr([]);(1<t.length||1===t.length&&!m.eq(r,n))&&(s.selectRange(i,t,e.start(),e.finish()),o.selectContents(n))})})})},mouseup:function(){l.each(c)}});function c(){l=C.none()}return{mousedown:e.mousedown,mouseover:e.mouseover,mouseup:e.mouseup}},keyboard:function(e,l,c,u){function d(){return u.clear(l),C.none()}var f=ic(e);return{keydown:function(e,t,n,r,o,i){var a=e.raw().which,s=!0===e.raw().shiftKey;return pr.retrieve(l,u.selectedSelector()).fold(function(){return tc.isDown(a)&&s?x.curry(su,f,l,c,du.down,r,t,u.selectRange):tc.isUp(a)&&s?x.curry(su,f,l,c,du.up,r,t,u.selectRange):tc.isDown(a)?x.curry(au,f,c,du.down,r,t,cu):tc.isUp(a)?x.curry(au,f,c,du.up,r,t,lu):C.none},function(t){function e(e){return function(){return Fo(e,function(e){return Sc(e.rows(),e.cols(),l,t,u)}).fold(function(){return pr.getEdges(l,u.firstSelectedSelector(),u.lastSelectedSelector()).map(function(e){var t=tc.isDown(a)||i.isForward(a)?P.after:P.before;return f.setRelativeSelection(P.on(e.first(),0),t(e.table())),u.clear(l),ec.response(C.none(),!0)})},function(e){return C.some(ec.response(C.none(),!0))})}}return tc.isDown(a)&&s?e([fu(1,0)]):tc.isUp(a)&&s?e([fu(-1,0)]):i.isBackward(a)&&s?e([fu(0,-1),fu(-1,0)]):i.isForward(a)&&s?e([fu(0,1),fu(1,0)]):tc.isNavigation(a)&&!1==s?d:C.none})()},keyup:function(t,n,r,o,i){return pr.retrieve(l,u.selectedSelector()).fold(function(){var e=t.raw().which;return!1!=(!0===t.raw().shiftKey)&&tc.isNavigation(e)?Cc(l,c,n,r,o,i,u.selectRange):C.none()},C.none)}}}},pu=function(t,e){k.each(e,function(e){v.remove(t,e)})},hu=function(t){return function(e){v.add(e,t)}},gu=function(t){return function(e){pu(e,t)}},vu={byClass:function(o){function i(e){e=c.descendants(e,o.selectedSelector()),k.each(e,t)}var a=hu(o.selected()),t=gu([o.selected(),o.lastSelected(),o.firstSelected()]);return{clear:i,selectRange:function(e,t,n,r){i(e),k.each(t,a),v.add(n,o.firstSelected()),v.add(r,o.lastSelected())},selectedSelector:o.selectedSelector,firstSelectedSelector:o.firstSelectedSelector,lastSelectedSelector:o.lastSelectedSelector}},byAttr:function(o){function t(e){N.remove(e,o.selected()),N.remove(e,o.firstSelected()),N.remove(e,o.lastSelected())}function i(e){N.set(e,o.selected(),"1")}function a(e){e=c.descendants(e,o.selectedSelector()),k.each(e,t)}return{clear:a,selectRange:function(e,t,n,r){a(e),k.each(t,i),N.set(n,o.firstSelected(),"1"),N.set(r,o.lastSelected(),"1")},selectedSelector:o.selectedSelector,firstSelectedSelector:o.firstSelectedSelector,lastSelectedSelector:o.lastSelectedSelector}}},yu=function(e){return!1===v.has(T.fromDom(e.target),"ephox-snooker-resizer-bar")};function bu(g,v){var y=t.immutableBag(["mousedown","mouseover","mouseup","keyup","keydown"],[]),b=C.none(),w=vu.byAttr(gr);g.on("init",function(e){function t(e){var t,n,r=m(e);r.raw().shiftKey&&tc.isNavigation(r.raw().which)&&(e=g.selection.getRng(),t=T.fromDom(e.startContainer),n=T.fromDom(e.endContainer),d.keyup(r,t,e.startOffset,n,e.endOffset).each(function(e){f(r,e)}))}function n(e){var t=m(e),e=(v().each(function(e){e.hideBars()}),g.selection.getRng()),n=T.fromDom(g.selection.getStart()),r=T.fromDom(e.startContainer),o=T.fromDom(e.endContainer),n=qa.directionAt(n).isRtl()?tc.rtl:tc.ltr;d.keydown(t,r,e.startOffset,o,e.endOffset,n).each(function(e){f(t,e)}),v().each(function(e){e.showBars()})}function i(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")}function r(e){p(e)&&yu(e)&&u.mousedown(m(e))}function o(e){h(e)&&yu(e)&&u.mouseover(m(e))}function a(e){p(e)&&yu(e)&&u.mouseup(m(e))}var s=g.getWin(),l=Ma(g),c=Ha(g),u=mu.mouse(s,l,c,w),d=mu.keyboard(s,l,c,w),f=function(e,t){!0===e.raw().shiftKey&&(t.kill()&&e.kill(),t.selection().each(function(e){e=O.relative(e.start(),e.finish()),e=Dl.asLtrRange(s,e);g.selection.setRng(e)}))},m=function(e){function t(){e.stopPropagation()}function n(){e.preventDefault()}var r=T.fromDom(e.target),o=x.compose(n,t);return{target:x.constant(r),x:x.constant(i(e)?e.x:null),y:x.constant(i(e)?e.y:null),stop:t,prevent:n,kill:o,raw:x.constant(e)}},p=function(e){return 0===e.button},h=function(e){return void 0===e.buttons||0!=(1&e.buttons)};g.on("mousedown",r),g.on("mouseover",o),g.on("mouseup",a),g.on("keyup",t),g.on("keydown",n),g.on("nodechange",function(){var e=g.selection,t=T.fromDom(e.getStart()),e=T.fromDom(e.getEnd());er.sharedOne(R.table,[t,e]).fold(function(){w.clear(l)},x.noop)}),b=C.some(y({mousedown:r,mouseover:o,mouseup:a,keyup:t,keydown:n}))});return{clear:w.clear,destroy:function(){b.each(function(e){})}}}var wu=f.each,xu=function(t){var n=[];function e(e){return function(){t.execCommand(e)}}wu("inserttable tableprops deletetable | cell row column".split(" "),function(e){n.push("|"===e?{text:"-"}:t.menuItems[e])}),t.addButton("table",{type:"menubutton",title:"Table",menu:n}),t.addButton("tableprops",{title:"Table properties",onclick:e("mceTableProps"),icon:"table"}),t.addButton("tabledelete",{title:"Delete table",onclick:e("mceTableDelete")}),t.addButton("tablecellprops",{title:"Cell properties",onclick:e("mceTableCellProps")}),t.addButton("tablemergecells",{title:"Merge cells",onclick:e("mceTableMergeCells")}),t.addButton("tablesplitcells",{title:"Split cell",onclick:e("mceTableSplitCells")}),t.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:e("mceTableInsertRowBefore")}),t.addButton("tableinsertrowafter",{title:"Insert row after",onclick:e("mceTableInsertRowAfter")}),t.addButton("tabledeleterow",{title:"Delete row",onclick:e("mceTableDeleteRow")}),t.addButton("tablerowprops",{title:"Row properties",onclick:e("mceTableRowProps")}),t.addButton("tablecutrow",{title:"Cut row",onclick:e("mceTableCutRow")}),t.addButton("tablecopyrow",{title:"Copy row",onclick:e("mceTableCopyRow")}),t.addButton("tablepasterowbefore",{title:"Paste row before",onclick:e("mceTablePasteRowBefore")}),t.addButton("tablepasterowafter",{title:"Paste row after",onclick:e("mceTablePasteRowAfter")}),t.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:e("mceTableInsertColBefore")}),t.addButton("tableinsertcolafter",{title:"Insert column after",onclick:e("mceTableInsertColAfter")}),t.addButton("tabledeletecol",{title:"Delete column",onclick:e("mceTableDeleteCol")})},Cu=function(t){var e=function(e){e=e.getParam("table_toolbar",Va);return""===e||!1===e?[]:l.isString(e)?e.split(/[ ,]/):l.isArray(e)?e:[]}(t);0<e.length&&t.addContextToolbar(function(e){return t.dom.is(e,"table")&&t.getBody().contains(e)},e.join(" "))},ku=function(r,n){function o(e){e.disabled(!0)}function i(e){e.disabled(!1)}function e(){var t=this;l.push(t),s.fold(function(){o(t)},function(e){i(t)})}function t(){var t=this;c.push(t),s.fold(function(){o(t)},function(e){i(t)})}function a(e,t,n,r){var o,i,a,s,l,c=r.getEl().getElementsByTagName("table")[0],u=r.isRtl()||"tl-tr"===r.parent().rel;for(c.nextSibling.innerHTML=t+1+" x "+(n+1),u&&(t=9-t),i=0;i<10;i++)for(o=0;o<10;o++)s=c.rows[i].childNodes[o].firstChild,e.dom.toggleClass(s,"mce-active",l=(u?t<=o:o<=t)&&i<=n),l&&(a=s);a.parentNode}var s=C.none(),l=[],c=[],u=[],d=[],f=(r.on("init",function(){r.on("nodechange",function(e){var t=C.from(r.dom.getParent(r.selection.getStart(),"th,td"));(s=t.bind(function(e){var t=T.fromDom(e);return R.table(t).map(function(e){return xr.forMenu(n,e,t)})})).fold(function(){k.each(l,o),k.each(c,o),k.each(u,o),k.each(d,o)},function(t){k.each(l,i),k.each(c,i),k.each(u,function(e){e.disabled(t.mergable().isNone())}),k.each(d,function(e){e.disabled(t.unmergable().isNone())})})})}),!1===r.getParam("table_grid",!0,"boolean")?{text:"Table",icon:"table",context:"table",onclick:m("mceInsertTable")}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),r.execCommand("mceInsertTable"))},onshow:function(){a(r,0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");r.dom.removeClass(e,"mce-active"),r.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:function(){for(var e="",e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">',t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return e=e+"</table>"+'<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var t,n=e.target;"A"===n.tagName.toUpperCase()&&(t=parseInt(n.getAttribute("data-mce-x"),10),n=parseInt(n.getAttribute("data-mce-y"),10),(t=!this.isRtl()&&"tl-tr"!==this.parent().rel?t:9-t)===this.lastX&&n===this.lastY||(a(r,t,n,e.control),this.lastX=t,this.lastY=n))},onclick:function(e){var t=this;"A"===e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),t.parent().cancel(),r.undoManager.transact(function(){Cs.insert(r,t.lastX+1,t.lastY+1)}),r.addVisual())}}]});function m(e){return function(){r.execCommand(e)}}var p={text:"Table properties",context:"table",onPostRender:e,onclick:m("mceTableProps")},h={text:"Delete table",context:"table",onPostRender:e,cmd:"mceTableDelete"},g={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:m("mceTableInsertRowBefore"),onPostRender:t},{text:"Insert row after",onclick:m("mceTableInsertRowAfter"),onPostRender:t},{text:"Delete row",onclick:m("mceTableDeleteRow"),onPostRender:t},{text:"Row properties",onclick:m("mceTableRowProps"),onPostRender:t},{text:"-"},{text:"Cut row",onclick:m("mceTableCutRow"),onPostRender:t},{text:"Copy row",onclick:m("mceTableCopyRow"),onPostRender:t},{text:"Paste row before",onclick:m("mceTablePasteRowBefore"),onPostRender:t},{text:"Paste row after",onclick:m("mceTablePasteRowAfter"),onPostRender:t}]},v={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:m("mceTableInsertColBefore"),onPostRender:t},{text:"Insert column after",onclick:m("mceTableInsertColAfter"),onPostRender:t},{text:"Delete column",onclick:m("mceTableDeleteCol"),onPostRender:t}]},y={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:m("mceTableCellProps"),onPostRender:t},{text:"Merge cells",onclick:m("mceTableMergeCells"),onPostRender:function(){var t=this;u.push(t),s.fold(function(){o(t)},function(e){t.disabled(e.mergable().isNone())})}},{text:"Split cell",onclick:m("mceTableSplitCells"),onPostRender:function(){var t=this;d.push(t),s.fold(function(){o(t)},function(e){t.disabled(e.unmergable().isNone())})}}]};r.addMenuItem("inserttable",f),r.addMenuItem("tableprops",p),r.addMenuItem("deletetable",h),r.addMenuItem("row",g),r.addMenuItem("column",v),r.addMenuItem("cell",y)},Su=function(e){return e.get().fold(function(){},function(e){return k.map(e,function(e){return e.dom()})})},Tu=function(e,t){e=k.map(e,T.fromDom);t.set(C.from(e))};F.add("table",function(t){var n,r,o,i=Gs(t),e=bu(t,i.lazyResize),a=Di(t,i.lazyWire),s=(n=t,{get:function(){var e=Ma(n);return hr.retrieve(e,gr.selectedSelector()).fold(function(){return void 0===n.selection.getStart()?vr.none():vr.single(n.selection)},function(e){return vr.multiple(e)})}}),l=wo(C.none());return Ns(t,a,e,s,l),Cr(t,s,a,e),ku(t,s),xu(t),Cu(t),t.on("PreInit",function(){t.serializer.addTempAttr(gr.firstSelected()),t.serializer.addTempAttr(gr.lastSelected())}),t.getParam("table_tab_navigation",!0,"boolean")&&t.on("keydown",function(e){Zl(e,t,a,i.lazyWire)}),t.on("remove",function(){i.destroy(),e.destroy()}),r=t,o=l,{insertTable:function(e,t){return Cs.insert(r,e,t)},setClipboardRows:function(e){return Tu(e,o)},getClipboardRows:function(){return Su(o)}}})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-template",["tinymce"],function(){return function(){!function(){"use strict";function e(e){return function(){return e}}function s(e,t){if((e=""+e).length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e}function a(e,n,t){return u.each(t,function(e,t){"function"==typeof e&&(e=e(t)),n=n.replace(new RegExp("\\{\\$"+t+"\\}","g"),e)}),n}function l(e,t){var r=e.dom,o=f.getTemplateReplaceValues(e);u.each(r.select("*",t),function(n){u.each(o,function(e,t){r.hasClass(n,t)&&"function"==typeof o[t]&&o[t](n)})})}function c(e,t){return new RegExp("\\b"+t+"\\b","g").test(e.className)}function i(t,e,n){-1===n.indexOf("<html>")&&(r="",u.each(t.contentCSS,function(e){r+='<link type="text/css" rel="stylesheet" href="'+t.documentBaseURI.toAbsolute(e)+'">'}),-1!==(o=t.settings.body_class||"").indexOf("=")&&(o=(o=t.getParam("body_class","","hash"))[t.id]||""),n="<!DOCTYPE html><html><head>"+r+'</head><body class="'+o+'">'+n+"</body></html>"),n=p.replaceTemplateValues(t,n,f.getPreviewReplaceValues(t));var r,o=e.find("iframe")[0].getEl().contentWindow.document;o.open(),o.write(n),o.close()}function t(t){return function(e){v.open(t,e)}}var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=(e(!1),e(!0),function(o){for(var e=1;e<arguments.length;e++)e-1,0;for(var i=new Array(arguments.length-1),t=1;t<arguments.length;t++)i[t-1]=arguments[t];return function(){for(var e=0;e<arguments.length;e++)e,0;for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var r=i.concat(t);return o.apply(null,r)}}),u=tinymce.util.Tools.resolve("tinymce.util.Tools"),d=tinymce.util.Tools.resolve("tinymce.util.XHR"),o=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),f={getCreationDateClasses:function(e){return e.getParam("template_cdate_classes","cdate")},getModificationDateClasses:function(e){return e.getParam("template_mdate_classes","mdate")},getSelectedContentClasses:function(e){return e.getParam("template_selected_content_classes","selcontent")},getPreviewReplaceValues:function(e){return e.getParam("template_preview_replace_values")},getTemplateReplaceValues:function(e){return e.getParam("template_replace_values")},getTemplates:function(e){return e.templates},getCdateFormat:function(e){return e.getParam("template_cdate_format",e.getLang("template.cdate_format"))},getMdateFormat:function(e){return e.getParam("template_mdate_format",e.getLang("template.mdate_format"))},getDialogWidth:function(e){return e.getParam("template_popup_width",600)},getDialogHeight:function(e){return Math.min(o.DOM.getViewPort().h,e.getParam("template_popup_height",500))}},m=function(e,t,n){var r="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),o="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),i="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),a="January February March April May June July August September October November December".split(" ");return n=n||new Date,t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+n.getFullYear())).replace("%y",""+n.getYear())).replace("%m",s(n.getMonth()+1,2))).replace("%d",s(n.getDate(),2))).replace("%H",""+s(n.getHours(),2))).replace("%M",""+s(n.getMinutes(),2))).replace("%S",""+s(n.getSeconds(),2))).replace("%I",""+((n.getHours()+11)%12+1))).replace("%p",n.getHours()<12?"AM":"PM")).replace("%B",""+e.translate(a[n.getMonth()]))).replace("%b",""+e.translate(i[n.getMonth()]))).replace("%A",""+e.translate(o[n.getDay()]))).replace("%a",""+e.translate(r[n.getDay()]))).replace("%%","%")},p={createTemplateList:function(t,n){return function(){var e=f.getTemplates(t);"function"==typeof e?e(n):"string"==typeof e?d.send({url:e,success:function(e){n(JSON.parse(e))}}):n(e)}},replaceTemplateValues:a,replaceVals:l,insertTemplate:function(t,e,n){var r,o=t.dom,i=t.selection.getContent();n=a(0,n,f.getTemplateReplaceValues(t)),n=o.create("div",null,n),(r=o.select(".mceTmpl",n))&&0<r.length&&(n=o.create("div",null)).appendChild(r[0].cloneNode(!0)),u.each(o.select("*",n),function(e){c(e,f.getCreationDateClasses(t).replace(/\s+/g,"|"))&&(e.innerHTML=m(t,f.getCdateFormat(t))),c(e,f.getModificationDateClasses(t).replace(/\s+/g,"|"))&&(e.innerHTML=m(t,f.getMdateFormat(t))),c(e,f.getSelectedContentClasses(t).replace(/\s+/g,"|"))&&(e.innerHTML=i)}),l(t,n),t.execCommand("mceInsertContent",!1,n.innerHTML),t.addVisual()}},h=function(e){e.addCommand("mceInsertTemplate",r(p.insertTemplate,e))},g=function(r){r.on("PreProcess",function(e){var t=r.dom,n=f.getMdateFormat(r);u.each(t.select("div",e.node),function(e){t.hasClass(e,"mceTmpl")&&(u.each(t.select("*",e),function(e){t.hasClass(e,r.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(e.innerHTML=m(r,n))}),p.replaceVals(r,e))})})},v={open:function(n,e){var r,o,t=[];e&&0!==e.length?(u.each(e,function(e){t.push({selected:!t.length,text:e.title,value:{url:e.url,content:e.content,description:e.description}})}),(o=n.windowManager.open({title:"Insert template",layout:"flex",direction:"column",align:"stretch",padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"container",label:"Templates",items:{type:"listbox",label:"Templates",name:"template",values:t,onselect:function(e){var t=e.control.value();t.url?d.send({url:t.url,success:function(e){i(n,o,r=e)}}):(r=t.content,i(n,o,r)),o.find("#description")[0].text(e.control.value().description)}}}]},{type:"label",name:"description",label:"Description",text:" "},{type:"iframe",flex:1,border:1}],onsubmit:function(){p.insertTemplate(n,!1,r)},minWidth:f.getDialogWidth(n),minHeight:f.getDialogHeight(n)})).find("listbox")[0].fire("select")):(e=n.translate("No templates defined."),n.notificationManager.open({text:e,type:"info"}))}},y=function(e){e.addButton("template",{title:"Insert template",onclick:p.createTemplateList(e.settings,t(e))}),e.addMenuItem("template",{text:"Template",onclick:p.createTemplateList(e.settings,t(e)),icon:"template",context:"insert"})};n.add("template",function(e){y(e),h(e),g(e)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-textcolor",["tinymce"],function(){return function(){!function(){"use strict";function t(e){return e.getParam("textcolor_map",u)}function n(e){return e.getParam("textcolor_rows",5)}function r(e){return e.getParam("textcolor_cols",8)}function o(e){return e.getParam("color_picker_callback",null)}function i(t){return function(e){e=e.control;e._color?t.execCommand("mceApplyTextcolor",e.settings.format,e._color):t.execCommand("mceRemoveTextcolor",e.settings.format)}}function a(n,s){return function(e){function i(e){n.execCommand("mceApplyTextcolor",a.settings.format,e),a.hidePanel(),a.color(e)}var a=this.parent(),t=m.getCurrentColor(n,a.settings.format);p.DOM.getParent(e.target,".mce-custom-color-btn")&&(a.hidePanel(),d.getColorPickerCallback(n).call(n,function(e){for(var t,n=a.panel.getEl().getElementsByTagName("table")[0],r=c.map(n.rows[n.rows.length-1].childNodes,function(e){return e.firstChild}),o=0;o<r.length&&(t=r[o]).getAttribute("data-mce-color");o++);if(o===s)for(o=0;o<s-1;o++)g(r[o],r[o+1].getAttribute("data-mce-color"));g(t,e),i(e)},t)),(t=e.target.getAttribute("data-mce-color"))?(this.lastId&&p.DOM.get(this.lastId).setAttribute("aria-selected","false"),e.target.setAttribute("aria-selected",!0),this.lastId=e.target.id,"transparent"===t?(n.execCommand("mceRemoveTextcolor",a.settings.format),a.hidePanel(),a.resetColor()):i(t)):null!==t&&a.hidePanel()}}function s(o,i){return function(){var e=i?d.getForeColorCols(o):d.getBackColorCols(o),t=i?d.getForeColorRows(o):d.getBackColorRows(o),n=i?d.getForeColorMap(o):d.getBackColorMap(o),r=d.hasColorPicker(o);return f.getHtml(e,t,n,r)}}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),m={getCurrentColor:function(e,t){var n;return e.dom.getParents(e.selection.getStart(),function(e){(e=e.style["forecolor"===t?"color":"background-color"])&&(n=e)}),n},mapColors:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push({text:e[n+1],color:"#"+e[n]});return t},applyFormat:function(e,t,n){e.undoManager.transact(function(){e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()})},removeFormat:function(e,t){e.undoManager.transact(function(){e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()})}},l=function(n){n.addCommand("mceApplyTextcolor",function(e,t){m.applyFormat(n,e,t)}),n.addCommand("mceRemoveTextcolor",function(e){m.removeFormat(n,e)})},p=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),c=tinymce.util.Tools.resolve("tinymce.util.Tools"),u=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],d={getForeColorMap:function(e){return e.getParam("forecolor_map",t(e))},getBackColorMap:function(e){return e.getParam("backcolor_map",t(e))},getForeColorRows:function(e){return e.getParam("forecolor_rows",n(e))},getBackColorRows:function(e){return e.getParam("backcolor_rows",n(e))},getForeColorCols:function(e){return e.getParam("forecolor_cols",r(e))},getBackColorCols:function(e){return e.getParam("backcolor_cols",r(e))},getColorPickerCallback:o,hasColorPicker:function(e){return"function"==typeof o(e)}},h=tinymce.util.Tools.resolve("tinymce.util.I18n"),f={getHtml:function(e,t,n,r){function o(e,t){var n="transparent"===e;return'<td class="mce-grid-cell'+(n?" mce-colorbtn-trans":"")+'"><div id="'+d+"-"+u+++'" data-mce-color="'+(e||"")+'" role="option" tabIndex="-1" style="'+(e?"background-color: "+e:"")+'" title="'+h.translate(t)+'">'+(n?"&#215;":"")+"</div></td>"}var i,a,s,l,c,u=0,d=p.DOM.uniqueId("mcearia"),f=m.mapColors(n);for(f.push({text:h.translate("No color"),color:"transparent"}),i='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',a=f.length-1,l=0;l<t;l++){for(i+="<tr>",s=0;s<e;s++)i+=a<(c=l*e+s)?"<td></td>":o((c=f[c]).color,c.text);i+="</tr>"}if(r){for(i=i+('<tr><td colspan="'+e+'" class="mce-custom-color-btn"><div id="'+d+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+d+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+h.translate("Custom...")+"</button></div></td></tr>")+"<tr>",s=0;s<e;s++)i+=o("","Custom color");i+="</tr>"}return i+="</tbody></table>"}},g=function(e,t){e.style.background=t,e.setAttribute("data-mce-color",t)},v=function(e){e.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:s(e,!0),onclick:a(e,d.getForeColorCols(e))},onclick:i(e)}),e.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:s(e,!1),onclick:a(e,d.getBackColorCols(e))},onclick:i(e)})};e.add("textcolor",function(e){l(e),v(e)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-textpattern",["tinymce"],function(){return function(){!function(){"use strict";function r(e){function t(){return n}var n=e;return{get:t,set:function(e){n=e},clone:function(){return r(n)}}}function n(e,t,n){var r=e.selection.getRng(!0);if(t=c(t,r,n))return m(e,r.startContainer,t,n)}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=function(t){return{setPatterns:function(e){t.set(e)},getPatterns:function(){return t.get()}}},t=[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"***",end:"***",format:["bold","italic"]},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],i=function(e){return void 0!==e.textpattern_patterns?e.textpattern_patterns:t},a=tinymce.util.Tools.resolve("tinymce.util.Delay"),s=tinymce.util.Tools.resolve("tinymce.util.VK"),u=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),d=tinymce.util.Tools.resolve("tinymce.util.Tools"),f=function(e,t){for(var n=0;n<e.length;n++)if(0===t.indexOf(e[n].start)&&(!e[n].end||t.lastIndexOf(e[n].end)===t.length-e[n].end.length))return e[n]},l=function(e,t,n,r){for(var o,i,a=e.sort(function(e,t){return e.start.length>t.start.length?-1:e.start.length<t.start.length?1:0}),s=0;s<a.length;s++)if(void 0!==(o=a[s]).end&&(i=o,t.substr(n-i.end.length-r,i.end.length)===i.end)&&0<n-r-o.end.length-o.start.length)return o},c=function(e,t,n){if(!1!==t.collapsed){var r=t.startContainer,o=r.data,n=!0===n?1:0;if(3===r.nodeType){var i=l(e,o,t.startOffset,n);if(void 0!==i){t=o.lastIndexOf(i.end,t.startOffset-n),n=o.lastIndexOf(i.start,t-i.end.length),t=o.indexOf(i.end,n+i.start.length);if(-1!==n){o=document.createRange(),e=(o.setStart(r,n),o.setEnd(r,t+i.end.length),f(e,o.toString()));if(!(void 0===i||e!==i||r.data.length<=i.start.length+i.end.length))return{pattern:i,startOffset:n,endOffset:t}}}}}},m=function(o,i,a,e){var s=d.isArray(a.pattern.format)?a.pattern.format:[a.pattern.format];if(0!==d.grep(s,function(e){e=o.formatter.get(e);return e&&e[0].inline}).length)return o.undoManager.transact(function(){var e,t,n,r;e=i,t=a.pattern,n=a.endOffset,r=a.startOffset,(e=0<r?e.splitText(r):e).splitText(n-r+t.end.length),e.deleteData(0,t.start.length),e.deleteData(e.data.length-t.end.length,t.end.length),i=e,s.forEach(function(e){o.formatter.apply(e,{},i)})}),i},p=function(e,t){return n(e,t,!0)},h=function(e,t){return n(e,t,!1)},g=function(e,t){var n,r,o,i,a,s,l=e.selection,c=e.dom;if(l.isCollapsed()&&(c=c.getParent(l.getStart(),"p"))){for(a=new u(c,c);r=a.next();)if(3===r.nodeType){n=r;break}n&&(i=f(t,n.data))&&(t=(c=l.getRng(!0)).startContainer,s=c.startOffset,n===t&&(s=Math.max(0,s-i.start.length)),d.trim(n.data).length!==i.start.length)&&(i.format&&(o=e.formatter.get(i.format))&&o[0].block&&(n.deleteData(0,i.start.length),e.formatter.apply(i.format,{},n),c.setStart(t,s),c.collapse(!0),l.setRng(c)),i.cmd)&&e.undoManager.transact(function(){n.deleteData(0,i.start.length),e.execCommand(i.cmd)})}};function v(e,t,n){for(var r=0;r<e.length;r++)if(n(e[r],t))return!0}var y={handleEnter:function(e,t){var n,r=h(e,t);r&&((n=e.dom.createRng()).setStart(r,r.data.length),n.setEnd(r,r.data.length),e.selection.setRng(n)),g(e,t)},handleInlineKey:function(e,t){var n,r;(t=p(e,t))&&(r=e.dom,n=t.data.slice(-1),/[\u00a0 ]/.test(n))&&(t.deleteData(t.data.length-1,1),n=r.doc.createTextNode(n),r.insertAfter(n,t.parentNode),(t=r.createRng()).setStart(n,1),t.setEnd(n,1),e.selection.setRng(t))},checkCharCode:function(e,t){return v(e,t,function(e,t){return e.charCodeAt(0)===t.charCode})},checkKeyCode:function(e,t){return v(e,t,function(e,t){return e===t.keyCode&&!1===s.modifierPressed(t)})}},b=function(t,n){var r=[",",".",";",":","!","?"],o=[32];t.on("keydown",function(e){13!==e.keyCode||s.modifierPressed(e)||y.handleEnter(t,n.get())},!0),t.on("keyup",function(e){y.checkKeyCode(o,e)&&y.handleInlineKey(t,n.get())}),t.on("keypress",function(e){y.checkCharCode(r,e)&&a.setEditorTimeout(t,function(){y.handleInlineKey(t,n.get())})})};e.add("textpattern",function(e){var t=r(i(e.settings));return b(e,t),o(t)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-visualblocks",["tinymce"],function(){return function(){!function(){"use strict";function r(e){function t(){return n}var n=e;return{get:t,set:function(e){n=e},clone:function(){return r(n)}}}function n(n,r){return function(e){var t=e.control;t.active(r.get()),n.on("VisualBlocks",function(e){t.active(e.state)})}}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=function(e,t){e.fire("VisualBlocks",{state:t})},o=function(e){return e.getParam("visualblocks_default_state",!1)},a=function(e){return e.settings.visualblocks_content_css},s=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),l=tinymce.util.Tools.resolve("tinymce.util.Tools"),c=s.DOM.uniqueId(),u=function(e,t){var n=l.toArray(e.getElementsByTagName("link"));0===l.grep(n,function(e){return e.id===c}).length&&(n=s.DOM.create("link",{id:c,rel:"stylesheet",href:t}),e.getElementsByTagName("head")[0].appendChild(n))},d=function(e,t,n){var r=e.dom,o=a(e);u(e.getDoc(),o||t+"/css/visualblocks.css"),r.toggleClass(e.getBody(),"mce-visualblocks"),n.set(!n.get()),i(e,n.get())},f=function(e,t,n){e.addCommand("mceVisualBlocks",function(){d(e,t,n)})},m=function(t,e,n){t.on("PreviewFormats AfterPreviewFormats",function(e){n.get()&&t.dom.toggleClass(t.getBody(),"mce-visualblocks","afterpreviewformats"===e.type)}),t.on("init",function(){o(t)&&d(t,e,n)}),t.on("remove",function(){t.dom.removeClass(t.getBody(),"mce-visualblocks")})},p=function(e,t){e.addButton("visualblocks",{active:!1,title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:n(e,t)}),e.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:n(e,t),selectable:!0,context:"view",prependToContext:!0})};e.add("visualblocks",function(e,t){var n=r(!1);f(e,t,n),p(e,n),m(e,t,n)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-visualchars",["tinymce"],function(){return function(){!function(){"use strict";function r(e){function t(){return n}var n=e;return{get:t,set:function(e){n=e},clone:function(){return r(n)}}}function e(e,t){var n,r="";for(n in e)r+=n;return new RegExp("["+r+"]",t?"g":"")}function t(e){var t,n="";for(t in e)n&&(n+=","),n+="span.mce-"+e[t];return n}function n(e){return function(){return e}}function o(){return f}var i=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=function(e){return{isEnabled:function(){return e.get()}}},s=function(e,t){return e.fire("VisualChars",{state:t})},l={" ":"nbsp","­":"shy"},c={charMap:l,regExp:e(l),regExpGlobal:e(l,!0),selector:t(l),charMapToRegExp:e,charMapToSelector:t},u={noop:function(){for(var e=0;e<arguments.length;e++)e,0},noarg:function(t){return function(){for(var e=0;e<arguments.length;e++)e,0;return t()}},compose:function(t,n){return function(){for(var e=0;e<arguments.length;e++)e,0;return t(n.apply(null,arguments))}},constant:n,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(o){for(var e=1;e<arguments.length;e++)e-1,0;for(var i=new Array(arguments.length-1),t=1;t<arguments.length;t++)i[t-1]=arguments[t];return function(){for(var e=0;e<arguments.length;e++)e,0;for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var r=i.concat(t);return o.apply(null,r)}},not:function(t){return function(){for(var e=0;e<arguments.length;e++)e,0;return!t.apply(null,arguments)}},die:function(e){return function(){throw new Error(e)}},apply:function(e){return e()},call:function(e){e()},never:n(!1),always:n(!0)},l=u.never,d=u.always,f=(l={fold:function(e,t){return e()},is:l,isSome:l,isNone:d,getOr:h,getOrThunk:p,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:h,orThunk:p,map:o,ap:o,each:function(){},bind:o,flatten:o,exists:l,forall:d,filter:o,equals:m,equals_:m,toArray:function(){return[]},toString:u.constant("none()")},Object.freeze&&Object.freeze(l),l);function m(e){return e.isNone()}function p(e){return e()}function h(e){return e}function g(n){return function(e){return(null===(e=e)?"null":"object"==(t=typeof e)&&Array.prototype.isPrototypeOf(e)?"array":"object"==t&&String.prototype.isPrototypeOf(e)?"string":t)===n;var t}}function v(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o,e)}return r}function y(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n,e)}function b(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:u.constant(e)}}function w(e){return e.dom().nodeName.toLowerCase()}function x(e){return e.dom().nodeType}function C(t){return function(e){return x(e)===t}}function k(e,t){var n=[],e=e.dom(),e=N(e.childNodes,_);return R(e,function(e){n=(n=t(e)?n.concat([e]):n).concat(k(e,t))}),n}function S(n,e){var r,o,e=M(_(e),I);R(e,function(e){var t=F(P.value(e));for(o=n.dom.create("div",null,t);r=o.lastChild;)n.dom.insertAfter(r,e.dom());n.dom.remove(e.dom())})}function T(t,e){e=t.dom.select(c.selector,e),R(e,function(e){t.dom.remove(e,1)})}function E(n){return function(e){var t=e.control;n.on("VisualChars",function(e){t.active(e.state)})}}var d={isString:g("string"),isObject:g("object"),isArray:g("array"),isNull:g("null"),isBoolean:g("boolean"),isUndefined:g("undefined"),isFunction:g("function"),isNumber:g("number")},N=(Array.prototype.indexOf,Array.prototype.push,Array.prototype.slice,d.isFunction(Array.from)&&Array.from,v),R=y,_=b,A=8,l=C(1),d=C(3),D=C(9),P={name:w,type:x,value:function(e){return e.dom().nodeValue},isElement:l,isText:d,isDocument:D,isComment:function(e){return x(e)===A||"#comment"===w(e)}},O=function(e){return'<span data-mce-bogus="1" class="mce-'+c.charMap[e]+'">'+e+"</span>"},I=function(e){return P.isText(e)&&void 0!==P.value(e)&&c.regExp.test(P.value(e))},M=k,L=function(e,t){for(;e.parentNode;){if(e.parentNode===t)return e;e=e.parentNode}},F=function(e){return e.replace(c.regExpGlobal,O)},H=S,z=T,B=function(e){var t=e.getBody(),n=e.selection.getBookmark(),r=L(e.selection.getNode(),t);T(e,r=void 0!==r?r:t),S(e,r),e.selection.moveToBookmark(n)},U=function(e,t){var n,r=e.getBody(),o=e.selection;t.set(!t.get()),s(e,t.get()),n=o.getBookmark(),(!0===t.get()?H:z)(e,r),o.moveToBookmark(n)},W=function(e,t){e.addCommand("mceVisualChars",function(){U(e,t)})},$=tinymce.util.Tools.resolve("tinymce.util.Delay"),j=function(t,n){var r=$.debounce(function(){B(t)},300);!1!==t.settings.forced_root_block&&t.on("keydown",function(e){!0===n.get()&&(13===e.keyCode?B(t):r())})};i.add("visualchars",function(e){var t,n=r(!1);return W(e,n),(t=e).addButton("visualchars",{active:!1,title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:E(t)}),t.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:E(t),selectable:!0,context:"view",prependToContext:!0}),j(e,n),a(n)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-wordcount",["tinymce"],function(){return function(){!function(){"use strict";function e(e,t,n){var r,o;if(!e)return 0;if(n=n||e,void 0!==e.length){for(r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1}function o(e){for(var t,n=v,r=g.length,o=0;o<r;++o)if((t=g[o])&&t.test(e)){n=o;break}return n}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n="[-'\\.‘’․﹒＇．]",r="[:··״‧︓﹕：]",i="[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",a="[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",s="\\r",l="\\n",c="[\v\f\u2028\u2029]",u="[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",d="[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\ufeff￹-￻]",f="[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",m="[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",p="[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]",n={characterIndices:{ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},SETS:[new RegExp("[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),new RegExp(n),new RegExp(r),new RegExp(i),new RegExp(a),new RegExp(s),new RegExp(l),new RegExp(c),new RegExp(u),new RegExp(d),new RegExp(f),new RegExp(m),new RegExp("@")],EMPTY_STRING:"",PUNCTUATION:new RegExp("^"+p+"$"),WHITESPACE:/^\s+$/},h=function(n,r){var o=[];return e(n,function(e,t){o.push(r(e,t,n))}),o},g=n.SETS,v=n.characterIndices.OTHER,y={classify:function(e){function t(e){var t;return r[e]||(t=n(e),r[e]=t)}var n,r;n=o,r={};return h(e.split(""),t)}},b=n.characterIndices,w={isWordBoundary:function(e,t){var n,r=e[t],o=e[t+1];return!(t<0||t>e.length-1&&0!==t)&&(r!==b.ALETTER||o!==b.ALETTER)&&(n=e[t+2],r!==b.ALETTER||o!==b.MIDLETTER&&o!==b.MIDNUMLET&&o!==b.AT||n!==b.ALETTER)&&(e=e[t-1],r!==b.MIDLETTER&&r!==b.MIDNUMLET&&o!==b.AT||o!==b.ALETTER||e!==b.ALETTER)&&(r!==b.NUMERIC&&r!==b.ALETTER||o!==b.NUMERIC&&o!==b.ALETTER)&&(r!==b.MIDNUM&&r!==b.MIDNUMLET||o!==b.NUMERIC||e!==b.NUMERIC)&&(r!==b.NUMERIC||o!==b.MIDNUM&&o!==b.MIDNUMLET||n!==b.NUMERIC)&&r!==b.EXTEND&&r!==b.FORMAT&&e!==b.EXTEND&&e!==b.FORMAT&&o!==b.EXTEND&&o!==b.FORMAT&&!(r===b.CR&&o===b.LF||r!==b.NEWLINE&&r!==b.CR&&r!==b.LF&&o!==b.NEWLINE&&o!==b.CR&&o!==b.LF&&(r===b.KATAKANA&&o===b.KATAKANA||o===b.EXTENDNUMLET&&(r===b.ALETTER||r===b.NUMERIC||r===b.KATAKANA||r===b.EXTENDNUMLET)||r===b.EXTENDNUMLET&&(o===b.ALETTER||o===b.NUMERIC||o===b.KATAKANA)||r===b.AT))}},x=n.EMPTY_STRING,C=n.WHITESPACE,k=n.PUNCTUATION,S=function(e){return"http"===e||"https"===e},T=function(e,t,n){var r=function(e,t){for(var n=t;n<e.length;++n){var r=e.charAt(n);if(C.test(r))break}return n}(t,n+1),t=t.substring(n+1,r);return"://"===t.substr(0,3)?{word:e+t,index:r}:{word:e,index:n}},E=function(e,t){var n,r,o=e.replace(/\ufeff/g,""),e=t,i=0,a=y.classify(o),s=a.length,l=[],c=[];for((e=e||{}).ignoreCase&&(o=o.toLowerCase()),n=e.includePunctuation,r=e.includeWhitespace;i<s;++i){var u=o.charAt(i);l.push(u),w.isWordBoundary(a,i)&&(!(l=l.join(x))||!r&&C.test(l)||!n&&k.test(l)||(S(l)?(u=T(l,o,i),c.push(u.word),i=u.index):c.push(l)),l=[])}return c},N=function(e){return E((e=e).removed?"":e.getBody().innerText).length},R=function(e){return{getCount:function(){return N(e)}}},_=tinymce.util.Tools.resolve("tinymce.util.Delay"),A=tinymce.util.Tools.resolve("tinymce.util.I18n"),D=function(n){function r(e){return A.translate(["{0} words",N(e)])}function o(){n.theme.panel.find("#wordcount").text(r(n))}n.on("init",function(){var e=n.theme.panel&&n.theme.panel.find("#statusbar")[0],t=_.debounce(o,300);e&&_.setEditorTimeout(n,function(){e.insert({type:"label",name:"wordcount",text:r(n),classes:"wordcount",disabled:n.settings.readonly},0),n.on("setcontent beforeaddundo undo redo keyup",t)},0)})};t.add("wordcount",function(e){return D(e),R(e)})}()}.apply(e,arguments)})}(this),function(e){define("tinymce-compat3x",["tinymce"],function(){return function(){function t(){}function u(e){!r&&window&&window.console&&(r=!0,console.log("Deprecated TinyMCE API call: "+e))}function i(i,a,s,l){i=i||this;var c=[];a?(this.add=function(r,o,e){function t(e){var t=[];if((s="string"==typeof s?s.split(" "):s)&&"function"!=typeof s)for(var n=0;n<s.length;n++)t.push(e[s[n]]);"function"==typeof s&&!(t=s(a,e,i))||((t=s?t:[e]).unshift(l||i),!1!==r.apply(o||l||i,t))||e.stopImmediatePropagation()}return u("<target>.on"+a+".add(..)"),i.on(a,t,e),c.push({original:r,patched:t}),t},this.addToTop=function(e,t){this.add(e,t,!0)},this.remove=function(n){return c.forEach(function(e,t){if(e.original===n)return c.splice(t,1),i.off(a,e.patched)}),i.off(a,n)},this.dispatch=function(){return i.fire(a),!0}):this.add=this.addToTop=this.remove=this.dispatch=t}function n(l){function e(e,t){d.each(e.split(" "),function(e){l["on"+e]=new i(l,e,t)})}function n(e,t,n){return[t.level,n]}function r(n){return function(e,t){if(!t.selection&&!n||t.selection==n)return[t]}}var c;function o(){var t={};function n(){return o()}return u("editor.controlManager.*"),d.each("add addMenu addSeparator collapse createMenu destroy displayColor expand focus getLength hasMenus hideMenu isActive isCollapsed isDisabled isRendered isSelected mark postRender remove removeAll renderHTML renderMenu renderNode renderTo select selectByIndex setActive setAriaProperty setColor setDisabled setSelected setState showMenu update".split(" "),function(e){t[e]=n}),t}l.controlManager||(l.controlManager={buttons:{},setDisabled:function(e,t){u("controlManager.setDisabled(..)"),this.buttons[e]&&this.buttons[e].disabled(t)},setActive:function(e,t){u("controlManager.setActive(..)"),this.buttons[e]&&this.buttons[e].active(t)},onAdd:new i,onPostRender:new i,add:function(e){return e},createButton:o,createColorSplitButton:o,createControl:o,createDropMenu:o,createListBox:o,createMenuButton:o,createSeparator:o,createSplitButton:o,createToolbar:o,createToolbarGroup:o,destroy:t,get:t,setControlType:o},e("PreInit BeforeRenderUI PostRender Load Init Remove Activate Deactivate","editor"),e("Click MouseUp MouseDown DblClick KeyDown KeyUp KeyPress ContextMenu Paste Submit Reset"),e("BeforeExecCommand ExecCommand","command ui value args"),e("PreProcess PostProcess LoadContent SaveContent Change"),e("BeforeSetContent BeforeGetContent SetContent GetContent",r(!1)),e("SetProgressState","state time"),e("VisualAid","element hasVisual"),e("Undo Redo",n),e("NodeChange",function(e,t){return[l.controlManager,t.element,l.selection.isCollapsed(),t]}),c=l.addButton,l.addButton=function(e,t){var n,r,o,i,a;function s(){if(l.controlManager.buttons[e]=this,n)return n.apply(this,arguments)}for(r in t)"onpostrender"===r.toLowerCase()&&(n=t[r],t.onPostRender=s);return n||(t.onPostRender=s),t.title&&(t.title=(o=t.title,i=[l.settings.language||"en",o].join("."),a=d.i18n.translate(i),i!==a?a:d.i18n.translate(o))),c.call(this,e,t)},l.on("init",function(){var e=l.undoManager,t=l.selection;e.onUndo=new i(l,"Undo",n,null),e.onRedo=new i(l,"Redo",n,null),e.onBeforeAdd=new i(l,"BeforeAddUndo",null,e),e.onAdd=new i(l,"AddUndo",null,e),t.onBeforeGetContent=new i(l,"BeforeGetContent",r(!0),t),t.onGetContent=new i(l,"GetContent",r(!0),t),t.onBeforeSetContent=new i(l,"BeforeSetContent",r(!0),t),t.onSetContent=new i(l,"SetContent",r(!0),t)}),l.on("BeforeRenderUI",function(){var e=l.windowManager;e.onOpen=new i,e.onClose=new i,e.createInstance=function(e,t,n,r,o,i){return u("windowManager.createInstance(..)"),new(d.resolve(e))(t,n,r,o,i)}}))}var d,r;(d=tinymce).util.Dispatcher=i,d.onBeforeUnload=new i(d,"BeforeUnload"),d.onAddEditor=new i(d,"AddEditor","editor"),d.onRemoveEditor=new i(d,"RemoveEditor","editor"),d.util.Cookie={get:t,getHash:t,remove:t,set:t,setHash:t},d.on("SetupEditor",function(e){n(e.editor)}),d.PluginManager.add("compat3x",n),d.addI18n=function(n,e){var o=d.util.I18n,t=d.each;"string"==typeof n&&-1===n.indexOf(".")?o.add(n,e):d.is(n,"string")?t(e,function(e,t){o.data[n+"."+t]=e}):t(n,function(e,r){t(e,function(e,n){t(e,function(e,t){"common"===n?o.data[r+"."+t]=e:o.data[r+"."+n+"."+t]=e})})})}}.apply(e,arguments)})}(this),define("mockup-patterns-tinymce",["jquery","underscore","pat-base","tinymce","mockup-utils","mockup-patterns-tinymce-url/js/links","mockup-i18n","translate","tinymce-modern-theme","tinymce-advlist","tinymce-anchor","tinymce-autolink","tinymce-autoresize","tinymce-autosave","tinymce-bbcode","tinymce-charmap","tinymce-code","tinymce-colorpicker","tinymce-contextmenu","tinymce-directionality","tinymce-emoticons","tinymce-fullpage","tinymce-fullscreen","tinymce-hr","tinymce-image","tinymce-importcss","tinymce-insertdatetime","tinymce-legacyoutput","tinymce-link","tinymce-lists","tinymce-media","tinymce-nonbreaking","tinymce-noneditable","tinymce-pagebreak","tinymce-paste","tinymce-preview","tinymce-print","tinymce-save","tinymce-searchreplace","tinymce-spellchecker","tinymce-tabfocus","tinymce-table","tinymce-template","tinymce-textcolor","tinymce-textpattern","tinymce-visualblocks","tinymce-visualchars","tinymce-wordcount","tinymce-compat3x"],function(r,e,t,a,n,o,i,s){"use strict";return t.extend({name:"tinymce",trigger:".pat-tinymce",parser:"mockup",defaults:{upload:{uploadMultiple:!1,maxFiles:1,showTitle:!1},relatedItems:{attributes:["UID","Title","portal_type","path","getURL","getIcon","is_folderish","review_state"],batchSize:20,basePath:"/",vocabularyUrl:null,width:500,maximumSelectionSize:1,placeholder:s("Search for item on site...")},text:{insertBtn:s("Insert"),cancelBtn:s("Cancel"),insertHeading:s("Insert link"),title:s("Title"),internal:s("Internal"),external:s("External"),externalText:s("External URL (can be relative within this site or absolute if it starts with http:// or https://)"),email:s("Email Address"),anchor:s("Anchor"),anchorLabel:s("Select an anchor"),target:s("Target"),subject:s("Email Subject (optional)"),image:s("Image"),imageAlign:s("Align"),scale:s("Size"),alt:s("Alternative Text"),insertImageHelp:s('Specify an image. It can be on this site already ("Internal Image") or an image you upload ("Upload").'),internalImage:s("Internal Image"),externalImage:s("External Image"),externalImageText:s("External Image URL (can be relative within this site or absolute if it starts with http:// or https://)"),upload:s("Upload"),insertLinkHelp:s("Specify the object to link to. It can be on this site already (Internal), an object you upload (Upload), from an external site (External), an email address (Email), or an anchor on this page (Anchor)."),captionFromDescription:s("Show Image Caption from Image Description"),caption:s("Image Caption")},loadingBaseUrl:"../../../node_modules/tinymce-builded/js/tinymce/",prependToUrl:"",appendToUrl:"",linkAttribute:"path",prependToScalePart:"/imagescale/",appendToScalePart:"",appendToOriginalScalePart:"",defaultScale:"large",imageScales:[{title:"Mini",value:"mini"},{title:"Thumb",value:"thumb"},{title:"Listing",value:"listing"},{title:"Preview",value:"preview"},{title:"Tile",value:"tile"},{title:"Icon",value:"icon"},{title:"Large",value:"large"}],imageClasses:{"image-inline":s("Inline"),"image-right":s("Right"),"image-left":s("Left"),"image-responsive":s("Responsive")},targetList:[{text:s("Open in this window / frame"),value:""},{text:s("Open in new window"),value:"_blank"},{text:s("Open in parent window / frame"),value:"_parent"},{text:s("Open in top frame (replaces all frames)"),value:"_top"}],imageTypes:["Image"],folderTypes:["Folder","Plone Site"],tiny:{content_css:"/base/node_modules/tinymce-builded/js/tinymce/skins/lightgray/content.min.css",theme:"modern",plugins:["advlist","autolink","lists","charmap","print","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","contextmenu","paste","plonelink","ploneimage"],menubar:"edit table format tools view insert",toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | unlink plonelink ploneimage",height:400},inline:!1},addLinkClicked:function(){var e,t;null===this.linkModal?(e=r("<div/>").insertAfter(this.$el),t=["internal","upload","external","email","anchor"],this.options.upload||t.splice(1,1),this.linkModal=new o(e,r.extend(!0,{},this.options,{tinypattern:this,linkTypes:t}))):this.linkModal.reinitialize(),this.linkModal.show()},addImageClicked:function(){var e,t,n=this;null===n.imageModal?(e=["image","uploadImage","externalImage"],n.options.upload||e.splice(1,1),e=r.extend(!0,{},n.options,{tinypattern:n,linkTypes:e,initialLinkType:"image",text:{insertHeading:s("Insert Image")},relatedItems:{selectableTypes:n.options.imageTypes}}),t=r("<div/>").insertAfter(n.$el),n.imageModal=new o(t,e)):n.imageModal.reinitialize(),n.imageModal.show()},generateUrl:function(e){e=e[this.options.linkAttribute];return this.options.prependToUrl+e+this.options.appendToUrl},generateImageUrl:function(e,t){e=this.generateUrl(e);return t?e=e+this.options.prependToScalePart+t+this.options.appendToScalePart:e+=this.options.appendToOriginalScalePart,e},stripGeneratedUrl:function(e){var t;return e=e.split(this.options.prependToScalePart,2)[0],this.options.prependToUrl&&2===(t=e.split(this.options.prependToUrl,2)).length&&(e=t[1]),e=this.options.appendToUrl?e.split(this.options.appendToUrl)[0]:e},getScaleFromUrl:function(e){var t=e.split(this.options.prependToScalePart);return 2!==t.length?null:-1!==(e=this.options.appendToScalePart?t[1].split(this.options.appendToScalePart)[0]:t[1]).indexOf("/image_")?e.split("/image_")[1]:e},initLanguage:function(e){var t=this,n=(new i).currentLanguage;"en"!==n&&"en"!==t.options.tiny.language?(a.baseURL=t.options.loadingBaseUrl,r.ajax({url:a.baseURL+"/langs/"+n+".js",method:"GET",cache:"true",success:function(){t.options.tiny.language=n,e()},error:function(){n=1<n.split("_")?n.split("_")[0]:1<n.split("-")?n.split("-")[0]:n+"_"+n.toUpperCase(),r.ajax({url:a.baseURL+"/langs/"+n+".js",method:"GET",cache:"true",success:function(){t.options.tiny.language=n,e()},error:function(){e()}})}})):e()},init:function(){var o=this,e=(o.linkModal=o.imageModal=o.uploadModal=o.pasteModal=null,n.setId(o.$el)),i=(o.options.imageScales&&"string"==typeof o.options.imageScales&&(o.options.imageScales=JSON.parse(o.options.imageScales)),o.options.tiny);!0===o.options.inline&&(o.options.tiny.inline=!0),o.tinyId=o.options.inline?e+"-editable":e,i.selector="#"+o.tinyId,i.addLinkClicked=function(){o.addLinkClicked.apply(o,[])},i.addImageClicked=function(e){o.addImageClicked.apply(o,[e])},i.skin=!1,i.init_instance_callback=function(e){void 0!==o.tiny&&null!==o.tiny||(o.tiny=e)},o.initLanguage(function(){var n;if("string"==typeof o.options.folderTypes&&(o.options.folderTypes=o.options.folderTypes.split(",")),"string"==typeof o.options.imageTypes&&(o.options.imageTypes=o.options.imageTypes.split(",")),!0===o.options.inline&&(o.$el.after('<div id="'+o.tinyId+'">'+o.$el.val()+"</div>"),o.$el.hide()),i.importcss_file_filter&&"function"==typeof i.importcss_file_filter.indexOf&&-1!==i.importcss_file_filter.indexOf(",")&&(n=i.importcss_file_filter.split(","),i.importcss_file_filter=function(e){for(var t=0;t<n.length;t++)if(-1!==e.indexOf(n[t]))return!0;return!1}),i.importcss_selector_filter&&i.importcss_selector_filter.length&&(i.importcss_selector_filter=new RegExp(i.importcss_selector_filter)),i.importcss_groups&&i.importcss_groups.length)for(var e=0;e<i.importcss_groups.length;e++)i.importcss_groups[e].filter&&i.importcss_groups[e].filter.length&&(i.importcss_groups[e].filter=new RegExp(i.importcss_groups[e].filter));var t,r=o.$el.parents(".plone-modal-dialog");0<r.length&&(t=Math.random().toString(36).substring(2,15),r.attr("id","tiny-ui-container-"+t),i.ui_container="#tiny-ui-container-"+t),a.init(i),o.tiny=a.get(o.tinyId),o.$el.parents("form").on("submit",function(){!0===o.options.inline?o.$el.val(o.tiny.getContent()):o.tiny.save()})})},destroy:function(){this.tiny&&(!0===this.options.inline&&(this.$el.val(this.tiny.getContent()),r("#"+this.tinyId).remove(),this.$el.show()),this.tiny.destroy(),this.tiny=void 0)}})}),define("mockup-patterns-textareamimetypeselector",["jquery","pat-base","pat-registry","mockup-patterns-tinymce"],function(n,e,t){"use strict";return e.extend({name:"textareamimetypeselector",trigger:".pat-textareamimetypeselector",parser:"mockup",textarea:void 0,currentWidget:void 0,defaults:{textareaName:"",widgets:{"text/html":{pattern:"tinymce",patternOptions:{}}}},init:function(){var t=this,e=t.$el;t.textarea=n('[name="'+t.options.textareaName+'"]'),e.change(function(e){t.initTextarea(e.target.value)}),t.initTextarea(e.val())},initTextarea:function(e){var e=this.options.widgets[e];this.currentWidget&&this.currentWidget.destroy(),e&&(e=new t.patterns[e.pattern](this.textarea,e.patternOptions||{}),this.currentWidget=e)}})}),require(["mockup-patterns-textareamimetypeselector","mockup-patterns-tinymce"],function(){}),define("/Users/alecmitchell/Development/bundles/mountaineers/src/plone.staticresources/src/plone/staticresources/static/plone-tinymce.js",function(){});
//# sourceMappingURL=plone-tinymce-compiled.min.js.map